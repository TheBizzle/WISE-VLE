if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var a=arguments,b=null,e,f,d;for(e=0;e<a.length;e=e+1){d=(""+a[e]).split(".");b=YAHOO;for(f=(d[0]=="YAHOO")?1:0;f<d.length;f=f+1){b[d[f]]=b[d[f]]||{};b=b[d[f]]}}return b};YAHOO.log=function(b,a,d){var e=YAHOO.widget.Logger;if(e&&e.log){return e.log(b,a,d)}else{return false}};YAHOO.register=function(e,k,a){var f=YAHOO.env.modules,d,g,h,j,b;if(!f[e]){f[e]={versions:[],builds:[]}}d=f[e];g=a.version;h=a.build;j=YAHOO.env.listeners;d.name=e;d.version=g;d.build=h;d.versions.push(g);d.builds.push(h);d.mainClass=k;for(b=0;b<j.length;b=b+1){j[b](d)}if(k){k.VERSION=g;k.BUILD=h}else{YAHOO.log("mainClass is undefined for module "+e,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.ua=function(){var b={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:0},d=navigator.userAgent,a;if((/KHTML/).test(d)){b.webkit=1}a=d.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){b.webkit=parseFloat(a[1]);if(/ Mobile\//.test(d)){b.mobile="Apple"}else{a=d.match(/NokiaN[^\/]*/);if(a){b.mobile=a[0]}}a=d.match(/AdobeAIR\/([^\s]*)/);if(a){b.air=a[0]}}if(!b.webkit){a=d.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){b.opera=parseFloat(a[1]);a=d.match(/Opera Mini[^;]*/);if(a){b.mobile=a[0]}}else{a=d.match(/MSIE\s([^;]*)/);if(a&&a[1]){b.ie=parseFloat(a[1])}else{a=d.match(/Gecko\/([^\s]*)/);if(a){b.gecko=1;a=d.match(/rv:([^\s\)]*)/);if(a&&a[1]){b.gecko=parseFloat(a[1])}}}}}a=d.match(/Caja\/([^\s]*)/);if(a&&a[1]){b.caja=parseFloat(a[1])}return b}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var e=YAHOO_config.listener,a=YAHOO.env.listeners,b=true,d;if(e){for(d=0;d<a.length;d=d+1){if(a[d]==e){b=false;break}}if(b){a.push(e)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var g=YAHOO.lang,b="[object Array]",f="[object Function]",a=Object.prototype,d=["toString","valueOf"],e={isArray:function(h){return a.toString.apply(h)===b},isBoolean:function(h){return typeof h==="boolean"},isFunction:function(h){return a.toString.apply(h)===f},isNull:function(h){return h===null},isNumber:function(h){return typeof h==="number"&&isFinite(h)},isObject:function(h){return(h&&(typeof h==="object"||g.isFunction(h)))||false},isString:function(h){return typeof h==="string"},isUndefined:function(h){return typeof h==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(k,l){var m,h,j;for(m=0;m<d.length;m=m+1){h=d[m];j=l[h];if(g.isFunction(j)&&j!=a[h]){k[h]=j}}}:function(){},extend:function(j,h,k){if(!h||!j){throw new Error("extend failed, please check that all dependencies are included.")}var l=function(){},m;l.prototype=h.prototype;j.prototype=new l();j.prototype.constructor=j;j.superclass=h.prototype;if(h.prototype.constructor==a.constructor){h.prototype.constructor=h}if(k){for(m in k){if(g.hasOwnProperty(k,m)){j.prototype[m]=k[m]}}g._IEEnumFix(j.prototype,k)}},augmentObject:function(j,k){if(!k||!j){throw new Error("Absorb failed, verify dependencies.")}var n=arguments,l,h,m=n[2];if(m&&m!==true){for(l=2;l<n.length;l=l+1){j[n[l]]=k[n[l]]}}else{for(h in k){if(m||!(h in j)){j[h]=k[h]}}g._IEEnumFix(j,k)}},augmentProto:function(h,j){if(!j||!h){throw new Error("Augment failed, verify dependencies.")}var l=[h.prototype,j.prototype],k;for(k=2;k<arguments.length;k=k+1){l.push(arguments[k])}g.augmentObject.apply(this,l)},dump:function(r,l){var p,m,j=[],h="{...}",q="f(){...}",k=", ",n=" => ";if(!g.isObject(r)){return r+""}else{if(r instanceof Date||("nodeType" in r&&"tagName" in r)){return r}else{if(g.isFunction(r)){return q}}}l=(g.isNumber(l))?l:3;if(g.isArray(r)){j.push("[");for(p=0,m=r.length;p<m;p=p+1){if(g.isObject(r[p])){j.push((l>0)?g.dump(r[p],l-1):h)}else{j.push(r[p])}j.push(k)}if(j.length>1){j.pop()}j.push("]")}else{j.push("{");for(p in r){if(g.hasOwnProperty(r,p)){j.push(p+n);if(g.isObject(r[p])){j.push((l>0)?g.dump(r[p],l-1):h)}else{j.push(r[p])}j.push(k)}}if(j.length>1){j.pop()}j.push("}")}return j.join("")},substitute:function(h,x,q){var t,u,v,m,l,j,n=[],w,s="dump",p=" ",y="{",k="}",r;for(;;){t=h.lastIndexOf(y);if(t<0){break}u=h.indexOf(k,t);if(t+1>=u){break}w=h.substring(t+1,u);m=w;j=null;v=m.indexOf(p);if(v>-1){j=m.substring(v+1);m=m.substring(0,v)}l=x[m];if(q){l=q(m,l,j)}if(g.isObject(l)){if(g.isArray(l)){l=g.dump(l,parseInt(j,10))}else{j=j||"";r=j.indexOf(s);if(r>-1){j=j.substring(4)}if(l.toString===a.toString||r>-1){l=g.dump(l,parseInt(j,10))}else{l=l.toString()}}}else{if(!g.isString(l)&&!g.isNumber(l)){l="~-"+n.length+"-~";n[n.length]=w}}h=h.substring(0,t)+l+h.substring(u+1)}for(t=n.length-1;t>=0;t=t-1){h=h.replace(new RegExp("~-"+t+"-~"),"{"+n[t]+"}","g")}return h},trim:function(j){try{return j.replace(/^\s+|\s+$/g,"")}catch(h){return j}},merge:function(){var h={},k=arguments,l=k.length,j;for(j=0;j<l;j=j+1){g.augmentObject(h,k[j],true)}return h},later:function(j,q,h,n,m){j=j||0;q=q||{};var p=h,k=n,l,r;if(g.isString(h)){p=q[h]}if(!p){throw new TypeError("method undefined")}if(!g.isArray(k)){k=[n]}l=function(){p.apply(q,k)};r=(m)?setInterval(l,j):setTimeout(l,j);return{interval:m,cancel:function(){if(this.interval){clearInterval(r)}else{clearTimeout(r)}}}},isValue:function(h){return(g.isObject(h)||g.isString(h)||g.isNumber(h)||g.isBoolean(h))}};g.hasOwnProperty=(a.hasOwnProperty)?function(j,h){return j&&j.hasOwnProperty(h)}:function(j,h){return !g.isUndefined(j[h])&&j.constructor.prototype[h]!==j[h]};e.augmentObject(g,e,true);YAHOO.util.Lang=g;g.augment=g.augmentProto;YAHOO.augment=g.augmentProto;YAHOO.extend=g.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.7.0",build:"1799"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var ao=YAHOO.util,ai=YAHOO.lang,aE=YAHOO.env.ua,at=YAHOO.lang.trim,aN={},aJ={},ag=/^t(?:able|d|h)$/i,y=/color$/i,aj=window.document,z=aj.documentElement,aM="ownerDocument",aD="defaultView",av="documentElement",ax="compatMode",aP="offsetLeft",ae="offsetTop",aw="offsetParent",x="parentNode",aF="nodeType",aq="tagName",af="scrollLeft",aI="scrollTop",ad="getBoundingClientRect",au="getComputedStyle",aQ="currentStyle",ah="CSS1Compat",aO="BackCompat",aK="class",an="className",ak="",ar=" ",ay="(?:^|\\s)",aG="(?= |$)",Y="g",aB="position",aL="fixed",G="relative",aH="left",aC="top",az="medium",aA="borderLeftWidth",ac="borderTopWidth",ap=aE.opera,al=aE.webkit,am=aE.gecko,aa=aE.ie;ao.Dom={CUSTOM_ATTRIBUTES:(!z.hasAttribute)?{"for":"htmlFor","class":an}:{htmlFor:"for",className:aK},get:function(g){var f,e,d,a,b;if(g){if(g[aF]||g.item){return g}if(typeof g==="string"){f=g;g=aj.getElementById(g);if(g&&g.id===f){return g}else{if(g&&aj.all){g=null;e=aj.all[f];for(a=0,b=e.length;a<b;++a){if(e[a].id===f){return e[a]}}}}return g}if(g.DOM_EVENTS){g=g.get("element")}if("length" in g){d=[];for(a=0,b=g.length;a<b;++a){d[d.length]=ao.Dom.get(g[a])}return d}return g}return null},getComputedStyle:function(a,b){if(window[au]){return a[aM][aD][au](a,null)[b]}else{if(a[aQ]){return ao.Dom.IE_ComputedStyle.get(a,b)}}},getStyle:function(a,b){return ao.Dom.batch(a,ao.Dom._getStyle,b)},_getStyle:function(){if(window[au]){return function(b,e){e=(e==="float")?e="cssFloat":ao.Dom._toCamel(e);var a=b.style[e],d;if(!a){d=b[aM][aD][au](b,null);if(d){a=d[e]}}return a}}else{if(z[aQ]){return function(b,f){var a;switch(f){case"opacity":a=100;try{a=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{a=b.filters("alpha").opacity}catch(d){}}return a/100;case"float":f="styleFloat";default:f=ao.Dom._toCamel(f);a=b[aQ]?b[aQ][f]:null;return(b.style[f]||a)}}}}}(),setStyle:function(b,d,a){ao.Dom.batch(b,ao.Dom._setStyle,{prop:d,val:a})},_setStyle:function(){if(aa){return function(d,b){var a=ao.Dom._toCamel(b.prop),e=b.val;if(d){switch(a){case"opacity":if(ai.isString(d.style.filter)){d.style.filter="alpha(opacity="+e*100+")";if(!d[aQ]||!d[aQ].hasLayout){d.style.zoom=1}}break;case"float":a="styleFloat";default:d.style[a]=e}}else{}}}else{return function(d,b){var a=ao.Dom._toCamel(b.prop),e=b.val;if(d){if(a=="float"){a="cssFloat"}d.style[a]=e}else{}}}}(),getXY:function(a){return ao.Dom.batch(a,ao.Dom._getXY)},_canPosition:function(a){return(ao.Dom._getStyle(a,"display")!=="none"&&ao.Dom._inDoc(a))},_getXY:function(){if(aj[av][ad]){return function(l){var k,a,j,d,e,f,g,n,m,h=Math.floor,b=false;if(ao.Dom._canPosition(l)){j=l[ad]();d=l[aM];k=ao.Dom.getDocumentScrollLeft(d);a=ao.Dom.getDocumentScrollTop(d);b=[h(j[aH]),h(j[aC])];if(aa&&aE.ie<8){e=2;f=2;g=d[ax];n=ab(d[av],aA);m=ab(d[av],ac);if(aE.ie===6){if(g!==aO){e=0;f=0}}if((g==aO)){if(n!==az){e=parseInt(n,10)}if(m!==az){f=parseInt(m,10)}}b[0]-=e;b[1]-=f}if((a||k)){b[0]+=k;b[1]+=a}b[0]=h(b[0]);b[1]=h(b[1])}else{}return b}}else{return function(j){var a,h,g,e,d,f=false,b=j;if(ao.Dom._canPosition(j)){f=[j[aP],j[ae]];a=ao.Dom.getDocumentScrollLeft(j[aM]);h=ao.Dom.getDocumentScrollTop(j[aM]);d=((am||aE.webkit>519)?true:false);while((b=b[aw])){f[0]+=b[aP];f[1]+=b[ae];if(d){f=ao.Dom._calcBorders(b,f)}}if(ao.Dom._getStyle(j,aB)!==aL){b=j;while((b=b[x])&&b[aq]){g=b[aI];e=b[af];if(am&&(ao.Dom._getStyle(b,"overflow")!=="visible")){f=ao.Dom._calcBorders(b,f)}if(g||e){f[0]-=e;f[1]-=g}}f[0]+=a;f[1]+=h}else{if(ap){f[0]-=a;f[1]-=h}else{if(al||am){f[0]+=a;f[1]+=h}}}f[0]=Math.floor(f[0]);f[1]=Math.floor(f[1])}else{}return f}}}(),getX:function(a){var b=function(d){return ao.Dom.getXY(d)[0]};return ao.Dom.batch(a,b,ao.Dom,true)},getY:function(a){var b=function(d){return ao.Dom.getXY(d)[1]};return ao.Dom.batch(a,b,ao.Dom,true)},setXY:function(b,a,d){ao.Dom.batch(b,ao.Dom._setXY,{pos:a,noRetry:d})},_setXY:function(k,g){var f=ao.Dom._getStyle(k,aB),h=ao.Dom.setStyle,b=g.pos,a=g.noRetry,e=[parseInt(ao.Dom.getComputedStyle(k,aH),10),parseInt(ao.Dom.getComputedStyle(k,aC),10)],d,j;if(f=="static"){f=G;h(k,aB,f)}d=ao.Dom._getXY(k);if(!b||d===false){return false}if(isNaN(e[0])){e[0]=(f==G)?0:k[aP]}if(isNaN(e[1])){e[1]=(f==G)?0:k[ae]}if(b[0]!==null){h(k,aH,b[0]-d[0]+e[0]+"px")}if(b[1]!==null){h(k,aC,b[1]-d[1]+e[1]+"px")}if(!a){j=ao.Dom._getXY(k);if((b[0]!==null&&j[0]!=b[0])||(b[1]!==null&&j[1]!=b[1])){ao.Dom._setXY(k,{pos:b,noRetry:true})}}},setX:function(b,a){ao.Dom.setXY(b,[a,null])},setY:function(a,b){ao.Dom.setXY(a,[null,b])},getRegion:function(a){var b=function(d){var e=false;if(ao.Dom._canPosition(d)){e=ao.Region.getRegion(d)}else{}return e};return ao.Dom.batch(a,b,ao.Dom,true)},getClientWidth:function(){return ao.Dom.getViewportWidth()},getClientHeight:function(){return ao.Dom.getViewportHeight()},getElementsByClassName:function(g,b,f,d,l,e){g=ai.trim(g);b=b||"*";f=(f)?ao.Dom.get(f):null||aj;if(!f){return[]}var a=[],m=f.getElementsByTagName(b),j=ao.Dom.hasClass;for(var k=0,h=m.length;k<h;++k){if(j(m[k],g)){a[a.length]=m[k]}}if(d){ao.Dom.batch(a,d,l,e)}return a},hasClass:function(b,a){return ao.Dom.batch(b,ao.Dom._hasClass,a)},_hasClass:function(a,d){var b=false,e;if(a&&d){e=ao.Dom.getAttribute(a,an)||ak;if(d.exec){b=d.test(e)}else{b=d&&(ar+e+ar).indexOf(ar+d+ar)>-1}}else{}return b},addClass:function(b,a){return ao.Dom.batch(b,ao.Dom._addClass,a)},_addClass:function(a,d){var b=false,e;if(a&&d){e=ao.Dom.getAttribute(a,an)||ak;if(!ao.Dom._hasClass(a,d)){ao.Dom.setAttribute(a,an,at(e+ar+d));b=true}}else{}return b},removeClass:function(b,a){return ao.Dom.batch(b,ao.Dom._removeClass,a)},_removeClass:function(g,a){var f=false,e,d,b;if(g&&a){e=ao.Dom.getAttribute(g,an)||ak;ao.Dom.setAttribute(g,an,e.replace(ao.Dom._getClassRegex(a),ak));d=ao.Dom.getAttribute(g,an);if(e!==d){ao.Dom.setAttribute(g,an,at(d));f=true;if(ao.Dom.getAttribute(g,an)===""){b=(g.hasAttribute&&g.hasAttribute(aK))?aK:an;g.removeAttribute(b)}}}else{}return f},replaceClass:function(a,d,b){return ao.Dom.batch(a,ao.Dom._replaceClass,{from:d,to:b})},_replaceClass:function(h,a){var g,d,f,b=false,e;if(h&&a){d=a.from;f=a.to;if(!f){b=false}else{if(!d){b=ao.Dom._addClass(h,a.to)}else{if(d!==f){e=ao.Dom.getAttribute(h,an)||ak;g=(ar+e.replace(ao.Dom._getClassRegex(d),ar+f)).split(ao.Dom._getClassRegex(f));g.splice(1,0,ar+f);ao.Dom.setAttribute(h,an,at(g.join(ak)));b=true}}}}else{}return b},generateId:function(b,a){a=a||"yui-gen";var d=function(f){if(f&&f.id){return f.id}var e=a+YAHOO.env._id_counter++;if(f){if(f[aM].getElementById(e)){return ao.Dom.generateId(f,e+a)}f.id=e}return e};return ao.Dom.batch(b,d,ao.Dom,true)||d.apply(ao.Dom,arguments)},isAncestor:function(d,a){d=ao.Dom.get(d);a=ao.Dom.get(a);var b=false;if((d&&a)&&(d[aF]&&a[aF])){if(d.contains&&d!==a){b=d.contains(a)}else{if(d.compareDocumentPosition){b=!!(d.compareDocumentPosition(a)&16)}}}else{}return b},inDocument:function(a,b){return ao.Dom._inDoc(ao.Dom.get(a),b)},_inDoc:function(d,a){var b=false;if(d&&d[aq]){a=a||d[aM];b=ao.Dom.isAncestor(a[av],d)}else{}return b},getElementsBy:function(a,b,g,e,k,f,d){b=b||"*";g=(g)?ao.Dom.get(g):null||aj;if(!g){return[]}var l=[],m=g.getElementsByTagName(b);for(var j=0,h=m.length;j<h;++j){if(a(m[j])){if(d){l=m[j];break}else{l[l.length]=m[j]}}}if(e){ao.Dom.batch(l,e,k,f)}return l},getElementBy:function(a,b,d){return ao.Dom.getElementsBy(a,b,d,null,null,null,true)},batch:function(a,d,g,f){var h=[],e=(f)?g:window;a=(a&&(a[aq]||a.item))?a:ao.Dom.get(a);if(a&&d){if(a[aq]||a.length===undefined){return d.call(e,a,g)}for(var b=0;b<a.length;++b){h[h.length]=d.call(e,a[b],g)}}else{return false}return h},getDocumentHeight:function(){var b=(aj[ax]!=ah||al)?aj.body.scrollHeight:z.scrollHeight,a=Math.max(b,ao.Dom.getViewportHeight());return a},getDocumentWidth:function(){var b=(aj[ax]!=ah||al)?aj.body.scrollWidth:z.scrollWidth,a=Math.max(b,ao.Dom.getViewportWidth());return a},getViewportHeight:function(){var a=self.innerHeight,b=aj[ax];if((b||aa)&&!ap){a=(b==ah)?z.clientHeight:aj.body.clientHeight}return a},getViewportWidth:function(){var a=self.innerWidth,b=aj[ax];if(b||aa){a=(b==ah)?z.clientWidth:aj.body.clientWidth}return a},getAncestorBy:function(a,b){while((a=a[x])){if(ao.Dom._testElement(a,b)){return a}}return null},getAncestorByClassName:function(d,b){d=ao.Dom.get(d);if(!d){return null}var a=function(e){return ao.Dom.hasClass(e,b)};return ao.Dom.getAncestorBy(d,a)},getAncestorByTagName:function(d,b){d=ao.Dom.get(d);if(!d){return null}var a=function(e){return e[aq]&&e[aq].toUpperCase()==b.toUpperCase()};return ao.Dom.getAncestorBy(d,a)},getPreviousSiblingBy:function(a,b){while(a){a=a.previousSibling;if(ao.Dom._testElement(a,b)){return a}}return null},getPreviousSibling:function(a){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getPreviousSiblingBy(a)},getNextSiblingBy:function(a,b){while(a){a=a.nextSibling;if(ao.Dom._testElement(a,b)){return a}}return null},getNextSibling:function(a){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getNextSiblingBy(a)},getFirstChildBy:function(b,a){var d=(ao.Dom._testElement(b.firstChild,a))?b.firstChild:null;return d||ao.Dom.getNextSiblingBy(b.firstChild,a)},getFirstChild:function(a,b){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getFirstChildBy(a)},getLastChildBy:function(b,a){if(!b){return null}var d=(ao.Dom._testElement(b.lastChild,a))?b.lastChild:null;return d||ao.Dom.getPreviousSiblingBy(b.lastChild,a)},getLastChild:function(a){a=ao.Dom.get(a);return ao.Dom.getLastChildBy(a)},getChildrenBy:function(d,e){var a=ao.Dom.getFirstChildBy(d,e),b=a?[a]:[];ao.Dom.getNextSiblingBy(a,function(f){if(!e||e(f)){b[b.length]=f}return false});return b},getChildren:function(a){a=ao.Dom.get(a);if(!a){}return ao.Dom.getChildrenBy(a)},getDocumentScrollLeft:function(a){a=a||aj;return Math.max(a[av].scrollLeft,a.body.scrollLeft)},getDocumentScrollTop:function(a){a=a||aj;return Math.max(a[av].scrollTop,a.body.scrollTop)},insertBefore:function(b,a){b=ao.Dom.get(b);a=ao.Dom.get(a);if(!b||!a||!a[x]){return null}return a[x].insertBefore(b,a)},insertAfter:function(b,a){b=ao.Dom.get(b);a=ao.Dom.get(a);if(!b||!a||!a[x]){return null}if(a.nextSibling){return a[x].insertBefore(b,a.nextSibling)}else{return a[x].appendChild(b)}},getClientRegion:function(){var a=ao.Dom.getDocumentScrollTop(),d=ao.Dom.getDocumentScrollLeft(),e=ao.Dom.getViewportWidth()+d,b=ao.Dom.getViewportHeight()+a;return new ao.Region(a,e,b,d)},setAttribute:function(d,b,a){b=ao.Dom.CUSTOM_ATTRIBUTES[b]||b;d.setAttribute(b,a)},getAttribute:function(b,a){a=ao.Dom.CUSTOM_ATTRIBUTES[a]||a;return b.getAttribute(a)},_toCamel:function(d){var a=aN;function b(f,e){return e.toUpperCase()}return a[d]||(a[d]=d.indexOf("-")===-1?d:d.replace(/-([a-z])/gi,b))},_getClassRegex:function(b){var a;if(b!==undefined){if(b.exec){a=b}else{a=aJ[b];if(!a){b=b.replace(ao.Dom._patterns.CLASS_RE_TOKENS,"\\$1");a=aJ[b]=new RegExp(ay+b+aG,Y)}}}return a},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}])/g},_testElement:function(a,b){return a&&a[aF]==1&&(!b||b(a))},_calcBorders:function(a,e){var d=parseInt(ao.Dom[au](a,ac),10)||0,b=parseInt(ao.Dom[au](a,aA),10)||0;if(am){if(ag.test(a[aq])){d=0;b=0}}e[0]+=b;e[1]+=d;return e}};var ab=ao.Dom[au];if(aE.opera){ao.Dom[au]=function(d,b){var a=ab(d,b);if(y.test(b)){a=ao.Dom.Color.toRGB(a)}return a}}if(aE.webkit){ao.Dom[au]=function(d,b){var a=ab(d,b);if(a==="rgba(0, 0, 0, 0)"){a="transparent"}return a}}})();YAHOO.util.Region=function(d,b,a,e){this.top=d;this.y=d;this[1]=d;this.right=b;this.bottom=a;this.left=e;this.x=e;this[0]=e;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return(a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom)};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left))};YAHOO.util.Region.prototype.intersect=function(b){var e=Math.max(this.top,b.top),d=Math.min(this.right,b.right),a=Math.min(this.bottom,b.bottom),f=Math.max(this.left,b.left);if(a>=e&&d>=f){return new YAHOO.util.Region(e,d,a,f)}else{return null}};YAHOO.util.Region.prototype.union=function(b){var e=Math.min(this.top,b.top),d=Math.max(this.right,b.right),a=Math.max(this.bottom,b.bottom),f=Math.min(this.left,b.left);return new YAHOO.util.Region(e,d,a,f)};YAHOO.util.Region.prototype.toString=function(){return("Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}")};YAHOO.util.Region.getRegion=function(e){var b=YAHOO.util.Dom.getXY(e),f=b[1],d=b[0]+e.offsetWidth,a=b[1]+e.offsetHeight,g=b[0];return new YAHOO.util.Region(f,d,a,g)};YAHOO.util.Point=function(a,b){if(YAHOO.lang.isArray(a)){b=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,b,a,b,a)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var y=YAHOO.util,z="clientTop",u="clientLeft",q="parentNode",p="right",a="hasLayout",r="px",d="opacity",n="auto",w="borderLeftWidth",t="borderTopWidth",j="borderRightWidth",b="borderBottomWidth",f="visible",h="transparent",l="height",v="width",s="style",e="currentStyle",g=/^width|height$/,k=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,m={get:function(D,B){var C="",A=D[e][B];if(B===d){C=y.Dom.getStyle(D,d)}else{if(!A||(A.indexOf&&A.indexOf(r)>-1)){C=A}else{if(y.Dom.IE_COMPUTED[B]){C=y.Dom.IE_COMPUTED[B](D,B)}else{if(k.test(A)){C=y.Dom.IE.ComputedStyle.getPixel(D,B)}else{C=A}}}}return C},getOffset:function(D,C){var A=D[e][C],H=C.charAt(0).toUpperCase()+C.substr(1),G="offset"+H,F="pixel"+H,B="",E;if(A==n){E=D[G];if(E===undefined){B=0}B=E;if(g.test(C)){D[s][C]=E;if(D[G]>E){B=E-(D[G]-E)}D[s][C]=n}}else{if(!D[s][F]&&!D[s][C]){D[s][C]=A}B=D[s][F]}return B+r},getBorderWidth:function(C,A){var B=null;if(!C[e][a]){C[s].zoom=1}switch(A){case t:B=C[z];break;case b:B=C.offsetHeight-C.clientHeight-C[z];break;case w:B=C[u];break;case j:B=C.offsetWidth-C.clientWidth-C[u];break}return B+r},getPixel:function(D,E){var B=null,A=D[e][p],C=D[e][E];D[s][p]=C;B=D[s].pixelRight;D[s][p]=A;return B+r},getMargin:function(B,C){var A;if(B[e][C]==n){A=0+r}else{A=y.Dom.IE.ComputedStyle.getPixel(B,C)}return A},getVisibility:function(B,C){var A;while((A=B[e])&&A[C]=="inherit"){B=B[q]}return(A)?A[C]:f},getColor:function(A,B){return y.Dom.Color.toRGB(A[e][B])||h},getBorderColor:function(C,D){var B=C[e],A=B[D]||B.color;return y.Dom.Color.toRGB(y.Dom.Color.toHex(A))}},x={};x.top=x.right=x.bottom=x.left=x[v]=x[l]=m.getOffset;x.color=m.getColor;x[t]=x[j]=x[b]=x[w]=m.getBorderWidth;x.marginTop=x.marginRight=x.marginBottom=x.marginLeft=m.getMargin;x.visibility=m.getVisibility;x.borderColor=x.borderTopColor=x.borderRightColor=x.borderBottomColor=x.borderLeftColor=m.getBorderColor;y.Dom.IE_COMPUTED=x;y.Dom.IE_ComputedStyle=m})();(function(){var d="toString",a=parseInt,e=RegExp,b=YAHOO.util;b.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(f){if(!b.Dom.Color.re_RGB.test(f)){f=b.Dom.Color.toHex(f)}if(b.Dom.Color.re_hex.exec(f)){f="rgb("+[a(e.$1,16),a(e.$2,16),a(e.$3,16)].join(", ")+")"}return f},toHex:function(f){f=b.Dom.Color.KEYWORDS[f]||f;if(b.Dom.Color.re_RGB.exec(f)){var g=(e.$1.length===1)?"0"+e.$1:Number(e.$1),h=(e.$2.length===1)?"0"+e.$2:Number(e.$2),j=(e.$3.length===1)?"0"+e.$3:Number(e.$3);f=[g[d](16),h[d](16),j[d](16)].join("")}if(f.length<6){f=f.replace(b.Dom.Color.re_hex3,"$1$1")}if(f!=="transparent"&&f.indexOf("#")<0){f="#"+f}return f.toLowerCase()}}}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.7.0",build:"1799"});YAHOO.util.CustomEvent=function(d,e,f,a){this.type=d;this.scope=e||window;this.silent=f;this.signature=a||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var b="_YUICEOnSubscribe";if(d!==b){this.subscribeEvent=new YAHOO.util.CustomEvent(b,this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(a,d,b){if(!a){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(a,d,b)}this.subscribers.push(new YAHOO.util.Subscriber(a,d,b))},unsubscribe:function(e,b){if(!e){return this.unsubscribeAll()}var d=false;for(var g=0,a=this.subscribers.length;g<a;++g){var f=this.subscribers[g];if(f&&f.contains(e,b)){this._delete(g);d=true}}return d},fire:function(){this.lastError=null;var h=[],p=this.subscribers.length;if(!p&&this.silent){return true}var k=[].slice.call(arguments,0),m=true,a,j=false;if(!this.silent){}var b=this.subscribers.slice(),e=YAHOO.util.Event.throwErrors;for(a=0;a<p;++a){var f=b[a];if(!f){j=true}else{if(!this.silent){}var g=f.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var d=null;if(k.length>0){d=k[0]}try{m=f.fn.call(g,d,f.obj)}catch(n){this.lastError=n;if(e){throw n}}}else{try{m=f.fn.call(g,this.type,k,f.obj)}catch(l){this.lastError=l;if(e){throw l}}}if(false===m){if(!this.silent){}break}}}return(m!==false)},unsubscribeAll:function(){var a=this.subscribers.length,b;for(b=a-1;b>-1;b--){this._delete(b)}this.subscribers=[];return a},_delete:function(a){var b=this.subscribers[a];if(b){delete b.fn;delete b.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(a,d,b){this.fn=a;this.obj=YAHOO.lang.isUndefined(d)?null:d;this.overrideContext=b};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext){if(this.overrideContext===true){return this.obj}else{return this.overrideContext}}return a};YAHOO.util.Subscriber.prototype.contains=function(a,b){if(b){return(this.fn==a&&this.obj==b)}else{return(this.fn==a)}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var k=false;var j=[];var h=[];var l=[];var n=[];var b=0;var m=[];var d=[];var e=0;var a={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};var g=YAHOO.env.ua.ie?"focusin":"focus";var f=YAHOO.env.ua.ie?"focusout":"blur";return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var q=this;var p=function(){q._tryPreloadAttach()};this._interval=setInterval(p,this.POLL_INTERVAL)}},onAvailable:function(p,t,r,q,s){var v=(YAHOO.lang.isString(p))?[p]:p;for(var u=0;u<v.length;u=u+1){m.push({id:v[u],fn:t,obj:r,overrideContext:q,checkReady:s})}b=this.POLL_RETRYS;this.startInterval()},onContentReady:function(p,s,r,q){this.onAvailable(p,s,r,q,true)},onDOMReady:function(r,q,p){if(this.DOMReady){setTimeout(function(){var s=window;if(p){if(p===true){s=q}else{s=p}}r.call(s,"DOMReady",[],q)},0)}else{this.DOMReadyEvent.subscribe(r,q,p)}},_addListener:function(A,C,q,w,s,D){if(!q||!q.call){return false}if(this._isValidCollection(A)){var p=true;for(var v=0,t=A.length;v<t;++v){p=this.on(A[v],C,q,w,s)&&p}return p}else{if(YAHOO.lang.isString(A)){var x=this.getEl(A);if(x){A=x}else{this.onAvailable(A,function(){YAHOO.util.Event.on(A,C,q,w,s)});return true}}}if(!A){return false}if("unload"==C&&w!==this){h[h.length]=[A,C,q,w,s];return true}var B=A;if(s){if(s===true){B=w}else{B=s}}var z=function(F){return q.call(B,YAHOO.util.Event.getEvent(F,A),w)};var E=[A,C,q,z,B,w,s];var u=j.length;j[u]=E;if(this.useLegacyEvent(A,C)){var y=this.getLegacyIndex(A,C);if(y==-1||A!=l[y][0]){y=l.length;d[A.id+C]=y;l[y]=[A,C,A["on"+C]];n[y]=[];A["on"+C]=function(F){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(F),y)}}n[y].push(E)}else{try{this._simpleAdd(A,C,z,D)}catch(r){this.lastError=r;this.removeListener(A,C,q);return false}}return true},addListener:function(s,p,t,r,q){return this._addListener(s,p,t,r,q,false)},addFocusListener:function(r,s,q,p){return this._addListener(r,g,s,q,p,true)},removeFocusListener:function(p,q){return this.removeListener(p,g,q)},addBlurListener:function(r,s,q,p){return this._addListener(r,f,s,q,p,true)},removeBlurListener:function(p,q){return this.removeListener(p,f,q)},fireLegacyEvent:function(t,v){var r=true,y,p,q,x,s;p=n[v].slice();for(var w=0,u=p.length;w<u;++w){q=p[w];if(q&&q[this.WFN]){x=q[this.ADJ_SCOPE];s=q[this.WFN].call(x,t);r=(r&&s)}}y=l[v];if(y&&y[2]){y[2](t)}return r},getLegacyIndex:function(q,p){var r=this.generateId(q)+p;if(typeof d[r]=="undefined"){return -1}else{return d[r]}},useLegacyEvent:function(q,p){return(this.webkit&&this.webkit<419&&("click"==p||"dblclick"==p))},removeListener:function(z,A,r){var w,t,p;if(typeof z=="string"){z=this.getEl(z)}else{if(this._isValidCollection(z)){var q=true;for(w=z.length-1;w>-1;w--){q=(this.removeListener(z[w],A,r)&&q)}return q}}if(!r||!r.call){return this.purgeElement(z,false,A)}if("unload"==A){for(w=h.length-1;w>-1;w--){p=h[w];if(p&&p[0]==z&&p[1]==A&&p[2]==r){h.splice(w,1);return true}}return false}var v=null;var u=arguments[3];if("undefined"===typeof u){u=this._getCacheIndex(z,A,r)}if(u>=0){v=j[u]}if(!z||!v){return false}if(this.useLegacyEvent(z,A)){var x=this.getLegacyIndex(z,A);var y=n[x];if(y){for(w=0,t=y.length;w<t;++w){p=y[w];if(p&&p[this.EL]==z&&p[this.TYPE]==A&&p[this.FN]==r){y.splice(w,1);break}}}}else{try{this._simpleRemove(z,A,v[this.WFN],false)}catch(s){this.lastError=s;return false}}delete j[u][this.WFN];delete j[u][this.FN];j.splice(u,1);return true},getTarget:function(p,q){var r=p.target||p.srcElement;return this.resolveTextNode(r)},resolveTextNode:function(p){try{if(p&&3==p.nodeType){return p.parentNode}}catch(q){}return p},getPageX:function(p){var q=p.pageX;if(!q&&0!==q){q=p.clientX||0;if(this.isIE){q+=this._getScrollLeft()}}return q},getPageY:function(q){var p=q.pageY;if(!p&&0!==p){p=q.clientY||0;if(this.isIE){p+=this._getScrollTop()}}return p},getXY:function(p){return[this.getPageX(p),this.getPageY(p)]},getRelatedTarget:function(p){var q=p.relatedTarget;if(!q){if(p.type=="mouseout"){q=p.toElement}else{if(p.type=="mouseover"){q=p.fromElement}}}return this.resolveTextNode(q)},getTime:function(p){if(!p.time){var q=new Date().getTime();try{p.time=q}catch(r){this.lastError=r;return q}}return p.time},stopEvent:function(p){this.stopPropagation(p);this.preventDefault(p)},stopPropagation:function(p){if(p.stopPropagation){p.stopPropagation()}else{p.cancelBubble=true}},preventDefault:function(p){if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}},getEvent:function(q,s){var r=q||window.event;if(!r){var p=this.getEvent.caller;while(p){r=p.arguments[0];if(r&&Event==r.constructor){break}p=p.caller}}return r},getCharCode:function(p){var q=p.keyCode||p.charCode||0;if(YAHOO.env.ua.webkit&&(q in a)){q=a[q]}return q},_getCacheIndex:function(q,p,r){for(var s=0,t=j.length;s<t;s=s+1){var u=j[s];if(u&&u[this.FN]==r&&u[this.EL]==q&&u[this.TYPE]==p){return s}}return -1},generateId:function(q){var p=q.id;if(!p){p="yuievtautoid-"+e;++e;q.id=p}return p},_isValidCollection:function(p){try{return(p&&typeof p!=="string"&&p.length&&!p.tagName&&!p.alert&&typeof p[0]!=="undefined")}catch(q){return false}},elCache:{},getEl:function(p){return(typeof p==="string")?document.getElementById(p):p},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(p){if(!k){k=true;var q=YAHOO.util.Event;q._ready();q._tryPreloadAttach()}},_ready:function(p){var q=YAHOO.util.Event;if(!q.DOMReady){q.DOMReady=true;q.DOMReadyEvent.fire();q._simpleRemove(document,"DOMContentLoaded",q._ready)}},_tryPreloadAttach:function(){if(m.length===0){b=0;if(this._interval){clearInterval(this._interval);this._interval=null}return}if(this.locked){return}if(this.isIE){if(!this.DOMReady){this.startInterval();return}}this.locked=true;var q=!k;if(!q){q=(b>0&&m.length>0)}var r=[];var p=function(y,x){var z=y;if(x.overrideContext){if(x.overrideContext===true){z=x.obj}else{z=x.overrideContext}}x.fn.call(z,x.obj)};var v,w,s,t,u=[];for(v=0,w=m.length;v<w;v=v+1){s=m[v];if(s){t=this.getEl(s.id);if(t){if(s.checkReady){if(k||t.nextSibling||!q){u.push(s);m[v]=null}}else{p(t,s);m[v]=null}}else{r.push(s)}}}for(v=0,w=u.length;v<w;v=v+1){s=u[v];p(this.getEl(s.id),s)}b--;if(q){for(v=m.length-1;v>-1;v--){s=m[v];if(!s||!s.id){m.splice(v,1)}}this.startInterval()}else{if(this._interval){clearInterval(this._interval);this._interval=null}}this.locked=false},purgeElement:function(s,r,p){var u=(YAHOO.lang.isString(s))?this.getEl(s):s;var q=this.getListeners(u,p),t,w;if(q){for(t=q.length-1;t>-1;t--){var v=q[t];this.removeListener(u,v.type,v.fn)}}if(r&&u&&u.childNodes){for(t=0,w=u.childNodes.length;t<w;++t){this.purgeElement(u.childNodes[t],r,p)}}},getListeners:function(w,y){var t=[],x;if(!y){x=[j,h]}else{if(y==="unload"){x=[h]}else{x=[j]}}var r=(YAHOO.lang.isString(w))?this.getEl(w):w;for(var u=0;u<x.length;u=u+1){var p=x[u];if(p){for(var s=0,q=p.length;s<q;++s){var v=p[s];if(v&&v[this.EL]===r&&(!y||y===v[this.TYPE])){t.push({type:v[this.TYPE],fn:v[this.FN],obj:v[this.OBJ],adjust:v[this.OVERRIDE],scope:v[this.ADJ_SCOPE],index:s})}}}}return(t.length)?t:null},_unload:function(q){var w=YAHOO.util.Event,t,u,v,r,s,p=h.slice(),x;for(t=0,r=h.length;t<r;++t){v=p[t];if(v){x=window;if(v[w.ADJ_SCOPE]){if(v[w.ADJ_SCOPE]===true){x=v[w.UNLOAD_OBJ]}else{x=v[w.ADJ_SCOPE]}}v[w.FN].call(x,w.getEvent(q,v[w.EL]),v[w.UNLOAD_OBJ]);p[t]=null}}v=null;x=null;h=null;if(j){for(u=j.length-1;u>-1;u--){v=j[u];if(v){w.removeListener(v[w.EL],v[w.TYPE],v[w.FN],u)}}v=null}l=null;w._simpleRemove(window,"unload",w._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var q=document.documentElement,p=document.body;if(q&&(q.scrollTop||q.scrollLeft)){return[q.scrollTop,q.scrollLeft]}else{if(p){return[p.scrollTop,p.scrollLeft]}else{return[0,0]}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(q,p,r,s){q.addEventListener(p,r,(s))}}else{if(window.attachEvent){return function(q,p,r,s){q.attachEvent("on"+p,r)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(q,p,r,s){q.removeEventListener(p,r,(s))}}else{if(window.detachEvent){return function(q,p,r){q.detachEvent("on"+p,r)}}else{return function(){}}}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var b=document.createElement("p");a._dri=setInterval(function(){try{b.doScroll("left");clearInterval(a._dri);a._dri=null;a._ready();b=null}catch(d){}},a.POLL_INTERVAL)}else{if(a.webkit&&a.webkit<525){a._dri=setInterval(function(){var d=document.readyState;if("loaded"==d||"complete"==d){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL)}else{a._simpleAdd(document,"DOMContentLoaded",a._ready)}}a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,f,b,d){this.__yui_events=this.__yui_events||{};var e=this.__yui_events[a];if(e){e.subscribe(f,b,d)}else{this.__yui_subscribers=this.__yui_subscribers||{};var g=this.__yui_subscribers;if(!g[a]){g[a]=[]}g[a].push({fn:f,obj:b,overrideContext:d})}},unsubscribe:function(g,e,b){this.__yui_events=this.__yui_events||{};var a=this.__yui_events;if(g){var d=a[g];if(d){return d.unsubscribe(e,b)}}else{var h=true;for(var f in a){if(YAHOO.lang.hasOwnProperty(a,f)){h=h&&a[f].unsubscribe(e,b)}}return h}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(h,a){this.__yui_events=this.__yui_events||{};var e=a||{};var f=this.__yui_events;if(f[h]){}else{var g=e.scope||this;var k=(e.silent);var d=new YAHOO.util.CustomEvent(h,g,k,YAHOO.util.CustomEvent.FLAT);f[h]=d;if(e.onSubscribeCallback){d.subscribeEvent.subscribe(e.onSubscribeCallback)}this.__yui_subscribers=this.__yui_subscribers||{};var j=this.__yui_subscribers[h];if(j){for(var b=0;b<j.length;++b){d.subscribe(j[b].fn,j[b].obj,j[b].overrideContext)}}}return f[h]},fireEvent:function(e,f,a,g){this.__yui_events=this.__yui_events||{};var b=this.__yui_events[e];if(!b){return null}var h=[];for(var d=1;d<arguments.length;++d){h.push(arguments[d])}return b.fire.apply(b,h)},hasEvent:function(a){if(this.__yui_events){if(this.__yui_events[a]){return true}}return false}};(function(){var a=YAHOO.util.Event,b=YAHOO.lang;YAHOO.util.KeyListener=function(k,e,j,h){if(!k){}else{if(!e){}else{if(!j){}}}if(!h){h=YAHOO.util.KeyListener.KEYDOWN}var g=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(b.isString(k)){k=document.getElementById(k)}if(b.isFunction(j)){g.subscribe(j)}else{g.subscribe(j.fn,j.scope,j.correctScope)}function f(p,q){if(!e.shift){e.shift=false}if(!e.alt){e.alt=false}if(!e.ctrl){e.ctrl=false}if(p.shiftKey==e.shift&&p.altKey==e.alt&&p.ctrlKey==e.ctrl){var n,r=e.keys,l;if(YAHOO.lang.isArray(r)){for(var m=0;m<r.length;m++){n=r[m];l=a.getCharCode(p);if(n==l){g.fire(l,p);break}}}else{l=a.getCharCode(p);if(r==l){g.fire(l,p)}}}}this.enable=function(){if(!this.enabled){a.on(k,h,f);this.enabledEvent.fire(e)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(k,h,f);this.disabledEvent.fire(e)}this.enabled=false};this.toString=function(){return"KeyListener ["+e.keys+"] "+k.tagName+(k.id?"["+k.id+"]":"")}};var d=YAHOO.util.KeyListener;d.KEYDOWN="keydown";d.KEYUP="keyup";d.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.7.0",build:"1799"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/yahoo-dom-event/yahoo-dom-event.js")}(function(){var b=YAHOO.util;var a=function(f,g,e,d){if(!f){}this.init(f,g,e,d)};a.NAME="Anim";a.prototype={toString:function(){var e=this.getEl()||{};var d=e.id||e.tagName;return(this.constructor.NAME+": "+d)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(f,d,e){return this.method(this.currentFrame,d,e-d,this.totalFrames)},setAttribute:function(g,d,e){var f=this.getEl();if(this.patterns.noNegatives.test(g)){d=(d>0)?d:0}if("style" in f){b.Dom.setStyle(f,g,d+e)}else{if(g in f){f[g]=d}}},getAttribute:function(j){var g=this.getEl();var e=b.Dom.getStyle(g,j);if(e!=="auto"&&!this.patterns.offsetUnit.test(e)){return parseFloat(e)}var h=this.patterns.offsetAttribute.exec(j)||[];var d=!!(h[3]);var f=!!(h[2]);if("style" in g){if(f||(b.Dom.getStyle(g,"position")=="absolute"&&d)){e=g["offset"+h[0].charAt(0).toUpperCase()+h[0].substr(1)]}else{e=0}}else{if(j in g){e=g[j]}}return e},getDefaultUnit:function(d){if(this.patterns.defaultUnit.test(d)){return"px"}return""},setRuntimeAttribute:function(j){var d;var h;var g=this.attributes;this.runtimeAttributes[j]={};var e=function(l){return(typeof l!=="undefined")};if(!e(g[j]["to"])&&!e(g[j]["by"])){return false}d=(e(g[j]["from"]))?g[j]["from"]:this.getAttribute(j);if(e(g[j]["to"])){h=g[j]["to"]}else{if(e(g[j]["by"])){if(d.constructor==Array){h=[];for(var f=0,k=d.length;f<k;++f){h[f]=d[f]+g[j]["by"][f]*1}}else{h=d+g[j]["by"]*1}}}this.runtimeAttributes[j].start=d;this.runtimeAttributes[j].end=h;this.runtimeAttributes[j].unit=(e(g[j].unit))?g[j]["unit"]:this.getDefaultUnit(j);return true},init:function(n,h,j,e){var d=false;var m=null;var k=0;n=b.Dom.get(n);this.attributes=h||{};this.duration=!YAHOO.lang.isUndefined(j)?j:1;this.method=e||b.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=b.AnimMgr.fps;this.setEl=function(p){n=b.Dom.get(p)};this.getEl=function(){return n};this.isAnimated=function(){return d};this.getStartTime=function(){return m};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(b.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}b.AnimMgr.registerElement(this);return true};this.stop=function(p){if(!this.isAnimated()){return false}if(p){this.currentFrame=this.totalFrames;this._onTween.fire()}b.AnimMgr.stop(this)};var f=function(){this.onStart.fire();this.runtimeAttributes={};for(var p in this.attributes){this.setRuntimeAttribute(p)}d=true;k=0;m=new Date()};var g=function(){var p={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};p.toString=function(){return("duration: "+p.duration+", currentFrame: "+p.currentFrame)};this.onTween.fire(p);var q=this.runtimeAttributes;for(var r in q){this.setAttribute(r,this.doMethod(r,q[r].start,q[r].end),q[r].unit)}k+=1};var l=function(){var q=(new Date()-m)/1000;var p={duration:q,frames:k,fps:k/q};p.toString=function(){return("duration: "+p.duration+", frames: "+p.frames+", fps: "+p.fps)};d=false;k=0;this.onComplete.fire(p)};this._onStart=new b.CustomEvent("_start",this,true);this.onStart=new b.CustomEvent("start",this);this.onTween=new b.CustomEvent("tween",this);this._onTween=new b.CustomEvent("_tween",this,true);this.onComplete=new b.CustomEvent("complete",this);this._onComplete=new b.CustomEvent("_complete",this,true);this._onStart.subscribe(f);this._onTween.subscribe(g);this._onComplete.subscribe(l)}};b.Anim=a})();YAHOO.util.AnimMgr=new function(){var e=null;var f=[];var a=0;this.fps=1000;this.delay=1;this.registerElement=function(g){f[f.length]=g;a+=1;g._onStart.fire();this.start()};this.unRegister=function(g,h){h=h||b(g);if(!g.isAnimated()||h==-1){return false}g._onComplete.fire();f.splice(h,1);a-=1;if(a<=0){this.stop()}return true};this.start=function(){if(e===null){e=setInterval(this.run,this.delay)}};this.stop=function(g){if(!g){clearInterval(e);for(var h=0,j=f.length;h<j;++h){this.unRegister(f[0],0)}f=[];e=null;a=0}else{this.unRegister(g)}};this.run=function(){for(var g=0,j=f.length;g<j;++g){var h=f[g];if(!h||!h.isAnimated()){continue}if(h.currentFrame<h.totalFrames||h.totalFrames===null){h.currentFrame+=1;if(h.useSeconds){d(h)}h._onTween.fire()}else{YAHOO.util.AnimMgr.stop(h,g)}}};var b=function(g){for(var h=0,j=f.length;h<j;++h){if(f[h]==g){return h}}return -1};var d=function(l){var h=l.totalFrames;var j=l.currentFrame;var k=(l.currentFrame*l.duration*1000/l.totalFrames);var m=(new Date()-l.getStartTime());var g=0;if(m<l.duration*1000){g=Math.round((m/k-1)*l.currentFrame)}else{g=h-(j+1)}if(g>0&&isFinite(g)){if(l.currentFrame+g>=h){g=h-(j+1)}l.currentFrame+=g}}};YAHOO.util.Bezier=new function(){this.getPosition=function(d,e){var b=d.length;var f=[];for(var g=0;g<b;++g){f[g]=[d[g][0],d[g][1]]}for(var a=1;a<b;++a){for(g=0;g<b-a;++g){f[g][0]=(1-e)*f[g][0]+e*f[parseInt(g+1,10)][0];f[g][1]=(1-e)*f[g][1]+e*f[parseInt(g+1,10)][1]}}return[f[0][0],f[0][1]]}};(function(){var a=function(h,j,g,f){a.superclass.constructor.call(this,h,j,g,f)};a.NAME="ColorAnim";a.DEFAULT_BGCOLOR="#fff";var d=YAHOO.util;YAHOO.extend(a,d.Anim);var b=a.superclass;var e=a.prototype;e.patterns.color=/color$/i;e.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;e.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;e.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;e.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;e.parseColor=function(g){if(g.length==3){return g}var f=this.patterns.hex.exec(g);if(f&&f.length==4){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}f=this.patterns.rgb.exec(g);if(f&&f.length==4){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}f=this.patterns.hex3.exec(g);if(f&&f.length==4){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}return null};e.getAttribute=function(k){var h=this.getEl();if(this.patterns.color.test(k)){var f=YAHOO.util.Dom.getStyle(h,k);var g=this;if(this.patterns.transparent.test(f)){var j=YAHOO.util.Dom.getAncestorBy(h,function(l){return !g.patterns.transparent.test(f)});if(j){f=d.Dom.getStyle(j,k)}else{f=a.DEFAULT_BGCOLOR}}}else{f=b.getAttribute.call(this,k)}return f};e.doMethod=function(k,f,j){var g;if(this.patterns.color.test(k)){g=[];for(var h=0,l=f.length;h<l;++h){g[h]=b.doMethod.call(this,k,f[h],j[h])}g="rgb("+Math.floor(g[0])+","+Math.floor(g[1])+","+Math.floor(g[2])+")"}else{g=b.doMethod.call(this,k,f,j)}return g};e.setRuntimeAttribute=function(k){b.setRuntimeAttribute.call(this,k);if(this.patterns.color.test(k)){var h=this.attributes;var f=this.parseColor(this.runtimeAttributes[k].start);var j=this.parseColor(this.runtimeAttributes[k].end);if(typeof h[k]["to"]==="undefined"&&typeof h[k]["by"]!=="undefined"){j=this.parseColor(h[k].by);for(var g=0,l=f.length;g<l;++g){j[g]=f[g]+j[g]}}this.runtimeAttributes[k].start=f;this.runtimeAttributes[k].end=j}};d.ColorAnim=a})();YAHOO.util.Easing={easeNone:function(e,a,b,d){return b*e/d+a},easeIn:function(e,a,b,d){return b*(e/=d)*e+a},easeOut:function(e,a,b,d){return -b*(e/=d)*(e-2)+a},easeBoth:function(e,a,b,d){if((e/=d/2)<1){return b/2*e*e+a}return -b/2*((--e)*(e-2)-1)+a},easeInStrong:function(e,a,b,d){return b*(e/=d)*e*e*e+a},easeOutStrong:function(e,a,b,d){return -b*((e=e/d-1)*e*e*e-1)+a},easeBothStrong:function(e,a,b,d){if((e/=d/2)<1){return b/2*e*e*e*e+a}return -b/2*((e-=2)*e*e*e-2)+a},elasticIn:function(g,a,b,d,h,e){if(g==0){return a}if((g/=d)==1){return a+b}if(!e){e=d*0.3}if(!h||h<Math.abs(b)){h=b;var f=e/4}else{var f=e/(2*Math.PI)*Math.asin(b/h)}return -(h*Math.pow(2,10*(g-=1))*Math.sin((g*d-f)*(2*Math.PI)/e))+a},elasticOut:function(g,a,b,d,h,e){if(g==0){return a}if((g/=d)==1){return a+b}if(!e){e=d*0.3}if(!h||h<Math.abs(b)){h=b;var f=e/4}else{var f=e/(2*Math.PI)*Math.asin(b/h)}return h*Math.pow(2,-10*g)*Math.sin((g*d-f)*(2*Math.PI)/e)+b+a},elasticBoth:function(g,a,b,d,h,e){if(g==0){return a}if((g/=d/2)==2){return a+b}if(!e){e=d*(0.3*1.5)}if(!h||h<Math.abs(b)){h=b;var f=e/4}else{var f=e/(2*Math.PI)*Math.asin(b/h)}if(g<1){return -0.5*(h*Math.pow(2,10*(g-=1))*Math.sin((g*d-f)*(2*Math.PI)/e))+a}return h*Math.pow(2,-10*(g-=1))*Math.sin((g*d-f)*(2*Math.PI)/e)*0.5+b+a},backIn:function(f,a,b,d,e){if(typeof e=="undefined"){e=1.70158}return b*(f/=d)*f*((e+1)*f-e)+a},backOut:function(f,a,b,d,e){if(typeof e=="undefined"){e=1.70158}return b*((f=f/d-1)*f*((e+1)*f+e)+1)+a},backBoth:function(f,a,b,d,e){if(typeof e=="undefined"){e=1.70158}if((f/=d/2)<1){return b/2*(f*f*(((e*=(1.525))+1)*f-e))+a}return b/2*((f-=2)*f*(((e*=(1.525))+1)*f+e)+2)+a},bounceIn:function(e,a,b,d){return b-YAHOO.util.Easing.bounceOut(d-e,0,b,d)+a},bounceOut:function(e,a,b,d){if((e/=d)<(1/2.75)){return b*(7.5625*e*e)+a}else{if(e<(2/2.75)){return b*(7.5625*(e-=(1.5/2.75))*e+0.75)+a}else{if(e<(2.5/2.75)){return b*(7.5625*(e-=(2.25/2.75))*e+0.9375)+a}}}return b*(7.5625*(e-=(2.625/2.75))*e+0.984375)+a},bounceBoth:function(e,a,b,d){if(e<d/2){return YAHOO.util.Easing.bounceIn(e*2,0,b,d)*0.5+a}return YAHOO.util.Easing.bounceOut(e*2-d,0,b,d)*0.5+b*0.5+a}};(function(){var a=function(k,l,j,h){if(k){a.superclass.constructor.call(this,k,l,j,h)}};a.NAME="Motion";var d=YAHOO.util;YAHOO.extend(a,d.ColorAnim);var b=a.superclass;var f=a.prototype;f.patterns.points=/^points$/i;f.setAttribute=function(k,h,j){if(this.patterns.points.test(k)){j=j||"px";b.setAttribute.call(this,"left",h[0],j);b.setAttribute.call(this,"top",h[1],j)}else{b.setAttribute.call(this,k,h,j)}};f.getAttribute=function(j){if(this.patterns.points.test(j)){var h=[b.getAttribute.call(this,"left"),b.getAttribute.call(this,"top")]}else{h=b.getAttribute.call(this,j)}return h};f.doMethod=function(m,h,l){var j=null;if(this.patterns.points.test(m)){var k=this.method(this.currentFrame,0,100,this.totalFrames)/100;j=d.Bezier.getPosition(this.runtimeAttributes[m],k)}else{j=b.doMethod.call(this,m,h,l)}return j};f.setRuntimeAttribute=function(h){if(this.patterns.points.test(h)){var r=this.getEl();var p=this.attributes;var s;var m=p.points["control"]||[];var q;var l,j;if(m.length>0&&!(m[0] instanceof Array)){m=[m]}else{var n=[];for(l=0,j=m.length;l<j;++l){n[l]=m[l]}m=n}if(d.Dom.getStyle(r,"position")=="static"){d.Dom.setStyle(r,"position","relative")}if(e(p.points["from"])){d.Dom.setXY(r,p.points["from"])}else{d.Dom.setXY(r,d.Dom.getXY(r))}s=this.getAttribute("points");if(e(p.points["to"])){q=g.call(this,p.points["to"],s);var k=d.Dom.getXY(this.getEl());for(l=0,j=m.length;l<j;++l){m[l]=g.call(this,m[l],s)}}else{if(e(p.points["by"])){q=[s[0]+p.points["by"][0],s[1]+p.points["by"][1]];for(l=0,j=m.length;l<j;++l){m[l]=[s[0]+m[l][0],s[1]+m[l][1]]}}}this.runtimeAttributes[h]=[s];if(m.length>0){this.runtimeAttributes[h]=this.runtimeAttributes[h].concat(m)}this.runtimeAttributes[h][this.runtimeAttributes[h].length]=q}else{b.setRuntimeAttribute.call(this,h)}};var g=function(k,h){var j=d.Dom.getXY(this.getEl());k=[k[0]-j[0]+h[0],k[1]-j[1]+h[1]];return k};var e=function(h){return(typeof h!=="undefined")};d.Motion=a})();(function(){var b=function(h,j,g,f){if(h){b.superclass.constructor.call(this,h,j,g,f)}};b.NAME="Scroll";var e=YAHOO.util;YAHOO.extend(b,e.ColorAnim);var d=b.superclass;var a=b.prototype;a.doMethod=function(j,f,h){var g=null;if(j=="scroll"){g=[this.method(this.currentFrame,f[0],h[0]-f[0],this.totalFrames),this.method(this.currentFrame,f[1],h[1]-f[1],this.totalFrames)]}else{g=d.doMethod.call(this,j,f,h)}return g};a.getAttribute=function(h){var f=null;var g=this.getEl();if(h=="scroll"){f=[g.scrollLeft,g.scrollTop]}else{f=d.getAttribute.call(this,h)}return f};a.setAttribute=function(j,f,g){var h=this.getEl();if(j=="scroll"){h.scrollLeft=f[0];h.scrollTop=f[1]}else{d.setAttribute.call(this,j,f,g)}};e.Scroll=b})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/animation/animation-min.js")}YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(b){var d=YAHOO.util.Event.getTarget(b),a=d.nodeName.toLowerCase();if((a==="input"||a==="button")&&(d.type&&d.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(d.name)+"="+encodeURIComponent(d.value)}});return true}return false})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var d,a;try{a=new XMLHttpRequest();d={conn:a,tId:b}}catch(e){for(var g=0;g<this._msxml_progid.length;++g){try{a=new ActiveXObject(this._msxml_progid[g]);d={conn:a,tId:b};break}catch(f){}}}finally{return d}},getConnectionObject:function(a){var d;var b=this._transaction_id;try{if(!a){d=this.createXhrObject(b)}else{d={};d.tId=b;d.isUpload=true}if(d){this._transaction_id++}}catch(e){}finally{return d}},asyncRequest:function(b,f,d,a){var e=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var g=(d&&d.argument)?d.argument:null;if(!e){return null}else{if(d&&d.customevents){this.initCustomEvents(e,d)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(e,d,f,a);return e}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){f+=((f.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(d&&d.cache===false)){f+=((f.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}e.conn.open(b,f,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(this._has_default_headers||this._has_http_headers){this.setHeader(e)}this.handleReadyState(e,d);e.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(e,g);if(e.startEvent){e.startEvent.fire(e,g)}return e}},initCustomEvents:function(a,b){var d;for(d in b.customevents){if(this._customEvents[d][0]){a[this._customEvents[d][0]]=new YAHOO.util.CustomEvent(this._customEvents[d][1],(b.scope)?b.scope:null);a[this._customEvents[d][0]].subscribe(b.customevents[d])}}},handleReadyState:function(d,b){var e=this;var a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[d.tId]=window.setTimeout(function(){e.abort(d,b,true)},b.timeout)}this._poll[d.tId]=window.setInterval(function(){if(d.conn&&d.conn.readyState===4){window.clearInterval(e._poll[d.tId]);delete e._poll[d.tId];if(b&&b.timeout){window.clearTimeout(e._timeOut[d.tId]);delete e._timeOut[d.tId]}e.completeEvent.fire(d,a);if(d.completeEvent){d.completeEvent.fire(d,a)}e.handleTransactionResponse(d,b)}},this._polling_interval)},handleTransactionResponse:function(d,b,a){var f,g;var h=(b&&b.argument)?b.argument:null;try{if(d.conn.status!==undefined&&d.conn.status!==0){f=d.conn.status}else{f=13030}}catch(e){f=13030}if(f>=200&&f<300||f===1223){g=this.createResponseObject(d,h);if(b&&b.success){if(!b.scope){b.success(g)}else{b.success.apply(b.scope,[g])}}this.successEvent.fire(g);if(d.successEvent){d.successEvent.fire(g)}}else{switch(f){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:g=this.createExceptionObject(d.tId,h,(a?a:false));if(b&&b.failure){if(!b.scope){b.failure(g)}else{b.failure.apply(b.scope,[g])}}break;default:g=this.createResponseObject(d,h);if(b&&b.failure){if(!b.scope){b.failure(g)}else{b.failure.apply(b.scope,[g])}}}this.failureEvent.fire(g);if(d.failureEvent){d.failureEvent.fire(g)}}this.releaseObject(d);g=null},createResponseObject:function(e,h){var a={};var f={};try{var b=e.conn.getAllResponseHeaders();var j=b.split("\n");for(var k=0;k<j.length;k++){var d=j[k].indexOf(":");if(d!=-1){f[j[k].substring(0,d)]=j[k].substring(d+2)}}}catch(g){}a.tId=e.tId;a.status=(e.conn.status==1223)?204:e.conn.status;a.statusText=(e.conn.status==1223)?"No Content":e.conn.statusText;a.getResponseHeader=f;a.getAllResponseHeaders=b;a.responseText=e.conn.responseText;a.responseXML=e.conn.responseXML;if(h){a.argument=h}return a},createExceptionObject:function(b,g,a){var e=0;var d="communication failure";var h=-1;var j="transaction aborted";var f={};f.tId=b;if(a){f.status=h;f.statusText=j}else{f.status=e;f.statusText=d}if(g){f.argument=g}return f},initHeader:function(a,b,d){var e=(d)?this._default_headers:this._http_headers;e[a]=b;if(d){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}delete this._http_headers;this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false},setForm:function(j,p,b){var k,d,l,n,f,m=false,r=[],g=0,s,q,a,h,e;this.resetFormState();if(typeof j=="string"){k=(document.getElementById(j)||document.forms[j])}else{if(typeof j=="object"){k=j}else{return}}if(p){this.createFrame(b?b:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=k;return}for(s=0,q=k.elements.length;s<q;++s){d=k.elements[s];f=d.disabled;l=d.name;if(!f&&l){l=encodeURIComponent(l)+"=";n=encodeURIComponent(d.value);switch(d.type){case"select-one":if(d.selectedIndex>-1){e=d.options[d.selectedIndex];r[g++]=l+encodeURIComponent((e.attributes.value&&e.attributes.value.specified)?e.value:e.text)}break;case"select-multiple":if(d.selectedIndex>-1){for(a=d.selectedIndex,h=d.options.length;a<h;++a){e=d.options[a];if(e.selected){r[g++]=l+encodeURIComponent((e.attributes.value&&e.attributes.value.specified)?e.value:e.text)}}}break;case"radio":case"checkbox":if(d.checked){r[g++]=l+n}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(m===false){if(this._hasSubmitListener&&this._submitElementValue){r[g++]=this._submitElementValue}m=true}break;default:r[g++]=l+n}}}this._isFormSubmit=true;this._sFormData=r.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""},createFrame:function(a){var d="yuiIO"+this._transaction_id;var b;if(YAHOO.env.ua.ie){b=document.createElement('<iframe id="'+d+'" name="'+d+'" />');if(typeof a=="boolean"){b.src="javascript:false"}}else{b=document.createElement("iframe");b.id=d;b.name=d}b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";document.body.appendChild(b)},appendPostData:function(a){var d=[],f=a.split("&"),e,b;for(e=0;e<f.length;e++){b=f[e].indexOf("=");if(b!=-1){d[e]=document.createElement("input");d[e].type="hidden";d[e].name=decodeURIComponent(f[e].substring(0,b));d[e].value=decodeURIComponent(f[e].substring(b+1));this._formNode.appendChild(d[e])}}return d},uploadFile:function(a,g,r,b){var m="yuiIO"+a.tId,l="multipart/form-data",j=document.getElementById(m),f=this,k=(g&&g.argument)?g.argument:null,h,n,d,p;var e={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",r);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",m);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",l)}else{this._formNode.setAttribute("enctype",l)}if(b){h=this.appendPostData(b)}this._formNode.submit();this.startEvent.fire(a,k);if(a.startEvent){a.startEvent.fire(a,k)}if(g&&g.timeout){this._timeOut[a.tId]=window.setTimeout(function(){f.abort(a,g,true)},g.timeout)}if(h&&h.length>0){for(n=0;n<h.length;n++){this._formNode.removeChild(h[n])}}for(d in e){if(YAHOO.lang.hasOwnProperty(e,d)){if(e[d]){this._formNode.setAttribute(d,e[d])}else{this._formNode.removeAttribute(d)}}}this.resetFormState();var q=function(){if(g&&g.timeout){window.clearTimeout(f._timeOut[a.tId]);delete f._timeOut[a.tId]}f.completeEvent.fire(a,k);if(a.completeEvent){a.completeEvent.fire(a,k)}p={tId:a.tId,argument:g.argument};try{p.responseText=j.contentWindow.document.body?j.contentWindow.document.body.innerHTML:j.contentWindow.document.documentElement.textContent;p.responseXML=j.contentWindow.document.XMLDocument?j.contentWindow.document.XMLDocument:j.contentWindow.document}catch(s){}if(g&&g.upload){if(!g.scope){g.upload(p)}else{g.upload.apply(g.scope,[p])}}f.uploadEvent.fire(p);if(a.uploadEvent){a.uploadEvent.fire(p)}YAHOO.util.Event.removeListener(j,"load",q);setTimeout(function(){document.body.removeChild(j);f.releaseObject(a)},100)};YAHOO.util.Event.addListener(j,"load",q)},abort:function(e,b,a){var f;var h=(b&&b.argument)?b.argument:null;if(e&&e.conn){if(this.isCallInProgress(e)){e.conn.abort();window.clearInterval(this._poll[e.tId]);delete this._poll[e.tId];if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId]}f=true}}else{if(e&&e.isUpload===true){var g="yuiIO"+e.tId;var d=document.getElementById(g);if(d){YAHOO.util.Event.removeListener(d,"load");document.body.removeChild(d);if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId]}f=true}}else{f=false}}if(f===true){this.abortEvent.fire(e,h);if(e.abortEvent){e.abortEvent.fire(e,h)}this.handleTransactionResponse(e,b,true)}return f},isCallInProgress:function(b){if(b&&b.conn){return b.conn.readyState!==4&&b.conn.readyState!==0}else{if(b&&b.isUpload===true){var a="yuiIO"+b.tId;return document.getElementById(a)?true:false}else{return false}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/connection/connection-min.js")}if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var a=YAHOO.util.Event,b=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var d=document.createElement("div");d.id="yui-ddm-shim";if(document.body.firstChild){document.body.insertBefore(d,document.body.firstChild)}else{document.body.appendChild(d)}d.style.display="none";d.style.backgroundColor="red";d.style.position="absolute";d.style.zIndex="99999";b.setStyle(d,"opacity","0");this._shim=d;a.on(d,"mouseup",this.handleMouseUp,this,true);a.on(d,"mousemove",this.handleMouseMove,this,true);a.on(window,"scroll",this._sizeShim,this,true)},_sizeShim:function(){if(this._shimActive){var d=this._shim;d.style.height=b.getDocumentHeight()+"px";d.style.width=b.getDocumentWidth()+"px";d.style.top="0";d.style.left="0"}},_activateShim:function(){if(this.useShim){if(!this._shim){this._createShim()}this._shimActive=true;var e=this._shim,d="0";if(this._debugShim){d=".5"}b.setStyle(e,"opacity",d);this._sizeShim();e.style.display="block"}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(f,g){for(var e in this.ids){for(var h in this.ids[e]){var d=this.ids[e][h];if(!this.isTypeOfDD(d)){continue}d[f].apply(d,g)}}},_onLoad:function(){this.init();a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(d){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(d,e){if(!this.initialized){this.init()}if(!this.ids[e]){this.ids[e]={}}this.ids[e][d.id]=d},removeDDFromGroup:function(d,f){if(!this.ids[f]){this.ids[f]={}}var e=this.ids[f];if(e&&e[d.id]){delete e[d.id]}},_remove:function(d){for(var e in d.groups){if(e){var f=this.ids[e];if(f&&f[d.id]){delete f[d.id]}}}delete this.handleIds[d.id]},regHandle:function(d,e){if(!this.handleIds[d]){this.handleIds[d]={}}this.handleIds[d][e]=e},isDragDrop:function(d){return(this.getDDById(d))?true:false},getRelated:function(d,h){var e=[];for(var f in d.groups){for(var g in this.ids[f]){var j=this.ids[f][g];if(!this.isTypeOfDD(j)){continue}if(!h||j.isTarget){e[e.length]=j}}}return e},isLegalTarget:function(d,e){var g=this.getRelated(d,true);for(var f=0,h=g.length;f<h;++f){if(g[f].id==e.id){return true}}return false},isTypeOfDD:function(d){return(d&&d.__ygDragDrop)},isHandle:function(d,e){return(this.handleIds[d]&&this.handleIds[d][e])},getDDById:function(d){for(var e in this.ids){if(this.ids[e][d]){return this.ids[e][d]}}return null},handleMouseDown:function(d,e){this.currentTarget=YAHOO.util.Event.getTarget(d);this.dragCurrent=e;var f=e.getEl();this.startX=YAHOO.util.Event.getPageX(d);this.startY=YAHOO.util.Event.getPageY(d);this.deltaX=this.startX-f.offsetLeft;this.deltaY=this.startY-f.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var g=YAHOO.util.DDM;g.startDrag(g.startX,g.startY);g.fromTimeout=true},this.clickTimeThresh)},startDrag:function(f,d){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true}this._activateShim();clearTimeout(this.clickTimeout);var e=this.dragCurrent;if(e&&e.events.b4StartDrag){e.b4StartDrag(f,d);e.fireEvent("b4StartDragEvent",{x:f,y:d})}if(e&&e.events.startDrag){e.startDrag(f,d);e.fireEvent("startDragEvent",{x:f,y:d})}this.dragThreshMet=true},handleMouseUp:function(d){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(d)}this.fromTimeout=false;this.fireEvents(d,true)}else{}this.stopDrag(d);this.stopEvent(d)}},stopEvent:function(d){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(d)}if(this.preventDefault){YAHOO.util.Event.preventDefault(d)}},stopDrag:function(d,e){var f=this.dragCurrent;if(f&&!e){if(this.dragThreshMet){if(f.events.b4EndDrag){f.b4EndDrag(d);f.fireEvent("b4EndDragEvent",{e:d})}if(f.events.endDrag){f.endDrag(d);f.fireEvent("endDragEvent",{e:d})}}if(f.events.mouseUp){f.onMouseUp(d);f.fireEvent("mouseUpEvent",{e:d})}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=false}}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(d){var g=this.dragCurrent;if(g){if(YAHOO.util.Event.isIE&&!d.button){this.stopEvent(d);return this.handleMouseUp(d)}else{if(d.clientX<0||d.clientY<0){}}if(!this.dragThreshMet){var e=Math.abs(this.startX-YAHOO.util.Event.getPageX(d));var f=Math.abs(this.startY-YAHOO.util.Event.getPageY(d));if(e>this.clickPixelThresh||f>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){if(g&&g.events.b4Drag){g.b4Drag(d);g.fireEvent("b4DragEvent",{e:d})}if(g&&g.events.drag){g.onDrag(d);g.fireEvent("dragEvent",{e:d})}if(g){this.fireEvents(d,false)}}this.stopEvent(d)}},fireEvents:function(j,u){var ae=this.dragCurrent;if(!ae||ae.isLocked()||ae.dragOnly){return}var s=YAHOO.util.Event.getPageX(j),t=YAHOO.util.Event.getPageY(j),q=new YAHOO.util.Point(s,t),v=ae.getTargetCoord(q.x,q.y),A=ae.getDragEl(),B=["out","over","drop","enter"],k=new YAHOO.util.Region(v.y,v.x+A.offsetWidth,v.y+A.offsetHeight,v.x),x=[],aa={},p=[],ad={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var m in this.dragOvers){var ac=this.dragOvers[m];if(!this.isTypeOfDD(ac)){continue}if(!this.isOverTarget(q,ac,this.mode,k)){ad.outEvts.push(ac)}x[m]=true;delete this.dragOvers[m]}for(var n in ae.groups){if("string"!=typeof n){continue}for(m in this.ids[n]){var z=this.ids[n][m];if(!this.isTypeOfDD(z)){continue}if(z.isTarget&&!z.isLocked()&&z!=ae){if(this.isOverTarget(q,z,this.mode,k)){aa[n]=true;if(u){ad.dropEvts.push(z)}else{if(!x[z.id]){ad.enterEvts.push(z)}else{ad.overEvts.push(z)}this.dragOvers[z.id]=z}}}}}this.interactionInfo={out:ad.outEvts,enter:ad.enterEvts,over:ad.overEvts,drop:ad.dropEvts,point:q,draggedRegion:k,sourceRegion:this.locationCache[ae.id],validDrop:u};for(var ab in aa){p.push(ab)}if(u&&!ad.dropEvts.length){this.interactionInfo.validDrop=false;if(ae.events.invalidDrop){ae.onInvalidDrop(j);ae.fireEvent("invalidDropEvent",{e:j})}}for(m=0;m<B.length;m++){var f=null;if(ad[B[m]+"Evts"]){f=ad[B[m]+"Evts"]}if(f&&f.length){var y=B[m].charAt(0).toUpperCase()+B[m].substr(1),g="onDrag"+y,w="b4Drag"+y,r="drag"+y+"Event",h="drag"+y;if(this.mode){if(ae.events[w]){ae[w](j,f,p);ae.fireEvent(w+"Event",{event:j,info:f,group:p})}if(ae.events[h]){ae[g](j,f,p);ae.fireEvent(r,{event:j,info:f,group:p})}}else{for(var e=0,l=f.length;e<l;++e){if(ae.events[w]){ae[w](j,f[e].id,p[0]);ae.fireEvent(w+"Event",{event:j,info:f[e].id,group:p[0]})}if(ae.events[h]){ae[g](j,f[e].id,p[0]);ae.fireEvent(r,{event:j,info:f[e].id,group:p[0]})}}}}}},getBestMatch:function(f){var d=null;var g=f.length;if(g==1){d=f[0]}else{for(var e=0;e<g;++e){var h=f[e];if(this.mode==this.INTERSECT&&h.cursorIsOver){d=h;break}else{if(!d||!d.overlap||(h.overlap&&d.overlap.getArea()<h.overlap.getArea())){d=h}}}}return d},refreshCache:function(h){var f=h||this.ids;for(var j in f){if("string"!=typeof j){continue}for(var g in this.ids[j]){var e=this.ids[j][g];if(this.isTypeOfDD(e)){var d=this.getLocation(e);if(d){this.locationCache[e.id]=d}else{delete this.locationCache[e.id]}}}}},verifyEl:function(e){try{if(e){var f=e.offsetParent;if(f){return true}}}catch(d){}return false},getLocation:function(m){if(!this.isTypeOfDD(m)){return null}var p=m.getEl(),j,q,d,g,h,f,e,k,n;try{j=YAHOO.util.Dom.getXY(p)}catch(l){}if(!j){return null}q=j[0];d=q+p.offsetWidth;g=j[1];h=g+p.offsetHeight;f=g-m.padding[0];e=d+m.padding[1];k=h+m.padding[2];n=q-m.padding[3];return new YAHOO.util.Region(f,e,k,n)},isOverTarget:function(f,e,m,l){var k=this.locationCache[e.id];if(!k||!this.useCache){k=this.getLocation(e);this.locationCache[e.id]=k}if(!k){return false}e.cursorIsOver=k.contains(f);var g=this.dragCurrent;if(!g||(!m&&!g.constrainX&&!g.constrainY)){return e.cursorIsOver}e.overlap=null;if(!l){var j=g.getTargetCoord(f.x,f.y);var d=g.getDragEl();l=new YAHOO.util.Region(j.y,j.x+d.offsetWidth,j.y+d.offsetHeight,j.x)}var h=l.intersect(k);if(h){e.overlap=h;return(m)?true:e.cursorIsOver}else{return false}},_onUnload:function(d,e){this.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);this.ids={}},elementCache:{},getElWrapper:function(d){var e=this.elementCache[d];if(!e||!e.el){e=this.elementCache[d]=new this.ElementWrapper(YAHOO.util.Dom.get(d))}return e},getElement:function(d){return YAHOO.util.Dom.get(d)},getCss:function(d){var e=YAHOO.util.Dom.get(d);return(e)?e.style:null},ElementWrapper:function(d){this.el=d||null;this.id=this.el&&d.id;this.css=this.el&&d.style},getPosX:function(d){return YAHOO.util.Dom.getX(d)},getPosY:function(d){return YAHOO.util.Dom.getY(d)},swapNode:function(e,g){if(e.swapNode){e.swapNode(g)}else{var d=g.parentNode;var f=g.nextSibling;if(f==e){d.insertBefore(e,g)}else{if(g==e.nextSibling){d.insertBefore(g,e)}else{e.parentNode.replaceChild(g,e);d.insertBefore(e,f)}}}},getScroll:function(){var e,g,d=document.documentElement,f=document.body;if(d&&(d.scrollTop||d.scrollLeft)){e=d.scrollTop;g=d.scrollLeft}else{if(f){e=f.scrollTop;g=f.scrollLeft}else{}}return{top:e,left:g}},getStyle:function(d,e){return YAHOO.util.Dom.getStyle(d,e)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(f,d){var e=YAHOO.util.Dom.getXY(d);YAHOO.util.Dom.setXY(f,e)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(d,e){return(d-e)},_timeoutCount:0,_addListeners:function(){var d=YAHOO.util.DDM;if(YAHOO.util.Event&&document){d._onLoad()}else{if(d._timeoutCount>2000){}else{setTimeout(d._addListeners,10);if(document&&document.body){d._timeoutCount+=1}}}},handleWasClicked:function(f,d){if(this.isHandle(d,f.id)){return true}else{var e=f.parentNode;while(e){if(this.isHandle(d,e.id)){return true}else{e=e.parentNode}}}return false}}}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners()}(function(){var a=YAHOO.util.Event;var b=YAHOO.util.Dom;YAHOO.util.DragDrop=function(d,f,e){if(d){this.init(d,f,e)}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},unlock:function(){this.locked=false},isTarget:true,padding:null,dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(e,d){},startDrag:function(e,d){},b4Drag:function(d){},onDrag:function(d){},onDragEnter:function(e,d){},b4DragOver:function(d){},onDragOver:function(e,d){},b4DragOut:function(d){},onDragOut:function(e,d){},b4DragDrop:function(d){},onDragDrop:function(e,d){},onInvalidDrop:function(d){},b4EndDrag:function(d){},endDrag:function(d){},b4MouseDown:function(d){},onMouseDown:function(d){},onMouseUp:function(d){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=b.get(this.id)}return this._domRef},getDragEl:function(){return b.get(this.dragElId)},init:function(d,g,f){this.initTarget(d,g,f);a.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var e in this.events){this.createEvent(e+"Event")}},initTarget:function(d,f,e){this.config=e||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof d!=="string"){this._domRef=d;d=b.generateId(d)}this.id=d;this.addToGroup((f)?f:"default");this.handleElId=d;a.onAvailable(d,this.handleOnAvailable,this,true);this.setDragElId(d);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig()},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var d in this.config.events){if(this.config.events[d]===false){this.events[d]=false}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);this.useShim=((this.config.useShim===true)?true:false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(e,g,d,f){if(!g&&0!==g){this.padding=[e,e,e,e]}else{if(!d&&0!==d){this.padding=[e,g,e,g]}else{this.padding=[e,g,d,f]}}},setInitPosition:function(f,g){var e=this.getEl();if(!this.DDM.verifyEl(e)){if(e&&e.style&&(e.style.display=="none")){}else{}return}var h=f||0;var j=g||0;var d=b.getXY(e);this.initPageX=d[0]-h;this.initPageY=d[1]-j;this.lastPageX=d[0];this.lastPageY=d[1];this.setStartPosition(d)},setStartPosition:function(d){var e=d||b.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=e[0];this.startPageY=e[1]},addToGroup:function(d){this.groups[d]=true;this.DDM.regDragDrop(this,d)},removeFromGroup:function(d){if(this.groups[d]){delete this.groups[d]}this.DDM.removeDDFromGroup(this,d)},setDragElId:function(d){this.dragElId=d},setHandleElId:function(d){if(typeof d!=="string"){d=b.generateId(d)}this.handleElId=d;this.DDM.regHandle(this.id,d)},setOuterHandleElId:function(d){if(typeof d!=="string"){d=b.generateId(d)}a.on(d,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(d);this.hasOuterHandles=true},unreg:function(){a.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(d,e){var k=d.which||d.button;if(this.primaryButtonOnly&&k>1){return}if(this.isLocked()){return}var l=this.b4MouseDown(d),h=true;if(this.events.b4MouseDown){h=this.fireEvent("b4MouseDownEvent",d)}var j=this.onMouseDown(d),f=true;if(this.events.mouseDown){f=this.fireEvent("mouseDownEvent",d)}if((l===false)||(j===false)||(h===false)||(f===false)){return}this.DDM.refreshCache(this.groups);var g=new YAHOO.util.Point(a.getPageX(d),a.getPageY(d));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(g,this)){}else{if(this.clickValidator(d)){this.setStartPosition();this.DDM.handleMouseDown(d,this);this.DDM.stopEvent(d)}else{}}},clickValidator:function(d){var e=YAHOO.util.Event.getTarget(d);return(this.isValidHandleChild(e)&&(this.id==this.handleElId||this.DDM.handleWasClicked(e,this.id)))},getTargetCoord:function(e,f){var g=e-this.deltaX;var d=f-this.deltaY;if(this.constrainX){if(g<this.minX){g=this.minX}if(g>this.maxX){g=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}g=this.getTick(g,this.xTicks);d=this.getTick(d,this.yTicks);return{x:g,y:d}},addInvalidHandleType:function(e){var d=e.toUpperCase();this.invalidHandleTypes[d]=d},addInvalidHandleId:function(d){if(typeof d!=="string"){d=b.generateId(d)}this.invalidHandleIds[d]=d},addInvalidHandleClass:function(d){this.invalidHandleClasses.push(d)},removeInvalidHandleType:function(e){var d=e.toUpperCase();delete this.invalidHandleTypes[d]},removeInvalidHandleId:function(d){if(typeof d!=="string"){d=b.generateId(d)}delete this.invalidHandleIds[d]},removeInvalidHandleClass:function(e){for(var d=0,f=this.invalidHandleClasses.length;d<f;++d){if(this.invalidHandleClasses[d]==e){delete this.invalidHandleClasses[d]}}},isValidHandleChild:function(f){var g=true;var d;try{d=f.nodeName.toUpperCase()}catch(e){d=f.nodeName}g=g&&!this.invalidHandleTypes[d];g=g&&!this.invalidHandleIds[f.id];for(var h=0,j=this.invalidHandleClasses.length;g&&h<j;++h){g=!b.hasClass(f,this.invalidHandleClasses[h])}return g},setXTicks:function(d,g){this.xTicks=[];this.xTickSize=g;var e={};for(var f=this.initPageX;f>=this.minX;f=f-g){if(!e[f]){this.xTicks[this.xTicks.length]=f;e[f]=true}}for(f=this.initPageX;f<=this.maxX;f=f+g){if(!e[f]){this.xTicks[this.xTicks.length]=f;e[f]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(d,g){this.yTicks=[];this.yTickSize=g;var e={};for(var f=this.initPageY;f>=this.minY;f=f-g){if(!e[f]){this.yTicks[this.yTicks.length]=f;e[f]=true}}for(f=this.initPageY;f<=this.maxY;f=f+g){if(!e[f]){this.yTicks[this.yTicks.length]=f;e[f]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(d,e,f){this.leftConstraint=parseInt(d,10);this.rightConstraint=parseInt(e,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(f){this.setXTicks(this.initPageX,f)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(f,d,e){this.topConstraint=parseInt(f,10);this.bottomConstraint=parseInt(d,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(e){this.setYTicks(this.initPageY,e)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var d=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var e=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(d,e)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(d,g){if(!g){return d}else{if(g[0]>=d){return g[0]}else{for(var j=0,k=g.length;j<k;++j){var h=j+1;if(g[h]&&g[h]>=d){var e=d-g[j];var f=g[h]-d;return(f>e)?g[j]:g[h]}}return g[g.length-1]}}},toString:function(){return("DragDrop "+this.id)}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider)})();YAHOO.util.DD=function(b,a,d){if(b){this.init(b,a,d)}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(d,e){var a=d-this.startPageX;var b=e-this.startPageY;this.setDelta(a,b)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(b,d){var a=this.getDragEl();this.alignElWithMouse(a,b,d)},alignElWithMouse:function(h,d,e){var f=this.getTargetCoord(d,e);if(!this.deltaSetXY){var b=[f.x,f.y];YAHOO.util.Dom.setXY(h,b);var g=parseInt(YAHOO.util.Dom.getStyle(h,"left"),10);var j=parseInt(YAHOO.util.Dom.getStyle(h,"top"),10);this.deltaSetXY=[g-f.x,j-f.y]}else{YAHOO.util.Dom.setStyle(h,"left",(f.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(h,"top",(f.y+this.deltaSetXY[1])+"px")}this.cachePosition(f.x,f.y);var a=this;setTimeout(function(){a.autoScroll.call(a,f.x,f.y,h.offsetHeight,h.offsetWidth)},0)},cachePosition:function(d,a){if(d){this.lastPageX=d;this.lastPageY=a}else{var b=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=b[0];this.lastPageY=b[1]}},autoScroll:function(k,l,q,j){if(this.scroll){var h=this.DDM.getClientHeight();var d=this.DDM.getClientWidth();var f=this.DDM.getScrollTop();var a=this.DDM.getScrollLeft();var m=q+l;var g=j+k;var n=(h+f-l-this.deltaY);var p=(d+a-k-this.deltaX);var b=40;var e=(document.all)?80:30;if(m>h&&n<b){window.scrollTo(a,f+e)}if(l<f&&f>0&&l-f<b){window.scrollTo(a,f-e)}if(g>d&&p<b){window.scrollTo(a+e,f)}if(k<a&&a>0&&k-a<b){window.scrollTo(a-e,f)}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},b4Drag:function(a){this.setDragElPos(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},toString:function(){return("DD "+this.id)}});YAHOO.util.DDProxy=function(b,a,d){if(b){this.init(b,a,d);this.initFrame()}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var g=this,a=document.body;if(!a||!a.firstChild){setTimeout(function(){g.createFrame()},50);return}var b=this.getDragEl(),d=YAHOO.util.Dom;if(!b){b=document.createElement("div");b.id=this.dragElId;var e=b.style;e.position="absolute";e.visibility="hidden";e.cursor="move";e.border="2px solid #aaa";e.zIndex=999;e.height="25px";e.width="25px";var f=document.createElement("div");d.setStyle(f,"height","100%");d.setStyle(f,"width","100%");d.setStyle(f,"background-color","#ccc");d.setStyle(f,"opacity","0");b.appendChild(f);a.insertBefore(b,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId)},showFrame:function(b,d){var e=this.getEl();var a=this.getDragEl();var f=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(f.width,10)/2),Math.round(parseInt(f.height,10)/2))}this.setDragElPos(b,d);YAHOO.util.Dom.setStyle(a,"visibility","visible")},_resizeProxy:function(){if(this.resizeFrame){var g=YAHOO.util.Dom;var d=this.getEl();var b=this.getDragEl();var h=parseInt(g.getStyle(b,"borderTopWidth"),10);var f=parseInt(g.getStyle(b,"borderRightWidth"),10);var j=parseInt(g.getStyle(b,"borderBottomWidth"),10);var a=parseInt(g.getStyle(b,"borderLeftWidth"),10);if(isNaN(h)){h=0}if(isNaN(f)){f=0}if(isNaN(j)){j=0}if(isNaN(a)){a=0}var k=Math.max(0,d.offsetWidth-f-a);var e=Math.max(0,d.offsetHeight-h-j);g.setStyle(b,"width",k+"px");g.setStyle(b,"height",e+"px")}},b4MouseDown:function(d){this.setStartPosition();var a=YAHOO.util.Event.getPageX(d);var b=YAHOO.util.Event.getPageY(d);this.autoOffset(a,b)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden")},endDrag:function(b){var d=YAHOO.util.Dom;var e=this.getEl();var a=this.getDragEl();d.setStyle(a,"visibility","");d.setStyle(e,"visibility","hidden");YAHOO.util.DDM.moveToEl(e,a);d.setStyle(a,"visibility","hidden");d.setStyle(e,"visibility","")},toString:function(){return("DDProxy "+this.id)}});YAHOO.util.DDTarget=function(b,a,d){if(b){this.initTarget(b,a,d)}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id)}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/dragdrop/dragdrop-min.js")}YAHOO.util.Attribute=function(b,a){if(a){this.owner=a;this.configure(b,true)}};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var a=this.value;if(this.getter){a=this.getter.call(this.owner,this.name)}return a},setValue:function(b,g){var d,a=this.owner,f=this.name;var e={type:f,prevValue:this.getValue(),newValue:b};if(this.readOnly||(this.writeOnce&&this._written)){return false}if(this.validator&&!this.validator.call(a,b)){return false}if(!g){d=a.fireBeforeChangeEvent(e);if(d===false){return false}}if(this.setter){b=this.setter.call(a,b,this.name);if(b===undefined){}}if(this.method){this.method.call(a,b,this.name)}this.value=b;this._written=true;e.type=f;if(!g){this.owner.fireChangeEvent(e)}return true},configure:function(d,b){d=d||{};if(b){this._written=false}this._initialConfig=this._initialConfig||{};for(var a in d){if(d.hasOwnProperty(a)){this[a]=d[a];if(b){this._initialConfig[a]=d[a]}}}},resetValue:function(){return this.setValue(this._initialConfig.value)},resetConfig:function(){this.configure(this._initialConfig,true)},refresh:function(a){this.setValue(this.value,a)}};(function(){var a=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(b){this._configs=this._configs||{};var d=this._configs[b];if(!d||!this._configs.hasOwnProperty(b)){return null}return d.getValue()},set:function(d,b,f){this._configs=this._configs||{};var e=this._configs[d];if(!e){return false}return e.setValue(b,f)},getAttributeKeys:function(){this._configs=this._configs;var b=[],d;for(d in this._configs){if(a.hasOwnProperty(this._configs,d)&&!a.isUndefined(this._configs[d])){b[b.length]=d}}return b},setAttributes:function(b,e){for(var d in b){if(a.hasOwnProperty(b,d)){this.set(d,b[d],e)}}},resetValue:function(b,d){this._configs=this._configs||{};if(this._configs[b]){this.set(b,this._configs[b]._initialConfig.value,d);return true}return false},refresh:function(d,f){this._configs=this._configs||{};var b=this._configs;d=((a.isString(d))?[d]:d)||this.getAttributeKeys();for(var e=0,g=d.length;e<g;++e){if(b.hasOwnProperty(d[e])){this._configs[d[e]].refresh(f)}}},register:function(d,b){this.setAttributeConfig(d,b)},getAttributeConfig:function(d){this._configs=this._configs||{};var e=this._configs[d]||{};var b={};for(d in e){if(a.hasOwnProperty(e,d)){b[d]=e[d]}}return b},setAttributeConfig:function(e,d,b){this._configs=this._configs||{};d=d||{};if(!this._configs[e]){d.name=e;this._configs[e]=this.createAttribute(d)}else{this._configs[e].configure(d,b)}},configureAttribute:function(e,d,b){this.setAttributeConfig(e,d,b)},resetAttributeConfig:function(b){this._configs=this._configs||{};this._configs[b].resetConfig()},subscribe:function(d,b){this._events=this._events||{};if(!(d in this._events)){this._events[d]=this.createEvent(d)}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments)},on:function(){this.subscribe.apply(this,arguments)},addListener:function(){this.subscribe.apply(this,arguments)},fireBeforeChangeEvent:function(b){var d="before";d+=b.type.charAt(0).toUpperCase()+b.type.substr(1)+"Change";b.type=d;return this.fireEvent(b.type,b)},fireChangeEvent:function(b){b.type+="Change";return this.fireEvent(b.type,b)},createAttribute:function(b){return new YAHOO.util.Attribute(b,this)}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider)})();(function(){var d=YAHOO.util.Dom,b=YAHOO.util.AttributeProvider;var a=function(f,e){this.init.apply(this,arguments)};a.DOM_EVENTS={click:true,dblclick:true,keydown:true,keypress:true,keyup:true,mousedown:true,mousemove:true,mouseout:true,mouseover:true,mouseup:true,focus:true,blur:true,submit:true,change:true};a.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(e,g){var f=this.get("element");if(f){f[g]=e}},DEFAULT_HTML_GETTER:function(g){var f=this.get("element"),e;if(f){e=f[g]}return e},appendChild:function(e){e=e.get?e.get("element"):e;return this.get("element").appendChild(e)},getElementsByTagName:function(e){return this.get("element").getElementsByTagName(e)},hasChildNodes:function(){return this.get("element").hasChildNodes()},insertBefore:function(f,e){f=f.get?f.get("element"):f;e=(e&&e.get)?e.get("element"):e;return this.get("element").insertBefore(f,e)},removeChild:function(e){e=e.get?e.get("element"):e;return this.get("element").removeChild(e)},replaceChild:function(f,e){f=f.get?f.get("element"):f;e=e.get?e.get("element"):e;return this.get("element").replaceChild(f,e)},initAttributes:function(e){},addListener:function(f,g,e,h){var j=this.get("element")||this.get("id");h=h||this;var k=this;if(!this._events[f]){if(j&&this.DOM_EVENTS[f]){YAHOO.util.Event.addListener(j,f,function(l){if(l.srcElement&&!l.target){l.target=l.srcElement}k.fireEvent(f,l)},e,h)}this.createEvent(f,this)}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments)},on:function(){return this.addListener.apply(this,arguments)},subscribe:function(){return this.addListener.apply(this,arguments)},removeListener:function(e,f){return this.unsubscribe.apply(this,arguments)},addClass:function(e){d.addClass(this.get("element"),e)},getElementsByClassName:function(e,f){return d.getElementsByClassName(e,f,this.get("element"))},hasClass:function(e){return d.hasClass(this.get("element"),e)},removeClass:function(e){return d.removeClass(this.get("element"),e)},replaceClass:function(e,f){return d.replaceClass(this.get("element"),e,f)},setStyle:function(e,f){return d.setStyle(this.get("element"),e,f)},getStyle:function(e){return d.getStyle(this.get("element"),e)},fireQueue:function(){var f=this._queue;for(var e=0,g=f.length;e<g;++e){this[f[e][0]].apply(this,f[e][1])}},appendTo:function(f,e){f=(f.get)?f.get("element"):d.get(f);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:f});e=(e&&e.get)?e.get("element"):d.get(e);var g=this.get("element");if(!g){return false}if(!f){return false}if(g.parent!=f){if(e){f.insertBefore(g,e)}else{f.appendChild(g)}}this.fireEvent("appendTo",{type:"appendTo",target:f});return g},get:function(g){var e=this._configs||{},f=e.element;if(f&&!e[g]&&!YAHOO.lang.isUndefined(f.value[g])){this._setHTMLAttrConfig(g)}return b.prototype.get.call(this,g)},setAttributes:function(e,h){var k={},g=this._configOrder;for(var f=0,l=g.length;f<l;++f){if(e[g[f]]!==undefined){k[g[f]]=true;this.set(g[f],e[g[f]],h)}}for(var j in e){if(e.hasOwnProperty(j)&&!k[j]){this.set(j,e[j],h)}}},set:function(g,e,h){var f=this.get("element");if(!f){this._queue[this._queue.length]=["set",arguments];if(this._configs[g]){this._configs[g].value=e}return}if(!this._configs[g]&&!YAHOO.lang.isUndefined(f[g])){this._setHTMLAttrConfig(g)}return b.prototype.set.apply(this,arguments)},setAttributeConfig:function(g,f,e){this._configOrder.push(g);b.prototype.setAttributeConfig.apply(this,arguments)},createEvent:function(e,f){this._events[e]=true;return b.prototype.createEvent.apply(this,arguments)},init:function(e,f){this._initElement(e,f)},destroy:function(){var e=this.get("element");YAHOO.util.Event.purgeElement(e,true);this.unsubscribeAll();if(e&&e.parentNode){e.parentNode.removeChild(e)}this._queue=[];this._events={};this._configs={};this._configOrder=[]},_initElement:function(g,h){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];h=h||{};h.element=h.element||g||null;var e=false;var j=a.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var f in j){if(j.hasOwnProperty(f)){this.DOM_EVENTS[f]=j[f]}}if(typeof h.element==="string"){this._setHTMLAttrConfig("id",{value:h.element})}if(d.get(h.element)){e=true;this._initHTMLElement(h);this._initContent(h)}YAHOO.util.Event.onAvailable(h.element,function(){if(!e){this._initHTMLElement(h)}this.fireEvent("available",{type:"available",target:d.get(h.element)})},this,true);YAHOO.util.Event.onContentReady(h.element,function(){if(!e){this._initContent(h)}this.fireEvent("contentReady",{type:"contentReady",target:d.get(h.element)})},this,true)},_initHTMLElement:function(e){this.setAttributeConfig("element",{value:d.get(e.element),readOnly:true})},_initContent:function(e){this.initAttributes(e);this.setAttributes(e,true);this.fireQueue()},_setHTMLAttrConfig:function(g,e){var f=this.get("element");e=e||{};e.name=g;e.setter=e.setter||this.DEFAULT_HTML_SETTER;e.getter=e.getter||this.DEFAULT_HTML_GETTER;e.value=e.value||f[g];this._configs[g]=new YAHOO.util.Attribute(e,this)}};YAHOO.augment(a,b);YAHOO.util.Element=a})();YAHOO.register("element",YAHOO.util.Element,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/element/element-min.js")}(function(){var m=YAHOO.util.Dom,f=YAHOO.util.Event,k=YAHOO.lang,g=YAHOO.env.ua,d=YAHOO.widget.Overlay,j=YAHOO.widget.Menu,a={},h=null,p=null,b=null;function n(u,v,r,t){var q,s;if(k.isString(u)&&k.isString(v)){if(g.ie){s='<input type="'+u+'" name="'+v+'"';if(t){s+=" checked"}s+=">";q=document.createElement(s)}else{q=document.createElement("input");q.name=v;q.type=u;if(t){q.checked=true}}q.value=r}return q}function l(x,r){var y=x.nodeName.toUpperCase(),t=this,s,w,v;function q(z){if(!(z in r)){s=x.getAttributeNode(z);if(s&&("value" in s)){r[z]=s.value}}}function u(){q("type");if(r.type=="button"){r.type="push"}if(!("disabled" in r)){r.disabled=x.disabled}q("name");q("value");q("title")}switch(y){case"A":r.type="link";q("href");q("target");break;case"INPUT":u();if(!("checked" in r)){r.checked=x.checked}break;case"BUTTON":u();w=x.parentNode.parentNode;if(m.hasClass(w,this.CSS_CLASS_NAME+"-checked")){r.checked=true}if(m.hasClass(w,this.CSS_CLASS_NAME+"-disabled")){r.disabled=true}x.removeAttribute("value");x.setAttribute("type","button");break}x.removeAttribute("id");x.removeAttribute("name");if(!("tabindex" in r)){r.tabindex=x.tabIndex}if(!("label" in r)){v=y=="INPUT"?x.value:x.innerHTML;if(v&&v.length>0){r.label=v}}}function e(s){var t=s.attributes,u=t.srcelement,q=u.nodeName.toUpperCase(),r=this;if(q==this.NODE_NAME){s.element=u;s.id=u.id;m.getElementsBy(function(v){switch(v.nodeName.toUpperCase()){case"BUTTON":case"A":case"INPUT":l.call(r,v,t);break}},"*",u)}else{switch(q){case"BUTTON":case"A":case"INPUT":l.call(this,u,t);break}}}YAHOO.widget.Button=function(q,t){if(!d&&YAHOO.widget.Overlay){d=YAHOO.widget.Overlay}if(!j&&YAHOO.widget.Menu){j=YAHOO.widget.Menu}var r=YAHOO.widget.Button.superclass.constructor,s,u;if(arguments.length==1&&!k.isString(q)&&!q.nodeName){if(!q.id){q.id=m.generateId()}r.call(this,(this.createButtonElement(q.type)),q)}else{s={element:null,attributes:(t||{})};if(k.isString(q)){u=m.get(q);if(u){if(!s.attributes.id){s.attributes.id=q}s.attributes.srcelement=u;e.call(this,s);if(!s.element){s.element=this.createButtonElement(s.attributes.type)}r.call(this,s.element,s.attributes)}}else{if(q.nodeName){if(!s.attributes.id){if(q.id){s.attributes.id=q.id}else{s.attributes.id=m.generateId()}}s.attributes.srcelement=q;e.call(this,s);if(!s.element){s.element=this.createButtonElement(s.attributes.type)}r.call(this,s.element,s.attributes)}}}};YAHOO.extend(YAHOO.widget.Button,YAHOO.util.Element,{_button:null,_menu:null,_hiddenFields:null,_onclickAttributeValue:null,_activationKeyPressed:false,_activationButtonPressed:false,_hasKeyEventHandlers:false,_hasMouseEventHandlers:false,_nOptionRegionX:0,NODE_NAME:"SPAN",CHECK_ACTIVATION_KEYS:[32],ACTIVATION_KEYS:[13,32],OPTION_AREA_WIDTH:20,CSS_CLASS_NAME:"yui-button",RADIO_DEFAULT_TITLE:"Unchecked.  Click to check.",RADIO_CHECKED_TITLE:"Checked.  Click another button to uncheck",CHECKBOX_DEFAULT_TITLE:"Unchecked.  Click to check.",CHECKBOX_CHECKED_TITLE:"Checked.  Click to uncheck.",MENUBUTTON_DEFAULT_TITLE:"Menu collapsed.  Click to expand.",MENUBUTTON_MENU_VISIBLE_TITLE:"Menu expanded.  Click or press Esc to collapse.",SPLITBUTTON_DEFAULT_TITLE:("Menu collapsed.  Click inside option region or press down arrow key to show the menu."),SPLITBUTTON_OPTION_VISIBLE_TITLE:"Menu expanded.  Press Esc to hide the menu.",SUBMIT_TITLE:"Click to submit form.",_setType:function(q){if(q=="split"){this.on("option",this._onOption)}},_setLabel:function(r){this._button.innerHTML=r;var q,s=g.gecko;if(s&&s<1.9&&m.inDocument(this.get("element"))){q=this.CSS_CLASS_NAME;this.removeClass(q);k.later(0,this,this.addClass,q)}},_setTabIndex:function(q){this._button.tabIndex=q},_setTitle:function(q){var r=q;if(this.get("type")!="link"){if(!r){switch(this.get("type")){case"radio":r=this.RADIO_DEFAULT_TITLE;break;case"checkbox":r=this.CHECKBOX_DEFAULT_TITLE;break;case"menu":r=this.MENUBUTTON_DEFAULT_TITLE;break;case"split":r=this.SPLITBUTTON_DEFAULT_TITLE;break;case"submit":r=this.SUBMIT_TITLE;break}}this._button.title=r}},_setDisabled:function(q){if(this.get("type")!="link"){if(q){if(this._menu){this._menu.hide()}if(this.hasFocus()){this.blur()}this._button.setAttribute("disabled","disabled");this.addStateCSSClasses("disabled");this.removeStateCSSClasses("hover");this.removeStateCSSClasses("active");this.removeStateCSSClasses("focus")}else{this._button.removeAttribute("disabled");this.removeStateCSSClasses("disabled")}}},_setHref:function(q){if(this.get("type")=="link"){this._button.href=q}},_setTarget:function(q){if(this.get("type")=="link"){this._button.setAttribute("target",q)}},_setChecked:function(r){var q=this.get("type"),s;if(q=="checkbox"||q=="radio"){if(r){this.addStateCSSClasses("checked");s=(q=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE}else{this.removeStateCSSClasses("checked");s=(q=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE}if(!this._hasDefaultTitle){this.set("title",s)}}},_setMenu:function(t){var y=this.get("lazyloadmenu"),w=this.get("element"),A,r=false,q,z,x;function s(){q.render(w.parentNode);this.removeListener("appendTo",s)}function u(){q.cfg.queueProperty("container",w.parentNode);this.removeListener("appendTo",u)}function v(){var B;if(q){m.addClass(q.element,this.get("menuclassname"));m.addClass(q.element,"yui-"+this.get("type")+"-button-menu");q.showEvent.subscribe(this._onMenuShow,null,this);q.hideEvent.subscribe(this._onMenuHide,null,this);q.renderEvent.subscribe(this._onMenuRender,null,this);if(j&&q instanceof j){if(y){B=this.get("container");if(B){q.cfg.queueProperty("container",B)}else{this.on("appendTo",u)}}q.cfg.queueProperty("clicktohide",false);q.keyDownEvent.subscribe(this._onMenuKeyDown,this,true);q.subscribe("click",this._onMenuClick,this,true);this.on("selectedMenuItemChange",this._onSelectedMenuItemChange);x=q.srcElement;if(x&&x.nodeName.toUpperCase()=="SELECT"){x.style.display="none";x.parentNode.removeChild(x)}}else{if(d&&q instanceof d){if(!h){h=new YAHOO.widget.OverlayManager()}h.register(q)}}this._menu=q;if(!r&&!y){if(m.inDocument(w)){q.render(w.parentNode)}else{this.on("appendTo",s)}}}}if(d){if(j){A=j.prototype.CSS_CLASS_NAME}if(t&&j&&(t instanceof j)){q=t;r=true;v.call(this)}else{if(d&&t&&(t instanceof d)){q=t;r=true;q.cfg.queueProperty("visible",false);v.call(this)}else{if(j&&k.isArray(t)){q=new j(m.generateId(),{lazyload:y,itemdata:t});this._menu=q;this.on("appendTo",v)}else{if(k.isString(t)){z=m.get(t);if(z){if(j&&m.hasClass(z,A)||z.nodeName.toUpperCase()=="SELECT"){q=new j(t,{lazyload:y});v.call(this)}else{if(d){q=new d(t,{visible:false});v.call(this)}}}}else{if(t&&t.nodeName){if(j&&m.hasClass(t,A)||t.nodeName.toUpperCase()=="SELECT"){q=new j(t,{lazyload:y});v.call(this)}else{if(d){if(!t.id){m.generateId(t)}q=new d(t,{visible:false});v.call(this)}}}}}}}}},_setOnClick:function(q){if(this._onclickAttributeValue&&(this._onclickAttributeValue!=q)){this.removeListener("click",this._onclickAttributeValue.fn);this._onclickAttributeValue=null}if(!this._onclickAttributeValue&&k.isObject(q)&&k.isFunction(q.fn)){this.on("click",q.fn,q.obj,q.scope);this._onclickAttributeValue=q}},_isActivationKey:function(v){var q=this.get("type"),u=(q=="checkbox"||q=="radio")?this.CHECK_ACTIVATION_KEYS:this.ACTIVATION_KEYS,s=u.length,r=false,t;if(s>0){t=s-1;do{if(v==u[t]){r=true;break}}while(t--)}return r},_isSplitButtonOptionKey:function(q){var r=(f.getCharCode(q)==40);var s=function(t){f.preventDefault(t);this.removeListener("keypress",s)};if(r){if(g.opera){this.on("keypress",s)}f.preventDefault(q)}return r},_addListenersToForm:function(){var q=this.getForm(),r=YAHOO.widget.Button.onFormKeyPress,s,w,t,u,v;if(q){f.on(q,"reset",this._onFormReset,null,this);f.on(q,"submit",this._onFormSubmit,null,this);w=this.get("srcelement");if(this.get("type")=="submit"||(w&&w.type=="submit")){t=f.getListeners(q,"keypress");s=false;if(t){u=t.length;if(u>0){v=u-1;do{if(t[v].fn==r){s=true;break}}while(v--)}}if(!s){f.on(q,"keypress",r)}}}},_showMenu:function(q){if(YAHOO.widget.MenuManager){YAHOO.widget.MenuManager.hideVisible()}if(h){h.hideAll()}var u=this._menu,r=this.get("menualignment"),s=this.get("focusmenu"),t;if(this._renderedMenu){u.cfg.setProperty("context",[this.get("element"),r[0],r[1]]);u.cfg.setProperty("preventcontextoverlap",true);u.cfg.setProperty("constraintoviewport",true)}else{u.cfg.queueProperty("context",[this.get("element"),r[0],r[1]]);u.cfg.queueProperty("preventcontextoverlap",true);u.cfg.queueProperty("constraintoviewport",true)}this.focus();if(j&&u&&(u instanceof j)){t=u.focus;u.focus=function(){};if(this._renderedMenu){u.cfg.setProperty("minscrollheight",this.get("menuminscrollheight"));u.cfg.setProperty("maxheight",this.get("menumaxheight"))}else{u.cfg.queueProperty("minscrollheight",this.get("menuminscrollheight"));u.cfg.queueProperty("maxheight",this.get("menumaxheight"))}u.show();u.focus=t;u.align();if(q.type=="mousedown"){f.stopPropagation(q)}if(s){u.focus()}}else{if(d&&u&&(u instanceof d)){if(!this._renderedMenu){u.render(this.get("element").parentNode)}u.show();u.align()}}},_hideMenu:function(){var q=this._menu;if(q){q.hide()}},_onMouseOver:function(s){var q=this.get("type"),t,r;if(q==="split"){t=this.get("element");r=(m.getX(t)+(t.offsetWidth-this.OPTION_AREA_WIDTH));this._nOptionRegionX=r}if(!this._hasMouseEventHandlers){if(q==="split"){this.on("mousemove",this._onMouseMove)}this.on("mouseout",this._onMouseOut);this._hasMouseEventHandlers=true}this.addStateCSSClasses("hover");if(q==="split"&&(f.getPageX(s)>r)){this.addStateCSSClasses("hoveroption")}if(this._activationButtonPressed){this.addStateCSSClasses("active")}if(this._bOptionPressed){this.addStateCSSClasses("activeoption")}if(this._activationButtonPressed||this._bOptionPressed){f.removeListener(document,"mouseup",this._onDocumentMouseUp)}},_onMouseMove:function(r){var q=this._nOptionRegionX;if(q){if(f.getPageX(r)>q){this.addStateCSSClasses("hoveroption")}else{this.removeStateCSSClasses("hoveroption")}}},_onMouseOut:function(r){var q=this.get("type");this.removeStateCSSClasses("hover");if(q!="menu"){this.removeStateCSSClasses("active")}if(this._activationButtonPressed||this._bOptionPressed){f.on(document,"mouseup",this._onDocumentMouseUp,null,this)}if(q==="split"&&(f.getPageX(r)>this._nOptionRegionX)){this.removeStateCSSClasses("hoveroption")}},_onDocumentMouseUp:function(r){this._activationButtonPressed=false;this._bOptionPressed=false;var q=this.get("type"),t,s;if(q=="menu"||q=="split"){t=f.getTarget(r);s=this._menu.element;if(t!=s&&!m.isAncestor(s,t)){this.removeStateCSSClasses((q=="menu"?"active":"activeoption"));this._hideMenu()}}f.removeListener(document,"mouseup",this._onDocumentMouseUp)},_onMouseDown:function(r){var q,s=true;function t(){this._hideMenu();this.removeListener("mouseup",t)}if((r.which||r.button)==1){if(!this.hasFocus()){this.focus()}q=this.get("type");if(q=="split"){if(f.getPageX(r)>this._nOptionRegionX){this.fireEvent("option",r);s=false}else{this.addStateCSSClasses("active");this._activationButtonPressed=true}}else{if(q=="menu"){if(this.isActive()){this._hideMenu();this._activationButtonPressed=false}else{this._showMenu(r);this._activationButtonPressed=true}}else{this.addStateCSSClasses("active");this._activationButtonPressed=true}}if(q=="split"||q=="menu"){this._hideMenuTimer=k.later(250,this,this.on,["mouseup",t])}}return s},_onMouseUp:function(r){var q=this.get("type"),t=this._hideMenuTimer,s=true;if(t){t.cancel()}if(q=="checkbox"||q=="radio"){this.set("checked",!(this.get("checked")))}this._activationButtonPressed=false;if(q!="menu"){this.removeStateCSSClasses("active")}if(q=="split"&&f.getPageX(r)>this._nOptionRegionX){s=false}return s},_onFocus:function(q){var r;this.addStateCSSClasses("focus");if(this._activationKeyPressed){this.addStateCSSClasses("active")}b=this;if(!this._hasKeyEventHandlers){r=this._button;f.on(r,"blur",this._onBlur,null,this);f.on(r,"keydown",this._onKeyDown,null,this);f.on(r,"keyup",this._onKeyUp,null,this);this._hasKeyEventHandlers=true}this.fireEvent("focus",q)},_onBlur:function(q){this.removeStateCSSClasses("focus");if(this.get("type")!="menu"){this.removeStateCSSClasses("active")}if(this._activationKeyPressed){f.on(document,"keyup",this._onDocumentKeyUp,null,this)}b=null;this.fireEvent("blur",q)},_onDocumentKeyUp:function(q){if(this._isActivationKey(f.getCharCode(q))){this._activationKeyPressed=false;f.removeListener(document,"keyup",this._onDocumentKeyUp)}},_onKeyDown:function(q){var r=this._menu;if(this.get("type")=="split"&&this._isSplitButtonOptionKey(q)){this.fireEvent("option",q)}else{if(this._isActivationKey(f.getCharCode(q))){if(this.get("type")=="menu"){this._showMenu(q)}else{this._activationKeyPressed=true;this.addStateCSSClasses("active")}}}if(r&&r.cfg.getProperty("visible")&&f.getCharCode(q)==27){r.hide();this.focus()}},_onKeyUp:function(r){var q;if(this._isActivationKey(f.getCharCode(r))){q=this.get("type");if(q=="checkbox"||q=="radio"){this.set("checked",!(this.get("checked")))}this._activationKeyPressed=false;if(this.get("type")!="menu"){this.removeStateCSSClasses("active")}}},_onClick:function(s){var q=this.get("type"),v,r,u,t;switch(q){case"radio":case"checkbox":if(!this._hasDefaultTitle){if(this.get("checked")){v=(q=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE}else{v=(q=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE}this.set("title",v)}break;case"submit":if(s.returnValue!==false){this.submitForm()}break;case"reset":r=this.getForm();if(r){r.reset()}break;case"menu":v=this._menu.cfg.getProperty("visible")?this.MENUBUTTON_MENU_VISIBLE_TITLE:this.MENUBUTTON_DEFAULT_TITLE;this.set("title",v);break;case"split":if(this._nOptionRegionX>0&&(f.getPageX(s)>this._nOptionRegionX)){t=false}else{this._hideMenu();u=this.get("srcelement");if(u&&u.type=="submit"&&s.returnValue!==false){this.submitForm()}}v=this._menu.cfg.getProperty("visible")?this.SPLITBUTTON_OPTION_VISIBLE_TITLE:this.SPLITBUTTON_DEFAULT_TITLE;this.set("title",v);break}return t},_onDblClick:function(q){var r=true;if(this.get("type")=="split"&&f.getPageX(q)>this._nOptionRegionX){r=false}return r},_onAppendTo:function(q){k.later(0,this,this._addListenersToForm)},_onFormReset:function(r){var q=this.get("type"),s=this._menu;if(q=="checkbox"||q=="radio"){this.resetValue("checked")}if(j&&s&&(s instanceof j)){this.resetValue("selectedMenuItem")}},_onFormSubmit:function(q){this.createHiddenFields()},_onDocumentMouseDown:function(q){var t=f.getTarget(q),r=this.get("element"),s=this._menu.element;if(t!=r&&!m.isAncestor(r,t)&&t!=s&&!m.isAncestor(s,t)){this._hideMenu();f.removeListener(document,"mousedown",this._onDocumentMouseDown)}},_onOption:function(q){if(this.hasClass("yui-split-button-activeoption")){this._hideMenu();this._bOptionPressed=false}else{this._showMenu(q);this._bOptionPressed=true}},_onMenuShow:function(r){f.on(document,"mousedown",this._onDocumentMouseDown,null,this);var s,q;if(this.get("type")=="split"){s=this.SPLITBUTTON_OPTION_VISIBLE_TITLE;q="activeoption"}else{s=this.MENUBUTTON_MENU_VISIBLE_TITLE;q="active"}this.addStateCSSClasses(q);this.set("title",s)},_onMenuHide:function(r){var s=this._menu,t,q;if(this.get("type")=="split"){t=this.SPLITBUTTON_DEFAULT_TITLE;q="activeoption"}else{t=this.MENUBUTTON_DEFAULT_TITLE;q="active"}this.removeStateCSSClasses(q);this.set("title",t);if(this.get("type")=="split"){this._bOptionPressed=false}},_onMenuKeyDown:function(q,r){var s=r[0];if(f.getCharCode(s)==27){this.focus();if(this.get("type")=="split"){this._bOptionPressed=false}}},_onMenuRender:function(t){var q=this.get("element"),u=q.parentNode,v=this._menu,r=v.element,s=v.srcElement;if(u!=r.parentNode){u.appendChild(r)}this._renderedMenu=true;if(s&&s.nodeName.toLowerCase()==="select"&&s.value){this.set("selectedMenuItem",v.getItem(s.selectedIndex))}},_onMenuClick:function(s,t){var q=t[1],r;if(q){this.set("selectedMenuItem",q);r=this.get("srcelement");if(r&&r.type=="submit"){this.submitForm()}this._hideMenu()}},_onSelectedMenuItemChange:function(s){var r=s.prevValue,q=s.newValue;if(r){m.removeClass(r.element,"yui-button-selectedmenuitem")}if(q){m.addClass(q.element,"yui-button-selectedmenuitem")}},createButtonElement:function(s){var q=this.NODE_NAME,r=document.createElement(q);r.innerHTML="<"+q+' class="first-child">'+(s=="link"?"<a></a>":'<button type="button"></button>')+"</"+q+">";return r},addStateCSSClasses:function(r){var q=this.get("type");if(k.isString(r)){if(r!="activeoption"&&r!="hoveroption"){this.addClass(this.CSS_CLASS_NAME+("-"+r))}this.addClass("yui-"+q+("-button-"+r))}},removeStateCSSClasses:function(r){var q=this.get("type");if(k.isString(r)){this.removeClass(this.CSS_CLASS_NAME+("-"+r));this.removeClass("yui-"+q+("-button-"+r))}},createHiddenFields:function(){this.removeHiddenFields();var u=this.getForm(),q,B,x,s,r,w,v,C,y,t,A,z=false;if(u&&!this.get("disabled")){B=this.get("type");x=(B=="checkbox"||B=="radio");if((x&&this.get("checked"))||(p==this)){q=n((x?B:"hidden"),this.get("name"),this.get("value"),this.get("checked"));if(q){if(x){q.style.display="none"}u.appendChild(q)}}s=this._menu;if(j&&s&&(s instanceof j)){r=this.get("selectedMenuItem");A=s.srcElement;z=(A&&A.nodeName.toUpperCase()=="SELECT");if(r){v=(r.value===null||r.value==="")?r.cfg.getProperty("text"):r.value;w=this.get("name");if(z){t=A.name}else{if(w){t=(w+"_options")}}if(v&&t){C=n("hidden",t,v);u.appendChild(C)}}else{if(z){u.appendChild(A)}}}if(q&&C){this._hiddenFields=[q,C]}else{if(!q&&C){this._hiddenFields=C}else{if(q&&!C){this._hiddenFields=q}}}y=this._hiddenFields}return y},removeHiddenFields:function(){var q=this._hiddenFields,s,r;function t(u){if(m.inDocument(u)){u.parentNode.removeChild(u)}}if(q){if(k.isArray(q)){s=q.length;if(s>0){r=s-1;do{t(q[r])}while(r--)}}else{t(q)}this._hiddenFields=null}},submitForm:function(){var q=this.getForm(),r=this.get("srcelement"),s=false,t;if(q){if(this.get("type")=="submit"||(r&&r.type=="submit")){p=this}if(g.ie){s=q.fireEvent("onsubmit")}else{t=document.createEvent("HTMLEvents");t.initEvent("submit",true,true);s=q.dispatchEvent(t)}if((g.ie||g.webkit)&&s){q.submit()}}return s},init:function(B,G){var z=G.type=="link"?"a":"button",u=G.srcelement,q=B.getElementsByTagName(z)[0],s;if(!q){s=B.getElementsByTagName("input")[0];if(s){q=document.createElement("button");q.setAttribute("type","button");s.parentNode.replaceChild(q,s)}}this._button=q;this._hasDefaultTitle=(G.title&&G.title.length>0);YAHOO.widget.Button.superclass.init.call(this,B,G);var w=this.get("id"),C=w+"-button";q.id=C;var v,t;var D=function(H){return(H.htmlFor===w)};var x=function(){t.setAttribute((g.ie?"htmlFor":"for"),C)};if(u&&this.get("type")!="link"){v=m.getElementsBy(D,"label");if(k.isArray(v)&&v.length>0){t=v[0]}}a[w]=this;this.addClass(this.CSS_CLASS_NAME);this.addClass("yui-"+this.get("type")+"-button");f.on(this._button,"focus",this._onFocus,null,this);this.on("mouseover",this._onMouseOver);this.on("mousedown",this._onMouseDown);this.on("mouseup",this._onMouseUp);this.on("click",this._onClick);var r=this.get("onclick");this.set("onclick",null);this.set("onclick",r);this.on("dblclick",this._onDblClick);if(t){this.on("appendTo",x)}this.on("appendTo",this._onAppendTo);var E=this.get("container"),A=this.get("element"),F=m.inDocument(A),y;if(E){if(u&&u!=A){y=u.parentNode;if(y){y.removeChild(u)}}if(k.isString(E)){f.onContentReady(E,this.appendTo,E,this)}else{this.on("init",function(){k.later(0,this,this.appendTo,E)})}}else{if(!F&&u&&u!=A){y=u.parentNode;if(y){this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:y});y.replaceChild(A,u);this.fireEvent("appendTo",{type:"appendTo",target:y})}}else{if(this.get("type")!="link"&&F&&u&&u==A){this._addListenersToForm()}}}this.fireEvent("init",{type:"init",target:this})},initAttributes:function(q){var r=q||{};YAHOO.widget.Button.superclass.initAttributes.call(this,r);this.setAttributeConfig("type",{value:(r.type||"push"),validator:k.isString,writeOnce:true,method:this._setType});this.setAttributeConfig("label",{value:r.label,validator:k.isString,method:this._setLabel});this.setAttributeConfig("value",{value:r.value});this.setAttributeConfig("name",{value:r.name,validator:k.isString});this.setAttributeConfig("tabindex",{value:r.tabindex,validator:k.isNumber,method:this._setTabIndex});this.configureAttribute("title",{value:r.title,validator:k.isString,method:this._setTitle});this.setAttributeConfig("disabled",{value:(r.disabled||false),validator:k.isBoolean,method:this._setDisabled});this.setAttributeConfig("href",{value:r.href,validator:k.isString,method:this._setHref});this.setAttributeConfig("target",{value:r.target,validator:k.isString,method:this._setTarget});this.setAttributeConfig("checked",{value:(r.checked||false),validator:k.isBoolean,method:this._setChecked});this.setAttributeConfig("container",{value:r.container,writeOnce:true});this.setAttributeConfig("srcelement",{value:r.srcelement,writeOnce:true});this.setAttributeConfig("menu",{value:null,method:this._setMenu,writeOnce:true});this.setAttributeConfig("lazyloadmenu",{value:(r.lazyloadmenu===false?false:true),validator:k.isBoolean,writeOnce:true});this.setAttributeConfig("menuclassname",{value:(r.menuclassname||"yui-button-menu"),validator:k.isString,method:this._setMenuClassName,writeOnce:true});this.setAttributeConfig("menuminscrollheight",{value:(r.menuminscrollheight||90),validator:k.isNumber});this.setAttributeConfig("menumaxheight",{value:(r.menumaxheight||0),validator:k.isNumber});this.setAttributeConfig("menualignment",{value:(r.menualignment||["tl","bl"]),validator:k.isArray});this.setAttributeConfig("selectedMenuItem",{value:null});this.setAttributeConfig("onclick",{value:r.onclick,method:this._setOnClick});this.setAttributeConfig("focusmenu",{value:(r.focusmenu===false?false:true),validator:k.isBoolean})},focus:function(){if(!this.get("disabled")){this._button.focus()}},blur:function(){if(!this.get("disabled")){this._button.blur()}},hasFocus:function(){return(b==this)},isActive:function(){return this.hasClass(this.CSS_CLASS_NAME+"-active")},getMenu:function(){return this._menu},getForm:function(){var r=this._button,q;if(r){q=r.form}return q},getHiddenFields:function(){return this._hiddenFields},destroy:function(){var s=this.get("element"),t=s.parentNode,u=this._menu,q;if(u){if(h&&h.find(u)){h.remove(u)}u.destroy()}f.purgeElement(s);f.purgeElement(this._button);f.removeListener(document,"mouseup",this._onDocumentMouseUp);f.removeListener(document,"keyup",this._onDocumentKeyUp);f.removeListener(document,"mousedown",this._onDocumentMouseDown);var r=this.getForm();if(r){f.removeListener(r,"reset",this._onFormReset);f.removeListener(r,"submit",this._onFormSubmit)}this.unsubscribeAll();if(t){t.removeChild(s)}delete a[this.get("id")];q=m.getElementsByClassName(this.CSS_CLASS_NAME,this.NODE_NAME,r);if(k.isArray(q)&&q.length===0){f.removeListener(r,"keypress",YAHOO.widget.Button.onFormKeyPress)}},fireEvent:function(r,s){var q=arguments[0];if(this.DOM_EVENTS[q]&&this.get("disabled")){return false}return YAHOO.widget.Button.superclass.fireEvent.apply(this,arguments)},toString:function(){return("Button "+this.get("id"))}});YAHOO.widget.Button.onFormKeyPress=function(w){var y=f.getTarget(w),v=f.getCharCode(w),x=y.nodeName&&y.nodeName.toUpperCase(),A=y.type,u=false,s,q,z,r;function t(B){var C,D;switch(B.nodeName.toUpperCase()){case"INPUT":case"BUTTON":if(B.type=="submit"&&!B.disabled){if(!u&&!z){z=B}}break;default:C=B.id;if(C){s=a[C];if(s){u=true;if(!s.get("disabled")){D=s.get("srcelement");if(!q&&(s.get("type")=="submit"||(D&&D.type=="submit"))){q=s}}}}break}}if(v==13&&((x=="INPUT"&&(A=="text"||A=="password"||A=="checkbox"||A=="radio"||A=="file"))||x=="SELECT")){m.getElementsBy(t,"*",this);if(z){z.focus()}else{if(!z&&q){f.preventDefault(w);if(g.ie){q.get("element").fireEvent("onclick")}else{r=document.createEvent("HTMLEvents");r.initEvent("click",true,true);if(g.gecko<1.9){q.fireEvent("click",r)}else{q.get("element").dispatchEvent(r)}}}}}};YAHOO.widget.Button.addHiddenFieldsToForm=function(v){var q=m.getElementsByClassName(YAHOO.widget.Button.prototype.CSS_CLASS_NAME,"*",v),s=q.length,r,u,t;if(s>0){for(t=0;t<s;t++){u=q[t].id;if(u){r=a[u];if(r){r.createHiddenFields()}}}}};YAHOO.widget.Button.getButton=function(q){return a[q]}})();(function(){var e=YAHOO.util.Dom,f=YAHOO.util.Event,d=YAHOO.lang,a=YAHOO.widget.Button,b={};YAHOO.widget.ButtonGroup=function(h,k){var j=YAHOO.widget.ButtonGroup.superclass.constructor,g,l,m;if(arguments.length==1&&!d.isString(h)&&!h.nodeName){if(!h.id){m=e.generateId();h.id=m}j.call(this,(this._createGroupElement()),h)}else{if(d.isString(h)){l=e.get(h);if(l){if(l.nodeName.toUpperCase()==this.NODE_NAME){j.call(this,l,k)}}}else{g=h.nodeName.toUpperCase();if(g&&g==this.NODE_NAME){if(!h.id){h.id=e.generateId()}j.call(this,h,k)}}}};YAHOO.extend(YAHOO.widget.ButtonGroup,YAHOO.util.Element,{_buttons:null,NODE_NAME:"DIV",CSS_CLASS_NAME:"yui-buttongroup",_createGroupElement:function(){var g=document.createElement(this.NODE_NAME);return g},_setDisabled:function(h){var g=this.getCount(),j;if(g>0){j=g-1;do{this._buttons[j].set("disabled",h)}while(j--)}},_onKeyDown:function(g){var l=f.getTarget(g),j=f.getCharCode(g),k=l.parentNode.parentNode.id,h=b[k],m=-1;if(j==37||j==38){m=(h.index===0)?(this._buttons.length-1):(h.index-1)}else{if(j==39||j==40){m=(h.index===(this._buttons.length-1))?0:(h.index+1)}}if(m>-1){this.check(m);this.getButton(m).focus()}},_onAppendTo:function(h){var g=this._buttons,j=g.length,k;for(k=0;k<j;k++){g[k].appendTo(this.get("element"))}},_onButtonCheckedChange:function(j,k){var g=j.newValue,h=this.get("checkedButton");if(g&&h!=k){if(h){h.set("checked",false,true)}this.set("checkedButton",k);this.set("value",k.get("value"))}else{if(h&&!h.set("checked")){h.set("checked",true,true)}}},init:function(h,j){this._buttons=[];YAHOO.widget.ButtonGroup.superclass.init.call(this,h,j);this.addClass(this.CSS_CLASS_NAME);var g=this.getElementsByClassName("yui-radio-button");if(g.length>0){this.addButtons(g)}function l(m){return(m.type=="radio")}g=e.getElementsBy(l,"input",this.get("element"));if(g.length>0){this.addButtons(g)}this.on("keydown",this._onKeyDown);this.on("appendTo",this._onAppendTo);var k=this.get("container");if(k){if(d.isString(k)){f.onContentReady(k,function(){this.appendTo(k)},null,this)}else{this.appendTo(k)}}},initAttributes:function(g){var h=g||{};YAHOO.widget.ButtonGroup.superclass.initAttributes.call(this,h);this.setAttributeConfig("name",{value:h.name,validator:d.isString});this.setAttributeConfig("disabled",{value:(h.disabled||false),validator:d.isBoolean,method:this._setDisabled});this.setAttributeConfig("value",{value:h.value});this.setAttributeConfig("container",{value:h.container,writeOnce:true});this.setAttributeConfig("checkedButton",{value:null})},addButton:function(j){var g,h,m,n,l,k;if(j instanceof a&&j.get("type")=="radio"){g=j}else{if(!d.isString(j)&&!j.nodeName){j.type="radio";g=new a(j)}else{g=new a(j,{type:"radio"})}}if(g){n=this._buttons.length;l=g.get("name");k=this.get("name");g.index=n;this._buttons[n]=g;b[g.get("id")]=g;if(l!=k){g.set("name",k)}if(this.get("disabled")){g.set("disabled",true)}if(g.get("checked")){this.set("checkedButton",g)}h=g.get("element");m=this.get("element");if(h.parentNode!=m){m.appendChild(h)}g.on("checkedChange",this._onButtonCheckedChange,g,this)}return g},addButtons:function(k){var j,h,g,l;if(d.isArray(k)){j=k.length;g=[];if(j>0){for(l=0;l<j;l++){h=this.addButton(k[l]);if(h){g[g.length]=h}}}}return g},removeButton:function(h){var g=this.getButton(h),j,k;if(g){this._buttons.splice(h,1);delete b[g.get("id")];g.removeListener("checkedChange",this._onButtonCheckedChange);g.destroy();j=this._buttons.length;if(j>0){k=this._buttons.length-1;do{this._buttons[k].index=k}while(k--)}}},getButton:function(g){return this._buttons[g]},getButtons:function(){return this._buttons},getCount:function(){return this._buttons.length},focus:function(h){var g,j,k;if(d.isNumber(h)){g=this._buttons[h];if(g){g.focus()}}else{j=this.getCount();for(k=0;k<j;k++){g=this._buttons[k];if(!g.get("disabled")){g.focus();break}}}},check:function(h){var g=this.getButton(h);if(g){g.set("checked",true)}},destroy:function(){var g=this._buttons.length,h=this.get("element"),k=h.parentNode,j;if(g>0){j=this._buttons.length-1;do{this._buttons[j].destroy()}while(j--)}f.purgeElement(h);k.removeChild(h)},toString:function(){return("ButtonGroup "+this.get("id"))}})})();YAHOO.register("button",YAHOO.widget.Button,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/button/button-min.js")}(function(){YAHOO.util.Config=function(e){if(e){this.init(e)}};var d=YAHOO.lang,b=YAHOO.util.CustomEvent,a=YAHOO.util.Config;a.CONFIG_CHANGED_EVENT="configChanged";a.BOOLEAN_TYPE="boolean";a.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(e){this.owner=e;this.configChangedEvent=this.createEvent(a.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=b.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(e){return(typeof e==a.BOOLEAN_TYPE)},checkNumber:function(e){return(!isNaN(e))},fireEvent:function(g,e){var f=this.config[g];if(f&&f.event){f.event.fire(e)}},addProperty:function(e,f){e=e.toLowerCase();this.config[e]=f;f.event=this.createEvent(e,{scope:this.owner});f.event.signature=b.LIST;f.key=e;if(f.handler){f.event.subscribe(f.handler,this.owner)}this.setProperty(e,f.value,true);if(!f.suppressEvent){this.queueProperty(e,f.value)}},getConfig:function(){var h={},f=this.config,e,g;for(e in f){if(d.hasOwnProperty(f,e)){g=f[e];if(g&&g.event){h[e]=g.value}}}return h},getProperty:function(f){var e=this.config[f.toLowerCase()];if(e&&e.event){return e.value}else{return undefined}},resetProperty:function(f){f=f.toLowerCase();var e=this.config[f];if(e&&e.event){if(this.initialConfig[f]&&!d.isUndefined(this.initialConfig[f])){this.setProperty(f,this.initialConfig[f]);return true}}else{return false}},setProperty:function(g,e,h){var f;g=g.toLowerCase();if(this.queueInProgress&&!h){this.queueProperty(g,e);return true}else{f=this.config[g];if(f&&f.event){if(f.validator&&!f.validator(e)){return false}else{f.value=e;if(!h){this.fireEvent(g,e);this.configChangedEvent.fire([g,e])}return true}}else{return false}}},queueProperty:function(g,k){g=g.toLowerCase();var h=this.config[g],q=false,r,u,t,s,l,j,v,n,m,e,p,f,w;if(h&&h.event){if(!d.isUndefined(k)&&h.validator&&!h.validator(k)){return false}else{if(!d.isUndefined(k)){h.value=k}else{k=h.value}q=false;r=this.eventQueue.length;for(p=0;p<r;p++){u=this.eventQueue[p];if(u){t=u[0];s=u[1];if(t==g){this.eventQueue[p]=null;this.eventQueue.push([g,(!d.isUndefined(k)?k:s)]);q=true;break}}}if(!q&&!d.isUndefined(k)){this.eventQueue.push([g,k])}}if(h.supercedes){l=h.supercedes.length;for(f=0;f<l;f++){j=h.supercedes[f];v=this.eventQueue.length;for(w=0;w<v;w++){n=this.eventQueue[w];if(n){m=n[0];e=n[1];if(m==j.toLowerCase()){this.eventQueue.push([m,e]);this.eventQueue[w]=null;break}}}}}return true}else{return false}},refireEvent:function(f){f=f.toLowerCase();var e=this.config[f];if(e&&e.event&&!d.isUndefined(e.value)){if(this.queueInProgress){this.queueProperty(f)}else{this.fireEvent(f,e.value)}}},applyConfig:function(h,e){var f,g;if(e){g={};for(f in h){if(d.hasOwnProperty(h,f)){g[f.toLowerCase()]=h[f]}}this.initialConfig=g}for(f in h){if(d.hasOwnProperty(h,f)){this.queueProperty(f,h[f])}}},refresh:function(){var e;for(e in this.config){if(d.hasOwnProperty(this.config,e)){this.refireEvent(e)}}},fireQueue:function(){var h,e,j,f,g;this.queueInProgress=true;for(h=0;h<this.eventQueue.length;h++){e=this.eventQueue[h];if(e){j=e[0];f=e[1];g=this.config[j];g.value=f;this.eventQueue[h]=null;this.fireEvent(j,f)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(h,g,e,j){var f=this.config[h.toLowerCase()];if(f&&f.event){if(!a.alreadySubscribed(f.event,g,e)){f.event.subscribe(g,e,j)}return true}else{return false}},unsubscribeFromConfigEvent:function(h,g,e){var f=this.config[h.toLowerCase()];if(f&&f.event){return f.event.unsubscribe(g,e)}else{return false}},toString:function(){var e="Config";if(this.owner){e+=" ["+this.owner.toString()+"]"}return e},outputEventQueue:function(){var h="",e,g,f=this.eventQueue.length;for(g=0;g<f;g++){e=this.eventQueue[g];if(e){h+=e[0]+"="+e[1]+", "}}return h},destroy:function(){var f=this.config,g,e;for(g in f){if(d.hasOwnProperty(f,g)){e=f[g];e.event.unsubscribeAll();e.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};a.alreadySubscribed=function(j,f,e){var h=j.subscribers.length,k,g;if(h>0){g=h-1;do{k=j.subscribers[g];if(k&&k.obj==e&&k.fn==f){return true}}while(g--)}return false};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Module=function(t,u){if(t){this.init(t,u)}else{}};var r=YAHOO.util.Dom,a=YAHOO.util.Config,h=YAHOO.util.Event,j=YAHOO.util.CustomEvent,q=YAHOO.widget.Module,n=YAHOO.env.ua,p,f,g,s,e={BEFORE_INIT:"beforeInit",INIT:"init",APPEND:"append",BEFORE_RENDER:"beforeRender",RENDER:"render",CHANGE_HEADER:"changeHeader",CHANGE_BODY:"changeBody",CHANGE_FOOTER:"changeFooter",CHANGE_CONTENT:"changeContent",DESTORY:"destroy",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE:"beforeHide",HIDE:"hide"},m={VISIBLE:{key:"visible",value:true,validator:YAHOO.lang.isBoolean},EFFECT:{key:"effect",suppressEvent:true,supercedes:["visible"]},MONITOR_RESIZE:{key:"monitorresize",value:true},APPEND_TO_DOCUMENT_BODY:{key:"appendtodocumentbody",value:false}};q.IMG_ROOT=null;q.IMG_ROOT_SSL=null;q.CSS_MODULE="yui-module";q.CSS_HEADER="hd";q.CSS_BODY="bd";q.CSS_FOOTER="ft";q.RESIZE_MONITOR_SECURE_URL="javascript:false;";q.RESIZE_MONITOR_BUFFER=1;q.textResizeEvent=new j("textResize");q.forceDocumentRedraw=function(){var t=document.documentElement;if(t){t.className+=" ";t.className=YAHOO.lang.trim(t.className)}};function k(){if(!p){p=document.createElement("div");p.innerHTML=('<div class="'+q.CSS_HEADER+'"></div><div class="'+q.CSS_BODY+'"></div><div class="'+q.CSS_FOOTER+'"></div>');f=p.firstChild;g=f.nextSibling;s=g.nextSibling}return p}function l(){if(!f){k()}return(f.cloneNode(false))}function d(){if(!g){k()}return(g.cloneNode(false))}function b(){if(!s){k()}return(s.cloneNode(false))}q.prototype={constructor:q,element:null,header:null,body:null,footer:null,id:null,imageRoot:q.IMG_ROOT,initEvents:function(){var t=j.LIST;this.beforeInitEvent=this.createEvent(e.BEFORE_INIT);this.beforeInitEvent.signature=t;this.initEvent=this.createEvent(e.INIT);this.initEvent.signature=t;this.appendEvent=this.createEvent(e.APPEND);this.appendEvent.signature=t;this.beforeRenderEvent=this.createEvent(e.BEFORE_RENDER);this.beforeRenderEvent.signature=t;this.renderEvent=this.createEvent(e.RENDER);this.renderEvent.signature=t;this.changeHeaderEvent=this.createEvent(e.CHANGE_HEADER);this.changeHeaderEvent.signature=t;this.changeBodyEvent=this.createEvent(e.CHANGE_BODY);this.changeBodyEvent.signature=t;this.changeFooterEvent=this.createEvent(e.CHANGE_FOOTER);this.changeFooterEvent.signature=t;this.changeContentEvent=this.createEvent(e.CHANGE_CONTENT);this.changeContentEvent.signature=t;this.destroyEvent=this.createEvent(e.DESTORY);this.destroyEvent.signature=t;this.beforeShowEvent=this.createEvent(e.BEFORE_SHOW);this.beforeShowEvent.signature=t;this.showEvent=this.createEvent(e.SHOW);this.showEvent.signature=t;this.beforeHideEvent=this.createEvent(e.BEFORE_HIDE);this.beforeHideEvent.signature=t;this.hideEvent=this.createEvent(e.HIDE);this.hideEvent.signature=t},platform:function(){var t=navigator.userAgent.toLowerCase();if(t.indexOf("windows")!=-1||t.indexOf("win32")!=-1){return"windows"}else{if(t.indexOf("macintosh")!=-1){return"mac"}else{return false}}}(),browser:function(){var t=navigator.userAgent.toLowerCase();if(t.indexOf("opera")!=-1){return"opera"}else{if(t.indexOf("msie 7")!=-1){return"ie7"}else{if(t.indexOf("msie")!=-1){return"ie"}else{if(t.indexOf("safari")!=-1){return"safari"}else{if(t.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true}else{return false}}(),initDefaultConfig:function(){this.cfg.addProperty(m.VISIBLE.key,{handler:this.configVisible,value:m.VISIBLE.value,validator:m.VISIBLE.validator});this.cfg.addProperty(m.EFFECT.key,{suppressEvent:m.EFFECT.suppressEvent,supercedes:m.EFFECT.supercedes});this.cfg.addProperty(m.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:m.MONITOR_RESIZE.value});this.cfg.addProperty(m.APPEND_TO_DOCUMENT_BODY.key,{value:m.APPEND_TO_DOCUMENT_BODY.value})},init:function(u,v){var x,t;this.initEvents();this.beforeInitEvent.fire(q);this.cfg=new a(this);if(this.isSecure){this.imageRoot=q.IMG_ROOT_SSL}if(typeof u=="string"){x=u;u=document.getElementById(u);if(!u){u=(k()).cloneNode(false);u.id=x}}this.id=r.generateId(u);this.element=u;t=this.element.firstChild;if(t){var y=false,z=false,w=false;do{if(1==t.nodeType){if(!y&&r.hasClass(t,q.CSS_HEADER)){this.header=t;y=true}else{if(!z&&r.hasClass(t,q.CSS_BODY)){this.body=t;z=true}else{if(!w&&r.hasClass(t,q.CSS_FOOTER)){this.footer=t;w=true}}}}}while((t=t.nextSibling))}this.initDefaultConfig();r.addClass(this.element,q.CSS_MODULE);if(v){this.cfg.applyConfig(v,true)}if(!a.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true)}this.initEvent.fire(q)},initResizeMonitor:function(){var t=(n.gecko&&this.platform=="windows");if(t){var u=this;setTimeout(function(){u._initResizeMonitor()},0)}else{this._initResizeMonitor()}},_initResizeMonitor:function(){var z,x,v;function t(){q.textResizeEvent.fire()}if(!n.opera){x=r.get("_yuiResizeMonitor");var u=this._supportsCWResize();if(!x){x=document.createElement("iframe");if(this.isSecure&&q.RESIZE_MONITOR_SECURE_URL&&n.ie){x.src=q.RESIZE_MONITOR_SECURE_URL}if(!u){v=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");x.src="data:text/html;charset=utf-8,"+encodeURIComponent(v)}x.id="_yuiResizeMonitor";x.title="Text Resize Monitor";x.style.position="absolute";x.style.visibility="hidden";var y=document.body,w=y.firstChild;if(w){y.insertBefore(x,w)}else{y.appendChild(x)}x.style.width="2em";x.style.height="2em";x.style.top=(-1*(x.offsetHeight+q.RESIZE_MONITOR_BUFFER))+"px";x.style.left="0";x.style.borderWidth="0";x.style.visibility="visible";if(n.webkit){z=x.contentWindow.document;z.open();z.close()}}if(x&&x.contentWindow){q.textResizeEvent.subscribe(this.onDomResize,this,true);if(!q.textResizeInitialized){if(u){if(!h.on(x.contentWindow,"resize",t)){h.on(x,"resize",t)}}q.textResizeInitialized=true}this.resizeMonitor=x}}},_supportsCWResize:function(){var t=true;if(n.gecko&&n.gecko<=1.8){t=false}return t},onDomResize:function(t,u){var v=-1*(this.resizeMonitor.offsetHeight+q.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=v+"px";this.resizeMonitor.style.left="0"},setHeader:function(t){var u=this.header||(this.header=l());if(t.nodeName){u.innerHTML="";u.appendChild(t)}else{u.innerHTML=t}this.changeHeaderEvent.fire(t);this.changeContentEvent.fire()},appendToHeader:function(t){var u=this.header||(this.header=l());u.appendChild(t);this.changeHeaderEvent.fire(t);this.changeContentEvent.fire()},setBody:function(t){var u=this.body||(this.body=d());if(t.nodeName){u.innerHTML="";u.appendChild(t)}else{u.innerHTML=t}this.changeBodyEvent.fire(t);this.changeContentEvent.fire()},appendToBody:function(t){var u=this.body||(this.body=d());u.appendChild(t);this.changeBodyEvent.fire(t);this.changeContentEvent.fire()},setFooter:function(t){var u=this.footer||(this.footer=b());if(t.nodeName){u.innerHTML="";u.appendChild(t)}else{u.innerHTML=t}this.changeFooterEvent.fire(t);this.changeContentEvent.fire()},appendToFooter:function(t){var u=this.footer||(this.footer=b());u.appendChild(t);this.changeFooterEvent.fire(t);this.changeContentEvent.fire()},render:function(v,x){var u=this,t;function w(y){if(typeof y=="string"){y=document.getElementById(y)}if(y){u._addToParent(y,u.element);u.appendEvent.fire()}}this.beforeRenderEvent.fire();if(!x){x=this.element}if(v){w(v)}else{if(!r.inDocument(this.element)){return false}}if(this.header&&!r.inDocument(this.header)){t=x.firstChild;if(t){x.insertBefore(this.header,t)}else{x.appendChild(this.header)}}if(this.body&&!r.inDocument(this.body)){if(this.footer&&r.isAncestor(this.moduleElement,this.footer)){x.insertBefore(this.body,this.footer)}else{x.appendChild(this.body)}}if(this.footer&&!r.inDocument(this.footer)){x.appendChild(this.footer)}this.renderEvent.fire();return true},destroy:function(){var t;if(this.element){h.purgeElement(this.element,true);t=this.element.parentNode}if(t){t.removeChild(this.element)}this.element=null;this.header=null;this.body=null;this.footer=null;q.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire()},show:function(){this.cfg.setProperty("visible",true)},hide:function(){this.cfg.setProperty("visible",false)},configVisible:function(v,w,u){var t=w[0];if(t){this.beforeShowEvent.fire();r.setStyle(this.element,"display","block");this.showEvent.fire()}else{this.beforeHideEvent.fire();r.setStyle(this.element,"display","none");this.hideEvent.fire()}},configMonitorResize:function(u,v,t){var w=v[0];if(w){this.initResizeMonitor()}else{q.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null}},_addToParent:function(u,t){if(!this.cfg.getProperty("appendtodocumentbody")&&u===document.body&&u.firstChild){u.insertBefore(t,u.firstChild)}else{u.appendChild(t)}},toString:function(){return"Module "+this.id}};YAHOO.lang.augmentProto(q,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Overlay=function(r,s){YAHOO.widget.Overlay.superclass.constructor.call(this,r,s)};var l=YAHOO.lang,g=YAHOO.util.CustomEvent,n=YAHOO.widget.Module,f=YAHOO.util.Event,p=YAHOO.util.Dom,a=YAHOO.util.Config,j=YAHOO.env.ua,d=YAHOO.widget.Overlay,m="subscribe",q="unsubscribe",b="contained",k,e={BEFORE_MOVE:"beforeMove",MOVE:"move"},h={X:{key:"x",validator:l.isNumber,suppressEvent:true,supercedes:["iframe"]},Y:{key:"y",validator:l.isNumber,suppressEvent:true,supercedes:["iframe"]},XY:{key:"xy",suppressEvent:true,supercedes:["iframe"]},CONTEXT:{key:"context",suppressEvent:true,supercedes:["iframe"]},FIXED_CENTER:{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},WIDTH:{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},HEIGHT:{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},AUTO_FILL_HEIGHT:{key:"autofillheight",supercedes:["height"],value:"body"},ZINDEX:{key:"zindex",value:null},CONSTRAIN_TO_VIEWPORT:{key:"constraintoviewport",value:false,validator:l.isBoolean,supercedes:["iframe","x","y","xy"]},IFRAME:{key:"iframe",value:(j.ie==6?true:false),validator:l.isBoolean,supercedes:["zindex"]},PREVENT_CONTEXT_OVERLAP:{key:"preventcontextoverlap",value:false,validator:l.isBoolean,supercedes:["constraintoviewport"]}};d.IFRAME_SRC="javascript:false;";d.IFRAME_OFFSET=3;d.VIEWPORT_OFFSET=10;d.TOP_LEFT="tl";d.TOP_RIGHT="tr";d.BOTTOM_LEFT="bl";d.BOTTOM_RIGHT="br";d.CSS_OVERLAY="yui-overlay";d.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;d.windowScrollEvent=new g("windowScroll");d.windowResizeEvent=new g("windowResize");d.windowScrollHandler=function(r){var s=f.getTarget(r);if(!s||s===window||s===window.document){if(j.ie){if(!window.scrollEnd){window.scrollEnd=-1}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){d.windowScrollEvent.fire()},1)}else{d.windowScrollEvent.fire()}}};d.windowResizeHandler=function(r){if(j.ie){if(!window.resizeEnd){window.resizeEnd=-1}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){d.windowResizeEvent.fire()},100)}else{d.windowResizeEvent.fire()}};d._initialized=null;if(d._initialized===null){f.on(window,"scroll",d.windowScrollHandler);f.on(window,"resize",d.windowResizeHandler);d._initialized=true}d._TRIGGER_MAP={windowScroll:d.windowScrollEvent,windowResize:d.windowResizeEvent,textResize:n.textResizeEvent};YAHOO.extend(d,n,{CONTEXT_TRIGGERS:[],init:function(r,s){d.superclass.init.call(this,r);this.beforeInitEvent.fire(d);p.addClass(this.element,d.CSS_OVERLAY);if(s){this.cfg.applyConfig(s,true)}if(this.platform=="mac"&&j.gecko){if(!a.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true)}if(!a.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true)}}this.initEvent.fire(d)},initEvents:function(){d.superclass.initEvents.call(this);var r=g.LIST;this.beforeMoveEvent=this.createEvent(e.BEFORE_MOVE);this.beforeMoveEvent.signature=r;this.moveEvent=this.createEvent(e.MOVE);this.moveEvent.signature=r},initDefaultConfig:function(){d.superclass.initDefaultConfig.call(this);var r=this.cfg;r.addProperty(h.X.key,{handler:this.configX,validator:h.X.validator,suppressEvent:h.X.suppressEvent,supercedes:h.X.supercedes});r.addProperty(h.Y.key,{handler:this.configY,validator:h.Y.validator,suppressEvent:h.Y.suppressEvent,supercedes:h.Y.supercedes});r.addProperty(h.XY.key,{handler:this.configXY,suppressEvent:h.XY.suppressEvent,supercedes:h.XY.supercedes});r.addProperty(h.CONTEXT.key,{handler:this.configContext,suppressEvent:h.CONTEXT.suppressEvent,supercedes:h.CONTEXT.supercedes});r.addProperty(h.FIXED_CENTER.key,{handler:this.configFixedCenter,value:h.FIXED_CENTER.value,validator:h.FIXED_CENTER.validator,supercedes:h.FIXED_CENTER.supercedes});r.addProperty(h.WIDTH.key,{handler:this.configWidth,suppressEvent:h.WIDTH.suppressEvent,supercedes:h.WIDTH.supercedes});r.addProperty(h.HEIGHT.key,{handler:this.configHeight,suppressEvent:h.HEIGHT.suppressEvent,supercedes:h.HEIGHT.supercedes});r.addProperty(h.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:h.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:h.AUTO_FILL_HEIGHT.supercedes});r.addProperty(h.ZINDEX.key,{handler:this.configzIndex,value:h.ZINDEX.value});r.addProperty(h.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:h.CONSTRAIN_TO_VIEWPORT.value,validator:h.CONSTRAIN_TO_VIEWPORT.validator,supercedes:h.CONSTRAIN_TO_VIEWPORT.supercedes});r.addProperty(h.IFRAME.key,{handler:this.configIframe,value:h.IFRAME.value,validator:h.IFRAME.validator,supercedes:h.IFRAME.supercedes});r.addProperty(h.PREVENT_CONTEXT_OVERLAP.key,{value:h.PREVENT_CONTEXT_OVERLAP.value,validator:h.PREVENT_CONTEXT_OVERLAP.validator,supercedes:h.PREVENT_CONTEXT_OVERLAP.supercedes})},moveTo:function(s,r){this.cfg.setProperty("xy",[s,r])},hideMacGeckoScrollbars:function(){p.replaceClass(this.element,"show-scrollbars","hide-scrollbars")},showMacGeckoScrollbars:function(){p.replaceClass(this.element,"hide-scrollbars","show-scrollbars")},_setDomVisibility:function(r){p.setStyle(this.element,"visibility",(r)?"visible":"hidden");if(r){p.removeClass(this.element,"yui-overlay-hidden")}else{p.addClass(this.element,"yui-overlay-hidden")}},configVisible:function(z,C,t){var A=C[0],y=p.getStyle(this.element,"visibility"),s=this.cfg.getProperty("effect"),v=[],w=(this.platform=="mac"&&j.gecko),D=a.alreadySubscribed,u,B,E,G,H,I,F,r,x;if(y=="inherit"){E=this.element.parentNode;while(E.nodeType!=9&&E.nodeType!=11){y=p.getStyle(E,"visibility");if(y!="inherit"){break}E=E.parentNode}if(y=="inherit"){y="visible"}}if(s){if(s instanceof Array){r=s.length;for(G=0;G<r;G++){u=s[G];v[v.length]=u.effect(this,u.duration)}}else{v[v.length]=s.effect(this,s.duration)}}if(A){if(w){this.showMacGeckoScrollbars()}if(s){if(A){if(y!="visible"||y===""){this.beforeShowEvent.fire();x=v.length;for(H=0;H<x;H++){B=v[H];if(H===0&&!D(B.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){B.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true)}B.animateIn()}}}}else{if(y!="visible"||y===""){this.beforeShowEvent.fire();this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire()}else{this._setDomVisibility(true)}}}else{if(w){this.hideMacGeckoScrollbars()}if(s){if(y=="visible"){this.beforeHideEvent.fire();x=v.length;for(I=0;I<x;I++){F=v[I];if(I===0&&!D(F.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){F.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true)}F.animateOut()}}else{if(y===""){this._setDomVisibility(false)}}}else{if(y=="visible"||y===""){this.beforeHideEvent.fire();this._setDomVisibility(false);this.hideEvent.fire()}else{this._setDomVisibility(false)}}}},doCenterOnDOMEvent:function(){var s=this.cfg,r=s.getProperty("fixedcenter");if(s.getProperty("visible")){if(r&&(r!==b||this.fitsInViewport())){this.center()}}},fitsInViewport:function(){var s=d.VIEWPORT_OFFSET,u=this.element,r=u.offsetWidth,t=u.offsetHeight,w=p.getViewportWidth(),v=p.getViewportHeight();return((r+s<w)&&(t+s<v))},configFixedCenter:function(t,v,s){var r=v[0],w=a.alreadySubscribed,u=d.windowResizeEvent,x=d.windowScrollEvent;if(r){this.center();if(!w(this.beforeShowEvent,this.center)){this.beforeShowEvent.subscribe(this.center)}if(!w(u,this.doCenterOnDOMEvent,this)){u.subscribe(this.doCenterOnDOMEvent,this,true)}if(!w(x,this.doCenterOnDOMEvent,this)){x.subscribe(this.doCenterOnDOMEvent,this,true)}}else{this.beforeShowEvent.unsubscribe(this.center);u.unsubscribe(this.doCenterOnDOMEvent,this);x.unsubscribe(this.doCenterOnDOMEvent,this)}},configHeight:function(s,u,r){var v=u[0],t=this.element;p.setStyle(t,"height",v);this.cfg.refireEvent("iframe")},configAutoFillHeight:function(u,v,y){var s=v[0],x=this.cfg,t="autofillheight",r="height",w=x.getProperty(t),z=this._autoFillOnHeightChange;x.unsubscribeFromConfigEvent(r,z);n.textResizeEvent.unsubscribe(z);this.changeContentEvent.unsubscribe(z);if(w&&s!==w&&this[w]){p.setStyle(this[w],r,"")}if(s){s=l.trim(s.toLowerCase());x.subscribeToConfigEvent(r,z,this[s],this);n.textResizeEvent.subscribe(z,this[s],this);this.changeContentEvent.subscribe(z,this[s],this);x.setProperty(t,s,true)}},configWidth:function(s,v,r){var t=v[0],u=this.element;p.setStyle(u,"width",t);this.cfg.refireEvent("iframe")},configzIndex:function(t,v,s){var r=v[0],u=this.element;if(!r){r=p.getStyle(u,"zIndex");if(!r||isNaN(r)){r=0}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(r<=0){r=1}}p.setStyle(u,"zIndex",r);this.cfg.setProperty("zIndex",r,true);if(this.iframe){this.stackIframe()}},configXY:function(u,v,t){var r=v[0],w=r[0],s=r[1];this.cfg.setProperty("x",w);this.cfg.setProperty("y",s);this.beforeMoveEvent.fire([w,s]);w=this.cfg.getProperty("x");s=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([w,s])},configX:function(t,u,s){var v=u[0],r=this.cfg.getProperty("y");this.cfg.setProperty("x",v,true);this.cfg.setProperty("y",r,true);this.beforeMoveEvent.fire([v,r]);v=this.cfg.getProperty("x");r=this.cfg.getProperty("y");p.setX(this.element,v,true);this.cfg.setProperty("xy",[v,r],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([v,r])},configY:function(t,u,s){var v=this.cfg.getProperty("x"),r=u[0];this.cfg.setProperty("x",v,true);this.cfg.setProperty("y",r,true);this.beforeMoveEvent.fire([v,r]);v=this.cfg.getProperty("x");r=this.cfg.getProperty("y");p.setY(this.element,r,true);this.cfg.setProperty("xy",[v,r],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([v,r])},showIframe:function(){var r=this.iframe,s;if(r){s=this.element.parentNode;if(s!=r.parentNode){this._addToParent(s,r)}r.style.display="block"}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none"}},syncIframe:function(){var v=this.iframe,t=this.element,r=d.IFRAME_OFFSET,u=(r*2),s;if(v){v.style.width=(t.offsetWidth+u+"px");v.style.height=(t.offsetHeight+u+"px");s=this.cfg.getProperty("xy");if(!l.isArray(s)||(isNaN(s[0])||isNaN(s[1]))){this.syncPosition();s=this.cfg.getProperty("xy")}p.setXY(v,[(s[0]-r),(s[1]-r)])}},stackIframe:function(){if(this.iframe){var r=p.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(r)&&!isNaN(r)){p.setStyle(this.iframe,"zIndex",(r-1))}}},configIframe:function(t,u,s){var w=u[0];function r(){var y=this.iframe,x=this.element,A;if(!y){if(!k){k=document.createElement("iframe");if(this.isSecure){k.src=d.IFRAME_SRC}if(j.ie){k.style.filter="alpha(opacity=0)";k.frameBorder=0}else{k.style.opacity="0"}k.style.position="absolute";k.style.border="none";k.style.margin="0";k.style.padding="0";k.style.display="none";k.tabIndex=-1}y=k.cloneNode(false);A=x.parentNode;var z=A||document.body;this._addToParent(z,y);this.iframe=y}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true}}function v(){r.call(this);this.beforeShowEvent.unsubscribe(v);this._iframeDeferred=false}if(w){if(this.cfg.getProperty("visible")){r.call(this)}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(v);this._iframeDeferred=true}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM)}},configConstrainToViewport:function(t,u,s){var r=u[0];if(r){if(!a.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true)}if(!a.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM)}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this)}},configContext:function(u,v,y){var r=v[0],x,z,t,w,s=this.CONTEXT_TRIGGERS;if(r){x=r[0];z=r[1];t=r[2];w=r[3];if(s&&s.length>0){w=(w||[]).concat(s)}if(x){if(typeof x=="string"){this.cfg.setProperty("context",[document.getElementById(x),z,t,w],true)}if(z&&t){this.align(z,t)}if(this._contextTriggers){this._processTriggers(this._contextTriggers,q,this._alignOnTrigger)}if(w){this._processTriggers(w,m,this._alignOnTrigger);this._contextTriggers=w}}}},_alignOnTrigger:function(r,s){this.align()},_findTriggerCE:function(s){var r=null;if(s instanceof g){r=s}else{if(d._TRIGGER_MAP[s]){r=d._TRIGGER_MAP[s]}}return r},_processTriggers:function(t,r,u){var v,s;for(var w=0,x=t.length;w<x;++w){v=t[w];s=this._findTriggerCE(v);if(s){s[r](u,this,true)}else{this[r](v,u)}}},align:function(x,y){var s=this.cfg.getProperty("context"),t=this,u,v,r;function w(z,A){switch(x){case d.TOP_LEFT:t.moveTo(A,z);break;case d.TOP_RIGHT:t.moveTo((A-v.offsetWidth),z);break;case d.BOTTOM_LEFT:t.moveTo(A,(z-v.offsetHeight));break;case d.BOTTOM_RIGHT:t.moveTo((A-v.offsetWidth),(z-v.offsetHeight));break}}if(s){u=s[0];v=this.element;t=this;if(!x){x=s[1]}if(!y){y=s[2]}if(v&&u){r=p.getRegion(u);switch(y){case d.TOP_LEFT:w(r.top,r.left);break;case d.TOP_RIGHT:w(r.top,r.right);break;case d.BOTTOM_LEFT:w(r.bottom,r.left);break;case d.BOTTOM_RIGHT:w(r.bottom,r.right);break}}}},enforceConstraints:function(u,v,t){var r=v[0];var s=this.getConstrainedXY(r[0],r[1]);this.cfg.setProperty("x",s[0],true);this.cfg.setProperty("y",s[1],true);this.cfg.setProperty("xy",s,true)},getConstrainedX:function(v){var y=this,C=y.element,I=C.offsetWidth,K=d.VIEWPORT_OFFSET,F=p.getViewportWidth(),J=p.getDocumentScrollLeft(),s=(I+K<F),L=this.cfg.getProperty("context"),A,t,D,x=false,H,u,G=J+K,B=J+F-I-K,E=v,w={tltr:true,blbr:true,brbl:true,trtl:true};var r=function(){var N;if((y.cfg.getProperty("x")-J)>t){N=(t-I)}else{N=(t+D)}y.cfg.setProperty("x",(N+J),true);return N};var z=function(){if((y.cfg.getProperty("x")-J)>t){return(u-K)}else{return(H-K)}};var M=function(){var O=z(),N;if(I>O){if(x){r()}else{r();x=true;N=M()}}return N};if(v<G||v>B){if(s){if(this.cfg.getProperty("preventcontextoverlap")&&L&&w[(L[1]+L[2])]){A=L[0];t=p.getX(A)-J;D=A.offsetWidth;H=t;u=(F-(t+D));M();E=this.cfg.getProperty("x")}else{if(v<G){E=G}else{if(v>B){E=B}}}}else{E=K+J}}return E},getConstrainedY:function(r){var u=this,B=u.element,E=B.offsetHeight,F=d.VIEWPORT_OFFSET,J=p.getViewportHeight(),G=p.getDocumentScrollTop(),I=(E+F<J),H=this.cfg.getProperty("context"),w,M,L,t=false,v,A,K=G+F,y=G+J-E-F,C=r,s={trbr:true,tlbl:true,bltl:true,brtr:true};var x=function(){var N;if((u.cfg.getProperty("y")-G)>M){N=(M-E)}else{N=(M+L)}u.cfg.setProperty("y",(N+G),true);return N};var z=function(){if((u.cfg.getProperty("y")-G)>M){return(A-F)}else{return(v-F)}};var D=function(){var N=z(),O;if(E>N){if(t){x()}else{x();t=true;O=D()}}return O};if(r<K||r>y){if(I){if(this.cfg.getProperty("preventcontextoverlap")&&H&&s[(H[1]+H[2])]){w=H[0];L=w.offsetHeight;M=(p.getY(w)-G);v=M;A=(J-(M+L));D();C=u.cfg.getProperty("y")}else{if(r<K){C=K}else{if(r>y){C=y}}}}else{C=F+G}}return C},getConstrainedXY:function(s,r){return[this.getConstrainedX(s),this.getConstrainedY(r)]},center:function(){var u=d.VIEWPORT_OFFSET,t=this.element.offsetWidth,v=this.element.offsetHeight,w=p.getViewportWidth(),s=p.getViewportHeight(),x,r;if(t<w){x=(w/2)-(t/2)+p.getDocumentScrollLeft()}else{x=u+p.getDocumentScrollLeft()}if(v<s){r=(s/2)-(v/2)+p.getDocumentScrollTop()}else{r=u+p.getDocumentScrollTop()}this.cfg.setProperty("xy",[parseInt(x,10),parseInt(r,10)]);this.cfg.refireEvent("iframe");if(j.webkit){this.forceContainerRedraw()}},syncPosition:function(){var r=p.getXY(this.element);this.cfg.setProperty("x",r[0],true);this.cfg.setProperty("y",r[1],true);this.cfg.setProperty("xy",r,true)},onDomResize:function(r,s){var t=this;d.superclass.onDomResize.call(this,r,s);setTimeout(function(){t.syncPosition();t.cfg.refireEvent("iframe");t.cfg.refireEvent("context")},0)},_getComputedHeight:(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(s){var t=null;if(s.ownerDocument&&s.ownerDocument.defaultView){var r=s.ownerDocument.defaultView.getComputedStyle(s,"");if(r){t=parseInt(r.height,10)}}return(l.isNumber(t))?t:null}}else{return function(r){var s=null;if(r.style.pixelHeight){s=r.style.pixelHeight}return(l.isNumber(s))?s:null}}})(),_validateAutoFillHeight:function(r){return(!r)||(l.isString(r)&&d.STD_MOD_RE.test(r))},_autoFillOnHeightChange:function(r,t,s){var u=this.cfg.getProperty("height");if((u&&u!=="auto")||(u===0)){this.fillHeight(s)}},_getPreciseHeight:function(s){var t=s.offsetHeight;if(s.getBoundingClientRect){var r=s.getBoundingClientRect();t=r.bottom-r.top}return t},fillHeight:function(x){if(x){var z=this.innerElement||this.element,A=[this.header,this.body,this.footer],t,s=0,r=0,v=0,y=false;for(var u=0,w=A.length;u<w;u++){t=A[u];if(t){if(x!==t){r+=this._getPreciseHeight(t)}else{y=true}}}if(y){if(j.ie||j.opera){p.setStyle(x,"height",0+"px")}s=this._getComputedHeight(z);if(s===null){p.addClass(z,"yui-override-padding");s=z.clientHeight;p.removeClass(z,"yui-override-padding")}v=Math.max(s-r,0);p.setStyle(x,"height",v+"px");if(x.offsetHeight!=v){v=Math.max(v-(x.offsetHeight-v),0)}p.setStyle(x,"height",v+"px")}}},bringToTop:function(){var u=[],v=this.element;function r(C,D){var A=p.getStyle(C,"zIndex"),B=p.getStyle(D,"zIndex"),E=(!A||isNaN(A))?0:parseInt(A,10),z=(!B||isNaN(B))?0:parseInt(B,10);if(E>z){return -1}else{if(E<z){return 1}else{return 0}}}function w(A){var B=p.hasClass(A,d.CSS_OVERLAY),z=YAHOO.widget.Panel;if(B&&!p.isAncestor(v,A)){if(z&&p.hasClass(A,z.CSS_PANEL)){u[u.length]=A.parentNode}else{u[u.length]=A}}}p.getElementsBy(w,"DIV",document.body);u.sort(r);var y=u[0],s;if(y){s=p.getStyle(y,"zIndex");if(!isNaN(s)){var t=false;if(y!=v){t=true}else{if(u.length>1){var x=p.getStyle(u[1],"zIndex");if(!isNaN(x)&&(s==x)){t=true}}}if(t){this.cfg.setProperty("zindex",(parseInt(s,10)+2))}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null;d.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);d.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);n.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);d.superclass.destroy.call(this)},forceContainerRedraw:function(){var r=this;p.addClass(r.element,"yui-force-redraw");setTimeout(function(){p.removeClass(r.element,"yui-force-redraw")},0)},toString:function(){return"Overlay "+this.id}})}());(function(){YAHOO.widget.OverlayManager=function(h){this.init(h)};var e=YAHOO.widget.Overlay,f=YAHOO.util.Event,d=YAHOO.util.Dom,g=YAHOO.util.Config,b=YAHOO.util.CustomEvent,a=YAHOO.widget.OverlayManager;a.CSS_FOCUSED="focused";a.prototype={constructor:a,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"})},init:function(h){this.cfg=new g(this);this.initDefaultConfig();if(h){this.cfg.applyConfig(h,true)}this.cfg.fireQueue();var j=null;this.getActive=function(){return j};this.focus=function(m){var l=this.find(m);if(l){l.focus()}};this.remove=function(m){var p=this.find(m),n;if(p){if(j==p){j=null}var l=(p.element===null&&p.cfg===null)?true:false;if(!l){n=d.getStyle(p.element,"zIndex");p.cfg.setProperty("zIndex",-1000,true)}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));p.hideEvent.unsubscribe(p.blur);p.destroyEvent.unsubscribe(this._onOverlayDestroy,p);p.focusEvent.unsubscribe(this._onOverlayFocusHandler,p);p.blurEvent.unsubscribe(this._onOverlayBlurHandler,p);if(!l){f.removeListener(p.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);p.cfg.setProperty("zIndex",n,true);p.cfg.setProperty("manager",null)}if(p.focusEvent._managed){p.focusEvent=null}if(p.blurEvent._managed){p.blurEvent=null}if(p.focus._managed){p.focus=null}if(p.blur._managed){p.blur=null}}};this.blurAll=function(){var l=this.overlays.length,m;if(l>0){m=l-1;do{this.overlays[m].blur()}while(m--)}};this._manageBlur=function(m){var l=false;if(j==m){d.removeClass(j.element,a.CSS_FOCUSED);j=null;l=true}return l};this._manageFocus=function(m){var l=false;if(j!=m){if(j){j.blur()}j=m;this.bringToTop(j);d.addClass(j.element,a.CSS_FOCUSED);l=true}return l};var k=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[]}if(k){this.register(k);this.overlays.sort(this.compareZIndexDesc)}},_onOverlayElementFocus:function(h){var k=f.getTarget(h),j=this.close;if(j&&(k==j||d.isAncestor(j,k))){this.blur()}else{this.focus()}},_onOverlayDestroy:function(j,k,h){this.remove(h)},_onOverlayFocusHandler:function(j,k,h){this._manageFocus(h)},_onOverlayBlurHandler:function(j,k,h){this._manageBlur(h)},_bindFocus:function(j){var h=this;if(!j.focusEvent){j.focusEvent=j.createEvent("focus");j.focusEvent.signature=b.LIST;j.focusEvent._managed=true}else{j.focusEvent.subscribe(h._onOverlayFocusHandler,j,h)}if(!j.focus){f.on(j.element,h.cfg.getProperty("focusevent"),h._onOverlayElementFocus,null,j);j.focus=function(){if(h._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst){this.focusFirst()}this.focusEvent.fire()}};j.focus._managed=true}},_bindBlur:function(j){var h=this;if(!j.blurEvent){j.blurEvent=j.createEvent("blur");j.blurEvent.signature=b.LIST;j.focusEvent._managed=true}else{j.blurEvent.subscribe(h._onOverlayBlurHandler,j,h)}if(!j.blur){j.blur=function(){if(h._manageBlur(this)){this.blurEvent.fire()}};j.blur._managed=true}j.hideEvent.subscribe(j.blur)},_bindDestroy:function(j){var h=this;j.destroyEvent.subscribe(h._onOverlayDestroy,j,h)},_syncZIndex:function(j){var h=d.getStyle(j.element,"zIndex");if(!isNaN(h)){j.cfg.setProperty("zIndex",parseInt(h,10))}else{j.cfg.setProperty("zIndex",0)}},register:function(l){var h=false,k,j;if(l instanceof e){l.cfg.addProperty("manager",{value:this});this._bindFocus(l);this._bindBlur(l);this._bindDestroy(l);this._syncZIndex(l);this.overlays.push(l);this.bringToTop(l);h=true}else{if(l instanceof Array){for(k=0,j=l.length;k<j;k++){h=this.register(l[k])||h}}}return h},bringToTop:function(p){var l=this.find(p),h,n,k;if(l){k=this.overlays;k.sort(this.compareZIndexDesc);n=k[0];if(n){h=d.getStyle(n.element,"zIndex");if(!isNaN(h)){var j=false;if(n!==l){j=true}else{if(k.length>1){var m=d.getStyle(k[1].element,"zIndex");if(!isNaN(m)&&(h==m)){j=true}}}if(j){l.cfg.setProperty("zindex",(parseInt(h,10)+2))}}k.sort(this.compareZIndexDesc)}}},find:function(n){var j=n instanceof e,l=this.overlays,p=l.length,k=null,h,m;if(j||typeof n=="string"){for(m=p-1;m>=0;m--){h=l[m];if((j&&(h===n))||(h.id==n)){k=h;break}}}return k},compareZIndexDesc:function(h,j){var k=(h.cfg)?h.cfg.getProperty("zIndex"):null,l=(j.cfg)?j.cfg.getProperty("zIndex"):null;if(k===null&&l===null){return 0}else{if(k===null){return 1}else{if(l===null){return -1}else{if(k>l){return -1}else{if(k<l){return 1}else{return 0}}}}}},showAll:function(){var j=this.overlays,h=j.length,k;for(k=h-1;k>=0;k--){j[k].show()}},hideAll:function(){var j=this.overlays,h=j.length,k;for(k=h-1;k>=0;k--){j[k].hide()}},toString:function(){return"OverlayManager"}}}());(function(){YAHOO.widget.Tooltip=function(r,s){YAHOO.widget.Tooltip.superclass.constructor.call(this,r,s)};var q=YAHOO.lang,f=YAHOO.util.Event,g=YAHOO.util.CustomEvent,b=YAHOO.util.Dom,k=YAHOO.widget.Tooltip,m=YAHOO.env.ua,n=(m.ie&&(m.ie<=6||document.compatMode=="BackCompat")),p,l={PREVENT_OVERLAP:{key:"preventoverlap",value:true,validator:q.isBoolean,supercedes:["x","y","xy"]},SHOW_DELAY:{key:"showdelay",value:200,validator:q.isNumber},AUTO_DISMISS_DELAY:{key:"autodismissdelay",value:5000,validator:q.isNumber},HIDE_DELAY:{key:"hidedelay",value:250,validator:q.isNumber},TEXT:{key:"text",suppressEvent:true},CONTAINER:{key:"container"},DISABLED:{key:"disabled",value:false,suppressEvent:true}},e={CONTEXT_MOUSE_OVER:"contextMouseOver",CONTEXT_MOUSE_OUT:"contextMouseOut",CONTEXT_TRIGGER:"contextTrigger"};k.CSS_TOOLTIP="yui-tt";function j(s,u){var t=this.cfg,r=t.getProperty("width");if(r==u){t.setProperty("width",s)}}function a(w,x){if("_originalWidth" in this){j.call(this,this._originalWidth,this._forcedWidth)}var v=document.body,r=this.cfg,s=r.getProperty("width"),u,t;if((!s||s=="auto")&&(r.getProperty("container")!=v||r.getProperty("x")>=b.getViewportWidth()||r.getProperty("y")>=b.getViewportHeight())){t=this.element.cloneNode(true);t.style.visibility="hidden";t.style.top="0px";t.style.left="0px";v.appendChild(t);u=(t.offsetWidth+"px");v.removeChild(t);t=null;r.setProperty("width",u);r.refireEvent("xy");this._originalWidth=s||"";this._forcedWidth=u}}function d(s,t,r){this.render(r)}function h(){f.onDOMReady(d,this.cfg.getProperty("container"),this)}YAHOO.extend(k,YAHOO.widget.Overlay,{init:function(r,s){k.superclass.init.call(this,r);this.beforeInitEvent.fire(k);b.addClass(this.element,k.CSS_TOOLTIP);if(s){this.cfg.applyConfig(s,true)}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",a);this.subscribe("init",h);this.subscribe("render",this.onRender);this.initEvent.fire(k)},initEvents:function(){k.superclass.initEvents.call(this);var r=g.LIST;this.contextMouseOverEvent=this.createEvent(e.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=r;this.contextMouseOutEvent=this.createEvent(e.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=r;this.contextTriggerEvent=this.createEvent(e.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=r},initDefaultConfig:function(){k.superclass.initDefaultConfig.call(this);this.cfg.addProperty(l.PREVENT_OVERLAP.key,{value:l.PREVENT_OVERLAP.value,validator:l.PREVENT_OVERLAP.validator,supercedes:l.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(l.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:l.SHOW_DELAY.validator});this.cfg.addProperty(l.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:l.AUTO_DISMISS_DELAY.value,validator:l.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(l.HIDE_DELAY.key,{handler:this.configHideDelay,value:l.HIDE_DELAY.value,validator:l.HIDE_DELAY.validator});this.cfg.addProperty(l.TEXT.key,{handler:this.configText,suppressEvent:l.TEXT.suppressEvent});this.cfg.addProperty(l.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(l.DISABLED.key,{handler:this.configContainer,value:l.DISABLED.value,supressEvent:l.DISABLED.suppressEvent})},configText:function(t,u,s){var r=u[0];if(r){this.setBody(r)}},configContainer:function(s,t,r){var u=t[0];if(typeof u=="string"){this.cfg.setProperty("container",document.getElementById(u),true)}},_removeEventListeners:function(){var r=this._context,u,s,t;if(r){u=r.length;if(u>0){t=u-1;do{s=r[t];f.removeListener(s,"mouseover",this.onContextMouseOver);f.removeListener(s,"mousemove",this.onContextMouseMove);f.removeListener(s,"mouseout",this.onContextMouseOut)}while(t--)}}},configContext:function(t,x,s){var u=x[0],r,y,v,w;if(u){if(!(u instanceof Array)){if(typeof u=="string"){this.cfg.setProperty("context",[document.getElementById(u)],true)}else{this.cfg.setProperty("context",[u],true)}u=this.cfg.getProperty("context")}this._removeEventListeners();this._context=u;r=this._context;if(r){y=r.length;if(y>0){w=y-1;do{v=r[w];f.on(v,"mouseover",this.onContextMouseOver,this);f.on(v,"mousemove",this.onContextMouseMove,this);f.on(v,"mouseout",this.onContextMouseOut,this)}while(w--)}}}},onContextMouseMove:function(r,s){s.pageX=f.getPageX(r);s.pageY=f.getPageY(r)},onContextMouseOver:function(r,s){var t=this;if(t.title){s._tempTitle=t.title;t.title=""}if(s.fireEvent("contextMouseOver",t,r)!==false&&!s.cfg.getProperty("disabled")){if(s.hideProcId){clearTimeout(s.hideProcId);s.hideProcId=null}f.on(t,"mousemove",s.onContextMouseMove,s);s.showProcId=s.doShow(r,t)}},onContextMouseOut:function(r,s){var t=this;if(s._tempTitle){t.title=s._tempTitle;s._tempTitle=null}if(s.showProcId){clearTimeout(s.showProcId);s.showProcId=null}if(s.hideProcId){clearTimeout(s.hideProcId);s.hideProcId=null}s.fireEvent("contextMouseOut",t,r);s.hideProcId=setTimeout(function(){s.hide()},s.cfg.getProperty("hidedelay"))},doShow:function(s,u){var r=25,t=this;if(m.opera&&u.tagName&&u.tagName.toUpperCase()=="A"){r+=12}return setTimeout(function(){var v=t.cfg.getProperty("text");if(t._tempTitle&&(v===""||YAHOO.lang.isUndefined(v)||YAHOO.lang.isNull(v))){t.setBody(t._tempTitle)}else{t.cfg.refireEvent("text")}t.moveTo(t.pageX,t.pageY+r);if(t.cfg.getProperty("preventoverlap")){t.preventOverlap(t.pageX,t.pageY)}f.removeListener(u,"mousemove",t.onContextMouseMove);t.contextTriggerEvent.fire(u);t.show();t.hideProcId=t.doHide()},this.cfg.getProperty("showdelay"))},doHide:function(){var r=this;return setTimeout(function(){r.hide()},this.cfg.getProperty("autodismissdelay"))},preventOverlap:function(r,s){var v=this.element.offsetHeight,t=new YAHOO.util.Point(r,s),u=b.getRegion(this.element);u.top-=5;u.left-=5;u.right+=5;u.bottom+=5;if(u.contains(t)){this.cfg.setProperty("y",(s-v-5))}},onRender:function(t,u){function s(){var y=this.element,z=this.underlay;if(z){z.style.width=(y.offsetWidth+6)+"px";z.style.height=(y.offsetHeight+1)+"px"}}function w(){b.addClass(this.underlay,"yui-tt-shadow-visible");if(m.ie){this.forceUnderlayRedraw()}}function x(){b.removeClass(this.underlay,"yui-tt-shadow-visible")}function r(){var C=this.underlay,y,z,A,B;if(!C){y=this.element;z=YAHOO.widget.Module;A=m.ie;B=this;if(!p){p=document.createElement("div");p.className="yui-tt-shadow"}C=p.cloneNode(false);y.appendChild(C);this.underlay=C;this._shadow=this.underlay;w.call(this);this.subscribe("beforeShow",w);this.subscribe("hide",x);if(n){window.setTimeout(function(){s.call(B)},0);this.cfg.subscribeToConfigEvent("width",s);this.cfg.subscribeToConfigEvent("height",s);this.subscribe("changeContent",s);z.textResizeEvent.subscribe(s,this,true);this.subscribe("destroy",function(){z.textResizeEvent.unsubscribe(s,this)})}}}function v(){r.call(this);this.unsubscribe("beforeShow",v)}if(this.cfg.getProperty("visible")){r.call(this)}else{this.subscribe("beforeShow",v)}},forceUnderlayRedraw:function(){var r=this;b.addClass(r.underlay,"yui-force-redraw");setTimeout(function(){b.removeClass(r.underlay,"yui-force-redraw")},0)},destroy:function(){this._removeEventListeners();k.superclass.destroy.call(this)},toString:function(){return"Tooltip "+this.id}})}());(function(){YAHOO.widget.Panel=function(x,y){YAHOO.widget.Panel.superclass.constructor.call(this,x,y)};var b=null;var s=YAHOO.lang,r=YAHOO.util,w=r.Dom,a=r.Event,j=r.CustomEvent,l=YAHOO.util.KeyListener,n=r.Config,p=YAHOO.widget.Overlay,g=YAHOO.widget.Panel,k=YAHOO.env.ua,f=(k.ie&&(k.ie<=6||document.compatMode=="BackCompat")),q,e,u,t={SHOW_MASK:"showMask",HIDE_MASK:"hideMask",DRAG:"drag"},h={CLOSE:{key:"close",value:true,validator:s.isBoolean,supercedes:["visible"]},DRAGGABLE:{key:"draggable",value:(r.DD?true:false),validator:s.isBoolean,supercedes:["visible"]},DRAG_ONLY:{key:"dragonly",value:false,validator:s.isBoolean,supercedes:["draggable"]},UNDERLAY:{key:"underlay",value:"shadow",supercedes:["visible"]},MODAL:{key:"modal",value:false,validator:s.isBoolean,supercedes:["visible","zindex"]},KEY_LISTENERS:{key:"keylisteners",suppressEvent:true,supercedes:["visible"]},STRINGS:{key:"strings",supercedes:["close"],validator:s.isObject,value:{close:"Close"}}};g.CSS_PANEL="yui-panel";g.CSS_PANEL_CONTAINER="yui-panel-container";g.FOCUSABLE=["a","button","select","textarea","input","iframe"];function m(x,y){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;")}}function d(z,A,x){var B=x[0],D=x[1],C=this.cfg,y=C.getProperty("width");if(y==D){C.setProperty("width",B)}this.unsubscribe("hide",d,x)}function v(y,z){var A,B,x;if(f){A=this.cfg;B=A.getProperty("width");if(!B||B=="auto"){x=(this.element.offsetWidth+"px");A.setProperty("width",x);this.subscribe("hide",d,[(B||""),x])}}}YAHOO.extend(g,p,{init:function(x,y){g.superclass.init.call(this,x);this.beforeInitEvent.fire(g);w.addClass(this.element,g.CSS_PANEL);this.buildWrapper();if(y){this.cfg.applyConfig(y,true)}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",m);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",this.setFirstLastFocusable)});this.subscribe("show",this.focusFirst);this.initEvent.fire(g)},_onElementFocus:function(A){if(b===this){var B=a.getTarget(A),C=document.documentElement,y=(B!==C&&B!==window);if(y&&B!==this.element&&B!==this.mask&&!w.isAncestor(this.element,B)){try{if(this.firstElement){this.firstElement.focus()}else{if(this._modalFocus){this._modalFocus.focus()}else{this.innerElement.focus()}}}catch(x){try{if(y&&B!==document.body){B.blur()}}catch(z){}}}}},_addFocusHandlers:function(x,y){if(!this.firstElement){if(k.webkit||k.opera){if(!this._modalFocus){this._createHiddenFocusElement()}}else{this.innerElement.tabIndex=0}}this.setTabLoop(this.firstElement,this.lastElement);a.onFocus(document.documentElement,this._onElementFocus,this,true);b=this},_createHiddenFocusElement:function(){var x=document.createElement("button");x.style.height="1px";x.style.width="1px";x.style.position="absolute";x.style.left="-10000em";x.style.opacity=0;x.tabIndex=-1;this.innerElement.appendChild(x);this._modalFocus=x},_removeFocusHandlers:function(x,y){a.removeFocusListener(document.documentElement,this._onElementFocus,this);if(b==this){b=null}},focusFirst:function(x,z,A){var y=this.firstElement;if(z&&z[1]){a.stopEvent(z[1])}if(y){try{y.focus()}catch(B){}}},focusLast:function(x,z,A){var y=this.lastElement;if(z&&z[1]){a.stopEvent(z[1])}if(y){try{y.focus()}catch(B){}}},setTabLoop:function(C,A){var y=this.preventBackTab,x=this.preventTabOut,z=this.showEvent,B=this.hideEvent;if(y){y.disable();z.unsubscribe(y.enable,y);B.unsubscribe(y.disable,y);y=this.preventBackTab=null}if(x){x.disable();z.unsubscribe(x.enable,x);B.unsubscribe(x.disable,x);x=this.preventTabOut=null}if(C){this.preventBackTab=new l(C,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});y=this.preventBackTab;z.subscribe(y.enable,y,true);B.subscribe(y.disable,y,true)}if(A){this.preventTabOut=new l(A,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});x=this.preventTabOut;z.subscribe(x.enable,x,true);B.subscribe(x.disable,x,true)}},getFocusableElements:function(z){z=z||this.innerElement;var A={};for(var x=0;x<g.FOCUSABLE.length;x++){A[g.FOCUSABLE[x]]=true}function y(B){if(B.focus&&B.type!=="hidden"&&!B.disabled&&A[B.tagName.toLowerCase()]){return true}return false}return w.getElementsBy(y,null,z)},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var x=this.getFocusableElements();this.focusableElements=x;if(x.length>0){this.firstElement=x[0];this.lastElement=x[x.length-1]}if(this.cfg.getProperty("modal")){this.setTabLoop(this.firstElement,this.lastElement)}},initEvents:function(){g.superclass.initEvents.call(this);var x=j.LIST;this.showMaskEvent=this.createEvent(t.SHOW_MASK);this.showMaskEvent.signature=x;this.hideMaskEvent=this.createEvent(t.HIDE_MASK);this.hideMaskEvent.signature=x;this.dragEvent=this.createEvent(t.DRAG);this.dragEvent.signature=x},initDefaultConfig:function(){g.superclass.initDefaultConfig.call(this);this.cfg.addProperty(h.CLOSE.key,{handler:this.configClose,value:h.CLOSE.value,validator:h.CLOSE.validator,supercedes:h.CLOSE.supercedes});this.cfg.addProperty(h.DRAGGABLE.key,{handler:this.configDraggable,value:(r.DD)?true:false,validator:h.DRAGGABLE.validator,supercedes:h.DRAGGABLE.supercedes});this.cfg.addProperty(h.DRAG_ONLY.key,{value:h.DRAG_ONLY.value,validator:h.DRAG_ONLY.validator,supercedes:h.DRAG_ONLY.supercedes});this.cfg.addProperty(h.UNDERLAY.key,{handler:this.configUnderlay,value:h.UNDERLAY.value,supercedes:h.UNDERLAY.supercedes});this.cfg.addProperty(h.MODAL.key,{handler:this.configModal,value:h.MODAL.value,validator:h.MODAL.validator,supercedes:h.MODAL.supercedes});this.cfg.addProperty(h.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:h.KEY_LISTENERS.suppressEvent,supercedes:h.KEY_LISTENERS.supercedes});this.cfg.addProperty(h.STRINGS.key,{value:h.STRINGS.value,handler:this.configStrings,validator:h.STRINGS.validator,supercedes:h.STRINGS.supercedes})},configClose:function(C,y,B){var A=y[0],x=this.close,z=this.cfg.getProperty("strings");if(A){if(!x){if(!u){u=document.createElement("a");u.className="container-close";u.href="#"}x=u.cloneNode(true);this.innerElement.appendChild(x);x.innerHTML=(z&&z.close)?z.close:"&#160;";a.on(x,"click",this._doClose,this,true);this.close=x}else{x.style.display="block"}}else{if(x){x.style.display="none"}}},_doClose:function(x){a.preventDefault(x);this.hide()},configDraggable:function(y,z,x){var A=z[0];if(A){if(!r.DD){this.cfg.setProperty("draggable",false);return}if(this.header){w.setStyle(this.header,"cursor","move");this.registerDragDrop()}this.subscribe("beforeShow",v)}else{if(this.dd){this.dd.unreg()}if(this.header){w.setStyle(this.header,"cursor","auto")}this.unsubscribe("beforeShow",v)}},configUnderlay:function(E,F,x){var G=(this.platform=="mac"&&k.gecko),D=F[0].toLowerCase(),B=this.underlay,A=this.element;function z(){var I=false;if(!B){if(!e){e=document.createElement("div");e.className="underlay"}B=e.cloneNode(false);this.element.appendChild(B);this.underlay=B;if(f){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true)}if(k.webkit&&k.webkit<420){this.changeContentEvent.subscribe(this.forceUnderlayRedraw)}I=true}}function H(){var I=z.call(this);if(!I&&f){this.sizeUnderlay()}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(H)}function y(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(H);this._underlayDeferred=false}if(B){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(B);this.underlay=null}}switch(D){case"shadow":w.removeClass(A,"matte");w.addClass(A,"shadow");break;case"matte":if(!G){y.call(this)}w.removeClass(A,"shadow");w.addClass(A,"matte");break;default:if(!G){y.call(this)}w.removeClass(A,"shadow");w.removeClass(A,"matte");break}if((D=="shadow")||(G&&!B)){if(this.cfg.getProperty("visible")){var C=z.call(this);if(!C&&f){this.sizeUnderlay()}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(H);this._underlayDeferred=true}}}},configModal:function(y,z,A){var x=z[0];if(x){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);p.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask()}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);p.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false}}},removeMask:function(){var x=this.mask,y;if(x){this.hideMask();y=x.parentNode;if(y){y.removeChild(x)}this.mask=null}},configKeyListeners:function(D,A,z){var x=A[0],B,C,y;if(x){if(x instanceof Array){C=x.length;for(y=0;y<C;y++){B=x[y];if(!n.alreadySubscribed(this.showEvent,B.enable,B)){this.showEvent.subscribe(B.enable,B,true)}if(!n.alreadySubscribed(this.hideEvent,B.disable,B)){this.hideEvent.subscribe(B.disable,B,true);this.destroyEvent.subscribe(B.disable,B,true)}}}else{if(!n.alreadySubscribed(this.showEvent,x.enable,x)){this.showEvent.subscribe(x.enable,x,true)}if(!n.alreadySubscribed(this.hideEvent,x.disable,x)){this.hideEvent.subscribe(x.disable,x,true);this.destroyEvent.subscribe(x.disable,x,true)}}}},configStrings:function(y,z,x){var A=s.merge(h.STRINGS.value,z[0]);this.cfg.setProperty(h.STRINGS.key,A,true)},configHeight:function(B,y,A){var z=y[0],x=this.innerElement;w.setStyle(x,"height",z);this.cfg.refireEvent("iframe")},_autoFillOnHeightChange:function(A,y,x){g.superclass._autoFillOnHeightChange.apply(this,arguments);if(f){var z=this;setTimeout(function(){z.sizeUnderlay()},0)}},configWidth:function(B,z,A){var x=z[0],y=this.innerElement;w.setStyle(y,"width",x);this.cfg.refireEvent("iframe")},configzIndex:function(y,z,A){g.superclass.configzIndex.call(this,y,z,A);if(this.mask||this.cfg.getProperty("modal")===true){var x=w.getStyle(this.element,"zIndex");if(!x||isNaN(x)){x=0}if(x===0){this.cfg.setProperty("zIndex",1)}else{this.stackMask()}}},buildWrapper:function(){var x=this.element.parentNode,z=this.element,y=document.createElement("div");y.className=g.CSS_PANEL_CONTAINER;y.id=z.id+"_c";if(x){x.insertBefore(y,z)}y.appendChild(z);this.element=y;this.innerElement=z;w.setStyle(this.innerElement,"visibility","inherit")},sizeUnderlay:function(){var x=this.underlay,y;if(x){y=this.element;x.style.width=y.offsetWidth+"px";x.style.height=y.offsetHeight+"px"}},registerDragDrop:function(){var x=this;if(this.header){if(!r.DD){return}var y=(this.cfg.getProperty("dragonly")===true);this.dd=new r.DD(this.element.id,this.id,{dragOnly:y});if(!this.header.id){this.header.id=this.id+"_h"}this.dd.startDrag=function(){var F,C,A,E,z,B;if(YAHOO.env.ua.ie==6){w.addClass(x.element,"drag")}if(x.cfg.getProperty("constraintoviewport")){var D=p.VIEWPORT_OFFSET;F=x.element.offsetHeight;C=x.element.offsetWidth;A=w.getViewportWidth();E=w.getViewportHeight();z=w.getDocumentScrollLeft();B=w.getDocumentScrollTop();if(F+D<E){this.minY=B+D;this.maxY=B+E-F-D}else{this.minY=B+D;this.maxY=B+D}if(C+D<A){this.minX=z+D;this.maxX=z+A-C-D}else{this.minX=z+D;this.maxX=z+D}this.constrainX=true;this.constrainY=true}else{this.constrainX=false;this.constrainY=false}x.dragEvent.fire("startDrag",arguments)};this.dd.onDrag=function(){x.syncPosition();x.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars()}x.dragEvent.fire("onDrag",arguments)};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){w.removeClass(x.element,"drag")}x.dragEvent.fire("endDrag",arguments);x.moveEvent.fire(x.cfg.getProperty("xy"))};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA")}},buildMask:function(){var x=this.mask;if(!x){if(!q){q=document.createElement("div");q.className="mask";q.innerHTML="&#160;"}x=q.cloneNode(true);x.id=this.id+"_mask";document.body.insertBefore(x,document.body.firstChild);this.mask=x;if(YAHOO.env.ua.gecko&&this.platform=="mac"){w.addClass(this.mask,"block-scrollbars")}this.stackMask()}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";w.removeClass(document.body,"masked");this.hideMaskEvent.fire()}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){w.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire()}},sizeMask:function(){if(this.mask){var y=this.mask,x=w.getViewportWidth(),z=w.getViewportHeight();if(y.offsetHeight>z){y.style.height=z+"px"}if(y.offsetWidth>x){y.style.width=x+"px"}y.style.height=w.getDocumentHeight()+"px";y.style.width=w.getDocumentWidth()+"px"}},stackMask:function(){if(this.mask){var x=w.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(x)&&!isNaN(x)){w.setStyle(this.mask,"zIndex",x-1)}}},render:function(x){return g.superclass.render.call(this,x,this.innerElement)},destroy:function(){p.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){a.purgeElement(this.close)}g.superclass.destroy.call(this)},forceUnderlayRedraw:function(){var x=this.underlay;w.addClass(x,"yui-force-redraw");setTimeout(function(){w.removeClass(x,"yui-force-redraw")},0)},toString:function(){return"Panel "+this.id}})}());(function(){YAHOO.widget.Dialog=function(k,l){YAHOO.widget.Dialog.superclass.constructor.call(this,k,l)};var j=YAHOO.util.Event,d=YAHOO.util.CustomEvent,f=YAHOO.util.Dom,a=YAHOO.widget.Dialog,e=YAHOO.lang,b={BEFORE_SUBMIT:"beforeSubmit",SUBMIT:"submit",MANUAL_SUBMIT:"manualSubmit",ASYNC_SUBMIT:"asyncSubmit",FORM_SUBMIT:"formSubmit",CANCEL:"cancel"},h={POST_METHOD:{key:"postmethod",value:"async"},POST_DATA:{key:"postdata",value:null},BUTTONS:{key:"buttons",value:"none",supercedes:["visible"]},HIDEAFTERSUBMIT:{key:"hideaftersubmit",value:true}};a.CSS_DIALOG="yui-dialog";function g(){var k=this._aButtons,m,l,n;if(e.isArray(k)){m=k.length;if(m>0){n=m-1;do{l=k[n];if(YAHOO.widget.Button&&l instanceof YAHOO.widget.Button){l.destroy()}else{if(l.tagName.toUpperCase()=="BUTTON"){j.purgeElement(l);j.purgeElement(l,false)}}}while(n--)}}}YAHOO.extend(a,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){a.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(h.POST_METHOD.key,{handler:this.configPostMethod,value:h.POST_METHOD.value,validator:function(k){if(k!="form"&&k!="async"&&k!="none"&&k!="manual"){return false}else{return true}}});this.cfg.addProperty(h.POST_DATA.key,{value:h.POST_DATA.value});this.cfg.addProperty(h.HIDEAFTERSUBMIT.key,{value:h.HIDEAFTERSUBMIT.value});this.cfg.addProperty(h.BUTTONS.key,{handler:this.configButtons,value:h.BUTTONS.value,supercedes:h.BUTTONS.supercedes})},initEvents:function(){a.superclass.initEvents.call(this);var k=d.LIST;this.beforeSubmitEvent=this.createEvent(b.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=k;this.submitEvent=this.createEvent(b.SUBMIT);this.submitEvent.signature=k;this.manualSubmitEvent=this.createEvent(b.MANUAL_SUBMIT);this.manualSubmitEvent.signature=k;this.asyncSubmitEvent=this.createEvent(b.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=k;this.formSubmitEvent=this.createEvent(b.FORM_SUBMIT);this.formSubmitEvent.signature=k;this.cancelEvent=this.createEvent(b.CANCEL);this.cancelEvent.signature=k},init:function(k,l){a.superclass.init.call(this,k);this.beforeInitEvent.fire(a);f.addClass(this.element,a.CSS_DIALOG);this.cfg.setProperty("visible",false);if(l){this.cfg.applyConfig(l,true)}this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(a)},doSubmit:function(){var m=YAHOO.util.Connect,l=this.form,s=false,p=false,k,q,r,u;switch(this.cfg.getProperty("postmethod")){case"async":k=l.elements;q=k.length;if(q>0){r=q-1;do{if(k[r].type=="file"){s=true;break}}while(r--)}if(s&&YAHOO.env.ua.ie&&this.isSecure){p=true}u=this._getFormAttributes(l);m.setForm(l,s,p);var t=this.cfg.getProperty("postdata");var n=m.asyncRequest(u.method,u.action,this.callback,t);this.asyncSubmitEvent.fire(n);break;case"form":l.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break}},_getFormAttributes:function(l){var n={method:null,action:null};if(l){if(l.getAttributeNode){var m=l.getAttributeNode("action");var k=l.getAttributeNode("method");if(m){n.action=m.value}if(k){n.method=k.value}}else{n.action=l.getAttribute("action");n.method=l.getAttribute("method")}}n.method=(e.isString(n.method)?n.method:"POST").toUpperCase();n.action=e.isString(n.action)?n.action:"";return n},registerForm:function(){var k=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==k&&f.isAncestor(this.element,this.form)){return}else{j.purgeElement(this.form);this.form=null}}if(!k){k=document.createElement("form");k.name="frm_"+this.id;this.body.appendChild(k)}if(k){this.form=k;j.on(k,"submit",this._submitHandler,this,true)}},_submitHandler:function(k){j.stopEvent(k);this.submit();this.form.blur()},setTabLoop:function(l,k){l=l||this.firstButton;k=this.lastButton||k;a.superclass.setTabLoop.call(this,l,k)},setFirstLastFocusable:function(){a.superclass.setFirstLastFocusable.call(this);var m,n,l,k=this.focusableElements;this.firstFormElement=null;this.lastFormElement=null;if(this.form&&k&&k.length>0){n=k.length;for(m=0;m<n;++m){l=k[m];if(this.form===l.form){this.firstFormElement=l;break}}for(m=n-1;m>=0;--m){l=k[m];if(this.form===l.form){this.lastFormElement=l;break}}}},configClose:function(l,m,k){a.superclass.configClose.apply(this,arguments)},_doClose:function(k){j.preventDefault(k);this.cancel()},configButtons:function(m,n,t){var s=YAHOO.widget.Button,k=n[0],v=this.innerElement,l,q,w,p,r,x,u;g.call(this);this._aButtons=null;if(e.isArray(k)){r=document.createElement("span");r.className="button-group";p=k.length;this._aButtons=[];this.defaultHtmlButton=null;for(u=0;u<p;u++){l=k[u];if(s){w=new s({label:l.text});w.appendTo(r);q=w.get("element");if(l.isDefault){w.addClass("default");this.defaultHtmlButton=q}if(e.isFunction(l.handler)){w.set("onclick",{fn:l.handler,obj:this,scope:this})}else{if(e.isObject(l.handler)&&e.isFunction(l.handler.fn)){w.set("onclick",{fn:l.handler.fn,obj:((!e.isUndefined(l.handler.obj))?l.handler.obj:this),scope:(l.handler.scope||this)})}}this._aButtons[this._aButtons.length]=w}else{q=document.createElement("button");q.setAttribute("type","button");if(l.isDefault){q.className="default";this.defaultHtmlButton=q}q.innerHTML=l.text;if(e.isFunction(l.handler)){j.on(q,"click",l.handler,this,true)}else{if(e.isObject(l.handler)&&e.isFunction(l.handler.fn)){j.on(q,"click",l.handler.fn,((!e.isUndefined(l.handler.obj))?l.handler.obj:this),(l.handler.scope||this))}}r.appendChild(q);this._aButtons[this._aButtons.length]=q}l.htmlButton=q;if(u===0){this.firstButton=q}if(u==(p-1)){this.lastButton=q}}this.setFooter(r);x=this.footer;if(f.inDocument(this.element)&&!f.isAncestor(v,x)){v.appendChild(x)}this.buttonSpan=r}else{r=this.buttonSpan;x=this.footer;if(r&&x){x.removeChild(r);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null}}this.changeContentEvent.fire()},getButtons:function(){return this._aButtons||null},focusFirst:function(l,n,p){var m=this.firstFormElement;if(n&&n[1]){j.stopEvent(n[1])}if(m){try{m.focus()}catch(k){}}else{if(this.defaultHtmlButton){this.focusDefaultButton()}else{this.focusFirstButton()}}},focusLast:function(l,n,q){var p=this.cfg.getProperty("buttons"),m=this.lastFormElement;if(n&&n[1]){j.stopEvent(n[1])}if(p&&e.isArray(p)){this.focusLastButton()}else{if(m){try{m.focus()}catch(k){}}}},_getButton:function(k){var l=YAHOO.widget.Button;if(l&&k&&k.nodeName&&k.id){k=l.getButton(k.id)||k}return k},focusDefaultButton:function(){var l=this._getButton(this.defaultHtmlButton);if(l){try{l.focus()}catch(k){}}},blurButtons:function(){var p=this.cfg.getProperty("buttons"),l,q,m,n;if(p&&e.isArray(p)){l=p.length;if(l>0){n=(l-1);do{q=p[n];if(q){m=this._getButton(q.htmlButton);if(m){try{m.blur()}catch(k){}}}}while(n--)}}},focusFirstButton:function(){var k=this.cfg.getProperty("buttons"),l,n;if(k&&e.isArray(k)){l=k[0];if(l){n=this._getButton(l.htmlButton);if(n){try{n.focus()}catch(m){}}}}},focusLastButton:function(){var p=this.cfg.getProperty("buttons"),m,k,n;if(p&&e.isArray(p)){m=p.length;if(m>0){k=p[(m-1)];if(k){n=this._getButton(k.htmlButton);if(n){try{n.focus()}catch(l){}}}}}},configPostMethod:function(l,m,k){this.registerForm()},validate:function(){return true},submit:function(){if(this.validate()){this.beforeSubmitEvent.fire();this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide()}return true}else{return false}},cancel:function(){this.cancelEvent.fire();this.hide()},getData:function(){var l=this.form,A,t,q,y,s,v,w,B,p,z,n,k,C,x,D,m,r;function u(F){var E=F.tagName.toUpperCase();return((E=="INPUT"||E=="TEXTAREA"||E=="SELECT")&&F.name==y)}if(l){A=l.elements;t=A.length;q={};for(m=0;m<t;m++){y=A[m].name;s=f.getElementsBy(u,"*",l);v=s.length;if(v>0){if(v==1){s=s[0];w=s.type;B=s.tagName.toUpperCase();switch(B){case"INPUT":if(w=="checkbox"){q[y]=s.checked}else{if(w!="radio"){q[y]=s.value}}break;case"TEXTAREA":q[y]=s.value;break;case"SELECT":p=s.options;z=p.length;n=[];for(r=0;r<z;r++){k=p[r];if(k.selected){C=k.value;if(!C||C===""){C=k.text}n[n.length]=C}}q[y]=n;break}}else{w=s[0].type;switch(w){case"radio":for(r=0;r<v;r++){x=s[r];if(x.checked){q[y]=x.value;break}}break;case"checkbox":n=[];for(r=0;r<v;r++){D=s[r];if(D.checked){n[n.length]=D.value}}q[y]=n;break}}}}}return q},destroy:function(){g.call(this);this._aButtons=null;var l=this.element.getElementsByTagName("form"),k;if(l.length>0){k=l[0];if(k){j.purgeElement(k);if(k.parentNode){k.parentNode.removeChild(k)}this.form=null}}a.superclass.destroy.call(this)},toString:function(){return"Dialog "+this.id}})}());(function(){YAHOO.widget.SimpleDialog=function(e,f){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,e,f)};var b=YAHOO.util.Dom,d=YAHOO.widget.SimpleDialog,a={ICON:{key:"icon",value:"none",suppressEvent:true},TEXT:{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};d.ICON_BLOCK="blckicon";d.ICON_ALARM="alrticon";d.ICON_HELP="hlpicon";d.ICON_INFO="infoicon";d.ICON_WARN="warnicon";d.ICON_TIP="tipicon";d.ICON_CSS_CLASSNAME="yui-icon";d.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(d,YAHOO.widget.Dialog,{initDefaultConfig:function(){d.superclass.initDefaultConfig.call(this);this.cfg.addProperty(a.ICON.key,{handler:this.configIcon,value:a.ICON.value,suppressEvent:a.ICON.suppressEvent});this.cfg.addProperty(a.TEXT.key,{handler:this.configText,value:a.TEXT.value,suppressEvent:a.TEXT.suppressEvent,supercedes:a.TEXT.supercedes})},init:function(e,f){d.superclass.init.call(this,e);this.beforeInitEvent.fire(d);b.addClass(this.element,d.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(f){this.cfg.applyConfig(f,true)}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("")}},this,true);this.initEvent.fire(d)},registerForm:function(){d.superclass.registerForm.call(this);this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>'},configIcon:function(k,l,f){var e=l[0],m=this.body,g=d.ICON_CSS_CLASSNAME,h,j;if(e&&e!="none"){h=b.getElementsByClassName(g,"*",m);if(h){j=h.parentNode;if(j){j.removeChild(h);h=null}}if(e.indexOf(".")==-1){h=document.createElement("span");h.className=(g+" "+e);h.innerHTML="&#160;"}else{h=document.createElement("img");h.src=(this.imageRoot+e);h.className=g}if(h){m.insertBefore(h,m.firstChild)}}},configText:function(g,h,f){var e=h[0];if(e){this.setBody(e);this.cfg.refireEvent("icon")}},toString:function(){return"SimpleDialog "+this.id}})}());(function(){YAHOO.widget.ContainerEffect=function(h,e,f,j,g){if(!g){g=YAHOO.util.Anim}this.overlay=h;this.attrIn=e;this.attrOut=f;this.targetElement=j||h.element;this.animClass=g};var d=YAHOO.util.Dom,b=YAHOO.util.CustomEvent,a=YAHOO.widget.ContainerEffect;a.FADE=function(k,h){var g=YAHOO.util.Easing,e={attributes:{opacity:{from:0,to:1}},duration:h,method:g.easeIn},j={attributes:{opacity:{to:0}},duration:h,method:g.easeOut},f=new a(k,e,j,k.element);f.handleUnderlayStart=function(){var l=this.overlay.underlay;if(l&&YAHOO.env.ua.ie){var m=(l.filters&&l.filters.length>0);if(m){d.addClass(k.element,"yui-effect-fade")}}};f.handleUnderlayComplete=function(){var l=this.overlay.underlay;if(l&&YAHOO.env.ua.ie){d.removeClass(k.element,"yui-effect-fade")}};f.handleStartAnimateIn=function(m,n,l){d.addClass(l.overlay.element,"hide-select");if(!l.overlay.underlay){l.overlay.cfg.refireEvent("underlay")}l.handleUnderlayStart();l.overlay._setDomVisibility(true);d.setStyle(l.overlay.element,"opacity",0)};f.handleCompleteAnimateIn=function(m,n,l){d.removeClass(l.overlay.element,"hide-select");if(l.overlay.element.style.filter){l.overlay.element.style.filter=null}l.handleUnderlayComplete();l.overlay.cfg.refireEvent("iframe");l.animateInCompleteEvent.fire()};f.handleStartAnimateOut=function(m,n,l){d.addClass(l.overlay.element,"hide-select");l.handleUnderlayStart()};f.handleCompleteAnimateOut=function(m,n,l){d.removeClass(l.overlay.element,"hide-select");if(l.overlay.element.style.filter){l.overlay.element.style.filter=null}l.overlay._setDomVisibility(false);d.setStyle(l.overlay.element,"opacity",1);l.handleUnderlayComplete();l.overlay.cfg.refireEvent("iframe");l.animateOutCompleteEvent.fire()};f.init();return f};a.SLIDE=function(n,e){var k=YAHOO.util.Easing,g=n.cfg.getProperty("x")||d.getX(n.element),h=n.cfg.getProperty("y")||d.getY(n.element),f=d.getClientWidth(),l=n.element.offsetWidth,j={attributes:{points:{to:[g,h]}},duration:e,method:k.easeIn},p={attributes:{points:{to:[(f+25),h]}},duration:e,method:k.easeOut},m=new a(n,j,p,n.element,YAHOO.util.Motion);m.handleStartAnimateIn=function(r,s,q){q.overlay.element.style.left=((-25)-l)+"px";q.overlay.element.style.top=h+"px"};m.handleTweenAnimateIn=function(s,t,r){var q=d.getXY(r.overlay.element),u=q[0],v=q[1];if(d.getStyle(r.overlay.element,"visibility")=="hidden"&&u<g){r.overlay._setDomVisibility(true)}r.overlay.cfg.setProperty("xy",[u,v],true);r.overlay.cfg.refireEvent("iframe")};m.handleCompleteAnimateIn=function(r,s,q){q.overlay.cfg.setProperty("xy",[g,h],true);q.startX=g;q.startY=h;q.overlay.cfg.refireEvent("iframe");q.animateInCompleteEvent.fire()};m.handleStartAnimateOut=function(u,v,r){var t=d.getViewportWidth(),q=d.getXY(r.overlay.element),s=q[1];r.animOut.attributes.points.to=[(t+25),s]};m.handleTweenAnimateOut=function(t,u,s){var q=d.getXY(s.overlay.element),v=q[0],r=q[1];s.overlay.cfg.setProperty("xy",[v,r],true);s.overlay.cfg.refireEvent("iframe")};m.handleCompleteAnimateOut=function(r,s,q){q.overlay._setDomVisibility(false);q.overlay.cfg.setProperty("xy",[g,h]);q.animateOutCompleteEvent.fire()};m.init();return m};a.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=b.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=b.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=b.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=b.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this)},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate()},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate()},handleStartAnimateIn:function(f,g,e){},handleTweenAnimateIn:function(f,g,e){},handleCompleteAnimateIn:function(f,g,e){},handleStartAnimateOut:function(f,g,e){},handleTweenAnimateOut:function(f,g,e){},handleCompleteAnimateOut:function(f,g,e){},toString:function(){var e="ContainerEffect";if(this.overlay){e+=" ["+this.overlay.toString()+"]"}return e}};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/container/container-min.js")}var DDSPEED=3;var DDTIMER=15;function ddMenu(f,b){var a=document.getElementById(f+"-ddheader");var e=document.getElementById(f+"-ddcontent");clearInterval(e.timer);if(b==1){clearTimeout(a.timer);if(e.maxh&&e.maxh<=e.offsetHeight){return}else{if(!e.maxh){e.style.display="block";e.style.height="auto";e.maxh=e.offsetHeight;e.style.height="0px"}}e.timer=setInterval(function(){ddSlide(e,1)},DDTIMER)}else{ddCollapse(e)}}function ddCollapse(a){a.timer=setInterval(function(){ddSlide(a,-1)},DDTIMER)}function cancelHide(d){var a=document.getElementById(d+"-ddheader");var b=document.getElementById(d+"-ddcontent");clearTimeout(a.timer);clearInterval(b.timer);if(b.offsetHeight<b.maxh){b.timer=setInterval(function(){ddSlide(b,1)},DDTIMER)}}function ddSlide(f,e){var b=f.offsetHeight;var a;if(e==1){a=(Math.round((f.maxh-b)/DDSPEED))}else{a=(Math.round(b/DDSPEED))}if(a<=1&&e==1){a=1}f.style.height=b+(a*e)+"px";f.style.opacity=b/f.maxh;f.style.filter="alpha(opacity="+(b*100/f.maxh)+")";if((b<2&&e!=1)||(b>(f.maxh-2)&&e==1)){clearInterval(f.timer)}}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/common/dropdown.js")}View.prototype.dropDownMenuDispatcher=function(b,a,d){if(b=="showJournal"){d.showJournal()}else{if(b=="showAllWork"){d.showAllWork()}else{if(b=="displayProgress"){d.displayProgress(a[0],a[1])}}}};View.prototype.showJournal=function(){if(this.journalPanel==null||this.journalPanel.cfg==null){this.journalPanel=new YAHOO.widget.Panel("journalPanel",{width:"600px",height:"600px",fixedcenter:false,constraintoviewport:false,underlay:"shadow",close:true,visible:true,draggable:true,context:["showbtn","tl","bl"]});this.journalPanel.hideEvent.subscribe(this.saveJournal,this);this.journalPanel.setHeader("Journal");this.journalPanel.setBody("<iframe name='journalFrame' id='journalFrame' frameborder='0' width='100%' height='100%' src='journal/journal.html'></iframe>");this.journalPanel.render();window.frames.journalFrame.eventManager=eventManager}else{this.journalPanel.cfg.setProperty("visible",true)}};View.prototype.saveJournal=function(){if(this.journal){this.journal.saveToServer()}};View.prototype.resizeJournal=function(b){var d=window.innerHeight;var a=window.innerWidth;if(b=="minimize"){this.journalPanel.cfg.setProperty("height","100px");this.journalPanel.cfg.setProperty("width","430px")}else{if(b=="original"){this.journalPanel.cfg.setProperty("height","550px");this.journalPanel.cfg.setProperty("width","600px")}else{if(b=="narrow"){this.journalPanel.cfg.setProperty("height",(d-10)+"px");this.journalPanel.cfg.setProperty("width","225px")}else{if(b=="wide"){this.journalPanel.cfg.setProperty("height","200px");this.journalPanel.cfg.setProperty("width","1000px")}else{if(b=="maximize"){this.journalPanel.cfg.setProperty("height",(d-10)+"px");this.journalPanel.cfg.setProperty("width","1000px")}}}}}};View.prototype.showAllWork=function(){var a=true;this.getAnnotations(a)};View.prototype.displayShowAllWork=function(a){var d="";d='<div id="showWorkContainer">'+this.project.getShowAllWorkHtml(this.project.getRootNode(),a)+"</div>";YAHOO.namespace("example.container");var b=document.getElementById("showAllWorkDiv");b.innerHTML='<div class="test"></div>';if(!YAHOO.example.container.showallwork){YAHOO.example.container.showallwork=new YAHOO.widget.Panel("showallwork",{width:"980px",height:"665px",constraintoviewport:true,fixedcenter:true,close:true,draggable:true,zindex:4,modal:true,visible:false});YAHOO.example.container.showallwork.setHeader("MY WORK (w/Teacher Feedback and Scores)");YAHOO.example.container.showallwork.setBody(d);YAHOO.example.container.showallwork.render(document.body)}else{YAHOO.example.container.showallwork.setBody(d)}YAHOO.example.container.showallwork.show()};View.prototype.getAnnotations=function(a){var d=function(f,g,e){var h=e[0];h.annotations=Annotations.prototype.parseDataJSONString(f);if(a){h.displayShowAllWork(true)}};var b={runId:this.getConfig().getConfigParam("runId"),toWorkgroup:this.getUserAndClassInfo().getWorkgroupId(),fromWorkgroup:this.getUserAndClassInfo().getTeacherWorkgroupId(),periodId:this.getUserAndClassInfo().getPeriodId()};this.connectionManager.request("GET",3,this.getConfig().getConfigParam("getAnnotationsUrl"),b,d,[this])};View.prototype.displayProgress=function(b,a){if(b){YAHOO.namespace("example.container");if(!YAHOO.example.container.displayprogress){YAHOO.example.container.displayprogress=new YAHOO.widget.Panel("displayProgress",{width:"800px",height:"300px",fixedcenter:true,close:true,draggable:false,zindex:4,modal:true,visible:false});YAHOO.example.container.displayprogress.setHeader("My Progress");YAHOO.example.container.displayprogress.setBody(vle.getProgress(a));YAHOO.example.container.displayprogress.render(document.body)}else{YAHOO.example.container.displayprogress.setBody(vle.getProgress(a))}YAHOO.example.container.displayprogress.show()}else{document.getElementById("centeredDiv").style.display="none";document.getElementById("progressDiv").innerHTML=vle.getProgress(a)}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_dropdownmenu.js")}function createAttribute(e,d,a,f){var b=e.createAttribute(a);b.nodeValue=f;d.setAttributeNode(b)}function createElement(e,d,a){var f=e.createElement(d);if(a!=null){for(var b in a){createAttribute(e,f,b,a[b])}}return f}function createBreak(){return createElement(document,"br",null)}function createSpace(){return document.createTextNode(" ")}function encodeString(a){return encodeURIComponent(a)}function getElementsByAttribute(d,g,a){notificationManager.notify("attributeName:"+d+", attributeValue:"+g,4);var f=null;if(a!=null){notificationManager.notify("frameName:"+a,4);f=yui.get(window.frames.ifrm.frames[a].document.body)}else{f=yui.get(window.frames.ifrm.document.body)}if(g!=null){var h=f.query("["+d+"="+g+"]");notificationManager.notify("audioNode:"+h,4);return h}else{var b=f.queryAll("["+d+"]");if(b!=null){notificationManager.notify("audioNodes.length:"+b.size(),4);for(var e=0;e<b.size();e++){notificationManager.notify("audioNode textContent:"+b.item(e).get("textContent"),4)}}return b}}function checkAccessibility(a){var d={success:function(e){return true},failure:function(e){return false}};var b=YAHOO.util.Connect.asyncRequest("HEAD",a,d,null)}function normalizeHTML(a){return a.replace(/\s+/g,"")}function injectVleUrl(b){var d=window.location.toString();var a=d.substring(0,d.indexOf("/vle/"))+"/vle/";b=b.replace(/(src='|src="|href='|href=")(?!http|\/)/gi,"$1"+a);return b}if(!Array.contains){Array.prototype.contains=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return true}}return false}}if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}if(!Array.map){Array.prototype.map=function(a){var d=[];for(var b=0;b<this.length;b++){d.push(a(this[i]))}return d}}if(!Array.compare){Array.prototype.compare=function(b){if(this.length!=b.length){return false}for(var a=0;a<b.length;a++){if(this[a].compare){if(!this[a].compare(b[a])){return false}}if(this[a]!==b[a]){return false}}return true}}function hideElement(a){document.getElementById(a).style.display="none"}function showElement(a){document.getElementById(a).style.display="block"}function findPos(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}return{left:b,top:curtop}}function objSize(d){var a=0;for(var b in d){if(d.hasOwnProperty(b)){a++}}return a}function loadXMLDocFromString(a){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(a);return(xmlDoc)}catch(b){try{parser=new DOMParser();xmlDoc=parser.parseFromString(a,"text/xml");return(xmlDoc)}catch(b){alert(b.message)}}return(null)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/common/helperfunctions.js")}View.prototype.loadProject=function(b,a,d){eventManager.fire("loadingProjectStart");this.project=createProject(createContent(b),a,d,this);eventManager.fire("loadingProjectComplete")};View.prototype.getProject=function(){return this.project};View.prototype.injectVleUrl=function(b){var d=window.location.toString();var a=d.substring(0,d.indexOf("/vle/"))+"/vle/";b=b.replace(/(src='|src="|href='|href=")(?!http|\/)/gi,"$1"+a);return b};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/coreview.js")}View.prototype.utils={};View.prototype.utils.containsApplet=function(a){var b=a.getContentString();if(b.indexOf("<applet")!=-1&&b.indexOf("</applet>")!=-1){return true}else{return false}};View.prototype.utils.insertAppletParam=function(b,a,d){var f=b.getContentString();var e='<param name="'+a+'" value="'+d+'">';if(f.indexOf(e)==-1){b.setContent(f.replace("</applet>",e+"\n</applet>"))}};View.prototype.utils.getContentPath=function(b,a){return a.substring(a.indexOf(b)+b.length,a.length)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/view_utils.js")}function ConnectionManager(a){this.em=a;this.MAX=5;this.queue=[];this.running=0;this.counter=0}ConnectionManager.prototype.request=function(g,e,d,a,f,j,h){var b;if(g=="GET"){b=new GetConnection(e,d,a,f,j,this.em,h)}else{if(g=="POST"){b=new PostConnection(e,d,a,f,j,this.em,h)}else{alert("unknown connection type: "+g+"\nExiting...");return}}this.queue.push(b);this.launchNext()};ConnectionManager.prototype.launchNext=function(){if(this.queue.length>0){if(this.running<this.MAX){this.queue.sort(this.orderByPriority);var a=this.queue.shift();var d=this.generateEventName();var b=function(f,e,g){g.running--;g.launchNext()};this.em.addEvent(d);this.em.subscribe(d,b,this);this.running++;a.startRequest(d)}}};ConnectionManager.prototype.orderByPriority=function(e,d){if(e.priority<d.priority){return -1}if(e.priority>d.priority){return 1}if(e.priority==d.priority){return 0}};ConnectionManager.prototype.generateEventName=function(){while(true){var a="connectionEnded"+this.counter;if(!this.em.isEvent(a)){return a}this.counter++}};function Connection(e,b,a,f,g,d){this.em=d}Connection.prototype.startRequest=function(a){var b=a;var d={success:function(e){this.em.fire(b);if((e.responseText&&!e.responseXML)||(typeof ActiveXObject!="undefined")){e.responseXML=loadXMLString(e.responseText)}if(e.responseText!="undefined"&&e.getResponseHeader["Content-Length"]<10000&&e.responseText.match("login for portal")!=null){if(notificationManager){notificationManager.notify("You have been inactive for too long and have been logged out. Please log back in to continue.",3)}else{alert("You have been inactive for too long and have been logged out. Please log back in to continue.")}vle.logout=true;window.location="/webapp/j_spring_security_logout"}this.handler(e.responseText,e.responseXML,this.hArgs)},failure:function(f){this.em.fire(b);if(this.fHandler){this.fHandler(f,this.hArgs)}else{var e="Connection request failed: transactionId="+f.tId+"  TEXT="+f.statusText;if(notificationManager){notificationManager.notify(e,2)}else{alert(e)}}},scope:this};YAHOO.util.Connect.asyncRequest(this.type,this.url,d,this.params)};GetConnection.prototype=new Connection();GetConnection.prototype.constructor=GetConnection;GetConnection.prototype.parent=Connection.prototype;function GetConnection(e,b,a,f,h,d,g){this.type="GET";this.priority=e;this.em=d;this.url=b;this.cArgs=a,this.handler=f;this.hArgs=h;this.fHandler=g;this.params=null;this.parseConnectionArgs()}GetConnection.prototype.parseConnectionArgs=function(){var b=true;if(this.url.indexOf("?")>-1){b=false}if(this.cArgs){for(var a in this.cArgs){if(b){b=false;this.url+="?"}else{this.url+="&"}this.url+=a+"="+this.cArgs[a]}}};PostConnection.prototype=new Connection();PostConnection.prototype.constructor=PostConnection;PostConnection.prototype.parent=Connection.prototype;function PostConnection(e,b,a,f,h,d,g){this.type="POST";this.priority=e;this.em=d;this.url=b;this.cArgs=a,this.handler=f;this.hArgs=h;this.fHandler=g;this.params=null;this.parseConnectionArgs()}PostConnection.prototype.parseConnectionArgs=function(){var b=true;if(this.cArgs){this.params="";for(var a in this.cArgs){if(b){b=false}else{this.params+="&"}this.params+=a+"="+this.cArgs[a]}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/io/ConnectionManager.js")}var notificationManager={init:function(){window.notificationEventManager=new EventManager();notificationEventManager.addEvent("removeMsg")}(),count:0,debugMode:false,levels:{1:"info",2:"warn",3:"alert",4:"log",5:"fatal"},notify:function(a,d){if(d){var b=this.levels[d];if(this.debugMode){if(window.console){if(!b){b="log"}if(b=="alert"){b="error"}window.console[b]("Notify debug: "+a)}else{this.notifyAlert("Notify debug: "+a)}}else{if(b){if(b=="alert"){this.notifyAlert("Notify message: "+a)}else{if(b=="fatal"){eventManager.fire("fatalError",a)}else{if(b!="log"){if(window.console&&window.console[b]){window.console[b](a)}else{}}}}}}}else{this.notifyAlert("Notify message: "+a)}},notifyAlert:function(b){var a=this.generateUniqueMessageDiv();document.body.appendChild(a);new AlertObject(a,b)},generateUniqueMessageDiv:function(){var b="superSecretMessageDiv_"+this.count;if(document.getElementById(b)){this.count++;return generateUniqueMessageDiv()}else{var a=createElement(document,"div",{id:b,"class":"messages",style:"display:none;"});this.count++;return a}}};function AlertObject(a,b){this.MSG_TIME=3000;this.el=a;this.msg=b;notificationEventManager.subscribe("removeMsg",this.removeMsg,this);a.style.display="block";a.innerHTML=b;a.style.left=(document.body.clientWidth/2)-150;setTimeout('notificationEventManager.fire("removeMsg","'+a.id+'")',this.MSG_TIME)}AlertObject.prototype.removeMsg=function(b,a,d){if(a[0]==d.el.id){document.body.removeChild(d.el);d=null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/NotificationManager.js")}function createContent(a){return function(e){var e=e;var p;var g;var r;var m=false;var l=30000;var f;var h=function(t){if(typeof eventManager!="undefined"){eventManager.fire("alert",t)}else{alert(t)}};var k=function(t){if(m){return s(t)}else{return d(t)}};var s=function(t){if(t=="xml"){return g}else{if(t=="json"){return r}else{if(t=="string"){return p}else{return null}}}};var d=function(t){f=setTimeout('eventManager.fire("contentTimedOut","'+e+'")',l);var u=new XMLHttpRequest();u.open("GET",e,false);u.send(null);clearTimeout(f);if(u.responseText||u.responseXML){if(u.responseXML){g=u.responseXML}else{b(u.responseText)}if(u.responseText){p=u.responseText}else{if(window.ActiveXObject){p=u.responseXML.xml}else{p=(new XMLSerializer()).serializeToString(u.responseXML)}}try{r=yui.JSON.parse(p)}catch(v){r=undefined}m=true;return s(t)}else{h("Error retrieving content for url: "+e);return null}};var j=function(t){if(typeof t=="string"){p=t;b(p);try{r=yui.JSON.parse(p)}catch(u){r=undefined}}else{if(window.ActiveXObject){if(t.xml){g=t;p=t.xml;try{r=yui.JSON.parse(p)}catch(u){r=undefined}}else{r=t;try{p=yui.JSON.stringify(r);b(p)}catch(u){r=undefined}}}else{if(t instanceof Document){g=t;p=(new XMLSerializer()).serializeToString(g);try{r=yui.JSON.parse(p)}catch(u){r=undefined}}else{r=t;try{p=yui.JSON.stringify(r);b(p)}catch(u){p=undefined}}}}m=true};var n=function(t){if(window.ActiveXObject){if(t.xml.length==0){return false}else{return true}}else{return t.getElementsByTagName("parsererror").length<1}};var b=function(t){if(document.implementation&&document.implementation.createDocument){g=new DOMParser().parseFromString(t,"text/xml")}else{if(window.ActiveXObject){g=new ActiveXObject("Microsoft.XMLDOM");g.loadXML(t)}}if(!n(g)){g=undefined}};var q=function(t){return e.substring(e.indexOf(t)+t.length+1,e.length)};return{getContentXML:function(){return k("xml")},getContentJSON:function(){return k("json")},getContentString:function(){return k("string")},setContent:function(t){j(t)},retrieveContent:function(){k("string")},getContentUrl:function(){return e},getFilename:function(t){return q(t)}}}(a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/content/content.js")}var SELF_RENDERING_NODES=["BlueJNode","DrawNode","FlashNode","HtmlNode","MySystemNode","SVGDrawNode"];var HTML_MAP={BrainstormNode:{server:"node/brainstorm/brainfull.html",serverless:"node/brainstorm/brainlite.html"},ChallengeQuestionNode:"node/challengequestion/challengequestion.html",DataGraphNode:"node/datagraph/datagraph.html",FillinNode:"node/fillin/fillin.html",GlueNode:"node/glue/glue.html",MatchSequenceNode:"node/matchsequence/matchsequence.html",MultipleChoiceNode:"node/multiplechoice/multiplechoice.html",NoteNode:"node/openresponse/note.html",OpenResponseNode:"node/openresponse/openresponse.html",OutsideUrlNode:"node/outsideurl/outsideurl.html",TickerNode:"node/ticker/ticker.html"};function removeClassFromElement(a,b){YUI().use("node",function(e){var d=e.get("#"+a);d.removeClass(b)})}function addClassToElement(a,b){YUI().use("node",function(e){var d=e.get("#"+a);d.addClass(b)})}function hasClass(a,b){var d=document.getElementById(a).getAttribute("class");return d!=null&&(d.indexOf(b)!=-1)}function clearFeedbackDiv(){document.getElementById("feedbackDiv").innerHTML=""}function clearResponseBox(){document.getElementById("responseBox").value=""}function setButtonVisible(d,b){var a=document.getElementById(d);if(b){a.style.visibility="visible"}else{a.style.visibility="hidden"}}function setCheckAnswerButtonEnabled(a){var b=document.getElementById("checkAnswerButton");if(a){b.removeAttribute("disabled")}else{b.setAttribute("disabled","true")}}function setResponseBoxEnabled(b){var a=document.getElementById("responseBox");if(b){a.removeAttribute("disabled")}else{a.setAttribute("disabled","disabled")}}function displayNumberAttempts(g,e,b){var d=b.length+1;var a="";if(d==1){a="1st"}else{if(d==2){a="2nd"}else{if(d==3){a="3rd"}else{a=d+"th"}}}var f=document.getElementById("numberAttemptsDiv");var h=g+" "+a+" "+e+".";f.innerHTML=h}function displayLastAttempt(d){if(d.length>0){var f=d[d.length-1].timestamp;var h=f.getMonth()+1;var a=f.getHours();var e=f.getMinutes();var j=f.getSeconds();var b=h+"/"+f.getDate()+"/"+f.getFullYear()+" at "+a+":"+e+":"+j;var g=document.getElementById("lastAttemptDiv");g.innerHTML=" Your last attempt was on "+b}}function makeHtmlSafe(a){if(a){a=a.replace(/\&/g,"&amp;");a=a.replace(/\"/g,"&quot;");return a}else{return""}}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/common/nodehelpers.js")}function createProject(d,b,e,a){return function(w,z,O,l){var w=w;var ab=z;var M=O;var G=[];var R=[];var Y;var ag;var N;var s;var r;var l=l;var x=[];var F=function(){var an=w.getContentJSON().nodes;for(var am=0;am<an.length;am++){var ak=an[am];var al=NodeFactory.createNode(ak,l);if(al==null){l.notificationManager.notify("null was returned from project factory for node: "+ak.identifier+" \nSkipping node.",2)}else{if(!ak.identifier||ak.identifier==""){l.notificationManager.notify("No identifier for node in project file.",3)}else{al.id=ak.identifier;if(ae(al.id)){l.notificationManager.notify("Duplicate node id: "+al.id+" found in project",3)}}if(!ak.title||ak.title==""){l.notificationManager.notify("No title attribute for node with id: "+al.id,2)}else{al.title=ak.title}if(!ak["class"]||ak["class"]==""){l.notificationManager.notify("No class attribute for node with id: "+al.id,2)}else{al.className=ak["class"]}if(!ak.ref||ak.ref==""){l.notificationManager.notify("No filename specified for node with id: "+al.id+" in the project file",2)}else{al.content=createContent(A(ak.ref))}G.push(al);if(!M){al.content.retrieveContent()}if(al.type=="NoteNode"){al.renderFrame()}al.prevWorkNodeIds=ak.previousWorkNodeIds;eventManager.subscribe("pageRenderComplete",al.pageRenderComplete,al);eventManager.subscribe("contentRenderComplete",al.contentRenderComplete,al);eventManager.subscribe("scriptsLoaded",al.loadContentAfterScriptsLoad,al)}}};var U=function(){var ap=w.getContentJSON();var aq=ap.sequences;for(var ao=0;ao<aq.length;ao++){var al=NodeFactory.createNode(aq[ao],l);al.json=aq[ao];if(ae(al.id)){l.notificationManager.notify("Duplicate sequence id: "+al.id+" found in project.",3)}R.push(al)}if(ap.startPoint){var am=ad(ap.startPoint)}else{l.notificationManager.notify("No starting sequence specified for this project",3)}if(am){for(var an=0;an<R.length;an++){var ak=[];if(ai(R[an].id,ak,"file")){t(R[an].id)}else{l.notificationManager.notify("Infinite loop discovered in sequences, check sequence references",3);return null}}r=am}};var ae=function(ak){return ad(ak)};var ad=function(am){for(var ak=0;ak<G.length;ak++){if(G[ak].id==am){return G[ak]}}for(var al=0;al<R.length;al++){if(R[al].id==am){return R[al]}}return null};var C=function(ak){if(ak){var an=ak.split(".");var am=r;var ao;for(var al=0;al<an.length;al++){ao=am.children[an[al]];if(!ao){return null}else{if(al==an.length-1){return ao}else{am=ao}}}}else{return null}};var A=function(ak){if(ab!=null){if(ab.lastIndexOf("\\")!=-1){return ab+"\\"+ak}else{return ab+"/"+ak}}return ak};var ai=function(ao,al,an){if(al.indexOf(ao)==-1){var am=p(ao,an);if(am.length>0){al.push(ao);for(var ak=0;ak<am.length;ak++){if(!ai(am[ak],al)){return false}}al.pop(ao);return true}else{return true}}else{return false}};var t=function(ao){var an=ad(ao);var am=an.json.refs;for(var ak=0;ak<am.length;ak++){var al=ad(am[ak]);if(!al){l.notificationManager.notify("Node reference "+am[ak]+" exists in sequence node "+ao+" but the node has not been defined and does not exist.",2)}else{an.addChildNode(al)}}};var p=function(aq,ap){var ao=ad(aq);if(!ao){l.notificationManager.notify("Sequence with id: "+aq+" is referenced but this sequence does not exist.",2);return[]}var ak=[];if(ap=="file"){var al=ao.json.refs;for(var an=0;an<al.length;an++){ak.push(al[an])}}else{var am=ao.children;for(var an=0;an<am.length;an++){if(am[an].type=="sequence"){ak.push(am[an].id)}}}return ak};var h=function(al){for(var am=0;am<G.length;am++){if(G[am].title==al){return G[am]}}for(var ak=0;ak<R.length;ak++){if(R[ak].title==al){return R[ak]}}return null};var aa=function(ak){if(ak){if(ak.type=="sequence"){for(var am=0;am<ak.children.length;am++){var al=aa(ak.children[am]);if(al!=null){return al}}}else{return ak.id}}else{l.notificationManager.notify("Cannot get start node! Possibly no start sequence is specified or invalid node exists in project.",2)}};var q=function(am){for(var ak=0;ak<R.length;ak++){for(var al=0;al<R[ak].children.length;al++){if(R[ak].children[al].id==am){R[ak].children.splice(al,1)}}}};var g=function(ak,al){if(ak.type=="sequence"){for(var an=0;an<ak.children.length;an++){var am=g(ak.children[an],al+"."+an);if(am!=undefined&&am!=null){return am}}}else{return al}};var aj=function(ak,am,ao){if(ak.id==ao){return am}else{if(ak.type=="sequence"){for(var al=0;al<ak.children.length;al++){var an=aj(ak.children[al],am+"."+al,ao);if(an){return an}}}}};var X=function(){u();af();I();Q();j();V()};var u=function(){var ak="Sequences defined by Id: ";for(var al=0;al<R.length;al++){if(al==R.length-1){ak+=" "+R[al].id}else{ak+=" "+R[al].id+","}}l.notificationManager.notify(ak,1)};var af=function(){var al="Nodes defined by Id: ";for(var ak=0;ak<G.length;ak++){if(ak==G.length-1){al+=" "+G[ak].id}else{al+=" "+G[ak].id+","}}l.notificationManager.notify(al,1)};var I=function(){var am="Sequence(s) with id(s): ";var al=false;for(var ak=0;ak<R.length;ak++){if(!T(R[ak].id)&&R[ak].id!=r.id){al=true;am+=" "+R[ak].id}}if(al){l.notificationManager.notify(am+" is/are never used in this project",1)}};var Q=function(){var am="Node(s) with id(s): ";var al=false;for(var ak=0;ak<G.length;ak++){if(!T(G[ak].id)){al=true;am+=" "+G[ak].id}}if(al){l.notificationManager.notify(am+" is/are never used in this project",1)}};var j=function(){var an="Duplicate sequence Id(s) are: ";var am=false;for(var ao=0;ao<R.length;ao++){var al=0;for(var ak=0;ak<R.length;ak++){if(R[ao].id==R[ak].id){al++}}if(al>1){am=true;an+=R[ao].id+" "}}if(am){l.notificationManager.notify(an,1)}};var V=function(){var an="Duplicate node Id(s) are: ";var am=false;for(var ao=0;ao<G.length;ao++){var al=0;for(var ak=0;ak<G.length;ak++){if(G[ao].id==G[ak].id){al++}}if(al>1){am=true;an+=G[ao].id+" "}}if(am){l.notificationManager.notify(an,1)}};var T=function(am){for(var al=0;al<R.length;al++){for(var ak=0;ak<R[al].children.length;ak++){if(R[al].children[ak].id==am){return true}}}return false};var K=function(am){var an=[];if(am=="node"){var al=G}else{var al=R}for(var ak=0;ak<al.length;ak++){if(!T(al[ak].id)&&!(r==al[ak])){an.push(al[ak])}}return an};var S=function(al){var an="";for(var ak=0;ak<G.length;ak++){var ao=G[ak];var ap=ao.id;var am=ao.type;if(al.indexOf(am)==-1){if(an!=""){an+=":"}an+=ap}}return an};var H=function(am){var al="";for(var ak=0;ak<G.length;ak++){var ao=G[ak];var an=ao.type;if(am.indexOf(an)==-1){if(al!=""){al+=":"}al+=an}}return al};var L=function(an,ap){var ao="";if(an.children.length>0){for(var am=0;am<an.children.length;am++){ao+=L(an.children[am],ap)}}else{ao+='<div id="showallStep"><a href="#" onclick="view.renderNode(\''+Z(an.id)+"'); YAHOO.example.container.showallwork.hide();\">"+an.title+'</a><div class="type">'+an.getType(true)+"</div></div>";if(ap){ao+='<div class="showallStatus">Status: '+an.getShowAllWorkHtml(l)+"</div>";ao+="<div><table id='teacherTable'>";var al=l.annotations.getAnnotationsByNodeId(an.id);if(al.length>0){for(var am=0;am<al.length;am++){var ak=al[am];if(ak.type=="comment"){ao+="<tr><td class='teachermsg1'>TEACHER FEEDBACK: "+ak.value+"</td></tr>"}if(ak.type=="score"){ao+="<tr><td class='teachermsg2'>TEACHER SCORE: "+ak.value+"</td></tr>"}}}else{ao+="<td class='teachermsg3'>Grading: Your Teacher hasn't graded this step yet.<td>"}ao+="</table></div>"}else{ao+=an.getShowAllWorkHtml(l)}ao+=""}return ao};var v=function(am){for(var al=0;al<R.length;al++){if(R[al].id==am){R.splice(al,1);q(am);return}}for(var ak=0;ak<G.length;ak++){if(G[ak].id==am){G.splice(ak,1);q(am);return}}};var n=function(am,ak){var al=ad(am);al.children.splice(ak,1)};var J=function(ao,am,al){var an=ad(ao);var ap=ad(am);ap.children.splice(al,0,an);var ak=[];if(!ai(am,ak)){l.notificationManager.notify("This would cause an infinite loop! Undoing changes...",3);ap.children.splice(al,1)}};var ac=function(){var am={autoStep:Y,stepLevelNum:ag,stepTerm:s,title:N,nodes:[],sequences:[],startPoint:""};if(r){am.startPoint=r.id}for(var ak=0;ak<G.length;ak++){am.nodes.push(G[ak].nodeJSON(ab))}for(var al=0;al<R.length;al++){am.sequences.push(R[al].nodeJSON())}return am};var W=function(){for(var al=0;al<r.children.length;al++){var ak=g(r.children[al],al);if(ak!=undefined&&ak!=null){return ak}}};var Z=function(am){for(var al=0;al<r.children.length;al++){var ak=aj(r.children[al],al,am);if(ak!=undefined&&ak!=null){return ak}}};var E=function(){var ak=w.getContentUrl();return ak.substring(ak.indexOf(ab)+ab.length+1,ak.length)};var D=function(al){var ak=ad(al);if(ak){return ak.content.getFilename(ab)}else{return null}};var ah=function(al){var ak=1;while(true){var am=al+" "+ak;if(!h(am)){return am}ak++}};var y=function(am){var al=1;while(true){var ak=am+"_"+al;if((!ad(ak))&&(x.indexOf(ak)==-1)){return ak}al++}};var k=function(am,ak){var ap=function(av,au,az){var ay=au[0];var ar=au[1];var ax=az;var aw=ax.queue.shift();if(aw.id!=ay){ax.view.notificationManager("Copied node id and node id from queue do match, error when copying.",3)}if(!ar){ax.msg+=" Failed copy of "+ay}else{ax.msg+=" Copied "+ay+" to "+ar;ax.view.getProject().addCopyId(ar);ax.copiedIds.push(ar)}if(ax.queue.length>0){var at=ax.queue[0];at.node.copy(at.eventName)}else{ax.view.eventManager.fire(ax.eventName,[ax.copiedIds,ax.msg])}};var an={view:l,queue:[],eventName:ak,msg:"",copiedIds:[]};for(var ao=0;ao<am.length;ao++){var al=B();an.queue.push({id:am[ao],node:ad(am[ao]),eventName:al});l.eventManager.addEvent(al);l.eventManager.subscribe(al,ap,an)}if(an.queue.length>0){var aq=an.queue[0];aq.node.copy(aq.eventName)}else{l.eventManager.fire(ak,[null,null])}};var B=function(){return l.eventManager.generateUniqueEventName("copy_")};var P=function(ak){x.push(ak)};var m=function(aq){var ap=ad(aq);var ao=ap.content;var an=ao.getContentJSON();var ak=null;if(an.assessmentItem!=null){var am=an.assessmentItem;var al=am.interaction;ak=al.prompt}return ak};var f=w.getContentJSON();if(f){Y=f.autoStep;ag=f.stepLevelNum;s=f.stepTerm;N=f.title;F();U();X()}else{l.notificationManager.notify("Unable to parse project content, check project.json file. Unable to continue.",5)}return{useAutoStep:function(){return Y},setAutoStep:function(ak){Y=ak},useStepLevelNumbering:function(){return ag},setStepLevelNumbering:function(ak){ag=ak},getStepTerm:function(){return s},setStepTerm:function(ak){s=ak},getTitle:function(){return N},setTitle:function(ak){N=ak},getNodeById:function(ak){return ad(ak)},validateNoLoops:function(am,ak,al){return ai(am,ak,al)},getNodeByTitle:function(ak){return h(ak)},getNodeByPosition:function(ak){return C(ak)},getNodeIds:function(ak){return S(ak)},getNodeTypes:function(ak){return H(ak)},getShowAllWorkHtml:function(ak,al){return L(ak,al)},getStartNodeId:function(){return aa(r)},removeNodeById:function(ak){v(ak)},removeReferenceFromSequence:function(al,ak){n(al,ak)},addNodeToSequence:function(am,al,ak){J(am,al,ak)},copyNodes:function(al,ak){k(al,ak)},getStartNodePosition:function(){return W()},getPositionById:function(ak){return Z(ak)},getContentBase:function(){return ab},getProjectFilename:function(){return E()},getUrl:function(){return w.getContentUrl()},getLeafNodes:function(){return G},getSequenceNodes:function(){return R},getRootNode:function(){return r},getUnattached:function(ak){return K(ak)},getNodeFilename:function(ak){return D(ak)},generateUniqueTitle:function(ak){return ah(ak)},generateUniqueId:function(ak){return y(ak)},generateUniqueCopyEventName:function(){return B()},addCopyId:function(ak){P(ak)},projectJSON:function(){return ac()},makeUrl:function(ak){return A(ak)},getNodePromptByNodeId:function(ak){return m(ak)}}}(d,b,e,a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/project/Project.js")}function NodeFactory(){}NodeFactory.createNode=function(d,b){var e=new Array("node","HtmlNode","MultipleChoiceNode","sequence","FillinNode","MatchSequenceNode","NoteNode","JournalEntryNode","OutsideUrlNode","BrainstormNode","GlueNode","OpenResponseNode","FlashNode","BlueJNode","DataGraphNode","DrawNode","MySystemNode","SVGDrawNode");if(d.type){var f=d.type}else{var f=null}if(e.indexOf(f)>-1){if(f=="HtmlNode"){return new HtmlNode("HtmlNode",b)}else{if(f=="MultipleChoiceNode"){return new MultipleChoiceNode("MultipleChoiceNode",b)}else{if(f=="FillinNode"){return new FillinNode("FillinNode",b)}else{if(f=="NoteNode"){return new NoteNode("NoteNode",b)}else{if(f=="JournalEntryNode"){return new JournalEntryNode("JournalEntryNode",b)}else{if(f=="MatchSequenceNode"){return new MatchSequenceNode("MatchSequenceNode",b)}else{if(f=="OutsideUrlNode"){return new OutsideUrlNode("OutsideUrlNode",b)}else{if(f=="BrainstormNode"){return new BrainstormNode("BrainstormNode",b)}else{if(f=="FlashNode"){return new FlashNode("FlashNode",b)}else{if(f=="GlueNode"){return new GlueNode("GlueNode",b)}else{if(f=="OpenResponseNode"){return new OpenResponseNode("OpenResponseNode",b)}else{if(f=="BlueJNode"){return new BlueJNode("BlueJNode",b)}else{if(f=="DataGraphNode"){return new DataGraphNode("DataGraphNode",b)}else{if(f=="DrawNode"){return new DrawNode("DrawNode",b)}else{if(f=="MySystemNode"){return new MySystemNode("MySystemNode",b)}else{if(f=="SVGDrawNode"){return new SVGDrawNode("SVGDrawNode",b)}else{if(f=="sequence"){var a=new Node("sequence",b);a.id=d.identifier;a.title=d.title;return a}else{return new Node(null,b)}}}}}}}}}}}}}}}}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/nodefactory.js")}function Node(b,a){this.id;this.parent;this.children=[];this.type=b;this.title;this.className;this.content;this.contentPanel;this.baseHtmlContent;this.prevWorkNodeIds=[];this.extraData;this.view=a}Node.prototype.getNodeId=function(){return this.id};Node.prototype.getTitle=function(){if(this.title!=null){return this.title}return this.id};Node.prototype.getContent=function(){return this.content};Node.prototype.setContent=function(a){this.content=a};Node.prototype.getType=function(a){if(this.type){if(!a){return this.type}else{if(this.type.lastIndexOf("Node")>-1){return this.type.substring(0,this.type.lastIndexOf("Node"))}else{return this.type}}}else{return""}};Node.prototype.addChildNode=function(a){this.children.push(a);a.parent=this};Node.prototype.getNodeById=function(d){if(this.id==d){return this}else{if(this.children.length==0){return null}else{var a=false;for(var b=0;b<this.children.length;b++){a=a||this.children[b].getNodeById(d)}return a}}};Node.prototype.alertNodeInfo=function(a){notificationManager.notify("node.js, "+a+"\nthis.id:"+this.id+"\nthis.title:"+this.title,3)};Node.prototype.render=function(d,a){this.studentWork=a;this.contentPanel=d;if(d){this.contentPanel=window.frames[d.name]}else{if(d==null){if(this.type=="NoteNode"){this.contentPanel=window.frames["noteiframe"+this.id];document["notePanel_"+this.id].cfg.setProperty("visible",true)}else{this.contentPanel=window.frames.ifrm}}}if(SELF_RENDERING_NODES.indexOf(this.type)==-1){if(this.contentPanel.nodeId!=this.id){var b=HTML_MAP[this.type];if(this.type=="BrainstormNode"){if(this.isUsingServer()){b=b.server}else{b=b.serverless}}this.baseHtmlContent=createContent(b);this.contentPanel.nodeId=this.id;this.contentPanel.document.open();this.contentPanel.document.write(this.injectBaseRef(this.view.injectVleUrl(this.baseHtmlContent.getContentString())));this.contentPanel.document.close()}else{this.contentPanel.loadContentAfterScriptsLoad(this)}}else{if(!this.baseHtmlContent){this.baseHtmlContent=createContent(this.view.getProject().makeUrl(this.content.getContentJSON().src));if(this.type=="MySystemNode"){this.baseHtmlContent.setContent(this.updateJSONContentPath(this.view.getConfig().getConfigParam("getContentBaseUrl"),this.baseHtmlContent.getContentString()))}}if(this.handlePreviousOutsideLink(this)){return}this.contentPanel.document.open();this.contentPanel.document.write(this.injectBaseRef(this.baseHtmlContent.getContentString()));this.contentPanel.document.close();this.view.eventManager.fire("contentRenderComplete",this.id)}if(this.contentPanel!=null){this.contentPanel.eventManager=eventManager;this.contentPanel.nodeId=this.id;this.contentPanel.scriptloader=this.view.scriptloader;this.contentPanel.yui=yui;if(this.type=="MySystemNode"||this.type=="SVGDrawNode"){this.contentPanel.vle=this.view}}if(this.content.getContentJSON().blueJProjectPath&&this.content.getContentJSON().blueJProjectPath!=""&&this.view.postCurrentStep){this.extraData=this.content.getContentJSON.blueJProjectPath;this.view.postCurrentStep(this)}};Node.prototype.pageRenderComplete=function(b,a,d){if(d.id==a[0]){d.contentPanel.loadContent(d);d.insertPreviousWorkIntoPage(d.contentPanel.document)}};Node.prototype.loadContentAfterScriptsLoad=function(b,a,d){if(d.id==a[0]){d.contentPanel.loadContentAfterScriptsLoad(d)}};Node.prototype.contentRenderComplete=function(b,a,d){};Node.prototype.onExit=function(){};Node.prototype.getView=function(){if(this.isSequence()){if(this.json.view==null){return"normal"}else{return this.json.view}}else{return null}};Node.prototype.isSequence=function(){return this.type=="sequence"};Node.prototype.nodeJSON=function(b){if(this.type=="sequence"){var e={type:"sequence",identifier:makeHtmlSafe(this.id),title:makeHtmlSafe(this.title),view:this.getView(),refs:[]};for(var a=0;a<this.children.length;a++){e.refs.push(this.children[a].id)}return e}else{var d={type:this.type,identifier:makeHtmlSafe(this.id),title:makeHtmlSafe(this.title),ref:this.content.getFilename(b),previousWorkNodeIds:this.prevWorkNodeIds};d["class"]=this.className;return d}};Node.prototype.getLatestWork=function(b,a){return null};Node.prototype.translateStudentWork=function(a){return a};Node.prototype.injectBaseRef=function(d){if(d.search(/<base/i)>-1){return d}else{var b=this.view.getConfig().getConfigParam("getContentBaseUrl");var e="<base href='"+b+"'/>";var a=d.replace("<head>","<head>"+e);return a}};Node.prototype.isLeafNode=function(){return this.type!="sequence"};Node.prototype.getDataXML=function(e){var d="";for(var a=0;a<e.length;a++){var b=e[a];d+="<state>"+b.getDataXML()+"</state>"}return d};Node.prototype.parseDataXML=function(b){var a=b.getElementsByTagName("type")[0].textContent;var e=b.getElementsByTagName("id")[0].textContent;var d=NodeFactory.createNode(a);d.id=e;return d};Node.prototype.handlePreviousOutsideLink=function(d,a){if(!window.frames.ifrm){return false}else{try{window.frames.ifrm.host}catch(b){history.back();setTimeout(function(){d.render(a)},500);return true}return false}};Node.prototype.insertPreviousWorkIntoPage=function(f){if(this.prevWorkNodeIds.length>0){var d="";for(var g=0;g<this.prevWorkNodeIds.length;g++){var b=vle.getLatestWorkByNodeId(this.prevWorkNodeIds[g]);if(b){var e=vle.project.getNodeById(this.prevWorkNodeIds[g]);d+="Remember, your response to step "+e.title+" was: "+b.getStudentWork()+"</br></br>"}}var a=f.getElementById("previousWorkDiv");if(a){a.innerHTML=d}}};Node.prototype.copy=function(g,j){var l=function(p,m,n){n[0].view.eventManager.fire(n[1],[n[0].id,p])};var k=function(m,n){n[0].view.eventManager.fire(n[1],n[0].id)};if(this.type!="sequence"){var j=this.view.getProject();var e=this.content.getContentString();if(this.type=="HtmlNode"||this.type=="DrawNode"||this.type=="MySystemNode"){var d=this.content.getContentJSON().src}else{var d=""}if(this.type=="MySystemNode"){this.view.notificationManager.notify("My System Nodes cannot be copied, ignoring",3);this.view.eventManager.fire(g,[this.id,null]);return}this.view.connectionManager.request("POST",1,"filemanager.html",{command:"copyNode",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,j.getUrl()),param2:this.content.getContentString(),param3:this.type,param4:j.generateUniqueTitle(this.title),param5:this.className,param6:d},l,[this,g],k)}else{var a=function(u,t,q){if(t[0]){var r=t[0]}else{var r=[]}if(t[1]){var m=t[1]}else{var m=""}var n=q[0];var s=q[1];var v=n.view.getProject();var p={type:"sequence",identifier:v.generateUniqueId(n.id),title:v.generateUniqueTitle(n.title),view:n.getView(),refs:r};n.view.connectionManager.request("POST",1,"filemanager.html",{command:"createSequenceFromJSON",param1:n.view.utils.getContentPath(n.view.authoringBaseUrl,n.view.getProject().getUrl()),param2:yui.JSON.stringify(p)},l,[n,s],k)};var f=this.view.project.generateUniqueCopyEventName();this.view.eventManager.addEvent(f);this.view.eventManager.subscribe(f,a,[this,g]);var b=[];for(var h=0;h<this.children.length;h++){b.push(this.children[h].id)}this.view.getProject().copyNodes(b,f)}};Node.prototype.getShowAllWorkHtml=function(k){var e="";var h=k.state.getNodeVisitsByNodeId(this.id);if(h.length>0){var l=[];var b=h[h.length-1];for(var d=0;d<h.length;d++){var f=h[d];for(var a=0;a<f.nodeStates.length;a++){l.push(f.nodeStates[a])}}var g=l[l.length-1];e+="Last visited on ";if(b!=null){e+=""+new Date(parseInt(b.visitStartTime)).toLocaleString()}if(g!=null){e+='<div class="showallLatest">Latest Work:</div><div class="showallLatestWork">'+this.translateStudentWork(g.getStudentWork())+"</div>"}}else{e+="Step not visited yet."}for(var d=0;d<this.children.length;d++){e+=this.children[d].getShowAllWorkHtml()}return e};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/Node.js")}OpenResponseNode.prototype=new Node();OpenResponseNode.prototype.constructor=OpenResponseNode;OpenResponseNode.prototype.parent=Node.prototype;function OpenResponseNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}OpenResponseNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(f,d,e){e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();if(e.contentPanel.name!="ifrm"){e.contentPanel.renderComplete=function(){e.load()}}e.contentPanel.renderLoadComplete=function(){e.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/openresponse/openresponse.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(e,d,f){f[0].render(f[1])},[this,b])}};OpenResponseNode.prototype.load=function(){var b=[];for(var e=0;e<vle.state.visitedNodes.length;e++){var a=vle.state.visitedNodes[e];if(a.getNodeId()==this.id){for(var d=0;d<a.nodeStates.length;d++){b.push(a.nodeStates[d])}}}if(this.contentPanel&&this.contentPanel.loadContent){this.contentPanel.loadContent([this.element,vle,b])}if(this.contentPanel){this.insertPreviousWorkIntoPage(this.contentPanel.document)}};OpenResponseNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading){this.retrieveFile()}if(a){this.liteState=a}var b=function(g,e,f){f.contentPanel.document.open();f.contentPanel.document.write(f.injectBaseRef(injectVleUrl(g)));f.contentPanel.document.close();f.contentPanel.renderComplete=function(){f.loadLite()}};var d={success:function(e){b(e.responseText,e.responseXML,e.argument)},failure:function(e){this.view.notificationManager.notify("failed to retrieve file",3)},argument:this};YAHOO.util.Connect.asyncRequest("GET","node/openresponse/openresponselite.html",d,null)};OpenResponseNode.prototype.loadLite=function(){if(this.contentPanel&&this.contentPanel.loadContent){this.contentPanel.loadContent([this.element,this,vle,this.liteState])}};OpenResponseNode.prototype.parseDataXML=function(e){var d=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var f=d[a];b.push(OPENRESPONSESTATE.prototype.parseDataXML(f))}return b};OpenResponseNode.prototype.getDataXML=function(a){return OpenResponseNode.prototype.parent.getDataXML(a)};OpenResponseNode.prototype.parseDataJSONObj=function(a){return OPENRESPONSESTATE.prototype.parseDataJSONObj(a)};OpenResponseNode.prototype.translateStudentWork=function(a){return a};OpenResponseNode.prototype.parseStateXML=function(a){return OPENRESPONSESTATE.prototype.parseDataXML(a)};OpenResponseNode.prototype.onExit=function(){if(this.contentPanel&&this.contentPanel.save){this.contentPanel.save()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/OpenResponseNode.js")}HtmlNode.prototype=new Node();HtmlNode.prototype.constructor=HtmlNode;HtmlNode.prototype.parent=Node.prototype;function HtmlNode(b,a){this.view=a;this.type=b;this.audios=[];this.contentBase;this.audioSupported=true}HtmlNode.prototype.setHtmlContent=function(a){this.content.setContent(a)};HtmlNode.prototype.load=function(){this.prepareAudio();if(vle.audioManager!=null){vle.audioManager.setCurrentNode(this)}};HtmlNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading){this.retrieveFile()}};HtmlNode.prototype.loadLite=function(a){if(!this.elementText){if(!this.htmlContent){this.elementText=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;this.htmlContent=this.element.getElementsByTagName("content")[0].firstChild.nodeValue}else{this.elementText=this.htmlContent}}window.frames.ifrm.frames[a].document.open();window.frames.ifrm.frames[a].document.write(this.injectBaseRef(this.elementText));window.frames.ifrm.frames[a].document.close();window.frames.ifrm.frames[a].getAnswered=function(){return true};window.frames.ifrm.frames[a].checkAnswerLite=function(){return"visited html: "+this.id}};HtmlNode.prototype.getDataXML=function(a){return HtmlNode.prototype.parent.getDataXML(a)};HtmlNode.prototype.parseDataXML=function(e){var d=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var f=d[a];b.push(HTMLSTATE.prototype.parseDataXML(f))}return b};HtmlNode.prototype.parseDataJSONObj=function(a){return HTMLSTATE.prototype.parseDataJSONObj(a)};HtmlNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<content><![CDATA[";a+=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;a+="]]></content>";a+=this.exportNodeFooter();return a};HtmlNode.prototype.doNothing=function(){window.frames.ifrm.document.open();window.frames.ifrm.document.write(this.injectBaseRef(this.elementText));window.frames.ifrm.document.close()};HtmlNode.prototype.onExit=function(){if(this.contentPanel){try{if(this.contentPanel.onExit){try{this.contentPanel.onExit()}catch(a){}}}catch(a){history.back()}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/HtmlNode.js")}DrawNode.prototype=new HtmlNode();DrawNode.prototype.constructor=DrawNode;DrawNode.prototype.parent=HtmlNode.prototype;function DrawNode(b,a){this.view=a;this.type=b;this.content=null;this.audios=[];this.contentBase;this.audioSupported=true}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/DrawNode.js")}MySystemNode.prototype=new HtmlNode();MySystemNode.prototype.constructor=MySystemNode;MySystemNode.prototype.parent=HtmlNode.prototype;function MySystemNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[];this.contentBase;this.audioSupported=true}MySystemNode.prototype.updateJSONContentPath=function(b,d){this.filename="modules.json";var a=new RegExp(this.filename);var d=d.replace(a,b+"/"+this.filename);return d};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MySystemNode.js")}MatchSequenceNode.prototype=new Node();MatchSequenceNode.prototype.constructor=MatchSequenceNode;MatchSequenceNode.prototype.parent=Node.prototype;function MatchSequenceNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}MatchSequenceNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(f,e,d){d.contentPanel.document.open();d.contentPanel.document.write(d.injectBaseRef(injectVleUrl(f)));d.contentPanel.document.close();if(d.contentPanel.name!="ifrm"){d.contentPanel.renderComplete=function(){d.load()}}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/matchsequence/matchsequence.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(e,d,f){f[0].render(f[1])},[this,b])}};MatchSequenceNode.prototype.load=function(){var a=this.element.getElementsByTagName("customCheck");if(a[0]!=null){a=a[0].firstChild.nodeValue}else{a=null}this.contentPanel.loadContent(this.getXMLString(),a);this.insertPreviousWorkIntoPage(this.contentPanel.document)};MatchSequenceNode.prototype.getDataXML=function(a){return MatchSequenceNode.prototype.parent.getDataXML(a)};MatchSequenceNode.prototype.parseDataXML=function(f){var d=f.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var g=d[a];var e=MSSTATE.prototype.parseDataXML(g);if(e!=null){b.push(e)}}return b};MatchSequenceNode.prototype.onExit=function(){};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MatchSequenceNode.js")}FillinNode.prototype=new Node();FillinNode.prototype.constructor=FillinNode;FillinNode.prototype.parent=Node.prototype;function FillinNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}FillinNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(f,d,e){if(e.filename!=null&&vle.project.lazyLoading){e.retrieveFile()}e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();if(e.contentPanel.name!="ifrm"){e.contentPanel.renderComplete=function(){e.load()}}};if(this.handlePreviousOutsideLink(this)){return}if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/fillin/fillin.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(e,d,f){f[0].render(f[1])},[this,b])}};FillinNode.prototype.load=function(){var a=function(e,b,d){if(!d){d=e}d.contentPanel.loadContent([d.element,vle]);d.insertPreviousWorkIntoPage(d.contentPanel.document)};if(this.contentLoaded){a(this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,a,this)}};FillinNode.prototype.getDataXML=function(a){return FillinNode.prototype.parent.getDataXML(a)};FillinNode.prototype.parseDataXML=function(e){var d=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var f=d[a];b.push(FILLINSTATE.prototype.parseDataXML(f))}return b};FillinNode.prototype.parseDataJSONObj=function(a){return FILLINSTATE.prototype.parseDataJSONObj(a)};FillinNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<jaxbXML><![CDATA[";a+=this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue;a+="]]></jaxbXML>";a+=this.exportNodeFooter();return a};FillinNode.prototype.translateStudentWork=function(a){return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/FillinNode.js")}FlashNode.prototype=new Node();FlashNode.prototype.constructor=FlashNode;FlashNode.prototype.parent=Node.prototype;function FlashNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[]}FlashNode.prototype.setContent=function(a){this.content=a};FlashNode.prototype.render_old=function(a){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.elementText!=null){this.content=this.elementText}else{if(this.filename!=null){if(window.ActiveXObject){this.content=this.element.xml}else{this.content=(new XMLSerializer()).serializeToString(this.element)}}else{if(this.content==null){this.content=this.element.getElementsByTagName("content")[0].firstChild.nodeValue}}}if(a==null){this.contentPanel=window.frames.ifrm}else{this.contentPanel=window.frames[a.name]}if(this.contentPanel.document){this.writeHTML(this.contentPanel.document)}else{this.writeHTML(window.frames.ifrm.document)}};FlashNode.prototype.writeHTML=function(a){this.replaceVars(a);a.open();a.write(this.content);a.close()};FlashNode.prototype.replaceVars=function(){var h='<param name="movie" value="';var d='"/>';var e=vle.project.contentBaseUrl;if(e){e=e+"/"}else{e=""}var a=this.content.match(/<object.*>(.|\n|\r)*<\/object.*>/i);for(var j=0;j<a.length;j++){if(a[j]&&a[j]!=""&&a[j]!="\n"&&a[j]!="\r"&&a[j]!="\t"&&a[j]!=" "){var k=a[j].indexOf(h)+h.length;var g=a[j].indexOf('"',k);var b=a[j].substring(k,g);var f=new RegExp(b,"g");this.content=this.content.replace(f,e+b)}}};FlashNode.prototype.load=function(){this.createFlashJSInterface();document.getElementById("topStepTitle").innerHTML=this.title};FlashNode.prototype.getDataXML=function(a){return""};FlashNode.prototype.parseDataXML=function(b){var a=new Array();return a};FlashNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<content><![CDATA[";a+=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;a+="]]></content>";a+=this.exportNodeFooter();return a};FlashNode.prototype.createFlashJSInterface=function(){window.frames.ifrm.showJsAlert=function(){alert("calling js from flash")};window.frames.ifrm.callToFlash=function(a){if(navigator.appName.indexOf("Microsoft")!=-1){window.frames.ifrm.window[a].callToFlash()}else{window.frames.ifrm.document[a].callToFlash()}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/FlashNode.js")}NoteNode.prototype=new OpenResponseNode();NoteNode.prototype.constructor=NoteNode;NoteNode.prototype.parent=OpenResponseNode.prototype;function NoteNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}NoteNode.prototype.renderFrame=function(){if(document["notePanel_"+this.id]==null||document.getElementById("noteiframe"+this.id)==null){var b=createElement(document,"div",{id:"notePanelDiv_"+this.id});var e=createElement(document,"div",{"class":"noteHead"});var a=createElement(document,"div",{"class":"noteBody"});var d=createElement(document,"div",{"class":"noteFooter"});document.getElementById("centeredDiv").appendChild(b);b.appendChild(e);b.appendChild(a);b.appendChild(d);document["notePanel_"+this.id]=new YAHOO.widget.Panel("notePanelDiv_"+this.id,{width:"650px",height:"625px",fixedcenter:false,constraintoviewport:true,underlay:"shadow",y:55,close:true,visible:false,draggable:true});document["notePanel_"+this.id].setHeader("Reflection Note");document["notePanel_"+this.id].setBody('<iframe name="noteiframe'+this.id+'" id="noteiframe'+this.id+'" frameborder="0" width="100%" height="100%" src="node/openresponse/note.html"><iframe>');document["notePanel_"+this.id].cfg.setProperty("underlay","matte");document["notePanel_"+this.id].render()}};NoteNode.prototype.render_old=function(h){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var e=function(l,j,k){k.contentPanel.document.open();l=l.replace(/(\.\.\/\.\.\/)/gi,"");k.contentPanel.document.write(k.injectBaseRef(l));k.contentPanel.document.close();if(k.contentPanel.name!="noteiframe"+this.id){k.contentPanel.renderComplete=function(){k.load()}}};var g=vle.state.getNodeVisitsByNodeId(this.id);var b=[];for(var f=0;f<vle.state.visitedNodes.length;f++){var a=vle.state.visitedNodes[f];if(a.getNodeId()==this.id){for(var d=0;d<a.nodeStates.length;d++){b.push(a.nodeStates[d])}}}if(h){this.contentPanel=window.frames[h.name]}else{this.contentPanel=window.frames["noteiframe"+this.id];this.contentPanel.loadContent([this.element,vle,b]);document["notePanel_"+this.id].cfg.setProperty("visible",true);this.insertPreviousWorkIntoPage(this.contentPanel.document);return}vle.connectionManager.request("GET",1,"node/openresponse/note.html",null,e,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(k,j,l){l[0].render(l[1])},[this,h])}};NoteNode.prototype.load=function(){var f=vle.state.getNodeVisitsByNodeId(this.id);var b=[];for(var e=0;e<vle.state.visitedNodes.length;e++){var a=vle.state.visitedNodes[e];if(a.getNodeId()==this.id){for(var d=0;d<a.nodeStates.length;d++){b.push(a.nodeStates[d])}}}this.contentPanel.loadContent([this.element,vle,b]);this.insertPreviousWorkIntoPage(this.contentPanel.document)};NoteNode.prototype.onExit=function(){if(this.contentPanel&&this.contentPanel.save){this.contentPanel.save()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/NoteNode.js")}OutsideUrlNode.prototype=new Node();OutsideUrlNode.prototype.constructor=OutsideUrlNode;OutsideUrlNode.prototype.parent=Node.prototype;function OutsideUrlNode(b,a){this.view=a;this.type=b}OutsideUrlNode.prototype.getUrl=function(){return this.content.getContentJSON().url};OutsideUrlNode.prototype.getDataXML=function(a){return OutsideUrlNode.prototype.parent.getDataXML(a)};OutsideUrlNode.prototype.parseDataXML=function(a){return new Array()};OutsideUrlNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<url>";a+=this.element.getElementsByTagName("url")[0].firstChild.nodeValue;a+="</url>";a+=this.exportNodeFooter();return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/OutsideUrlNode.js")}MultipleChoiceNode.prototype=new Node();MultipleChoiceNode.prototype.constructor=MultipleChoiceNode;MultipleChoiceNode.prototype.parent=Node.prototype;function MultipleChoiceNode(b,a){this.view=a;this.type=b;this.mc=null;this.contentBase;this.contentPanel;this.audioSupported=true;this.prevWorkNodeIds=[]}MultipleChoiceNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(f,d,e){e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();if(e.contentPanel.name!="ifrm"){e.contentPanel.renderComplete=function(){e.load()}}e.contentPanel.renderLoadComplete=function(){e.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/multiplechoice/multiplechoice.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(e,d,f){f[0].render(f[1])},[this,b])}};MultipleChoiceNode.prototype.load=function(){this.contentPanel.loadContent([this.elementText,this,vle]);this.insertPreviousWorkIntoPage(this.contentPanel.document)};MultipleChoiceNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(a){this.liteState=a}var b=function(g,e,f){f.contentPanel.document.open();f.contentPanel.document.write(f.injectBaseRef(injectVleUrl(g)));f.contentPanel.document.close();f.contentPanel.renderComplete=function(){f.loadLite()}};var d={success:function(e){b(e.responseText,e.responseXML,e.argument)},failure:function(e){this.view.notificationManager.notify("failed to retrieve file",3)},argument:this};YAHOO.util.Connect.asyncRequest("GET","node/multiplechoice/multiplechoicelite.html",d,null)};MultipleChoiceNode.prototype.loadLite=function(){this.contentPanel.loadContent([this.element,this,vle,this.liteState])};MultipleChoiceNode.prototype.getDataXML=function(a){return MultipleChoiceNode.prototype.parent.getDataXML(a)};MultipleChoiceNode.prototype.parseDataXML=function(e){var d=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var f=d[a];b.push(MCSTATE.prototype.parseDataXML(f))}return b};MultipleChoiceNode.prototype.parseDataJSONObj=function(a){return MCSTATE.prototype.parseDataJSONObj(a)};MultipleChoiceNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<jaxbXML><![CDATA[";a+=this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue;a+="]]></jaxbXML>";a+=this.exportNodeFooter();return a};MultipleChoiceNode.prototype.getLatestWork=function(a){var b=null;this.mc=new MC(loadXMLString(this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue));this.mc.loadForTicker(this,a);b=this.mc.getLatestState(this.id);if(b==null){return null}return new MultipleChoiceQueryEntry(a.getWorkgroupId(),a.getUserName(),this.id,this.mc.promptText,b.getIdentifier(),this.mc.getCHOICEByIdentifier(b.getIdentifier()).text)};MultipleChoiceNode.prototype.getPrompt=function(){var a=loadXMLString(this.getXMLString());this.mc=new MC(a);return this.mc.promptText};MultipleChoiceNode.prototype.makeQueryContainer=function(a){this.mc=new MC(loadXMLString(this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue));this.mc.loadForTicker(this,a);return new MultipleChoiceQueryContainer(this.id,this.mc.promptText,this.mc.choiceToValueArray)};MultipleChoiceNode.prototype.translateStudentWork=function(a){this.mc=new MC(loadXMLString(this.getXMLString()));return this.mc.getCHOICEByIdentifier(a).text};MultipleChoiceNode.prototype.parseStateXML=function(a){return MCSTATE.prototype.parseDataXML(a)};MultipleChoiceNode.prototype.onExit=function(){};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MultipleChoiceNode.js")}BrainstormNode.prototype=new Node();BrainstormNode.prototype.constructor=BrainstormNode;BrainstormNode.prototype.parent=Node.prototype;function BrainstormNode(b,a){this.view=a;this.type=b;this.audioSupported=true;this.serverless=true;this.prevWorkNodeIds=[]}BrainstormNode.prototype.isUsingServer=function(){if(this.content.getContentJSON().useServer){this.serverless=false;return true}else{this.serverless=true;return false}};BrainstormNode.prototype.getDataXML=function(a){return BrainstormNode.prototype.parent.getDataXML(a)};BrainstormNode.prototype.parseDataXML=function(f){var d=f.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var g=d[a];var e=BRAINSTORMSTATE.prototype.parseDataXML(g);if(e!=null){b.push(e)}}return b};BrainstormNode.prototype.parseDataJSONObj=function(a){return BRAINSTORMSTATE.prototype.parseDataJSONObj(a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/BrainstormNode.js")}GlueNode.prototype=new Node();GlueNode.prototype.constructor=GlueNode;GlueNode.prototype.parent=Node.prototype;function GlueNode(b,a){this.view=a;this.type=b}GlueNode.prototype.renderPrev=function(){this.contentPanel.renderPrev()};GlueNode.prototype.renderNext=function(){this.contentPanel.renderNext()};GlueNode.prototype.getDataXML=function(a){return GlueNode.prototype.parent.getDataXML(a)};GlueNode.prototype.parseDataXML=function(f){var d=f.getElementsByTagName("state");var b=new Array();for(var a=0;a<d.length;a++){var g=d[a];var e=GLUESTATE.prototype.parseDataXML(g);if(e!=null){b.push(e)}}return b};GlueNode.prototype.parseDataJSONObj=function(a){return GLUESTATE.prototype.parseDataJSONObj(a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/GlueNode.js")}DataGraphNode.prototype=new Node();DataGraphNode.prototype.constructor=DataGraphNode;DataGraphNode.prototype.parent=Node.prototype;function DataGraphNode(b,a){this.view=a;this.type=b;this.contentPanel;this.prevWorkNodeIds=[]}DataGraphNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(f,d,e){e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();if(e.contentPanel.name!="ifrm"){e.contentPanel.renderComplete=function(){e.load()}}e.contentPanel.renderLoadComplete=function(){e.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/datagraph/datagraph.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(e,d,f){f[0].render(f[1])},[this,b])}};DataGraphNode.prototype.load=function(){var a=function(g,d,f){if(!f){f=g}var h;for(var e=0;e<vle.state.visitedNodes.length;e++){var b=vle.state.visitedNodes[e];if(b.getNodeId()==f.id){if(b.nodeStates.length>0){h=b.nodeStates[b.nodeStates.length-1]}}}f.contentPanel.loadContent([f.element,vle,h]);f.insertPreviousWorkIntoPage(f.contentPanel.document)};if(this.contentLoaded){a(this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,a,this)}};DataGraphNode.prototype.getDataXML=function(a){return DataGraphNode.prototype.parent.getDataXML(a)};DataGraphNode.prototype.parseDataXML=function(a){};DataGraphNode.prototype.parseDataJSONObj=function(a){};DataGraphNode.prototype.exportNode=function(){};DataGraphNode.prototype.translateStudentWork=function(a){return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/DataGraphNode.js")}SVGDrawNode.prototype=new HtmlNode();SVGDrawNode.prototype.constructor=SVGDrawNode;SVGDrawNode.prototype.parent=HtmlNode.prototype;function SVGDrawNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[];this.contentBase;this.audioSupported=true}SVGDrawNode.prototype.updateJSONContentPath=function(b){var a=new RegExp(this.filename);this.content.replace(a,b+"/"+this.filename)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/SVGDrawNode.js")}function createKeystrokeManager(b,a){return function(f,t){var s=f;var p={};var k;var n;var v=false;var m=false;var u=false;var e=function(r){if(r.altKey){v=true}else{v=false}if(r.ctrlKey){u=true}else{u=false}if(r.shiftKey){m=true}else{m=false}};var l=function(r){e(r)};var j=function(y){e(y);var r=p[y.keyCode];if(r){var w=[];if(y.ctrlKey){w.push("ctrl")}if(y.altKey){w.push("alt")}if(y.shiftKey){w.push("shift")}for(var y=0;y<r.specials.length;y++){var x=r.specials[y];if(x&&x.length==w.length){x.sort();w.sort();if(x.compare(w)){s.fire(r.events[y])}}else{if(!x&&w.length==0){s.fire(r.events[y])}}}}};var h=function(){k=window.onkeydown;n=window.onkeyup;window.onkeydown=j;window.onkeyup=l};var q=function(){window.onkeydown=k;window.onkeyup=n};var g=function(y,w,x){var r=p[w];if(y&&w){if(!r){p[w]={events:[],specials:[]};r=p[w]}r.events.push(y);r.specials.push(x)}else{alert("unable to add shortcut, check eventName or keycode")}};if(t){for(var d=0;d<t.length;d++){g(t[d][0],t[d][1],t[d][2])}}h();return{addShortcut:function(x,r,w){g(x,r,w)},stopListener:function(){q()},startListener:function(){h()},isAltkeydown:function(){return v},isShiftkeydown:function(){return m},isCtrlkeydown:function(){return u}}}(b,a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/keystrokemanager.js")}function createCustomContextMenu(a){return function(b){var h=b;var k={x:0,y:0};var f;var j;var l=function(m){k.x=m.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);k.y=m.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)};var e=function(){var r=document.elementFromPoint(k.x,k.y);var p=document.getElementById("contextMenu");while(p.firstChild){p.removeChild(p.firstChild)}var u=createElement(document,"div",{id:"contextCreateTask",onclick:'hideElement("contextMenu");eventManager.fire("createTODOTask")'});var m=document.createTextNode("Create new TODO task");var s=createElement(document,"div",{id:"contextCloseMenuDiv",onclick:'hideElement("contextMenu");'});var t=document.createTextNode("Close menu");p.appendChild(u);u.appendChild(m);p.appendChild(s);s.appendChild(t);if(r){var w=r.id;if(w){var q=r.id.split("|")[1];if(q&&q!=""){var n=createElement(document,"div",{id:"contextCreateSpecificTODODiv",onclick:'eventManager.fire("createTODOTask","'+q+'")'});var v=document.createTextNode("Create new TODO task for node: "+q);p.insertBefore(n,document.getElementById("contextCloseMenuDiv"));n.appendChild(v)}}}p.style.display="block";p.style.position="absolute";p.style.left=k.x;p.style.top=k.y;return false};var g=function(){f=window.onmousemove;j=window.oncontextmenu;window.onmousemove=l;window.oncontextmenu=e};var d=function(){window.onmousemove=f;window.oncontextmenu=j};g();return{getCursor:function(){return k},startListening:function(){g()},stopListening:function(){d()}}}(a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/customcontextmenu.js")}View.prototype.createConfig=function(a){return function(d){var e=d;var b=e.getContentJSON();if(b.playAudioOnStart==null){b.playAudioOnStart=false}return{isValidTheme:function(g){var f=["UCCP","WISE"];return f.contains(g)},getConfigParam:function(f){return b[f]}}}(a)};View.prototype.getConfig=function(){return this.config};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/config/config.js")}var iconUrl="images/stepIcons/UCCP/";var nodeTypes=["HtmlNode","BrainstormNode","FillinNode","MatchSequenceNode","MultipleChoiceNode","NoteNode","JournalEntryNode","OutsideUrlNode","GlueNode","OpenResponseNode","BlueJNode","DrawNode","DataGraphNode","MySystemNode"];var nodeClasses=[["intro","curriculum","display","cartoon","codeit","simulation","movie","homework","summary"],["brainstorm","qadiscuss"],["fillblank"],["matchsequence"],["multiplechoice"],["note"],["journal"],["www"],["instantquiz","teacherquiz"],["openresponse"],["codeit"],["quickdraw"],["datatable"],["mysystem"]];var nodeClassText=[["Introductory Page","Curriculum Page","Display Page","Cartoon Page","Coding Page","Simulation Page","Movie Page","Homework Page","Summary Page"],["Brainstorm session","Q&A Discussion"],["Fill the Blank"],["Match & Sequence"],["Multiple Choice"],["Reflection Note (popup)"],["Journal Question"],["WWW Page"],["Survey 1","Survey 2"],["Open Response"],["Code it"],["Drawing"],["Data Graph"],["My System"]];if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/icon.js")}View.prototype.authorDispatcher=function(e,d,g){if(e=="openProject"){g.openProject()}else{if(e=="projectSelected"){g.projectOptionSelected()}else{if(e=="loadingProjectComplete"){g.onProjectLoaded()}else{if(e=="hideNodes"){g.utils.hideNodes()}else{if(e=="unhideNodes"){g.utils.unhideNodes()}else{if(e=="toggleProjectMode"){g.toggleProjectMode()}else{if(e=="projectTitleChanged"){g.projectTitleChanged()}else{if(e=="stepLevelChanged"){g.stepLevelChanged()}else{if(e=="stepTermChanged"){g.stepTermChanged()}else{if(e=="autoStepChanged"){g.autoStepChanged()}else{if(e=="author"){g.author(d[0])}else{if(e=="nodeIconUpdated"){g.nodeIconUpdated(d[0])}else{if(e=="nodeTitleChanged"){g.nodeTitleChanged(d[0])}else{if(e=="launchPrevWork"){g.launchPrevWork(d[0])}else{if(e=="moveSelectedLeft"){g.moveSelectedLeft()}else{if(e=="moveSelectedRight"){g.moveSelectedRight()}else{if(e=="savePreviousWork"){g.savePreviousWork()}else{if(e=="cancelPreviousWorkChanges"){g.cancelPreviousWorkChanges()}else{if(e=="saveProject"){g.saveProject()}else{if(e=="createNewProject"){g.createNewProject()}else{if(e=="copyProject"){g.copyProject()}else{if(e=="createNewSequence"){g.createNewSequence()}else{if(e=="createNewNode"){g.createNewNode()}else{if(e=="nodeTypeSelected"){g.nodeTypeSelected()}else{if(e=="uploadAsset"){g.uploadAsset()}else{if(e=="viewAssets"){g.viewAssets()}else{if(e=="editProjectFile"){g.editProjectFile()}else{if(e=="updateAudio"){g.updateAudio()}else{if(e=="exportProject"){g.exportProject()}else{if(e=="importProject"){g.importProject()}else{if(e=="retrieveArchive"){g.retrieveArchive()}else{if(e=="publishProject"){g.publishProject()}else{if(e=="downloadArchive"){g.downloadArchive()}else{if(e=="hideRetrieveArchiveDialog"){g.retrieveArchiveDialog.hide()}else{if(e=="previewProject"){g.previewProject()}else{if(e=="startPreview"){g.startPreview(d[0])}else{if(e=="portalMode"){var a=d[0];var f=d[1];var h=d[2];var b=d[3];g.startPortalMode(a,f,h,b)}else{if(e=="projectListLoaded"){g.updatePortalProjects()}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};View.prototype.selectDispatcher=function(b,a,d){if(b=="checkAndSelect"){d.checkModeAndSelect(a[0])}else{if(b=="checkAndDeselect"){d.checkModeAndDeselect(a[0])}else{if(b=="selectClick"){d.selectClick(a[0])}else{if(b=="selectAll"){d.selectAll()}else{if(b=="clearAll"){d.clearAllSelected()}else{if(b=="moveSelected"){d.moveSelected()}else{if(b=="deleteSelected"){d.deleteSelected()}else{if(b=="duplicateSelected"){d.duplicateSelected()}else{if(b=="useSelected"){d.useSelected()}else{if(b=="disengageSelectMode"){d.disengageSelectMode(a[0])}else{if(b=="processChoice"){d.processChoice(a[0],a[1])}}}}}}}}}}}};View.prototype.metaDispatcher=function(b,a,d){if(b=="removeTask"){d.removeTask(a[0])}else{if(b=="createTODOTask"){if(a&&a[0]){d.createTODOTask(a[0])}else{d.createTODOTask()}}else{if(b=="editTODOTasks"){d.editTODOTasks()}else{if(b=="editProjectMetadata"){d.editProjectMetadata()}else{if(b=="showTaskBox"){d.showTaskBox(a[0])}else{if(b=="delayHideTaskBox"){d.delayHideTaskBox(a[0])}else{if(b=="hideTaskBox"){d.hideTaskBox()}else{if(b=="stopHiding"){d.stopHiding(a[0])}else{if(b=="editTaskFieldModified"){d.editTaskFieldModified(a[0])}else{if(b=="saveTaskChange"){d.saveTaskChange(a[0])}else{if(b=="undoTaskChange"){d.undoTaskChange(a[0])}else{if(b=="updateProjectMetadata"){d.updateProjectMetadata()}else{if(b=="publishProjectMetadata"){d.publishProjectMetadata()}else{if(b=="undoProjectMetadata"){d.undoProjectMetadata()}else{if(b=="hideProjectMetadataDialog"){d.editProjectMetadataDialog.hide()}else{if(b=="maxScoreUpdated"){d.maxScoreUpdated(a[0])}}}}}}}}}}}}}}}}};View.prototype.authorStepDispatcher=function(b,a,d){if(b=="saveStep"){d.saveStep()}else{if(b=="saveAndCloseStep"){d.saveStep(true)}else{if(b=="authorStepModeChanged"){d.authorStepModeChanged(a[0])}else{if(b=="updateRefreshOption"){d.updateRefreshOption()}else{if(b=="refreshNow"){d.refreshNow()}else{if(b=="sourceUpdated"){d.sourceUpdated()}else{if(b=="closeOnStepSaved"){d.closeOnStepSaved(a[0])}else{if(b=="closeStep"){d.closeStep()}}}}}}}}};View.prototype.openResponseDispatcher=function(b,a,d){if(b=="openResponsePromptChanged"){d.OpenResponseNode.updateXMLPrompt()}else{if(b=="openResponseStarterOptionChanged"){d.OpenResponseNode.starterChanged()}else{if(b=="openResponseStarterSentenceUpdated"){d.OpenResponseNode.starterUpdated()}else{if(b=="openResponseUpdateRichText"){d.OpenResponseNode.updateRichText()}else{if(b=="openResponseLinesChanged"){d.OpenResponseNode.linesUpdated()}}}}}};View.prototype.brainstormDispatcher=function(b,a,d){if(b=="brainstormUpdateExpectedLines"){d.BrainstormNode.updateExpectedLines()}else{if(b=="brainstromUpdateTitle"){d.BrainstormNode.updateTitle()}else{if(b=="brainstormUpdateGated"){d.BrainstormNode.updateGated(a[0])}else{if(b=="brainstormUpdateDisplayName"){d.BrainstormNode.updateDisplayName(a[0])}else{if(b=="brainstormUpdateRichText"){d.BrainstormNode.updateRichText(a[0])}else{if(b=="brainstormUpdatePollEnded"){d.BrainstormNode.updatePollEnded(a[0])}else{if(b=="brainstormUpdateInstantPoll"){d.BrainstormNode.updateInstantPoll(a[0])}else{if(b=="brainstormStarterChanged"){d.BrainstormNode.starterChanged()}else{if(b=="brainstormStarterUpdated"){d.BrainstormNode.starterUpdated()}else{if(b=="brainstormUpdatePrompt"){d.BrainstormNode.updatePrompt()}else{if(b=="brainstormCreateNewResponse"){d.BrainstormNode.createNewResponse()}else{if(b=="brainstormRemoveResponse"){d.BrainstormNode.removeResponse()}else{if(b=="brainstormResponseNameChanged"){d.BrainstormNode.responseNameChanged(a[0])}else{if(b=="brainstormResponseValueChanged"){d.BrainstormNode.responseValueChanged(a[0])}else{if(b=="brainstormResponseSelected"){d.BrainstormNode.responseSelected(a[0])}}}}}}}}}}}}}}}};View.prototype.datagraphDispatcher=function(b,a,d){if(b=="datagraphDisplayOptionChanged"){d.DataGraphNode.displayOptionChanged()}else{if(b=="datagraphStartModeChanged"){d.DataGraphNode.startModeChanged()}else{if(b=="datagraphGraphOptionChanged"){d.DataGraphNode.graphOptionChanged(a[0])}else{if(b=="datagraphPromptChanged"){d.DataGraphNode.promptChanged()}else{if(b=="datagraphTitleInputChanged"){d.DataGraphNode.titleInputChanged()}else{if(b=="datagraphEditableChanged"){d.DataGraphNode.editableChanged(a[0])}else{if(b=="datagraphAddRow"){d.DataGraphNode.addRow()}else{if(b=="datagraphAddCol"){d.DataGraphNode.addCol()}else{if(b=="datagraphRemoveRow"){d.DataGraphNode.removeRow()}else{if(b=="datagraphRemoveCol"){d.DataGraphNode.removeCol()}else{if(b=="datagraphToggleLabels"){d.DataGraphNode.toggleLabels(a[0])}else{if(b=="datagraphToggleSelected"){d.DataGraphNode.toggleSelected(a[0])}else{if(b=="datagraphCellChanged"){d.DataGraphNode.cellChanged(a[0])}}}}}}}}}}}}}};View.prototype.drawingDispatcher=function(b,a,d){if(b=="drawingPromptChanged"){d.DrawNode.promptChanged()}else{if(b=="drawingBackgroundInfoChanged"){d.DrawNode.backgroundInfoChanged()}else{if(b=="drawingRemoveBackgroundImage"){d.DrawNode.removeBackgroundImage()}else{if(b=="drawingCreateBackgroundSpecified"){d.DrawNode.createBackgroundSpecified()}else{if(b=="drawingAddNewStamp"){d.DrawNode.addNewStamp()}else{if(b=="drawingStampInfoChanged"){d.DrawNode.stampInfoChanged(a[0])}else{if(b=="drawingRemoveStamp"){d.DrawNode.removeStamp(a[0])}else{if(b=="drawingCreateStampsSpecified"){d.DrawNode.createStampsSpecified()}}}}}}}}};View.prototype.fillinDispatcher=function(b,a,d){if(b=="fillinTextUpdated"){d.FillinNode.fillinTextUpdated()}else{if(b=="fillinCreateFillin"){d.FillinNode.createFillin()}else{if(b=="fillinRemoveFillin"){d.FillinNode.removeFillin()}else{if(b=="fillinClick"){d.FillinNode.fillinClick(a[0],a[1])}else{if(b=="fillinChangeSelected"){d.FillinNode.changeSelected(a[0])}else{if(b=="fillinAddNewAllowable"){d.FillinNode.addNewAllowable(a[0])}else{if(b=="fillinEntryChanged"){d.FillinNode.entryChanged(a[0])}else{if(b=="fillinRemoveAllowable"){d.FillinNode.removeAllowable(a[0],a[1])}}}}}}}}};View.prototype.multiplechoiceDispatcher=function(b,a,d){if(b=="mcCreateNewChoice"){d.MultipleChoiceNode.createNewChoice()}else{if(b=="mcClearCorrectChoice"){d.MultipleChoiceNode.clearCorrectChoice()}else{if(b=="mcShuffleChange"){d.MultipleChoiceNode.shuffleChange(a[0])}else{if(b=="mcFeedbackOptionChange"){d.MultipleChoiceNode.feedbackOptionChange(a[0])}else{if(b=="mcNumChoiceChanged"){d.MultipleChoiceNode.numChoiceChanged()}else{if(b=="mcXmlUpdated"){d.MultipleChoiceNode.xmlUpdated()}else{if(b=="mcCorrectChoiceChange"){d.MultipleChoiceNode.correctChoiceChange(a[0])}else{if(b=="mcRemoveChoice"){d.MultipleChoiceNode.removeChoice(a[0])}}}}}}}}};View.prototype.mysystemDispatcher=function(b,a,d){if(b=="mysystemPromptChanged"){d.MySystemNode.promptChanged()}else{if(b=="mysystemFieldUpdated"){d.MySystemNode.fieldUpdated(a[0],a[1])}else{if(b=="mysystemRemoveMod"){d.MySystemNode.removeMod(a[0])}else{if(b=="mysystemAddNew"){d.MySystemNode.addNew()}}}}};View.prototype.matchsequenceDispatcher=function(b,a,d){if(b=="msUpdatePrompt"){d.MatchSequenceNode.updatePrompt()}else{if(b=="msUpdateOrdered"){d.MatchSequenceNode.updateOrdered(a[0])}else{if(b=="msAddContainer"){d.MatchSequenceNode.addContainer()}else{if(b=="msAddChoice"){d.MatchSequenceNode.addChoice()}else{if(b=="msRemoveChoice"){d.MatchSequenceNode.removeChoice()}else{if(b=="msRemoveContainer"){d.MatchSequenceNode.removeContainer()}else{if(b=="msEditFeedback"){d.MatchSequenceNode.editFeedback()}else{if(b=="msShuffleChanged"){d.MatchSequenceNode.shuffleChanged()}else{if(b=="msContainerSelected"){d.MatchSequenceNode.containerSelected(a[0])}else{if(b=="msContainerTextUpdated"){d.MatchSequenceNode.containerTextUpdated(a[0])}else{if(b=="msChoiceSelected"){d.MatchSequenceNode.choiceSelected(a[0],a[1])}else{if(b=="msChoiceTextUpdated"){d.MatchSequenceNode.choiceTextUpdated(a[0])}else{if(b=="msOrderUpdated"){d.MatchSequenceNode.orderUpdated(a[0])}else{if(b=="msHideFeedback"){d.MatchSequenceNode.hideFeedback()}else{if(b=="msEditIndividualFeedback"){d.MatchSequenceNode.editIndividualFeedback(a[0],a[1])}else{if(b=="msSaveFeedback"){d.MatchSequenceNode.saveFeedback()}}}}}}}}}}}}}}}}};View.prototype.glueDispatcher=function(b,a,d){if(b=="glueUpdatePrompt"){d.GlueNode.updatePrompt()}else{if(b=="glueNodeDropped"){d.GlueNode.onNodeDropped(a[0],a[1])}else{if(b=="glueCreateDraggable"){d.GlueNode.createDraggable(a[0],a[1])}else{if(b=="glueCreateTarget"){d.GlueNode.createTarget(a[0],a[1])}}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_dispatchers.js")}View.prototype.startPortalMode=function(b,e,f,g){this.portalUrl=b;this.portalCurriculumBaseDir=e;this.primaryPath=e;if(f&&f!=""){if(f=="createProject"){this.createMode=true}else{if(f=="editProject"){var d=g.split("~");this.portalProjectId=d[1];var a=this.authoringBaseUrl+this.portalCurriculumBaseDir+d[0];this.loadProject(a,this.utils.getContentBaseFromFullUrl(a),true)}}}this.eventManager.subscribe("projectListLoaded",this.authorDispatcher,this)};View.prototype.updatePortalProjects=function(){this.portalProjectPaths=[];this.portalProjectIds=[];var a=function(f,l,b){var g=function(m){var p=document.getElementById("selectProject");var n=createElement(document,"option",{name:"projectOption"});p.appendChild(n);n.text=m;n.value=m};var k=document.getElementById("selectProject");while(k.firstChild){k.removeChild(k.firstChild)}var j=createElement(document,"option",{name:"placeholderOption"});k.appendChild(j);j.value="";var d=f.split("|");for(var h=0;h<d.length;h++){var e=d[h].split("~");b.portalProjectPaths.push(e[0]);b.portalProjectIds.push(e[1]);g(e[0])}if(b.createMode){b.createNewProject()}};this.connectionManager.request("GET",1,this.portalUrl,{command:"projectList"},a,this)};View.prototype.createPortalProject=function(d,a){var b=function(e,g,f){if(e){f.portalProjectId=e;f.updatePortalProjects()}else{f.notificationManager.notify("failed to create project in portal",3)}};d=d.substring(this.portalCurriculumBaseDir.length,d.length);this.connectionManager.request("POST",3,this.portalUrl,{command:"createProject",param1:d,param2:a},b,this)};View.prototype.getProjectPaths=function(){var a=function(k,d,j){if(d){var f=d}else{var f=loadXMLDocFromString(k)}if(f){var g=f.getElementsByTagName("projectPaths");if(g&&g[0]&&g[0].firstChild){var h=g[0].getElementsByTagName("path");for(var b=0;b<h.length;b++){if(h[b]&&h[b].firstChild){j.projectPaths+=h[b].firstChild.nodeValue;if(b!=h.length-1){j.projectPaths+="~"}}}var e=f.getElementsByTagName("primaryPath");if(e&&e[0]&&e[0].firstChild){j.primaryPath=e[0].getElementsByTagName("path");if(j.primaryPath&&j.primaryPath[0]&&j.primaryPath[0].firstChild){j.primaryPath=j.primaryPath[0].firstChild.nodeValue;j.projectPaths+="~"+j.primaryPath}}}j.initializeOpenProjectDialog()}else{j.notificationManager.notify("Error retrieving settings",3)}};this.connectionManager.request("GET",1,"settings.xml",null,a,this)};View.prototype.initializeOpenProjectDialog=function(b){var d=function(g){var j=document.getElementById("selectProject");var h=createElement(document,"option",{name:"projectOption"});j.appendChild(h);h.text=g;h.value=g};var f=function(){this.cancel()};var a=function(){eventManager.fire("projectSelected")};var e=function(m,h,l){var k=document.getElementById("selectProject");while(k.firstChild){k.removeChild(k.firstChild)}var j=m.split("|");for(var g=0;g<j.length;g++){d(j[g])}if(!l.openProjectDialog){l.openProjectDialog=new YAHOO.widget.Dialog("openProjectDialog",{width:"750px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Open",handler:a,isDefault:true},{text:"Cancel",handler:f}]});l.openProjectDialog.render()}if(b){l.openProjectDialog.show()}document.getElementById("openProjectDialog").style.display="block";l.eventManager.fire("projectListLoaded")};this.connectionManager.request("GET",1,"filemanager.html",{command:"projectList",projectPaths:this.projectPaths},e,this)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_startup.js")}View.prototype.generateAuthoring=function(){var t=document.getElementById("dynamicProject");while(t.firstChild){t.removeChild(t.firstChild)}this.currentStepNum=1;var j=createElement(document,"table",{id:"projectTable"});var f=createElement(document,"thead",{id:"projectTableHead"});var u=createElement(document,"tbody",{id:"projectTableBody"});var z=createElement(document,"tr",{id:"existingRow"});var l=createElement(document,"tr",{id:"unattachedSequenceRow"});var y=createElement(document,"tr",{id:"unattachedNodeRow"});t.appendChild(j);j.appendChild(f);j.appendChild(u);u.appendChild(z);u.appendChild(l);u.appendChild(y);var b=createElement(document,"table",{id:"existingTable"});var v=createElement(document,"thead",{id:"existingTableHead"});var w=createElement(document,"tbody",{id:"existingTableBody"});z.appendChild(b);b.appendChild(v);b.appendChild(w);if(this.project.getRootNode()){this.generateNodeElement(this.project.getRootNode(),null,b,0,0)}var x=createElement(document,"table",{id:"unusedSequenceTable"});var m=createElement(document,"thead");var s=createElement(document,"tbody",{id:"unusedSequenceTableBody"});var I=createElement(document,"tr",{id:"unusedSequenceTitleRow"});var H=createElement(document,"td");var q=createElement(document,"td");l.appendChild(x);x.appendChild(m);x.appendChild(s);s.appendChild(I);I.appendChild(H);I.appendChild(q);var E=createElement(document,"div",{id:"uSeq",onclick:'eventManager.fire("selectClick","uSeq")',onMouseOver:'eventManager.fire("checkAndSelect","uSeq")',onMouseOut:'eventManager.fire("checkAndDeselect","uSeq")'});var a=document.createTextNode("Unattached Activities");var h=this.project.getUnattached("sequence");q.appendChild(E);E.appendChild(a);for(var D=0;D<h.length;D++){this.generateNodeElement(h[D],null,s,0,0)}var B=createElement(document,"table",{id:"unusedNodeTable"});var k=createElement(document,"thead");var r=createElement(document,"tbody",{id:"unusedNodeTableBody"});var G=createElement(document,"tr",{id:"unusedNodeTitleRow"});var g=createElement(document,"td");var p=createElement(document,"td");y.appendChild(B);B.appendChild(k);B.appendChild(r);r.appendChild(G);G.appendChild(g);G.appendChild(p);var A=createElement(document,"div",{id:"uNode",onclick:'eventManager.fire("selectClick","uNode")',onMouseOver:'eventManager.fire("checkAndSelect","uNode")',onMouseOut:'eventManager.fire("checkAndDeselect","uNode")'});var F=document.createTextNode("Unattached Steps");var n=this.project.getUnattached("node");p.appendChild(A);A.appendChild(F);for(var C=0;C<n.length;C++){this.generateNodeElement(n[C],null,r,0,0)}if(this.projectStructureViolation){this.notificationManager.notify("The current project mode is Simple Project, but while generating the authoring, nodes have been found that violate that structure (Project-->Activity-->Step). Those nodes have been ignored! You should fix this by either authoring in Advanced Project mode or switching to Advanced Project mode long enough to put the project in the structure required for Simple Project.",3)}};View.prototype.generateNodeElement=function(x,p,f,H,l){if(p){var B=p.id+"|"+x.id+"|"+l}else{var B="null|"+x.id+"|"+l}if(f.id=="existingTable"&&this.simpleProject){if(H>2||(H==1&&x.type!="sequence")||(H==2&&x.type=="sequence")){this.projectStructureViolation=true;return}}var v=createElement(document,"tr");var m=createElement(document,"div",{id:B,onclick:'eventManager.fire("selectClick","'+B+'")',ondblclick:'eventManager.fire("author", "'+x.id+'")',onMouseOver:'eventManager.fire("checkAndSelect","'+B+'")',onMouseOut:'eventManager.fire("checkAndDeselect","'+B+'")'});var w=createElement(document,"td");var D=createElement(document,"td");f.appendChild(v);v.appendChild(w);v.appendChild(D);var C="";for(var F=0;F<H;F++){C+=this.tab}var q=createElement(document,"input",{id:"titleInput_"+x.id,type:"text","class":"nodeTitleInput",onchange:'eventManager.fire("nodeTitleChanged","'+x.id+'")',value:x.title});var e=createElement(document,"div",{id:"taskDiv_"+x.id,"class":"taskDiv"});w.appendChild(e);D.appendChild(m);if(x.type=="sequence"){var g=createElement(document,"div",{id:"seqTitleDiv_"+B});var t=document.createTextNode("Activity: ");var j=createElement(document,"div",{id:"choiceDiv_"+B});m.appendChild(g);m.appendChild(j);g.innerHTML=C;g.appendChild(t);g.appendChild(q);j.style.display="none";j.className="choice";if(x.id==this.project.getRootNode().id){m.className="projectNode master";m.innerHTML="Active Activities/Steps"}else{m.className="projectNode seq"}}else{if(x.className&&x.className!="null"&&x.className!=""){m.innerHTML=C+"<img src='"+iconUrl+x.className+"16.png'/> "}else{m.innerHTML=C}if(this.project.useAutoStep()){var t=document.createTextNode(this.project.getStepTerm()+" "+this.currentStepNum+": ");this.currentStepNum++}else{if(this.project.getStepTerm()&&this.project.getStepTerm()!=""){var t=document.createTextNode(this.project.getStepTerm()+": ")}}if(t&&f.id!="unused"){m.appendChild(t)}m.appendChild(q);m.className="projectNode node";var u=document.createTextNode("Icon: ");var A=createElement(document,"select",{id:"nodeIcon_"+x.id,onchange:'eventManager.fire("nodeIconUpdated","'+x.id+'")'});m.appendChild(u);m.appendChild(A);var n=nodeTypes.indexOf(x.type);if(n!=-1){var E=nodeClasses[n];var s=nodeClassText[n];var d=createElement(document,"option");d.innerHTML="";d.value="";A.appendChild(d);for(var z=0;z<E.length;z++){var d=createElement(document,"option");d.value=E[z];d.innerHTML="<img src='"+iconUrl+E[z]+"16.png'/> "+s[z];A.appendChild(d);if(x.className==E[z]){A.selectedIndex=z+1}}}var k=document.createTextNode("Max Score: ");var y=createElement(document,"input",{type:"text","class":"maxScoreInput",id:"maxScore_"+x.id,onchange:'eventManager.fire("maxScoreUpdated","'+x.id+'")'});m.appendChild(createSpace());m.appendChild(k);m.appendChild(y);if(this.excludedPrevWorkNodes.indexOf(x.type)==-1){var r=createElement(document,"input",{type:"button","class":"previousWorkLink",id:"prevWork_"+x.id,value:"Show Prev Work",onclick:'eventManager.fire("launchPrevWork","'+x.id+'")'});m.appendChild(createSpace());m.appendChild(r)}}for(var G=0;G<x.children.length;G++){this.generateNodeElement(x.children[G],x,f,H+1,G)}};View.prototype.nodeTitleChanged=function(d){var a=this.project.getNodeById(d);var b=document.getElementById("titleInput_"+d).value;if(b.length>60&&a.type!="sequence"){this.notificationManager.notify("Step titles cannot exceed 60 characters.",3);document.getElementById("titleInput_"+d).value=b.substring(0,60)}else{if(b.length>28&&a.type=="sequence"){this.notificationManager.notify("Activity titles cannot exceed 50 characters.",3);document.getElementById("titleInput_"+d).value=b.substring(0,50)}else{this.projectSaved=false;a.title=b}}};View.prototype.projectTitleChanged=function(){this.projectSaved=false;this.project.setTitle(document.getElementById("projectTitleInput").value)};View.prototype.saveProject=function(){if(this.project){var b=yui.JSON.stringify(this.getProject().projectJSON(),null,3);var d=function(g,e,f){if(g!="success"){f.notificationManager.notify("Unable to save project to WISE server. The server or your Internet connection may be down. An alert will pop up with the project file data, copy this and paste it into a document for backup.",3);f.notificationManager.notify(b,3)}else{f.projectSaved=true;f.notificationManager.notify("PROJECT SAVED TO WISE SERVER",3)}};var a=function(f,e){e.notificationManager.notify("Unable to save project to WISE server. The server or your Internet connection may be down. An alert will pop up with the project file data, copy this and paste it into a document for backup.",3);e.notificationManager.notify(b,3)};this.connectionManager.request("POST",1,"filemanager.html",{command:"updateFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase()),param2:this.project.getProjectFilename(),param3:encodeURIComponent(b)},d,this,a)}else{this.notificationManager.notify("Please open or create a Project before attempting to save.",3)}};View.prototype.nodeIconUpdated=function(d){this.projectSaved=false;var b=this.project.getNodeById(d);var a=document.getElementById("nodeIcon_"+d);b.className=a.options[a.selectedIndex].value;this.generateAuthoring()};View.prototype.stepTermChanged=function(){this.projectSaved=false;if(this.project){this.project.setStepTerm(document.getElementById("stepTerm").value);this.generateAuthoring()}};View.prototype.autoStepChanged=function(){this.projectSaved=false;if(this.project){this.project.setAutoStep(document.getElementById("autoStepCheck1").checked);this.generateAuthoring()}};View.prototype.stepLevelChanged=function(){this.projectSaved=false;if(this.project){this.project.setStepLevelNumbering(document.getElementById("stepLevel").checked)}};View.prototype.launchPrevWork=function(a){showElement("previousWorkDialog");this.activeNode=this.project.getNodeById(a);document.getElementById("nodeTitle").innerHTML=this.activeNode.title;this.clearCols();this.populateToCol();this.populateFromCol();this.previousWorkDialog.show()};View.prototype.createNewProject=function(){if(this.portalUrl){document.getElementById("createNewProjectPath").value=this.portalCurriculumBaseDir;this.createMode=false}else{document.getElementById("createNewProjectPath").value=this.primaryPath}if(this.projectSaved||confirm("Your latest work has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){showElement("createProjectDialog");this.createProjectDialog.show()}};View.prototype.createNewSequence=function(){if(this.project){if(this.projectSaved||confirm("Your latest work has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){document.getElementById("sequenceProjectPath").value=this.utils.getContentPath(this.authoringBaseUrl,this.project.getUrl());document.getElementById("newSequenceId").value=this.getProject().generateUniqueId("seq");showElement("createSequenceDialog");this.createSequenceDialog.show()}}else{this.notificationManager.notify("Please open or create a Project before creating an Activity",3)}};View.prototype.createNewNode=function(){if(this.project){if(this.projectSaved||confirm("Click SAVE PROJECT before proceeding.  If you proceed without saving, your changes since last Save will be lost. Do you wish to continue?")){showElement("createNodeDialog");document.getElementById("nodeProjectPath").value=this.utils.getContentPath(this.authoringBaseUrl,this.project.getUrl());this.createNodeDialog.show()}}else{this.notificationManager.notify("Please open or create a Project before adding a Step",3)}};View.prototype.editProjectFile=function(){if(this.getProject()){if(this.projectSaved||confirm("Your latest work has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){document.getElementById("projectText").value=yui.JSON.stringify(this.getProject().projectJSON(),null,3);document.getElementById("editProjectFileProjectName").value=this.utils.getContentPath(this.authoringBaseUrl,this.getProject().getContentBase());document.getElementById("editProjectFileFileName").value=this.getProject().getProjectFilename();showElement("editProjectFileDialog");this.editProjectFileDialog.show()}}else{this.notificationManager.notify("Please open or create a Project before editing the project data file.",3)}};View.prototype.uploadAsset=function(a){if(this.project){document.getElementById("assetPathInput").value=this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase());showElement("assetUploaderDialog");var b=function(f,d,e){if(f>=e.MAX_ASSET_SIZE){e.notificationManager.notify("Maximum space allocation exceeded! Maximum allowed is "+e.utils.appropriateSizeText(e.MAX_ASSET_SIZE)+", total on server is "+e.utils.appropriateSizeText(f)+".",3)}else{if(a){document.getElementById("sizeDiv").innerHTML="Total file size is "+e.utils.appropriateSizeText(f)+" out of "+e.utils.appropriateSizeText(e.MAX_ASSET_SIZE)+" allocated space."}else{e.assetUploaderDialog.show()}}};this.connectionManager.request("POST",1,"assetmanager.html",{command:"getSize",path:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase())},b,this)}else{this.notificationManager.notify("Please open or create a project that you wish to upload assets to.",3)}};View.prototype.viewAssets=function(){if(this.project){showElement("assetEditorDialog");var a=function(h,e){if(h&&h!=""){var g=document.getElementById("assetSelect");var b=h.split("~");for(var j=0;j<b.length;j++){var f=createElement(document,"option",{name:"assetOpt",id:"asset_"+b[j]});f.text=b[j];f.value=b[j];g.appendChild(f)}}e.uploadAsset(true);e.assetEditorDialog.show()};this.connectionManager.request("POST",1,"assetmanager.html",{command:"assetList",path:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase())},function(b,d,e){a(b,e)},this)}else{this.notificationManager.notify("Please open or create a project that you wish to view assets for.",3)}};View.prototype.previewProject=function(){if(this.project){if(this.project.getStartNodeId()||confirm("Could not find a start node for the project. You can add sequences and/or nodes to remedy this. Do you still wish to preview the project (you will not see nodes?")){window.open("vle.html","PreviewWindow","toolbar=no,width=1024,height=768,menubar=no")}}else{this.notificationManager.notify("Please open or create Project to preview.",3)}};View.prototype.startPreview=function(a){var b={getContentUrl:this.getProject().getUrl(),getContentBaseUrl:this.getProject().getContentBase(),updateAudio:this.updateAudioInVLE};a.fire("startVLEFromParams",b);this.updateAudioInVLE=false};View.prototype.exportProject=function(){if(this.project){if(this.projectSaved||confirm("The current Project has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){document.getElementById("exportProjectPath").value=this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase());document.getElementById("exportProjectName").value=this.project.getProjectFilename();document.getElementById("archivePath").value=this.primaryPath;document.getElementById("exportProject").submit()}}else{this.notificationManager.notify("Please open a Project before trying to export data",3)}};View.prototype.importProject=function(){if(this.projectSaved||confirm("The current Project has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){showElement("importProjectDialog");document.getElementById("importProjectPath").value=this.primaryPath;this.importProjectDialog.show()}};View.prototype.publishProject=function(){if(this.project){if(this.projectSaved||confirm("Your latest work has not been saved yet. If you proceed any changes you have made since your last Save will not be published. Do you wish to continue?")){showElement("publishProjectDialog");document.getElementById("publishProjectFrame").src="/webapp/author/publishproject.html?projectname="+this.project.getProjectFilename()+"&projectpath="+this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase());this.publishProjectDialog.show()}}else{this.notificationManager.notify("Please open or create a Project before publishing.",3)}};View.prototype.projectOptionSelected=function(){var b=document.getElementById("selectProject").options[document.getElementById("selectProject").selectedIndex].value;if(this.portalUrl){var a=this.portalProjectPaths.indexOf(b);if(a!=-1){this.portalProjectId=this.portalProjectIds[a]}else{this.portalProjectId=undefined;this.notificationManager.notify("Could not find corresponding portal project id when opening project!",2)}}if(b!=null&&b!=""){this.loadProject(this.authoringBaseUrl+b,this.utils.getContentBaseFromFullUrl(this.authoringBaseUrl+b),true);this.openProjectDialog.hide()}};View.prototype.openProject=function(){if(this.projectSaved||confirm("Your latest work has not been saved yet. If you proceed any changes you have made since your last Save will be lost. Do you wish to continue?")){if(!this.portalUrl){this.initializeOpenProjectDialog(true)}else{this.updatePortalProjects();this.openProjectDialog.show()}}};View.prototype.copyProject=function(){showElement("copyProjectDialog");document.getElementById("copyProjectPath").value=this.primaryPath;var a=function(h,b){var g=document.getElementById("copyProjectSelect");var d;if(b.primaryPath.indexOf("/")!=-1){d="/"}else{d="\\"}while(g.firstChild){g.removeChild(g.firstChild)}var f=h.split("|");for(var j=0;j<f.length;j++){var e=createElement(document,"option",{name:"copyProjectOption"});g.appendChild(e);e.text=f[j];e.value=f[j].substring(0,f[j].lastIndexOf(d))}b.copyProjectDialog.show()};this.connectionManager.request("GET",1,"filemanager.html",{command:"projectList",projectPaths:this.projectPaths},function(d,b,e){a(d,e)},this)};View.prototype.retrieveArchive=function(){if(this.project){var a=function(e,b,k){if(e==""){k.notificationManager.notify("No archives found for this project.",3);return}var h=e.split("~");var g=document.getElementById("selectArchive");while(g.firstChild){g.removeChild(g.firstChild)}if(h.length>1){g.setAttribute("size",h.length)}else{g.setAttribute("size",1)}for(var j=0;j<h.length;j++){var d=createElement(document,"option");g.appendChild(d);d.text=h[j];d.value=k.primaryPath+"/archives/"+h[j]}showElement("retrieveArchiveDialog");k.retrieveArchiveDialog.show()};this.connectionManager.request("POST",1,"filemanager.html",{command:"getBackupList",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getUrl()),param2:this.primaryPath+"/archives"},a,this)}else{this.notificationManager.notify("Please open a Project before trying to retrieve an archive.",3)}};View.prototype.downloadArchive=function(){var a=document.getElementById("selectArchive");var b=a.options[a.selectedIndex].value;document.getElementById("downloadArchiveParam1").value=b;document.getElementById("downloadArchiveForm").submit();this.retrieveArchiveDialog.hide()};View.prototype.toggleProjectMode=function(){this.projectStructureViolation=false;if(this.simpleProject){this.simpleProject=false;document.getElementById("projectModeDiv").innerHTML="MODE: Advanced Project <input type='button' value='Toggle Project Mode' onclick='eventManager.fire(\"toggleProjectMode\")'/>"}else{this.simpleProject=true;document.getElementById("projectModeDiv").innerHTML="MODE: Simple Project <input type='button' value='Toggle Project Mode' onclick='eventManager.fire(\"toggleProjectMode\")'/>"}if(this.project){this.generateAuthoring()}};View.prototype.editProjectMetadata=function(){if(this.project){showElement("editProjectMetadataDialog");document.getElementById("projectMetadataTitle").value=this.projectMeta.title;document.getElementById("projectMetadataAuthor").value=this.projectMeta.author;document.getElementById("projectMetadataSubject").value=this.projectMeta.subject;document.getElementById("projectMetadataSummary").value=this.projectMeta.summary;document.getElementById("projectMetadataGradeRange").value=this.projectMeta.graderange;document.getElementById("projectMetadataTotalTime").value=this.projectMeta.totaltime;document.getElementById("projectMetadataCompTime").value=this.projectMeta.comptime;document.getElementById("projectMetadataContact").value=this.projectMeta.contact;document.getElementById("projectMetadataTechReqs").value=this.projectMeta.techreqs;document.getElementById("projectMetadataLessonPlan").value=this.projectMeta.lessonplan;this.editProjectMetadataDialog.show()}else{this.notificationManager.notify("Open a project before using this tool.",3)}};View.prototype.onProjectLoaded=function(){this.projectStructureViolation=false;if(this.selectModeEngaged){this.disengageSelectMode(-1)}if(this.project&&this.project.useAutoStep()==true){document.getElementById("autoStepCheck1").checked=true}else{document.getElementById("autoStepCheck1").checked=false}if(this.project&&this.project.useStepLevelNumbering()==true){document.getElementById("stepLevel").checked=true}else{document.getElementById("stepLevel").checked=false}if(this.project&&this.project.getStepTerm()){document.getElementById("stepTerm").value=this.project.getStepTerm()}else{document.getElementById("stepTerm").value="";this.project.setStepTerm("");this.notificationManager.notify('stepTerm not set in project, setting default value: ""',2)}if(this.portalUrl){this.notifyPortal(this.project.getContentBase(),this.project.getProjectFilename())}if(this.project.getTitle()){var b=this.project.getTitle()}else{var b=this.project.getProjectFilename().substring(0,this.project.getProjectFilename().lastIndexOf(".project.json"));this.project.setTitle(b)}document.getElementById("projectTitleInput").value=b;this.generateAuthoring();this.retrieveMetaData();var a=createContent();a.setContent({getContentUrl:this.getProject().getUrl(),getContentBaseUrl:this.getProject().getContentBase()});this.config=this.createConfig(a);if(this.placeNode){this.placeNewNode(this.placeNodeId)}};View.prototype.notifyPortal=function(d,a){var b=function(e,g,f){if(e!=""){f.notificationManager.notify(e+" is also editing this project right now. Please make sure not to overwrite each other's work.",3);document.getElementById("concurrentAuthorDiv").innerHTML="Also Editing: "+e}else{document.getElementById("concurrentAuthorDiv").innerHTML=""}};this.connectionManager.request("POST",1,this.portalUrl,{command:"notifyProjectOpen",path:this.project.getUrl()},b,this)};View.prototype.author=function(b){var a=this.project.getNodeById(b);if(this.AUTHORABLE_NODE_TYPES.indexOf(a.type)==-1){this.notificationManager.notify("No tool exists for authoring this step yet",3);return}else{this.activeNode=a;showElement("authorStepDialog");this.setInitialAuthorStepState();this.authorStepDialog.show()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_main.js")}View.prototype.initializeCreateProjectDialog=function(){var a=function(){this.submit()};var b=function(){this.cancel()};this.createProjectDialog=new YAHOO.widget.Dialog("createProjectDialog",{width:"600px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Submit",handler:a,isDefault:true},{text:"Cancel",handler:b}]});this.createProjectDialog.callback.argument=this;this.createProjectDialog.callback.success=function(f){var e=f.responseText;var d=f.argument;d.loadProject(d.authoringBaseUrl+e,d.utils.getContentBaseFromFullUrl(d.authoringBaseUrl+e),false);if(d.portalUrl){d.createPortalProject(e,document.getElementById("projectInput").value)}document.getElementById("projectInput").value=""};this.createProjectDialog.callback.failure=function(d){d.argument.notificationManager.notify("unable to create new project on server",3)};this.createProjectDialog.validate=function(){var d=this.getData();if(d.param1==null||d.param1==""){notificationManager.notify("A project name must be supplied before creating a project",3);return false}else{return true}};this.createProjectDialog.render()};View.prototype.initializeCreateSequenceDialog=function(){var a=function(){var d=arguments[1].callback.argument;var f=document.getElementById("createSequenceInput").value;var e=d.project.getSequenceNodes();if(f==null||f==""){d.notificationManager.notify("Please create a title for your new Activity",3);return}for(var g=0;g<e.length;g++){if(d.project.getNodeByTitle(f)){d.notificationManager.notify("An Activity with that title already exists. Try another title.",3);return}}this.submit()};var b=function(){this.cancel()};this.createSequenceDialog=new YAHOO.widget.Dialog("createSequenceDialog",{width:"650px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Submit",handler:a,isDefault:true},{text:"Cancel",handler:b}]});this.createSequenceDialog.callback.success=function(e){var d=e.argument;if(e.responseText){document.getElementById("createSequenceInput").value="";d.placeNode=true;d.placeNodeId=e.responseText;d.loadProject(d.project.getContentBase()+d.utils.getSeparator(d.project.getContentBase())+d.project.getProjectFilename(),d.project.getContentBase(),true);d.createSequenceDialog.hide()}else{d.notificationManager.notify("Unable to create new Activity on the WISE server.",3)}};this.createSequenceDialog.callback.failure=function(d){d.argument.notificationManager.notify("unable to create new Activity on the WISE server",3)};this.createSequenceDialog.callback.argument=this;this.createSequenceDialog.render()};View.prototype.initializeCreateNodeDialog=function(){var a=function(){var e=arguments[1].callback.argument;val=document.getElementById("createNodeTitle").value;if(val==null||val==""){e.notificationManager.notify("Please enter a title for the Step.",3);return}var d=document.getElementById("createNodeType");val=d.options[d.selectedIndex].value;if(val==null||val==""){e.notificationManager.notify("Please select a Step type.",3);return}this.submit()};var b=function(){this.cancel()};this.createNodeDialog=new YAHOO.widget.Dialog("createNodeDialog",{width:"650px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Submit",handler:a,isDefault:true},{text:"Cancel",handler:b}]});this.createNodeDialog.callback.success=function(f){var e=f.responseText;var d=f.argument;if(e=="nodeNotProject"){d.notificationManager.notify("Unable to attach Step to project, please see administrator.",3)}else{document.getElementById("createNodeType").selectedIndex=0;document.getElementById("createNodeTitle").value="";document.getElementById("selectNodeIconDiv").parentNode.removeChild(document.getElementById("selectNodeIconDiv"));d.placeNode=true;d.placeNodeId=e;d.loadProject(d.project.getContentBase()+d.utils.getSeparator(d.project.getContentBase())+d.project.getProjectFilename(),d.project.getContentBase(),true);d.createNodeDialog.hide()}};this.createNodeDialog.callback.failure=function(d){d.argument.notificationManager.notify("unable to create Step on the WISE server",3)};this.createNodeDialog.callback.argument=this;this.createNodeDialog.render()};View.prototype.nodeTypeSelected=function(){var l=document.getElementById("createNodeForm");var d=document.getElementById("selectNodeIconDiv");var b=document.getElementById("createNodeType").options[document.getElementById("createNodeType").selectedIndex].value;if(d){l.removeChild(d)}if(b&&b!=""){var j=nodeTypes.indexOf(b);var e=nodeClasses[j];var m=nodeClassText[j];var g=createElement(document,"div",{id:"selectNodeIconDiv"});var n=document.createTextNode("Select an Icon:");var k=createElement(document,"select",{id:"selectNodeIcon",name:"param2"});for(var f=0;f<e.length;f++){var a=createElement(document,"option",{name:"nodeClassOption"});a.value=e[f];a.innerHTML="<img src='"+iconUrl+e[f]+"16.png'/> "+m[f];k.appendChild(a)}g.appendChild(n);g.appendChild(k);l.appendChild(g)}};View.prototype.initializeEditProjectFileDialog=function(){var a=function(){this.submit()};var d=function(){this.cancel()};var b=function(e){e.loadProject(e.project.getUrl(),e.project.getContentBase(),true);e.editProjectFileDialog.hide()};this.editProjectFileDialog=new YAHOO.widget.Dialog("editProjectFileDialog",{width:"900px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Submit",handler:a,isDefault:true},{text:"Cancel",handler:d}]});this.editProjectFileDialog.callback={success:function(e){if(e.responseText!="success"){e.argument.notificationManager.notify("Unable to save project to WISE server",3)}else{b(e.argument)}},failure:function(e){this.notificationManager.notify("Unable to save project to the WISE server",3)},scope:this};this.editProjectFileDialog.callback.argument=this;this.editProjectFileDialog.render()};View.prototype.initializeAssetUploaderDialog=function(){var a=function(){var d=arguments[1].callback.argument;if(!d.utils.fileFilter(d.allowedAssetExtensions,document.getElementById("uploadAssetFile").value)){d.notificationManager.notify("Specified file type is not allowed for uploading as an asset.",3);return}this.submit()};var b=function(){this.cancel()};this.assetUploaderDialog=new YAHOO.widget.Dialog("assetUploaderDialog",{width:"600px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Upload",handler:a,isDefault:true},{text:"Cancel",handler:b}]});this.assetUploaderDialog.callback.upload=function(d){d.argument.notificationManager.notify(d.responseText,3);document.getElementById("uploadAssetFile").value="";d.argument.assetUploaderDialog.hide()};this.assetUploaderDialog.callback.failure=function(d){d.argument.notificationManager.notify("Asset upload communication failure",3)};this.assetUploaderDialog.callback.argument=this;this.assetUploaderDialog.render()};View.prototype.initializeAssetEditorDialog=function(){var b=function(){var d=document.getElementById("assetSelect");while(d.firstChild){d.removeChild(d.firstChild)}document.getElementById("sizeDiv").innerHTML="";arguments[1].callback.argument.assetEditorDialog.hide()};var a=function(){var d=arguments[1].callback.argument;var h=document.getElementById("assetSelect");var e=h.selectedIndex;if(e!=-1){var g=h.options[h.selectedIndex];var f=g.value;var j=function(m,k,l){h.removeChild(g);l.notificationManager.notify(m,3)};d.connectionManager.request("POST",1,"assetmanager.html",{command:"remove",path:d.utils.getContentPath(d.authoringBaseUrl,d.project.getContentBase()),asset:f},j,d)}};this.assetEditorDialog=new YAHOO.widget.Dialog("assetEditorDialog",{width:"400px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Remove Selected Asset",handler:a},{text:"Done",handler:b,isDefault:true}]});this.assetEditorDialog.callback.argument=this;this.assetEditorDialog.render()};View.prototype.initializeImportProjectDialog=function(){var a=function(){this.submit()};var d=function(){this.cancel()};var b=function(e){if(e=="success"){this.notificationManager.notify("Your project has been successfully imported to and extracted on the WISE server in project directory.",3)}};this.importProjectDialog=new YAHOO.widget.Dialog("importProjectDialog",{width:"450px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Import",handler:a,isDefault:true},{text:"Cancel",handler:d}]});this.importProjectDialog.callback={upload:function(e){b(e.responseText)},failure:function(e){},scope:this};this.importProjectDialog.render()};View.prototype.initializePublishProjectDialog=function(){var a=function(){this.submit()};var b=function(){this.cancel()};this.publishProjectDialog=new YAHOO.widget.Dialog("publishProjectDialog",{width:"800px",height:"500px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Cancel",handler:b}]});this.publishProjectDialog.callback={success:function(d){eventManager.fire("alert","successfully published to webapp server")},failure:function(d){eventManager.fire("alert","failure publishing to webapp server")},scope:this};this.publishProjectDialog.render()};View.prototype.initializeCopyProjectDialog=function(){var a=function(){this.submit()};var b=function(){this.cancel()};this.copyProjectDialog=new YAHOO.widget.Dialog("copyProjectDialog",{width:"500px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Copy",handler:a},{text:"Cancel",handler:b}]});this.copyProjectDialog.callback={success:function(d){d.argument.notificationManager.notify("Project copied to: "+d.responseText,3);d.argument.copyProjectDialog.hide()},failure:function(d){d.argument.notificationManager.notify("Failed copying project on server.",3)},scope:this};this.copyProjectDialog.callback.argument=this;this.copyProjectDialog.render()};View.prototype.initializeCreateTODODialog=function(){var b=function(){document.getElementById("todoUsername").value="";document.getElementById("todoId").value="";document.getElementById("todoText").value=""};var d=function(){b();arguments[1].callback.argument.createTODODialog.hide()};var a=function(){var f=arguments[1].callback.argument;f.todos.push({name:document.getElementById("todoUsername").value,id:document.getElementById("todoId").value,text:document.getElementById("todoText").value});var g=function(k,h,j){b();j.updatePageMeta();j.createTODODialog.hide()};var e=function(k,h,j){j.notificationManager.notify("error creating/updating TODO list on server",3)};if(f.hasTODO){f.connectionManager.request("POST",1,"filemanager.html",{command:"updateFile",param1:f.utils.getContentPath(f.authoringBaseUrl,f.project.getContentBase()),param2:f.utils.getTODOFilename(f.project.getProjectFilename()),param3:yui.JSON.stringify(f.todos)},g,f,e)}else{f.connectionManager.request("POST",1,"filemanager.html",{command:"createFile",param1:f.utils.getContentPath(f.authoringBaseUrl,f.project.getContentBase())+"/"+f.utils.getTODOFilename(f.project.getProjectFilename()),param2:yui.JSON.stringify(f.todos)},g,f,e)}};this.createTODODialog=new YAHOO.widget.Dialog("createTODODialog",{width:"750px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Save",handler:a},{text:"Cancel",handler:d}]});this.createTODODialog.callback.argument=this;this.createTODODialog.render()};View.prototype.initializeEditTODODialog=function(){var a=function(){var b=arguments[1].callback.argument;b.editTODODialog.hide();b.updatePageMeta()};this.editTODODialog=new YAHOO.widget.Dialog("editTODODialog",{width:"705px",height:"300px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Done",handler:a}]});this.editTODODialog.callback.argument=this;this.editTODODialog.render()};View.prototype.initializeRetrieveArchiveDialog=function(){this.retrieveArchiveDialog=new YAHOO.widget.Dialog("retrieveArchiveDialog",{width:"800px",fixedcenter:true,visible:false,constraintoviewport:true});this.retrieveArchiveDialog.render()};View.prototype.initializeEditProjectMetadataDialog=function(){this.editProjectMetadataDialog=new YAHOO.widget.Dialog("editProjectMetadataDialog",{width:"500px",fixedcenter:true,visible:false,constraintoviewport:true});this.editProjectMetadataDialog.render()};View.prototype.initializePublishMetadataDialog=function(){var a=function(){this.cancel()};this.publishMetadataDialog=new YAHOO.widget.Dialog("publishMetadataDialog",{width:"700px",height:"300px",fixedcenter:true,visible:false,constraintoviewport:true,buttons:[{text:"Cancel",handler:a}]});this.publishMetadataDialog.render()};View.prototype.initializePreviousWorkDialog=function(){this.previousWorkDialog=new YAHOO.widget.Dialog("previousWorkDialog",{width:"800px",height:"500px",fixedcenter:true,visible:false,constraintoviewport:true});this.previousWorkDialog.render()};View.prototype.initializeAuthorStepDialog=function(){this.authorStepDialog=new YAHOO.widget.Dialog("authorStepDialog",{width:"1200px",height:"600px",close:false,xy:[100,0],fixedcenter:false,visible:false,constraintoviewport:false});this.authorStepDialog.render()};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_dialog.js")}View.prototype.getElementById=function(b,e){if(b.hasAttribute&&b.hasAttribute("id")&&b.getAttribute("id")==e){return b}else{if(b.childNodes.length==0){return null}else{var d=null;for(var a=0;a<b.childNodes.length;a++){result=this.getElementById(b.childNodes[a],e);if(result!=null){return result}}return null}}};View.prototype.updateAudio=function(){if(this.project){if(this.project.getStartNodeId()||confirm("Could not find a start node for the project. You can add sequences and/or nodes to remedy this. Do you still wish to preview the project (you will not see nodes?")){this.updateAudioInVLE=true;window.open("vle.html","PreviewWindow","toolbar=no,width=1024,height=768,menubar=no")}}else{this.notificationManager.notify("Please open or create a Project to update audio.",3)}};View.prototype.updateAudioFiles=function(){console.warn("UPDATing AudIO");if(this.project){var f=0;var e=this.project.getLeafNodes();for(var k=0;k<e.length;k++){var g=e[k];for(var l=0;l<g.audios.length;l++){this.notificationManager.notify("audio url:"+g.audios[l].url,4);var h=g.audios[l].elementId;if(h&&h!=null){var n=g.content.getContentXML();if(n.firstChild.nodeName=="parsererror"){this.notificationManager.notify("could not create audio.\nAudioFile: "+g.audios[l].url+"\nReason: parse error parsing file: "+g.filename,2)}else{var d=this.getElementById(n,h);if(d!=null){var j=d.textContent;this.notificationManager.notify("creating audio file at url: "+g.audios[l].url+"\nelementId: "+h+"\ncontent: "+j,4);var m={success:function(a){if(a.responseText=="success"){f++}else{this.notificationManager.notify('could not create audio.  Check if you have read/write access to your desktop.  Check to confirm that an "Audio" sub-folder exists in the project folder',3)}},failure:function(a){this.notificationManager.notify("could not create audio",3)},scope:this};YAHOO.util.Connect.asyncRequest("POST","filemanager.html",m,"command=updateAudioFiles&param1="+this.project.getContentBase()+"&param2="+g.audios[l].url+"&param3="+j)}}}}}this.notificationManager.notify("number of audio files created: "+f,4)}else{this.notificationManager.notify("Please open or create a Project before attempting to save.",3)}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_audio.js")}View.prototype.retrieveMetaData=function(){this.connectionManager.request("GET",1,this.project.getContentBase()+this.utils.getSeparator(this.project.getContentBase())+this.utils.getTODOFilename(this.project.getProjectFilename()),null,this.pageMetaSuccess,this,this.pageMetaFailure);this.connectionManager.request("GET",1,this.project.getContentBase()+this.utils.getSeparator(this.project.getContentBase())+this.utils.getProjectMetaFilename(this.project.getProjectFilename()),null,this.projectMetaSuccess,this,this.projectMetaFailure)};View.prototype.pageMetaSuccess=function(a,b,f){try{f.todos=yui.JSON.parse(a)}catch(d){f.notificationManager.notify("Error when parsing metadata, aborting.",2);return}f.hasTODO=true;f.updatePageMeta(true)};View.prototype.pageMetaFailure=function(b,a){a.todos=[];a.hasTODO=false};View.prototype.projectMetaSuccess=function(f,a,d){try{d.projectMeta=yui.JSON.parse(f);d.populateMaxScores()}catch(b){d.hasProjectMeta=false;d.projectMeta={title:"",subject:"",summary:"",author:"",graderange:"",totaltime:"",comptime:"",contact:"",techreqs:"",lessonplan:""};d.notificationManager.notify("Error parsing project metadata, aborting.",2);return}d.hasProjectMeta=true};View.prototype.projectMetaFailure=function(b,a){a.hasProjectMeta=false;a.projectMeta={title:"",subject:"",summary:"",author:"",graderange:"",totaltime:"",comptime:"",contact:"",techreqs:"",lessonplan:""}};View.prototype.updatePageMeta=function(h){this.clearPageMeta();for(var f=0;f<this.todos.length;f++){var j=this.parseTaskField(this.todos[f].id);var k=this.parseTaskField(this.todos[f].name);if(j.length>0){var g="Task";if(k.length>0){g+=" for ";for(c=0;c<k.length;c++){g+=k[c];if(c!=k.length-1){g+=", "}this.addToTasks("users",k[c],"Task for "+j.toString()+": "+this.todos[f].text)}}for(var e=0;e<j.length;e++){this.addToTasks("nodes",j[e],g+": "+this.todos[f].text+' <input type="button" value="remove" onclick="eventManager.fire(\'removeTask\',\''+f+"')\"/>");document.getElementById("taskDiv_"+j[e]).innerHTML="<a onMouseOver=\"eventManager.fire('showTaskBox','"+j[e]+"')\" onMouseOut=\"eventManager.fire('delayHideTaskBox','"+j[e]+"')\">T</a>"}}else{if(k.length>0){for(var l=0;l<k.length;l++){this.addToTasks("users",k[l],"Task: "+this.todos[f].text)}}else{if(this.taskHTML.project){this.taskHTML.project+="<br/>Task: "+this.todos[f].text}else{this.taskHTML.project="Task: "+this.todos[f].text}}}}if(this.taskHTML.project){showElement("projectTasks")}if(objSize(this.taskHTML.users)>0){showElement("userTasks")}if(h){}};View.prototype.delayHideTaskBox=function(a){this.timeoutVars[a]=setTimeout('eventManager.fire("hideTaskBox")',750)};View.prototype.stopHiding=function(a){clearTimeout(this.timeoutVars[a])};View.prototype.addToTasks=function(d,a,b){var d=this.taskHTML[d];if(d[a]){d[a]+="<br/>"+b}else{d[a]=b}};View.prototype.clearPageMeta=function(){yui.all(".taskDiv").set("innerHTML","");this.taskHTML={project:undefined,users:{},nodes:{}};hideElement("userTasks");hideElement("projectTasks")};View.prototype.parseTaskField=function(b){var a=[];if(b&&b!=""){b=b.replace(/ /g,"");a=b.split(",")}return a};View.prototype.showTaskBox=function(g){if(g=="users"){var d=document.getElementById("userTasks");var b="";for(var a in this.taskHTML.users){if(b==""){b="<b>Task for "+a+"</b><br/>"+this.taskHTML.users[a]}else{b+="<br/><br/><b>Task for "+a+"</b><br/>"+this.taskHTML.users[a]}}}else{if(g=="project"){var d=document.getElementById("projectTasks");var b=this.taskHTML.project}else{var d=document.getElementById("taskDiv_"+g);var b="<div id=\"floatingDiv\" onmouseover=\"eventManager.fire('stopHiding','"+g+"')\" onmouseout=\"eventManager.fire('delayHideTaskBox','"+g+"')\">"+this.taskHTML.nodes[g]+"</div>"}}var e=document.getElementById("taskBox");var f=findPos(d);e.innerHTML=b;e.style.display="block";e.style.position="absolute";e.style.top=f.top+d.offsetHeight;e.style.left=f.left};View.prototype.hideTaskBox=function(){var a=document.getElementById("taskBox");a.innerHTML="";a.style.display="none"};View.prototype.createTODOTask=function(a){if(this.project){showElement("createTODODialog");if(a){document.getElementById("todoId").value=a}this.createTODODialog.show()}else{this.notificationManager.notify("You must open a project before creating a TODO task.",3)}};View.prototype.editTODOTasks=function(){if(this.project){showElement("editTODODialog");this.populateTODOList();this.editTODODialog.show()}else{this.notificationManager.notify("You must open a project before editing the TODO Task list.",3)}};View.prototype.populateTODOList=function(){var n=document.getElementById("TODOTaskListDiv");while(n.firstChild){n.removeChild(n.firstChild)}for(var h=0;h<this.todos.length;h++){var q=createElement(document,"div",{id:"editTask_"+h});var a=document.createTextNode("Task Entry:");var k=createElement(document,"input",{id:"editTaskUserInput_"+h,onchange:'eventManager.fire("editTaskFieldModified","'+h+'")',value:this.todos[h].name});var p=createElement(document,"input",{id:"editTaskIdInput_"+h,onchange:'eventManager.fire("editTaskFieldModified","'+h+'")',value:this.todos[h].id});var b=createElement(document,"input",{id:"editTaskTextInput_"+h,size:"80",onchange:'eventManager.fire("editTaskFieldModified","'+h+'")',value:this.todos[h].text});var l=document.createTextNode("Username(s): ");var j=document.createTextNode("Node id(s): ");var m=document.createTextNode("Task text: ");var d=createElement(document,"input",{type:"button",id:"editTaskSaveButt_"+h,"class":"taskButt",value:"save",onclick:'eventManager.fire("saveTaskChange","'+h+'")'});var g=createElement(document,"input",{type:"button",id:"editTaskUndoButt_"+h,"class":"taskButt",value:"undo",onclick:'eventManager.fire("undoTaskChange","'+h+'")'});var f=createElement(document,"input",{type:"button",id:"editTaskRemoveButt_"+h,"class":"taskButt",value:"remove",onclick:'eventManager.fire("removeTask","'+h+'")'});n.appendChild(createBreak());n.appendChild(q);q.appendChild(a);q.appendChild(createBreak());q.appendChild(createBreak());q.appendChild(l);q.appendChild(k);q.appendChild(createBreak());q.appendChild(j);q.appendChild(p);q.appendChild(createBreak());q.appendChild(m);q.appendChild(b);q.appendChild(createBreak());q.appendChild(createBreak());q.appendChild(d);q.appendChild(g);q.appendChild(f)}};View.prototype.editTaskFieldModified=function(a){yui.get(document.getElementById("editTaskSaveButt_"+a)).addClass("notifyFont");yui.get(document.getElementById("editTaskUndoButt_"+a)).addClass("notifyFont")};View.prototype.undoTaskChange=function(a){yui.get(document.getElementById("editTaskSaveButt_"+a)).removeClass("notifyFont");yui.get(document.getElementById("editTaskUndoButt_"+a)).removeClass("notifyFont");document.getElementById("editTaskUserInput_"+a).value=this.todos[a].name;document.getElementById("editTaskIdInput_"+a).value=this.todos[a].id;document.getElementById("editTaskTextInput_"+a).value=this.todos[a].text};View.prototype.saveTaskChange=function(a){this.todos[a].name=document.getElementById("editTaskUserInput_"+a).value;this.todos[a].id=document.getElementById("editTaskIdInput_"+a).value;this.todos[a].text=document.getElementById("editTaskTextInput_"+a).value;this.updateTODOOnServer();yui.get(document.getElementById("editTaskSaveButt_"+a)).removeClass("notifyFont");yui.get(document.getElementById("editTaskUndoButt_"+a)).removeClass("notifyFont")};View.prototype.removeTask=function(a){this.todos.splice(a,1);this.populateTODOList();this.updateTODOOnServer()};View.prototype.updateTODOOnServer=function(){var b=function(f,d,e){e.updatePageMeta()};var a=function(f,d,e){e.notificationManager.notify("error creating/updating TODO list on server",3)};if(this.hasTODO){this.connectionManager.request("POST",1,"filemanager.html",{command:"updateFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase()),param2:this.utils.getTODOFilename(this.project.getProjectFilename()),param3:yui.JSON.stringify(this.todos)},b,this,a)}else{this.connectionManager.request("POST",1,"filemanager.html",{command:"createFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase())+"/"+this.utils.getTODOFilename(this.project.getProjectFilename()),param2:yui.JSON.stringify(this.todos)},b,this,a)}};View.prototype.updateProjectMetaOnServer=function(b){var d=function(g,e,f){f.hasProjectMeta=true;f.editProjectMetadataDialog.hide();if(b){showElement("publishMetadataDialog");document.getElementById("publishMetadataFrame").src="/webapp/author/publishprojectmetadata.html?projectId="+f.portalProjectId+"&metadata="+yui.JSON.stringify(f.projectMeta);f.publishMetadataDialog.show()}else{f.notificationManager.notify("Project metadata saved to project directory.",3)}};var a=function(g,e,f){f.notificationManager.notify("Error saving project metadata in directory.",3)};if(this.hasProjectMeta){this.connectionManager.request("POST",1,"filemanager.html",{command:"updateFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase()),param2:this.utils.getProjectMetaFilename(this.project.getProjectFilename()),param3:yui.JSON.stringify(this.projectMeta)},d,this,a)}else{this.connectionManager.request("POST",1,"filemanager.html",{command:"createFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase())+"/"+this.utils.getProjectMetaFilename(this.project.getProjectFilename()),param2:yui.JSON.stringify(this.projectMeta)},d,this,a)}};View.prototype.updateProjectMetadata=function(a){this.projectMeta.title=document.getElementById("projectMetadataTitle").value;this.projectMeta.author=document.getElementById("projectMetadataAuthor").value;this.projectMeta.subject=document.getElementById("projectMetadataSubject").value;this.projectMeta.summary=document.getElementById("projectMetadataSummary").value;this.projectMeta.graderange=document.getElementById("projectMetadataGradeRange").value;this.projectMeta.totaltime=document.getElementById("projectMetadataTotalTime").value;this.projectMeta.comptime=document.getElementById("projectMetadataCompTime").value;this.projectMeta.contact=document.getElementById("projectMetadataContact").value;this.projectMeta.techreqs=document.getElementById("projectMetadataTechReqs").value;this.projectMeta.lessonplan=document.getElementById("projectMetadataLessonPlan").value;this.updateProjectMetaOnServer(a)};View.prototype.undoProjectMetadata=function(){this.editProjectMetadata()};View.prototype.publishProjectMetadata=function(){if(this.portalProjectId){this.updateProjectMetadata(true)}else{this.notificationManager.notify("Could not determine Portal Project ID, only projects opened through the portal can be published to the portal.",3)}};View.prototype.maxScoreUpdated=function(b){if(document.getElementById("maxScore_"+b)){var a=document.getElementById("maxScore_"+b).value;if(!a||(!isNaN(a)&&a>=0)){this.updateMaxScoreValue(b,a);this.updateProjectMetaOnServer(false)}else{this.notificationManager.notify("The max score value is either not a number, is less than 0, or could not be determined, aborting update.",3);this.populateMaxScores();return}}else{this.notificationManager.notify("Could not find max score element for node, aborting update.",3)}};View.prototype.updateMaxScoreValue=function(f,e){var b=false;var d=this.projectMeta.maxScores;if(!d){this.projectMeta.maxScores=[];d=this.projectMeta.maxScores}for(var a=0;a<d.length;a++){if(d[a].nodeId==f){b=true;d[a].maxScoreValue=e}}if(!b){this.projectMeta.maxScores.push({nodeId:f,maxScoreValue:e})}};View.prototype.populateMaxScores=function(){if(this.projectMeta.maxScores){var d=this.projectMeta.maxScores;for(var b=0;b<d.length;b++){var a=document.getElementById("maxScore_"+d[b].nodeId);if(a){a.value=d[b].maxScoreValue}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_meta.js")}View.prototype.selectClick=function(b){if(this.selectModeEngaged){if(this.disambiguateMode){return}else{this.processSelected(b)}}else{if(b!="uSeq"&&b!="uNode"&&b.split("|")[1]!=this.project.getRootNode().id){var a=yui.get(document.getElementById(b));if(this.keystrokeManager.isShiftkeydown()){if(a.hasClass("selected")){a.removeClass("selected")}else{a.addClass("selected")}}else{this.clearAllSelected();a.addClass("selected")}}}};View.prototype.clearAllSelected=function(){yui.all(".projectNode").removeClass("selected")};View.prototype.selectAll=function(){if(!this.selectModeEngaged){yui.all(".projectNode").addClass("selected")}};View.prototype.getSelected=function(){var a={master:null,seqs:[],nodes:[]};a.master=yui.get(".selected.master");a.seqs=yui.all(".selected.seq");a.nodes=yui.all(".selected.node");a.ordered=yui.all(".projectNode.selected");return a};View.prototype.deleteSelected=function(){var b=this.getSelected();var a=this;if(b.seqs.size()<1&&b.nodes.size()<1){this.notificationManager.notify("Select one or more items before activating this tool.",3)}else{if(confirm("Are you sure you want to delete the selected item(s)?")){this.projectSaved=false;if(b.master){this.notificationManager.notify("Deleting the master activity for a project is currently not allowed.")}b.seqs.each(function(e,d){var f=e.get("id").split("|")[1];a.project.removeNodeById(f)});b.nodes.each(function(e,d){var f=e.get("id").split("|")[1];a.utils.removeNodeFileFromServer(a,f);a.project.removeNodeById(f)});this.generateAuthoring()}}};View.prototype.duplicateSelected=function(){var e=this.getSelected();if(e.seqs.size()==0&&e.nodes.size()==0&&!e.master){this.notificationManager.notify("Select one or more items before activating this tool.",3);return}if(confirm("Are you sure you want to duplicate the selected item(s)")){var d=[];if(e.master){d.push(e.master.get("id").split("|")[1])}e.seqs.each(function(g,f){d.push(g.get("id").split("|")[1])});e.nodes.each(function(g,f){d.push(g.get("id").split("|")[1])});var a=function(g,f,h){var j;if(f[1]){j=f[1]+" COPYING COMPLETE, refreshing project."}else{j="COPYING COMPLETE, refreshing project"}h.notificationManager.notify(j,3);h.loadProject(h.project.getUrl(),h.project.getContentBase(),true)};var b=this.project.generateUniqueCopyEventName();this.eventManager.addEvent(b);this.eventManager.subscribe(b,a,this);this.project.copyNodes(d,b)}};View.prototype.moveSelected=function(){var b=this.getSelected();var a=this;if(b.seqs.size()==0&&b.nodes.size()==0&&!b.master){this.notificationManager.notify("Select one or more items before activating this tool.",3);return}if(b.master){this.notificationManager.notify("The master sequence cannot be moved.",3);if(b.seqs.size()==0&&b.nodes.size()==0){return}else{b.master.removeClass("selected");b.master=null}}b.seqs.each(function(e,d){a.removeChildrenHTML(a,e);e.get("parentNode").get("parentNode").get("parentNode").removeChild(e.get("parentNode").get("parentNode"))});b.nodes.each(function(e,d){e.get("parentNode").get("parentNode").get("parentNode").removeChild(e.get("parentNode").get("parentNode"))});this.engageSelectMode(this.moveCallback,"Click an Activity or Step target.  The selected item(s) will be placed after this target.",[b])};View.prototype.removeChildrenHTML=function(a,d){var e=document.getElementById(d.get("id"));var b=e.parentNode.parentNode.nextSibling;if(b){b=b.childNodes[1].firstChild}while(b&&b.id.split("|")[0]==e.id.split("|")[1]){if(a.project.getNodeById(b.id.split("|")[1]).type=="sequence"){a.removeChildrenHTML(yui.get(b))}b.parentNode.parentNode.parentNode.removeChild(b.parentNode.parentNode);b=e.parentNode.parentNode.nextSibling;if(b){b=b.childNodes[1].firstChild}}};View.prototype.useSelected=function(){var a=this.getSelected();if(a.seqs.size()==0&&a.nodes.size()==0&&!a.master){this.notificationManager.notify("Select one or more items before activating this tool.",3);return}if(confirm("ADVISORY: This tool creates a mirror copy of the selected item not a true duplicate.  Mirror copies remain linked and share the same data. Mirror copies should only be used for Adaptive (branching) projects that branch, otherwise use the Duplicate tool. Are you sure you wish to continue?")){this.engageSelectMode(this.moveCallback,"Click a Step or Activity. The selected item(s) will be placed at that location.",[a,true])}};View.prototype.moveCallback=function(a,s){var k=s[0];var d=s[1];if(a==-1){this.generateAuthoring();return}else{if(a=="uSeq"){if(k.nodes.size()>0){this.notificationManager.notify("Only Activities can be moved into the Unattached Activities area. Ignoring steps.",3)}var r=this.removeFromProject(k.seqs,d);if(!d){for(var u=0;u<r.length;u++){this.project.getSequenceNodes().unshift(r[u])}}}else{if(a=="uNode"){if(k.seqs.size()>0){this.notificationManager.notify("Only Steps can be moved into the Unattached Steps area. Ignoring activities.",3)}var r=this.removeFromProject(k.nodes,d);if(!d){for(var u=0;u<r.length;u++){this.project.getLeafNodes().unshift(r[u])}}}else{var p=a.id.split("|");var n=this.project.getNodeById(p[1]);if(a.after){if(p[0]!="null"){var v=this.project.getNodeById(p[0]);if(this.simpleProject){if(n.type=="sequence"){var r=this.removeFromProject(k.seqs,d);if(k.nodes.size()>0){this.notificationManager.notify("You are attempting to place nodes(s) at the same level as sequences when in Simple Project mode. If you really wish to do this, switch to Advanced Project mode. Ignoring node(s).",3)}}else{var r=this.removeFromProject(k.nodes,d);if(k.seqs.size()>0){this.notificationManager.notify("You are attempting to place sequences(s) at the same level as nodes when in Simple Project mode. If you really wish to do this, switch to Advanced Project mode. Ignoring sequence(s).",3)}}}else{var r=this.removeFromProject(k.ordered,d)}var w=v.children.indexOf(n)+1;for(var q=0;q<r.length;q++){var t=[];v.children.splice(w,0,r[q]);if(!this.project.validateNoLoops(v.id,t)){this.notificationManager.notify("Adding "+r[q].id+" to "+v.id+" would cause an infinite loop. Undoing change...",3);v.children.splice(w,1)}if(!d){if(r[q].type=="sequence"){this.project.getSequenceNodes().push(r[q])}else{this.project.getLeafNodes().push(r[q])}}}}else{if(this.project.getSequenceNodes().indexOf(n)==-1){if(k.seqs.size()>0){this.notificationManager.notify("Only Steps can be moved into the Unattached Steps area. Ignoring activities.",3)}var r=this.removeFromProject(k.nodes,d);var w=this.project.getLeafNodes().indexOf(n)+1;if(!d){for(var m=0;m<r.length;m++){this.project.getLeafNodes().splice(w,0,r[m])}}}else{if(k.nodes.size()>0){this.notificationManager.notify("Only Activities can be moved into the Unattached Activities area. Ignoring steps.",3)}var r=this.removeFromProject(k.seqs,d);var w=this.project.getSequenceNodes().indexOf(n)+1;if(!d){for(var l=0;l<r.length;l++){this.project.getSequenceNodes().splice(w,0,r[l])}}}}}else{if(n){if(this.simpleProject){if(this.project.getRootNode().id==n.id){var r=this.removeFromProject(k.seqs,d);if(k.nodes.size()>0){this.notificationManager.notify("You are attempting to place node(s) outside of any sequence when in Simple Project mode. If you really wish to do this, switch to Advanced Project mode. Ignoring node(s).",3)}}else{var r=this.removeFromProject(k.nodes,d);if(k.seqs.size()>0){this.notificationManager.notify("You are attempting to place sequence(s) within a sequence when in Simple Project mode. If you really wish to do this, switch to Advanced Project mode. Ignoring sequence(s).",3)}}}else{var r=this.removeFromProject(k.ordered,d)}for(var e=0;e<r.length;e++){var t=[];n.children.splice(0,0,r[e]);if(!this.project.validateNoLoops(n.id,t)){this.notificationManager.notify("Adding "+r[e].id+" to "+n.id+" would cause an infinite loop. Undoing change...",3);n.children.splice(0,1)}if(!d){if(r[e].type=="sequence"){this.project.getSequenceNodes().push(r[e])}else{this.project.getLeafNodes().push(r[e])}}}}else{this.notificationManager.notify("Problems trying to move Steps. No items were moved.",3)}}}}}this.projectSaved=false};View.prototype.removeFromProject=function(g,f){if(f){return this.getProjectNodesFromList(g)}var j=[];for(var h=g.size()-1;h>=0;h--){var d=g.item(h);if(d.hasClass("master")){this.notificationManager.notify("the master activity cannot be removed",2)}else{var a=d.get("id").split("|");var b=this.project.getNodeById(a[1]);j.push(b);if(a[0]!="null"){this.project.removeReferenceFromSequence(a[0],a[2])}if(d.hasClass("seq")){this.project.getSequenceNodes().splice(this.project.getSequenceNodes().indexOf(b),1)}else{this.project.getLeafNodes().splice(this.project.getLeafNodes().indexOf(b),1)}}}return j};View.prototype.getProjectNodesFromList=function(b){var a=[];for(var d=b.size()-1;d>=0;d--){a.push(this.project.getNodeById(b.item(d).get("id").split("|")[1]))}return a};View.prototype.engageSelectMode=function(d,b,a){this.clearAllSelected();this.selectModeEngaged=true;this.selectCallback=d;this.selectArgs=a;hideElement("authorHeader");if(b){document.getElementById("selectModeMessage").innerHTML=b}else{document.getElementById("selectModeMessage").innerHTML=this.defaultSelectModeMessage}showElement("selectModeDiv");document.body.style.cursor="crosshair"};View.prototype.disengageSelectMode=function(a){this.selectModeEngaged=false;if(this.selectCallback){this.selectCallback(a,this.selectArgs)}document.getElementById("selectModeMessage").innerHTML="";hideElement("selectModeDiv");showElement("authorHeader");document.body.style.cursor="auto";this.generateAuthoring();this.updatePageMeta()};View.prototype.processSelected=function(d){var b=yui.get(document.getElementById(d));if(b.hasClass("seq")){this.disambiguateMode=true;b.get("children").setStyle("display","none");var a=document.getElementById("choiceDiv_"+d);a.innerHTML="Insert the selected item(s) <a onclick=\"eventManager.fire('processChoice',['"+d+"','true'])\">AS FIRST STEP WITHIN THIS ACTIVITY</a> or <a onclick=\"eventManager.fire('processChoice',['"+d+"','false'])\">AFTER THIS ACTIVITY</a><i>&nbsp;&nbsp;(select a choice)</i>";a.style.display="inline"}else{if(b.hasClass("node")){this.disengageSelectMode({after:true,id:b.get("id")})}else{if(b.hasClass("master")){this.disengageSelectMode({after:false,id:b.get("id")})}else{this.disengageSelectMode(d)}}}};View.prototype.processChoice=function(d,a){this.disambiguateMode=false;var b=yui.get(document.getElementById(d));b.get("children").setStyle("display","block");document.getElementById("choiceDiv_"+d).style.display="none";if(a=="true"){this.disengageSelectMode({after:false,id:d})}else{this.disengageSelectMode({after:true,id:d})}};View.prototype.checkModeAndSelect=function(a){if(this.selectModeEngaged){yui.get(document.getElementById(a)).addClass("selected")}};View.prototype.checkModeAndDeselect=function(a){if(this.selectModeEngaged){yui.get(document.getElementById(a)).removeClass("selected")}};View.prototype.placeNewNode=function(b){this.clearAllSelected();var a=yui.all(".projectNode");a.each(function(g,f,e){var d=g.get("id").split("|");if(d[0]=="null"&&d[1]==b){g.addClass("selected")}});this.moveSelected();this.placeNodeId=undefined;this.placeNode=false};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_selection.js")}View.prototype.utils.getContentBaseFromFullUrl=function(a){if(a.indexOf("\\")!=-1){return a.substring(0,a.lastIndexOf("\\"))}else{return a.substring(0,a.lastIndexOf("/"))}};View.prototype.utils.getSeparator=function(a){if(a.indexOf("\\")!=-1){return"\\"}else{return"/"}};View.prototype.utils.removeNodeFileFromServer=function(a,d){var b=a.getProject().getNodeFilename(d);var e=function(h,f,g){if(h!="success"){g.notificationManager.notify("failed request to remove file: "+b+"  from the server",3)}};if(b){a.connectionManager.request("POST",1,"filemanager.html",{command:"removeFile",param1:this.getContentPath(a.authoringBaseUrl,a.project.getContentBase()),param2:b},e,a)}};View.prototype.utils.getTODOFilename=function(a){return a.substring(0,a.lastIndexOf(".project.json"))+".todo.txt"};View.prototype.utils.getProjectMetaFilename=function(a){return a.substring(0,a.lastIndexOf(".project.json"))+".project-meta.json"};View.prototype.utils.fileFilter=function(b,a){return b.indexOf(this.getExtension(a))!=-1};View.prototype.utils.getExtension=function(b){var a=b.lastIndexOf(".");if(a){return b.substring(a+1,b.length)}return null};View.prototype.utils.appropriateSizeText=function(a){if(a>1048576){return this.roundToDecimal(((a/1024)/1024),1)+" mb"}else{if(a>1024){return this.roundToDecimal((a/1024),1)+" kb"}else{return a+" b"}}};View.prototype.utils.roundToDecimal=function(b,a){var d=1;if(a){d=Math.pow(10,a)}return Math.round(b*d)/d};View.prototype.utils.hideNodes=function(){var a=yui.all(".projectNode.node");a.each(function(d,b){d.get("parentNode").get("parentNode").addClass("hidden")})};View.prototype.utils.unhideNodes=function(){var a=yui.all(".projectNode.node");a.each(function(d,b){d.get("parentNode").get("parentNode").removeClass("hidden")})};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_utils.js")}View.prototype.savePreviousWork=function(){this.activeNode.prevWorkNodeIds=[];var b=document.getElementById("selectTo").options;for(var a=0;a<b.length;a++){this.activeNode.prevWorkNodeIds.push(b[a].value)}this.saveProject();this.previousWorkDialog.hide()};View.prototype.cancelPreviousWorkChanges=function(){this.clearCols();this.previousWorkDialog.hide()};View.prototype.clearCols=function(){var b=document.getElementById("selectTo");var a=document.getElementById("selectFrom");while(b.firstChild){b.removeChild(b.firstChild)}while(a.firstChild){a.removeChild(a.firstChild)}};View.prototype.populateToCol=function(){var d=document.getElementById("selectTo");var b=this.activeNode.prevWorkNodeIds;if(b){for(var e=0;e<b.length;e++){var a=this.project.getNodeById(b[e]);d.appendChild(this.createOptionElement(a.id,a.title))}}};View.prototype.populateFromCol=function(){var d=document.getElementById("selectFrom");var b=this.removeUnwanted(this.project.getLeafNodes());if(b){for(var a=0;a<b.length;a++){d.appendChild(this.createOptionElement(b[a].id,b[a].title))}}};View.prototype.removeUnwanted=function(b){workNodes=b.slice();var a=workNodes.indexOf(this.activeNode);if(a!=-1){workNodes.splice(a,1)}for(var f=workNodes.length-1;f>=0;f--){var d=workNodes[f];if(d.type=="sequence"||d.type=="Activity"||d.children.length>0||this.excludedPrevWorkNodes.indexOf(d.type)!=-1||this.activeNode.prevWorkNodeIds.indexOf(d.id)!=-1){workNodes.splice(f,1)}}return workNodes};View.prototype.moveSelectedLeft=function(){var e=document.getElementById("selectFrom").options;var b=[];for(var d=0;d<e.length;d++){if(e[d].selected){b.push(e[d])}}for(var f=0;f<b.length;f++){var a=b[f].parentNode.removeChild(b[f]);document.getElementById("selectTo").appendChild(a)}};View.prototype.moveSelectedRight=function(){var f=document.getElementById("selectTo").options;var e=[];for(var b=0;b<f.length;b++){if(f[b].selected){e.push(f[b])}}for(var a=0;a<e.length;a++){var d=e[a].parentNode.removeChild(e[a]);document.getElementById("selectFrom").appendChild(d)}};View.prototype.createOptionElement=function(d,b){var a=createElement(document,"option",{id:d+"_opt"});a.text=b;a.value=d;return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_previouswork.js")}View.prototype.setInitialAuthorStepState=function(){this.activeContent=createContent(this.activeNode.content.getContentUrl());this.preservedContent=this.activeNode.content;this.stepSaved=true;if(this.easyMode){document.getElementById("easyTrue").checked=true}else{document.getElementById("easyFalse").checked=true}document.getElementById("refreshCheck").checked=this.updateNow;if(this.easyMode){this[this.resolveType(this.activeNode.type)].generatePage(this)}else{this.generateAdvancedAuthoring()}this.previewStep()};View.prototype.resolveType=function(a){if(a=="NoteNode"){return"OpenResponseNode"}else{return a}};View.prototype.authorStepModeChanged=function(a){if(this.stepSaved||confirm("You are about to switch authoring mode but have not saved your changes. If you continue, your changes will be lost. Do you wish to continue?")){if(a=="true"){this.easyMode=true}else{this.easyMode=false}this.setInitialAuthorStepState()}else{if(this.easyMode){document.getElementById("easyTrue").checked=true}else{document.getElementById("easyFalse").checked=true}}};View.prototype.updateRefreshOption=function(){this.updateNow=document.getElementById("refreshCheck").checked};View.prototype.generateAdvancedAuthoring=function(){var d=document.getElementById("dynamicParent");while(d.firstChild){d.removeChild(d.firstChild)}var b=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var a=createElement(document,"textarea",{id:"sourceTextArea",style:"width:100%;height:100%",onkeyup:'eventManager.fire("sourceUpdated")'});d.appendChild(b);b.appendChild(a);a.style.width="100%";a.style.height="100%";a.value=this.activeContent.getContentString()};View.prototype.closeOnStepSaved=function(a){if(a||confirm("Save failed, do you still want to exit?")){document.getElementById("dynamicPage").innerHTML="";window.frames.previewFrame.src="empty.html";this.activeNode.content.setContent(this.preservedContent.getContentJSON());this.activeNode.baseHtmlContent=undefined;this.activeNode=undefined;this.activeContent=undefined;this.preservedContent=undefined;this.authorStepDialog.hide()}};View.prototype.closeStep=function(){if(this.stepSaved||confirm("Changes have not been saved, do you still wish to exit?")){this.closeOnStepSaved(true)}};View.prototype.refreshNow=function(){this.previewStep()};View.prototype.saveStep=function(e){if(this.easyMode&&this[this.activeNode.type]&&this[this.activeNode.type].save){this[this.activeNode.type].save(e)}if(SELF_RENDERING_NODES.indexOf(this.activeNode.type)==-1||!this.easyMode){var d=encodeURIComponent(yui.JSON.stringify(this.activeContent.getContentJSON(),null,3));var b=function(f,g,h){h.stepSaved=true;h.notificationManager.notify("Content saved to server!",3);h.preservedContent.setContent(h.activeContent.getContentJSON());if(e){h.eventManager.fire("closeOnStepSaved",[true])}};var a=function(g,f){f.notificationManager.notify("Unable to save content to server!",3);if(e){f.eventManager.fire("closeOnStepSaved",[false])}};this.connectionManager.request("POST",3,"filemanager.html",{command:"updateFile",param1:this.utils.getContentPath(this.authoringBaseUrl,this.project.getContentBase()),param2:this.activeContent.getFilename(this.project.getContentBase()),param3:d},b,this,a)}};View.prototype.sourceUpdated=function(a){if(this.updateNow||a){this.stepSaved=false;if(this.easyMode){this[this.resolveType(this.activeNode.type)].updateContent()}else{this.activeContent.setContent(document.getElementById("sourceTextArea").value)}this.previewStep()}};View.prototype.previewStep=function(){this.activeNode.content.setContent(this.activeContent.getContentJSON());this.activeNode.render(window.frames.previewFrame)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/authorview_authorstep.js")}View.prototype.OpenResponseNode={};View.prototype.OpenResponseNode.generatePage=function(a){this.view=a;this.content=this.view.activeContent.getContentJSON();var g=document.getElementById("dynamicParent");g.removeChild(document.getElementById("dynamicPage"));var e=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var d=document.createTextNode("Question for Student:");var b=document.createTextNode("Size of Student Response Box (# rows):");var f=document.createTextNode("Use Rich Text Editor");e.appendChild(b);e.appendChild(createBreak());e.appendChild(this.generateLines());e.appendChild(createBreak());e.appendChild(createBreak());e.appendChild(f);e.appendChild(this.generateRichText());e.appendChild(createBreak());e.appendChild(createBreak());e.appendChild(this.generateStarter());e.appendChild(createBreak());e.appendChild(createBreak());e.appendChild(d);e.appendChild(createBreak());e.appendChild(this.generatePrompt());g.appendChild(e)};View.prototype.OpenResponseNode.generateLines=function(){return createElement(document,"input",{type:"text",id:"linesInput",value:this.content.assessmentItem.interaction.expectedLines,onkeyup:'eventManager.fire("openResponseLinesChanged")'})};View.prototype.OpenResponseNode.linesUpdated=function(){this.content.assessmentItem.interaction.expectedLines=document.getElementById("linesInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.OpenResponseNode.generatePrompt=function(){var a=createElement(document,"textarea",{id:"promptInput",name:"promptInput",cols:"85",rows:"35",wrap:"hard",onkeyup:"eventManager.fire('openResponsePromptChanged')"});a.value=this.content.assessmentItem.interaction.prompt;return a};View.prototype.OpenResponseNode.generateStarter=function(){var b=createElement(document,"div",{id:"starterDiv"});var d=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("openResponseStarterOptionChanged")',value:"0"});var k=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("openResponseStarterOptionChanged")',value:"1"});var g=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("openResponseStarterOptionChanged")',value:"2"});var e=createElement(document,"textarea",{id:"starterSentenceInput",cols:"60",rows:"4",wrap:"soft",onchange:'eventManager.fire("openResponseStarterSentenceUpdated")'});var h=document.createTextNode("Do not use starter sentence");var j=document.createTextNode("Starter sentence available upon request");var l=document.createTextNode("Starter sentence shows immediately");var a=document.createTextNode("Starter sentence: ");b.appendChild(d);b.appendChild(h);b.appendChild(createBreak());b.appendChild(k);b.appendChild(j);b.appendChild(createBreak());b.appendChild(g);b.appendChild(l);b.appendChild(createBreak());b.appendChild(a);b.appendChild(e);e.value=this.content.starterSentence.sentence;var f=this.content.starterSentence.display;if(f=="0"){e.disabled=true;d.checked=true}else{if(f=="1"){k.checked=true}else{if(f=="2"){g.checked=true}}}return b};View.prototype.OpenResponseNode.starterChanged=function(){var a=document.getElementsByName("starterRadio");var d;for(var b=0;b<a.length;b++){if(a[b].checked){this.content.starterSentence.display=a[b].value;if(a[b].value=="0"){document.getElementById("starterSentenceInput").disabled=true}else{document.getElementById("starterSentenceInput").disabled=false}}}this.view.eventManager.fire("sourceUpdated")};View.prototype.OpenResponseNode.starterUpdated=function(){this.content.starterSentence.sentence=document.getElementById("starterSentenceInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.OpenResponseNode.generateRichText=function(){var a=createElement(document,"input",{id:"richTextChoice",type:"checkbox",onclick:'eventManager.fire("openResponseUpdateRichText")'});a.checked=this.content.isRichTextEditorAllowed;return a};View.prototype.OpenResponseNode.updateRichText=function(){this.content.isRichTextEditorAllowed=document.getElementById("richTextChoice").checked;this.view.eventManager.fire("sourceUpdated")};View.prototype.OpenResponseNode.updateXMLPrompt=function(){this.content.assessmentItem.interaction.prompt=document.getElementById("promptInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.OpenResponseNode.updateContent=function(){this.view.activeContent.setContent(this.content)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_openresponse.js")}View.prototype.BrainstormNode={};View.prototype.BrainstormNode.generatePage=function(a){this.view=a;this.content=this.view.activeContent.getContentJSON();this.currentResponse;var d=document.getElementById("dynamicParent");d.removeChild(document.getElementById("dynamicPage"));var b=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var e=createElement(document,"div",{id:"optionsDiv"});d.appendChild(b);b.appendChild(e);this.generateOptions();this.generateStarter();this.generatePrompt();this.generateCannedResponses()};View.prototype.BrainstormNode.generateOptions=function(){var l=document.getElementById("dynamicPage");var M=document.getElementById("optionsDiv").nextChild;l.removeChild(document.getElementById("optionsDiv"));var h=createElement(document,"div",{id:"optionsDiv"});var t=document.createTextNode("Available Options:");var b=createElement(document,"table",{id:"optionsTable"});var x=createElement(document,"tr",{id:"optionsRow1"});var w=createElement(document,"tr",{id:"optionsRow2"});if(M){l.insertBefore(h,M)}else{l.appendChild(h)}h.appendChild(t);h.appendChild(createBreak());h.appendChild(b);h.appendChild(createBreak());b.appendChild(x);b.appendChild(w);var K=document.createTextNode("Size of student response box (#rows): ");var v=createElement(document,"input",{type:"text",id:"expectedLines",onkeyup:'eventManager.fire("brainstormUpdateExpectedLines")',value:this.content.assessmentItem.interaction.expectedLines});h.appendChild(K);h.appendChild(v);var n=createElement(document,"td",{id:"titleTD"});var y=document.createTextNode("Title: ");var g=createElement(document,"input",{type:"text",id:"titleInput",onkeyup:'eventManager.fire("brainstromUpdateTitle")',value:this.content.title});x.appendChild(n);n.appendChild(y);n.appendChild(g);var r=createElement(document,"td",{id:"gatedTD"});var T=document.createTextNode("Is Brainstorm gated?");var e=document.createTextNode("Yes. Student must post a response before seing peer responses");var U=document.createTextNode("No. Student sees peer responses immediately");var B=createElement(document,"input",{type:"radio",name:"isGated",onclick:'eventManager.fire("brainstormUpdateGated","true")'});var C=createElement(document,"input",{type:"radio",name:"isGated",onclick:'eventManager.fire("brainstormUpdateGated","false")'});var F=createElement(document,"td",{id:"displayNameTD"});var S=document.createTextNode("When response is submitted by student, how is it labeled?");var j=document.createTextNode("Username");var Q=document.createTextNode("Anonymous");var O=document.createTextNode("Student selects Username or Anonymous");var E=createElement(document,"input",{type:"radio",name:"displayName",onclick:'eventManager.fire("brainstormUpdateDisplayName","0")'});var N=createElement(document,"input",{type:"radio",name:"displayName",onclick:'eventManager.fire("brainstormUpdateDisplayName","1")'});var z=createElement(document,"input",{type:"radio",name:"displayName",onclick:'eventManager.fire("brainstormUpdateDisplayName","2")'});var R=createElement(document,"td",{id:"richTextEditorTD"});var J=document.createTextNode("Rich Text Editor");var H=document.createTextNode("Rich editor visible to student");var P=document.createTextNode("Rich 	editor not visible");var d=createElement(document,"input",{type:"radio",name:"richText",onclick:'eventManager.fire("brainstormUpdateRichText","true")'});var p=createElement(document,"input",{type:"radio",name:"richText",onclick:'eventManager.fire("brainstormUpdateRichText","false")'});var I=createElement(document,"td",{id:"pollEndedTD"});var s=document.createTextNode("Is poll ended");var f=document.createTextNode("poll is ended");var u=document.createTextNode("poll is not ended");var A=createElement(document,"input",{type:"radio",name:"pollEnded",onclick:'eventManager.fire("brainstormUpdatePollEnded","true")'});var D=createElement(document,"input",{type:"radio",name:"pollEnded",onclick:'eventManager.fire("brainstormUpdatePollEnded","false")'});var a=createElement(document,"td",{id:"instantPoll"});var q=document.createTextNode("Instant Poll Active?");var k=document.createTextNode("Instant Poll IS active");var m=document.createTextNode("Instant Poll IS NOT active");var G=createElement(document,"input",{type:"radio",name:"instantPoll",onclick:'eventManager.fire("brainstormUpdateInstantPoll","true")'});var L=createElement(document,"input",{type:"radio",name:"instantPoll",onclick:'eventManager.fire("brainstormUpdateInstantPoll","false")'});if(this.content.isInstantPollActive){G.checked=true}else{L.checked=true}a.appendChild(q);a.appendChild(createBreak());a.appendChild(G);a.appendChild(k);a.appendChild(createBreak());a.appendChild(L);a.appendChild(m);if(this.content.isPollEnded){A.checked=true}else{D.checked=true}I.appendChild(s);I.appendChild(createBreak());I.appendChild(A);I.appendChild(f);I.appendChild(createBreak());I.appendChild(D);I.appendChild(u);if(this.content.isRichTextEditorAllowed){d.checked=true}else{p.checked=true}R.appendChild(J);R.appendChild(createBreak());R.appendChild(d);R.appendChild(H);R.appendChild(createBreak());R.appendChild(p);R.appendChild(P);if(this.content.displayName=="0"){E.checked=true}else{if(this.content.displayName=="1"){N.checked=true}else{z.checked=true}}F.appendChild(S);F.appendChild(createBreak());F.appendChild(E);F.appendChild(j);F.appendChild(createBreak());F.appendChild(N);F.appendChild(Q);F.appendChild(createBreak());F.appendChild(z);F.appendChild(O);if(this.content.isGated){B.checked=true}else{C.checked=true}r.appendChild(T);r.appendChild(createBreak());r.appendChild(B);r.appendChild(e);r.appendChild(createBreak());r.appendChild(C);r.appendChild(U);x.appendChild(r);x.appendChild(F);w.appendChild(R);w.appendChild(I);w.appendChild(a)};View.prototype.BrainstormNode.generateStarter=function(){var g=document.getElementById("dynamicPage");var d=document.getElementById("starterDiv");if(d){g.removeChild(d)}var b=createElement(document,"div",{id:"starterDiv"});g.appendChild(b);var e=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("brainstormStarterChanged")',value:"0"});var m=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("brainstormStarterChanged")',value:"1"});var h=createElement(document,"input",{type:"radio",name:"starterRadio",onclick:'eventManager.fire("brainstormStarterChanged")',value:"2"});var f=createElement(document,"textarea",{id:"starterSentenceInput",cols:"60",rows:"4",wrap:"soft",onchange:'eventManager.fire("brainstormStarterUpdated")'});var k=document.createTextNode("Do not use starter sentence");var j=document.createTextNode("Starter sentence available upon request");var l=document.createTextNode("Starter sentence shows immediately");var a=document.createTextNode("Starter sentence: ");b.appendChild(e);b.appendChild(k);b.appendChild(createBreak());b.appendChild(m);b.appendChild(j);b.appendChild(createBreak());b.appendChild(h);b.appendChild(l);b.appendChild(createBreak());b.appendChild(a);b.appendChild(f);f.value=this.content.starterSentence.sentence;if(this.content.starterSentence.display=="0"){f.disabled=true;e.checked=true}else{if(this.content.starterSentence.display=="1"){m.checked=true}else{if(this.content.starterSentence.display=="2"){h.checked=true}}}};View.prototype.BrainstormNode.starterChanged=function(){var a=document.getElementsByName("starterRadio");for(var b=0;b<a.length;b++){if(a[b].checked){this.content.starterSentence.display=a[b].value;if(a[b].value=="0"){document.getElementById("starterSentenceInput").disabled=true}else{document.getElementById("starterSentenceInput").disabled=false}}}this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.starterUpdated=function(){this.content.starterSentence.sentence=document.getElementById("starterSentenceInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.generatePrompt=function(){var d=document.getElementById("dynamicPage");var a=document.getElementById("promptDiv");if(a){d.removeChild(a)}var f=createElement(document,"div",{id:"promptDiv"});var b=document.createTextNode("Edit/Enter prompt");var e=createElement(document,"textarea",{id:"promptInput",cols:"75",rows:"28",wrap:"soft",onkeyup:'eventManager.fire("brainstormUpdatePrompt")'});e.value=this.content.assessmentItem.interaction.prompt;f.appendChild(createBreak());f.appendChild(b);f.appendChild(createBreak());f.appendChild(e);d.appendChild(f)};View.prototype.BrainstormNode.generateCannedResponses=function(){var k=document.getElementById("dynamicPage");var b=document.getElementById("cannedResponsesDiv");if(b){k.removeChild(b)}var m=createElement(document,"div",{id:"cannedResponsesDiv"});var d=document.createTextNode("Edit/Create canned student responses",{"class":"cannedResponsesTitle"});var l=createElement(document,"input",{type:"button","class":"button",value:"Create New Response",onclick:'eventManager.fire("brainstormCreateNewResponse")'});var f=createElement(document,"input",{type:"button","class":"button",value:"Remove Response",onclick:'eventManager.fire("brainstormRemoveResponse")'});var h=this.content.cannedResponses;k.appendChild(createBreak());m.appendChild(d);k.appendChild(createBreak());for(var n=0;n<h.length;n++){var g=document.createTextNode("Name: ");var j=createElement(document,"input",{type:"text",id:"responseInput_"+h[n].name,value:h[n].name,onkeyup:'eventManager.fire("brainstormResponseNameChanged","'+h[n].name+'")',onclick:'eventManager.fire("brainstormResponseSelected","'+h[n].name+'")'});var a=document.createTextNode("Response: ");var e=createElement(document,"textarea",{id:"responseValue_"+h[n].name,onkeyup:'eventManager.fire("brainstormResponseValueChanged","'+h[n].name+'")',onclick:'eventManager.fire("brainstormResponseSelected","'+h[n].name+'")'});e.value=h[n].response;m.appendChild(createBreak());m.appendChild(g);m.appendChild(j);m.appendChild(createBreak());m.appendChild(a);m.appendChild(e)}m.appendChild(createBreak());m.appendChild(l);m.appendChild(f);k.appendChild(m)};View.prototype.BrainstormNode.updateTitle=function(){this.content.title=document.getElementById("titleInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateGated=function(a){if(a=="true"){this.content.isGated=true}else{this.content.isGated=false}this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateDisplayName=function(a){this.content.displayName=a;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateRichText=function(a){if(a=="true"){this.content.isRichTextEditorAllowed=true}else{this.content.isRichTextEditorAllowed=false}this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updatePollEnded=function(a){if(a=="true"){this.content.isPollEnded=true}else{this.content.isPollEnded=false}this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateInstantPoll=function(a){if(a=="true"){this.content.isInstantPollActive=true}else{this.content.isInstantPollActive=false}this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateExpectedLines=function(){this.content.assessmentItem.interaction.expectedLines=document.getElementById("expectedLines").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updatePrompt=function(){this.content.assessmentItem.interaction.prompt=document.getElementById("promptInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.getResponse=function(a){var b=this.content.cannedResponses;for(var d=0;d<b.length;d++){if(b[d].name==a){return b[d]}}};View.prototype.BrainstormNode.responseNameChanged=function(e){var d=document.getElementById("responseInput_"+e);var b=document.getElementById("responseValue_"+e);var f=d.value;var a=this.getResponse(e);d.id="responseInput_"+f;d.setAttribute("onkeyup",'eventManager.fire("brainstormResponseNameChanged","'+f+'")');d.setAttribute("onclick",'eventManager.fire("brainstormResponseSelected","'+f+'")');d.value=f;b.id="responseValue_"+f;b.setAttribute("onkeyup",'eventManager.fire("brainstormResponseValueChanged","'+f+'")');b.setAttribute("onclick",'eventManager.fire("brainstormResponseSelected","'+f+'")');a.name=f;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.responseValueChanged=function(a){this.getResponse(a).response=document.getElementById("responseValue_"+a).value;this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.responseSelected=function(a){this.currentResponse=this.getResponse(a)};View.prototype.BrainstormNode.removeResponse=function(){if(this.currentResponse){this.content.cannedResponses.splice(this.content.cannedResponses.indexOf(this.currentResponse),1);this.generatePage(this.view);this.view.eventManager.fire("sourceUpdated")}else{this.view.notificationManager.notify("No response is selected for removal. Please select a response and try again.",3)}};View.prototype.BrainstormNode.createNewResponse=function(){this.content.cannedResponses.push({name:"Enter name",response:""});this.generatePage(this.view);this.view.eventManager.fire("sourceUpdated")};View.prototype.BrainstormNode.updateContent=function(){this.view.activeContent.setContent(this.content)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_brainstorm.js")}View.prototype.DataGraphNode={};View.prototype.DataGraphNode.generatePage=function(a){this.view=a;this.content=this.view.activeContent.getContentJSON();this.hasRowLabels;this.hasColLabels;this.GRAPH_OPT_ARRAY=["range","bar","line","point","linePoint"];this.generateOptions();this.generatePrompt();this.generateTable()};View.prototype.DataGraphNode.generateOptions=function(){var p=document.getElementById("dynamicPage");while(p.firstChild){p.removeChild(p.firstChild)}var B=createElement(document,"div",{id:"editorTitle2"});var G=document.createTextNode("Data Grapher:");var R=createElement(document,"table",{id:"optTable",border:"1"});var E=createElement(document,"tbody",{id:"optTBody"});var t=createElement(document,"tr");var s=createElement(document,"tr");p.appendChild(B);B.appendChild(G);p.appendChild(R);R.appendChild(E);E.appendChild(t);E.appendChild(s);var A=createElement(document,"td",{id:"displayOpts"});var z=createElement(document,"td",{id:"startOpts"});var h=createElement(document,"div",{id:"optionsHeader1"});var l=document.createTextNode("Display Options:");var g=createElement(document,"div",{id:"optionsHeader2"});var I=document.createTextNode("Start Mode:");var r=createElement(document,"input",{type:"radio",name:"displayRadio",id:"displayDataOnly",onclick:'eventManager.fire("datagraphDisplayOptionChanged")',value:"0"});var q=createElement(document,"input",{type:"radio",name:"displayRadio",id:"displayGraphOnly",onclick:'eventManager.fire("datagraphDisplayOptionChanged")',value:"1"});var n=createElement(document,"input",{type:"radio",name:"displayRadio",id:"displayBoth",onclick:'eventManager.fire("datagraphDisplayOptionChanged")',value:"2"});var u=document.createTextNode("data table only");var a=document.createTextNode("graph only");var F=document.createTextNode("both");var Q=createElement(document,"input",{type:"radio",name:"startMode",id:"startModeData",onclick:'eventManager.fire("datagraphStartModeChanged")',value:"0"});var P=createElement(document,"input",{type:"radio",name:"startMode",id:"startModeGraph",onclick:'eventManager.fire("datagraphStartModeChanged")',value:"1"});var w=document.createTextNode("start w/data table");var b=document.createTextNode("start w/graph");t.appendChild(A);t.appendChild(z);A.appendChild(h);h.appendChild(l);A.appendChild(r);A.appendChild(u);A.appendChild(q);A.appendChild(a);A.appendChild(n);A.appendChild(F);z.appendChild(g);g.appendChild(I);z.appendChild(Q);z.appendChild(w);z.appendChild(P);z.appendChild(b);if(this.content.options.display.which=="0"){r.checked=true;this.startOptions(false)}else{if(this.content.options.display.which=="1"){q.checked=true;this.startOptions(false)}else{if(this.content.options.display.which=="2"){n.checked=true;this.startOptions(true)}}}if(this.content.options.display.start=="0"){Q.checked=true}else{P.checked=true}var f=createElement(document,"div",{id:"optionsHeader3"});var y=createElement(document,"td",{id:"editOpts"});var e=createElement(document,"div",{id:"optionsHeader4"});var x=createElement(document,"td",{id:"graphOpts"});var k=createElement(document,"input",{type:"checkbox",id:"rangeCheck",name:"graphOptions",onclick:'eventManager.fire("datagraphGraphOptionChanged","range")'});var N=createElement(document,"input",{type:"checkbox",id:"barCheck",name:"graphOptions",onclick:'eventManager.fire("datagraphGraphOptionChanged","bar")'});var M=createElement(document,"input",{type:"checkbox",id:"lineCheck",name:"graphOptions",onclick:'eventManager.fire("datagraphGraphOptionChanged","line")'});var L=createElement(document,"input",{type:"checkbox",id:"pointCheck",name:"graphOptions",onclick:'eventManager.fire("datagraphGraphOptionChanged","point")'});var J=createElement(document,"input",{type:"checkbox",id:"linePointCheck",name:"graphOptions",onclick:'eventManager.fire("datagraphGraphOptionChanged","linePoint")'});var C=document.createTextNode("Students can edit: ");var d=document.createTextNode(" edit range");var H=document.createTextNode("Graphs available to student: ");var j=document.createTextNode(" bar chart");var O=document.createTextNode(" line graph");var D=document.createTextNode(" point graph");var v=document.createTextNode(" line point graph");s.appendChild(y);s.appendChild(x);y.appendChild(f);f.appendChild(C);y.appendChild(k);y.appendChild(d);x.appendChild(e);e.appendChild(H);x.appendChild(N);x.appendChild(j);x.appendChild(M);x.appendChild(O);x.appendChild(L);x.appendChild(D);x.appendChild(J);x.appendChild(v);for(var K=0;K<this.GRAPH_OPT_ARRAY.length;K++){document.getElementById(this.GRAPH_OPT_ARRAY[K]+"Check").checked=this.content.options.graph[this.GRAPH_OPT_ARRAY[K]]}};View.prototype.DataGraphNode.generatePrompt=function(){var d=document.getElementById("dynamicPage");var b=document.createTextNode("Question Prompt for Student:");var e=createElement(document,"div",{id:"promptDiv"});var a=createElement(document,"textarea",{id:"promptText",rows:"7",onkeyup:'eventManager.fire("datagraphPromptChanged")'});d.appendChild(createBreak());d.appendChild(e);e.appendChild(b);e.appendChild(createBreak());e.appendChild(a);d.appendChild(createBreak());a.value=this.content.prompt};View.prototype.DataGraphNode.generateTable=function(){var n=document.getElementById("dynamicPage");var g=createElement(document,"div",{id:"tableEditingDiv"});var d=createElement(document,"div",{id:"titleDiv"});var m=createElement(document,"div",{id:"optionsDiv"});var e=createElement(document,"div",{id:"tableDiv"});var r=document.createTextNode("Title for Table & Graph: ");var j=createElement(document,"input",{type:"text",id:"titleInput",onkeyup:'eventManager.fire("datagraphTitleInputChanged")'});var p=document.createTextNode("editable by student");var f=createElement(document,"input",{type:"checkbox",id:"titleEditable",onclick:'eventManager.fire("datagraphEditableChanged","title")'});var a=createElement(document,"input",{type:"button",value:"Add Row",onclick:'eventManager.fire("datagraphAddRow")'});var l=createElement(document,"input",{id:"buttonAddColumn",type:"button",value:"Add Column",onclick:'eventManager.fire("datagraphAddCol")'});var k=createElement(document,"input",{type:"button",value:"Remove Row",onclick:'eventManager.fire("datagraphRemoveRow")'});var h=createElement(document,"input",{id:"buttonRemoveColumn",type:"button",value:"Remove Column",onclick:'eventManager.fire("datagraphRemoveCol")'});var b=createElement(document,"input",{type:"button",value:"Hide/Show Labels (top row)",onclick:'eventManager.fire("datagraphToggleLabels","x")'});var q=createElement(document,"input",{type:"button",value:"Hide/Show X-value (left column)",onclick:'eventManager.fire("datagraphToggleLabels","y")'});n.appendChild(g);g.appendChild(d);g.appendChild(createBreak());g.appendChild(m);g.appendChild(createBreak());g.appendChild(e);d.appendChild(r);d.appendChild(j);d.appendChild(createSpace());d.appendChild(f);d.appendChild(p);j.value=this.content.table.title;f.checked=this.content.table.titleEditable;m.appendChild(a);m.appendChild(l);m.appendChild(k);m.appendChild(h);m.appendChild(b);m.appendChild(q);this.generateTableDiv()};View.prototype.DataGraphNode.generateTableDiv=function(){var n=document.getElementById("tableEditingDiv");n.removeChild(document.getElementById("tableDiv"));var f=createElement(document,"div",{id:"tableDiv"});n.appendChild(f);var q=createElement(document,"div",{id:"checkboxMessageDiv"});var p=document.createTextNode("Note: all cells with a checkmark are editable by the student.");var y=createElement(document,"table",{id:"dataTable"});var a=createElement(document,"thead",{id:"tHead"});var k=createElement(document,"tbody",{id:"tBody"});f.appendChild(q);q.appendChild(p);f.appendChild(y);y.appendChild(a);y.appendChild(k);this.hasRowLabels=this.getNumOfRowLabels()>0;this.hasColLabels=this.getNumOfColLabels()>0;if(this.hasColLabels){var b=createElement(document,"tr",{id:"hRow"});a.appendChild(b);if(this.hasRowLabels){var s=createElement(document,"td",{id:"indHead",onclick:'eventManager.fire("datagraphToggleSelected","ind")',"class":"label ind"});var g=createElement(document,"input",{type:"text",id:"ind_label",onchange:'eventManager.fire("datagraphCellChanged","ind")'});var t=createElement(document,"input",{type:"checkbox",id:"ind_check",onclick:'eventManager.fire("datagraphEditableChanged","ind")'});var u=document.createTextNode("");if(this.content.table.independent.label){g.value=this.content.table.independent.label}t.checked=this.content.table.independent.editable;b.appendChild(s);s.appendChild(g);s.appendChild(t);s.appendChild(u)}for(var B=0;B<this.content.table.cols.length;B++){var m=createElement(document,"td",{id:"colHead_"+B,onclick:'eventManager.fire("datagraphToggleSelected","col_'+B+'")',"class":"label x_"+B});var v=createElement(document,"input",{type:"text",id:"col_Label_"+B,onchange:'eventManager.fire("datagraphCellChanged","col_'+B+'")'});var r=createElement(document,"input",{type:"checkbox",id:"col_check_"+B,onclick:'eventManager.fire("datagraphEditableChanged","col_'+B+'")'});var h=document.createTextNode("");if(this.content.table.cols[B].label){v.value=this.content.table.cols[B].label}r.checked=this.content.table.cols[B].editable;b.appendChild(m);m.appendChild(v);m.appendChild(r);m.appendChild(h)}}for(var z=0;z<this.content.table.rows.length;z++){var A=createElement(document,"tr",{id:"row_"+z});k.appendChild(A);if(this.hasRowLabels){var l=createElement(document,"td",{id:"rowLabel_"+z,onclick:'eventManager.fire("datagraphToggleSelected","row_'+z+'")',"class":"label y_"+z});var v=createElement(document,"input",{type:"text",id:"row_Label_"+z,onchange:'eventManager.fire("datagraphCellChanged","row_'+z+'")'});var r=createElement(document,"input",{type:"checkbox",id:"row_check_"+z,onclick:'eventManager.fire("datagraphEditableChanged","row_'+z+'")'});var h=document.createTextNode("");A.appendChild(l);l.appendChild(v);l.appendChild(r);l.appendChild(h);if(this.content.table.rows[z].label){v.value=this.content.table.rows[z].label}r.checked=this.content.table.rows[z].editable}for(var x=0;x<this.content.table.rows[z].cells.length;x++){var C=createElement(document,"td",{id:"cell_"+x+"_"+z,onclick:'eventManager.fire("datagraphToggleSelected","cell_'+x+"_"+z+'")',"class":"x_"+x+" y_"+z});A.appendChild(C);var w=createElement(document,"input",{type:"text",id:"cellInput_"+x+"_"+z,onchange:'eventManager.fire("datagraphCellChanged","cell_'+x+"_"+z+'")'});var j=createElement(document,"input",{type:"checkbox",id:"cellCheck_"+x+"_"+z,onclick:'eventManager.fire("datagraphEditableChanged","cell_'+x+"_"+z+'")'});var h=document.createTextNode("");C.appendChild(w);C.appendChild(j);C.appendChild(h);j.checked=this.content.table.rows[z].cells[x].editable;if(this.content.table.rows[z].cells[x].value){w.value=this.content.table.rows[z].cells[x].value}}}};View.prototype.DataGraphNode.getColumns=function(){return this.content.table.cols};View.prototype.DataGraphNode.getRows=function(){return this.content.table.rows};View.prototype.DataGraphNode.getCol=function(a){return this.getColumns()[a]};View.prototype.DataGraphNode.getRow=function(a){return this.getRows()[a]};View.prototype.DataGraphNode.getCell=function(a,b){return this.getRow(b).cells[a]};View.prototype.DataGraphNode.getNumOfRowLabels=function(){var d=0;var e=this.getRows();for(var b=0;b<e.length;b++){if(e[b].label!=undefined){d++}}return d};View.prototype.DataGraphNode.getNumOfColLabels=function(){var d=0;var e=this.getColumns();for(var a=0;a<e.length;a++){if(e[a].label!=undefined){d++}}return d};View.prototype.DataGraphNode.promptChanged=function(){this.content.prompt=document.getElementById("promptText").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.titleInputChanged=function(){this.content.table.title=document.getElementById("titleInput").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.cellChanged=function(d){var b=d.split("_");if(d=="ind"){this.content.table.independent.label=document.getElementById("ind_label").value}else{if(b[0]=="col"){this.getCol(b[1]).label=document.getElementById(b[0]+"_Label_"+b[1]).value}else{if(b[0]=="row"){this.getRow(b[1]).label=document.getElementById(b[0]+"_Label_"+b[1]).value}else{if(b[0]=="cell"){var a=this.getCell(b[1],b[2]).value=document.getElementById("cellInput_"+b[1]+"_"+b[2]).value}}}}this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.toggleSelected=function(e){var a=e.split("_");if(e=="ind"){var d=document.getElementById("indHead")}else{if(a[0]=="col"){var d=document.getElementById("colHead_"+a[1])}else{if(a[0]=="row"){var d=document.getElementById("rowLabel_"+a[1])}else{if(a[0]=="cell"){var d=document.getElementById("cell_"+a[1]+"_"+a[2])}}}}var b=d.getAttribute("class");this.clearAllSelected();if(b.indexOf("toggle_ind")!=-1){if(a[0]=="col"||a[0]=="cell"){this.setSelected("x_"+a[1]);d.setAttribute("class",d.getAttribute("class")+" toggle_col")}else{if(a[0]=="row"){this.setSelected("y_"+a[1]);d.setAttribute("class",d.getAttribute("class")+" toggle_row")}}}else{if(b.indexOf("toggle_col")!=-1){if(a[0]=="cell"){this.setSelected("y_"+a[2]);d.setAttribute("class",d.getAttribute("class")+" toggle_row")}}else{if(b.indexOf("toggle_row")!=-1){}else{d.setAttribute("class",b+" toggle_ind selected")}}}};View.prototype.DataGraphNode.setSelected=function(a){YUI().use("node",function(d){var b=d.all("#dataTable td");b.each(function(f,e){if(f.hasClass(a)){f.addClass("selected")}})})};View.prototype.DataGraphNode.clearAllSelected=function(){YUI().use("node",function(b){var a=b.all("#dataTable td");a.each(function(e,d){e.removeClass("selected");e.removeClass("toggle_ind");e.removeClass("toggle_row");e.removeClass("toggle_col")})})};View.prototype.DataGraphNode.getSelected=function(b){var a;YUI().use("node",function(e){var d=e.all("#dataTable td");d.each(function(h,f){if(h.hasClass("toggle_"+b)){var l=h.getAttribute("class");if(b=="row"){var g="y_"}else{var g="x_"}var j=l.substring(l.indexOf(g)+2,l.length);a=j.substring(0,j.indexOf(" "))}})});return a};View.prototype.DataGraphNode.addRow=function(){var a=this.getSelected("row");var d=this.getRows();if(!a){a=d.length}var e=this.createRow();this.getRows().splice(a,0,e);if(this.getColumns().length==0){this.getColumns().push(this.createCol())}for(var b=0;b<this.getColumns().length;b++){e.cells.push(this.createCell())}this.generateTableDiv();this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.addCol=function(){var a=this.getSelected("col");var f=this.getColumns();if(!a){a=f.length}var b=this.createCol();this.content.table.cols.splice(a,0,b);if(this.getRows().length==0){this.getRows().push(this.createRow())}var e=this.getRows();for(var d=0;d<e.length;d++){e[d].cells.splice(a,0,this.createCell())}this.generateTableDiv();this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.createCol=function(){var a={editable:true};if(this.hasColLabels){a.label=""}return a};View.prototype.DataGraphNode.createRow=function(){var a={editable:true,cells:[]};if(this.hasRowLabels){a.label=""}return a};View.prototype.DataGraphNode.createCell=function(){return{editable:true}};View.prototype.DataGraphNode.removeRow=function(){var a=this.getSelected("row");if(!a){this.view.notificationManager.notify("Row not correctly selected.  Try TRIPLE-CLICKING a table cell to select the entire row.",3);return}if(confirm("The selected row will be deleted. Sure you want to proceed?")){var b=this.getRow(a);this.getRows().splice(a,1);this.generateTableDiv();this.view.eventManager.fire("sourceUpdated")}};View.prototype.DataGraphNode.removeCol=function(){var a=this.getSelected("col");if(!a){this.view.notificationManager.notify("Column not correctly selected. Try DOUBLE-CLICKING a table cell to select the entire column.",3);return}if(confirm("The selected column will be deleted. Sure you wish to proceed?")){var b=this.getCol(a);this.content.table.cols.splice(a,1);var e=this.getRows();for(var d=0;d<e.length;d++){e[d].cells.splice(a,1)}this.generateTableDiv();this.view.eventManager.fire("sourceUpdated")}};View.prototype.DataGraphNode.toggleLabels=function(e){if(e=="x"){var d=this.getColumns();if(this.hasColLabels&&confirm("Any labels entered will be lost, do you wish to continue?")){for(var b=0;b<d.length;b++){d[b].label=undefined}}else{for(var b=0;b<d.length;b++){d[b].label=""}}}else{var a=this.getRows();if(this.hasRowLabels&&confirm("Any data entered for the independent var will be lost, do you wish to continue?")){for(var b=0;b<a.length;b++){a[b].label=undefined}this.content.table.independent.label=undefined}else{for(var b=0;b<a.length;b++){a[b].label=""}if(this.content.table.independent){this.content.table.independent.label=""}else{this.content.table.independent={label:"",editable:true}}}}this.generateTableDiv();this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.editableChanged=function(b){if(b=="title"){this.content.table.titleEditable=document.getElementById("titleEditable").checked}else{if(b=="ind"){this.content.table.independent.editable=document.getElementById("ind_check").checked}else{var a=b.split("_");if(a[0]=="col"){this.getCol(a[1]).editable=document.getElementById("col_check_"+a[1]).checked}else{if(a[0]=="row"){this.getRow(a[1]).editable=document.getElementById("row_check_"+a[1]).checked}else{if(a[0]=="cell"){this.getCell(a[1],a[2]).editable=document.getElementById("cellCheck_"+a[1]+"_"+a[2]).checked}}}}}this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.startOptions=function(b){var d=document.getElementsByName("startMode");for(var a=0;a<d.length;a++){d[a].disabled=!(b)}};View.prototype.DataGraphNode.displayOptionChanged=function(){var a=document.getElementsByName("displayRadio");for(var d=0;d<a.length;d++){if(a[d].checked){var b=a[d].value;this.content.options.display.which=b;if(b=="0"){this.startOptions(false);document.getElementById("startModeData").checked=true;this.startModeChanged()}else{if(b=="1"){this.startOptions(false);document.getElementById("startModeGraph").checked=true;this.startModeChanged()}else{if(b=="2"){this.startOptions(true);this.view.eventManager.fire("sourceUpdated")}}}}}};View.prototype.DataGraphNode.startModeChanged=function(){var a=document.getElementsByName("startMode");for(o=0;o<a.length;o++){if(a[o].checked){this.content.options.display.start=a[o].value}}this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.graphOptionChanged=function(a){this.content.options.graph[a]=document.getElementById(a+"Check").checked;this.view.eventManager.fire("sourceUpdated")};View.prototype.DataGraphNode.updateContent=function(){this.view.activeContent.setContent(this.content)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_datagraph.js")}View.prototype.DrawNode={};View.prototype.DrawNode.generatePage=function(a){this.view=a;this.content=createContent(this.view.getProject().makeUrl(this.view.activeContent.getContentJSON().src));this.view.activeNode.baseHtmlContent=this.content;var b=document.getElementById("dynamicParent");while(b.firstChild){b.removeChild(b.firstChild)}var d=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});b.appendChild(d);d.appendChild(document.createTextNode("When entering stamps and background, make sure to use the asset uploader on the main authoring page to upload your images."));d.appendChild(createBreak());this.generatePrompt();this.generateBack();this.generateStamps()};View.prototype.DrawNode.generatePrompt=function(){var d=this.content.getContentString().match(/<div id="authorPrompt">[\s|\S]*<\/div>/);var b;if(d){b=d[0].substring(23,d[0].length-6)}var f=document.getElementById("dynamicPage");var e=document.createTextNode("Enter any instructions for the student here, leave blank if none.");var g=createElement(document,"div",{id:"promptDiv"});var a=createElement(document,"textarea",{id:"promptText",cols:"90",rows:"5",onchange:'eventManager.fire("drawingPromptChanged")'});f.appendChild(createBreak());f.appendChild(createBreak());f.appendChild(g);g.appendChild(e);g.appendChild(createBreak());g.appendChild(a);f.appendChild(createBreak());f.appendChild(createBreak());if(b){a.value=b}};View.prototype.DrawNode.promptChanged=function(){var a=this.content.getContentString().match(/<div id="authorPrompt">[\s|\S]*<\/div>/);if(a){var b=a[0].substring(23,a[0].length-6);this.content.setContent(this.content.getContentString().replace(new RegExp(b),document.getElementById("promptText").value))}else{this.content.setContent(this.content.getContentString().replace(/<body(.*)>/,'<body$1><div id="authorPrompt">'+document.getElementById("promptText").value+"</div>"))}this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.generateBack=function(){var a=this.getContentBackground();var b=document.getElementById("dynamicPage");var d=createElement(document,"div",{id:"backDiv"});b.appendChild(d);if(a){this.createBackgroundSpecified(a[0],a[1])}else{this.createBackgroundUnspecified()}};View.prototype.DrawNode.createBackgroundSpecified=function(e,b){var q=document.getElementById("backDiv");while(q.firstChild){q.removeChild(q.firstChild)}var f=createElement(document,"table",{id:"backTable"});var d=createElement(document,"tbody",{id:"backTBody"});var s=createElement(document,"tr");var r=createElement(document,"tr");var p=createElement(document,"td",{id:"tdHead1"});var n=createElement(document,"td",{id:"tdHead2"});var m=createElement(document,"td",{id:"backImageTD"});var k=createElement(document,"td",{id:"backLabelTD"});var a=document.createTextNode("Background image name.");var l=document.createTextNode("Background image label.");var j=createElement(document,"input",{type:"text",id:"backInput",onchange:'eventManager.fire("drawingBackgroundInfoChanged")'});var h=createElement(document,"input",{type:"text",id:"backLabel",onchange:'eventManager.fire("drawingBackgroundInfoChanged")'});var g=createElement(document,"input",{type:"button",value:"Remove Background Image",onclick:'eventManager.fire("drawingRemoveBackgroundImage")'});q.appendChild(f);f.appendChild(d);d.appendChild(s);d.appendChild(r);s.appendChild(p);s.appendChild(n);p.appendChild(a);n.appendChild(l);r.appendChild(m);r.appendChild(k);m.appendChild(j);k.appendChild(h);q.appendChild(createBreak());q.appendChild(g);q.appendChild(createBreak());q.appendChild(createBreak());if(e){j.value=e}if(b){h.value=b}this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.createBackgroundUnspecified=function(){var a=document.getElementById("backDiv");while(a.firstChild){a.removeChild(a.firstChild)}a.appendChild(createElement(document,"input",{type:"button",value:"Add Background",onclick:'eventManager.fire("drawingCreateBackgroundSpecified")'}));a.appendChild(createBreak());a.appendChild(createBreak());this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.getContentBackground=function(){var b=this.content.getContentString().match(/<param name="background:(.*)>/);if(b){var d=b[0].match(/value="(.*)"/)[1];var a=d.match(/[^\.]*\.[a-zA-Z]{3}(?=\s{1,})/)[0];if(a){if(d[a.length+1]){var e=d.substring(a.length+1)}else{var e=""}}else{var e=d}if(a){return[a,e]}else{return["",e]}}else{return null}};View.prototype.DrawNode.backgroundInfoChanged=function(){var a=document.getElementById("backInput").value;var d=document.getElementById("backLabel").value;if(!this.validateExtension(a)){this.view.notificationManager.notify("please enter a filename with a 3 character extension such as .jpg .gif .png",3)}else{var b=this.getContentBackground();if(b){this.content.setContent(this.content.getContentString().replace(new RegExp(b[0]+" "+b[1]),a+" "+d))}else{this.view.utils.insertAppletParam(this.content,"background:1",a+" "+d)}}this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.removeBackgroundImage=function(){this.content.setContent(this.content.getContentString().replace(/<param name="background:.*>/,""));this.createBackgroundUnspecified()};View.prototype.DrawNode.generateStamps=function(){var d=this.getContentStamps();var b=document.getElementById("dynamicPage");var a=createElement(document,"div",{id:"stampsDiv"});b.appendChild(createBreak());b.appendChild(a);if(d){this.createStampsSpecified(d)}else{this.createStampsUnspecified()}};View.prototype.DrawNode.createStampsSpecified=function(g){var n=document.getElementById("stampsDiv");while(n.firstChild){n.removeChild(n.firstChild)}var e=createElement(document,"input",{type:"button",value:"Add new stamp",onclick:'eventManager.fire("drawingAddNewStamp")'});var d=document.createTextNode("Edit and Remove existing stamps.");var q=createElement(document,"table",{id:"stampTable"});var l=createElement(document,"tBody",{id:"stampBody"});var k=createElement(document,"tr",{id:"stampHeadRow"});var r=createElement(document,"td",{id:"headPosTD"});var a=createElement(document,"td",{id:"headStampTD"});var f=createElement(document,"td",{id:"headLabelTD"});var p=document.createTextNode("Position");var m=document.createTextNode("Image filename");var h=document.createTextNode("Label for image");n.appendChild(e);n.appendChild(createBreak());n.appendChild(createBreak());n.appendChild(d);n.appendChild(createBreak());n.appendChild(q);q.appendChild(l);l.appendChild(k);k.appendChild(r);k.appendChild(a);k.appendChild(f);r.appendChild(p);a.appendChild(m);f.appendChild(h);if(g){for(var j=0;j<g.length;j++){this.createStampRow(l,g[j].num,g[j].name,g[j].value)}}else{this.createStampRow(l,this.getUniquePositionNumber(),"","")}};View.prototype.DrawNode.createStampRow=function(m,h,a,k){var e=createElement(document,"tr",{id:"stampRow_"+h});var j=createElement(document,"td",{id:"stampPosTD_"+h});var b=createElement(document,"td",{id:"stampNameTD_"+h});var p=createElement(document,"td",{id:"stampLabelTD_"+h});var g=createElement(document,"td",{id:"stampOptionTD_"+h});var n=document.createTextNode(h);var l=createElement(document,"input",{type:"text",id:"stampInput_"+h,value:a,onchange:'eventManager.fire("drawingStampInfoChanged","'+h+'")'});var d=createElement(document,"input",{type:"text",id:"labelInput_"+h,value:k,onchange:'eventManager.fire("drawingStampInfoChanged","'+h+'")'});var f=createElement(document,"input",{type:"button",id:"removeButt_"+h,value:"Remove stamp",onclick:'eventManager.fire("drawingRemoveStamp","'+h+'")'});m.appendChild(e);e.appendChild(j);e.appendChild(b);e.appendChild(p);e.appendChild(g);j.appendChild(n);b.appendChild(l);p.appendChild(d);g.appendChild(f)};View.prototype.DrawNode.addNewStamp=function(){this.createStampRow(document.getElementById("stampBody"),this.getUniquePositionNumber(),"","");this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.getUniquePositionNumber=function(){var e=this.getContentStamps();if(e){var b=1;while(true){var a=false;for(var f=0;f<e.length;f++){if(e[f].num==b){a=true}}if(a){b++}else{return b}}}else{return 1}};View.prototype.DrawNode.stampInfoChanged=function(g){var a=document.getElementById("stampInput_"+g).value;var f=document.getElementById("labelInput_"+g).value;if(!this.validateExtension(a)){this.view.notificationManager.notify("please enter a filename with a 3 character extension such as .jpg .gif .png",3)}else{var d=this.getContentStamps();var b=false;if(d){for(var e=0;e<d.length;e++){if(d[e].num==g){b=true;this.content.setContent(this.content.getContentString().replace(new RegExp(d[e].name+" "+d[e].value),a+" "+f))}}if(!b){this.view.utils.insertAppletParam(this.content,"stamp:"+g,a+" "+f)}}else{this.view.utils.insertAppletParam(this.content,"stamp:"+g,a+" "+f)}}this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.removeStamp=function(d){var a=new RegExp('<param name="stamp:'+d+".*>");this.content.setContent(this.content.getContentString().replace(a,""));var b=document.getElementById("stampRow_"+d);b.parentNode.removeChild(b);document.getElementById("dynamicPage").removeChild(document.getElementById("stampsDiv"));this.generateStamps();this.view.eventManager.fire("sourceUpdated")};View.prototype.DrawNode.createStampsUnspecified=function(){var b=document.getElementById("stampsDiv");while(b.firstChild){b.removeChild(b.firstChild)}var a=createElement(document,"input",{type:"button",value:"Add stamp",onclick:'eventManager.fire("drawingCreateStampsSpecified")'});b.appendChild(a)};View.prototype.DrawNode.getContentStamps=function(){var j=this.content.getContentString().match(/<param name="stamp:.*>/g);if(j){var g=[];for(var b=0;b<j.length;b++){var e=j[b].match(/stamp:(.*)(?="\s{1}value=")/)[1];var f=j[b].match(/value="(.*)"/)[1];var d=f.match(/[^\.]*\.[a-zA-Z]{3}(?=\s{1,})/)[0];if(d){if(f[d.length+1]){var h=f.substring(d.length+1)}else{var h=""}}else{var h=f}g.push({num:e,name:d,value:h})}return g}else{return null}};View.prototype.DrawNode.validateExtension=function(a){return a.match(/.*\.[a-zA-Z]{3}$/)};View.prototype.DrawNode.validateBackgroundSpecified=function(){var a=this.getContentBackground();if(a&&a[0]&&a[0]!=""){return true}else{return false}};View.prototype.DrawNode.updateContent=function(){this.view.activeNode.baseHtmlContent.setContent(this.content.getContentString())};View.prototype.DrawNode.save=function(d){var b=function(f,e,g){g.stepSaved=true;g.notificationManager.notify("Updated html content on server",3);if(d){g.eventManager.fire("closeOnStepSaved",[true])}};var a=function(f,e,g){g.notificationManager.notify("Failed update of html content on server",3);if(d){g.eventManager.fire("closeOnStepSaved",[false])}};this.view.connectionManager.request("POST",3,"filemanager.html",{command:"updateFile",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,this.view.getProject().getContentBase()),param2:this.view.activeNode.baseHtmlContent.getFilename(this.view.getProject().getContentBase()),param3:encodeURIComponent(this.content.getContentString())},b,this.view,a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_drawing.js")}View.prototype.FillinNode={};View.prototype.FillinNode.generatePage=function(a){this.view=a;this.content=this.view.activeContent.getContentJSON();this.fillin=[];this.fillinIndexes=[];this.charCount;this.fullText;this.regeneratePage()};View.prototype.FillinNode.regeneratePage=function(){var f=document.getElementById("dynamicParent");f.removeChild(document.getElementById("dynamicPage"));this.generateFullText();var d=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var h=document.createTextNode("QUESTION");var a=document.createTextNode("Type your question below. To create fill-in blanks, highlight a section of text and click the TRANSFORM button. To edit or remove existing fillins, select the matching radio button.");var g=createElement(document,"textarea",{id:"questionInput",cols:"90",rows:"30",wrap:"hard",onkeyup:'eventManager.fire("fillinTextUpdated")'});var e=document.createTextNode("Edit/Remove existing fillins");g.innerHTML=this.fullText;this.charCount=g.value.length;var b=createElement(document,"input",{type:"button",onclick:'eventManager.fire("fillinCreateFillin")',value:"Transform Highlighted Text into Fill-Blank"});d.appendChild(h);d.appendChild(createBreak());d.appendChild(a);d.appendChild(createBreak());d.appendChild(g);d.appendChild(createBreak());d.appendChild(b);d.appendChild(createBreak());d.appendChild(createBreak());d.appendChild(e);d.appendChild(createBreak());d.appendChild(this.generateFillins());f.appendChild(d)};View.prototype.FillinNode.generateFullText=function(){this.fullText="";this.fillin=[];this.fillinIndexes=[];var b=0;var e="";for(var a=0;a<this.content.assessmentItem.interaction.length;a++){if(this.content.assessmentItem.interaction[a].type=="htmltext"){e+=this.spaceMaker(this.content.assessmentItem.interaction[a].text);b+=this.spaceMaker(this.content.assessmentItem.interaction[a].text).length}else{if(this.content.assessmentItem.interaction[a].type=="textEntryInteraction"){var d=b+"|";this.fillin.push(this.content.assessmentItem.interaction[a].responseIdentifier);e+=this.retrieveInteractionText(this.content.assessmentItem.interaction[a].responseIdentifier);b+=this.retrieveInteractionText(this.content.assessmentItem.interaction[a].responseIdentifier).length;d+=b;this.fillinIndexes.push(d)}}}this.fullText=e;return e};View.prototype.FillinNode.validate=function(){var b=document.getElementById("questionInput").selectionStart+1;var a=document.getElementById("questionInput").selectionEnd+1;if(this.overlaps(b,a)){this.view.notificationManager.notify("You can not change this text because it is part of a fillin! If you want to change/edit/remove the fillin text, then do so below.",3);return false}return true};View.prototype.FillinNode.getDifference=function(){return this.charCount-document.getElementById("questionInput").value.length};View.prototype.FillinNode.generateFillins=function(){var e=createElement(document,"table",{id:"fillinTable"});var j=createElement(document,"tr",{id:"headerRow"});var k=createElement(document,"td",{id:"fillinTD"});var b=createElement(document,"td",{id:"allowableTable"});for(var f=0;f<this.fillin.length;f++){var a=this.fillinIndexes[f].split("|");var m=document.createTextNode("Blank #"+(f+1)+":");var h=createElement(document,"input",{type:"button",value:"Remove Fillin",onclick:'eventManager.fire("fillinRemoveFillin")'});var d=createElement(document,"input",{type:"radio",id:"radio_"+f,value:this.fillin[f],name:"fillinRadio",onclick:'eventManager.fire("fillinClick",["'+this.fillin[f]+'","'+f+'"])'});var l=createElement(document,"input",{type:"text",id:"input_"+f,name:"input_"+f,onclick:'eventManager.fire("fillinClick",["'+this.fillin[f]+'","'+f+'"])',onkeyup:'eventManager.fire("fillinChangeSelected","'+f+'")',value:this.fullText.substring(a[0],a[1])});k.appendChild(createBreak());k.appendChild(m);k.appendChild(d);k.appendChild(l)}k.appendChild(createBreak());if(h){k.appendChild(h)}j.appendChild(k);j.appendChild(b);e.appendChild(j);return e};View.prototype.FillinNode.changeSelected=function(a){var b=document.getElementById("input_"+a).value;var d=this.content.assessmentItem.responseDeclarations[a];if(b!=d.correctResponses[0].response){d.correctResponses[0].response=b;document.getElementById("entryInput_0").value=b;document.getElementById("questionInput").value=generateFullText();this.view.eventManager.fire("sourceUpdated")}};View.prototype.FillinNode.removeFillin=function(){var a=this.getSelectedIdentifier();if(a){var e=this.content.assessmentItem.responseDeclarations;var f;for(var d=0;d<e.length;d++){if(e[d].identifier==a){e.splice(d,1);this.content.assessmentItem.interaction.splice(this.content.assessmentItem.interaction.indexOf(this.getInteraction(a)),1);f=d}}for(var b=f;b<e.length;b++){this.decrementIdentifiers(e[b])}this.regeneratePage();this.view.eventManager.fire("sourceUpdated")}else{this.view.notificationManager.notify("Please select a fillin that you wish to remove first",3)}};View.prototype.FillinNode.decrementIdentifiers=function(f){var e=this.content.assessmentItem.interaction;var a=f.identifier;var b=parseInt(a.substring(a.length-1,a.length))-1;f.identifier="response_"+b;for(var d=0;d<e.length;d++){if(e[d].type=="textEntryInteraction"&&e[d].responseIdentifier==a){e[d].responseIdentifier="response_"+b;break}}};View.prototype.FillinNode.getSelectedIdentifier=function(){var b;var d=document.getElementsByName("fillinRadio");for(var a=0;a<d.length;a++){if(d[a].checked){b=d[a].value}}return b};View.prototype.FillinNode.getSelectedIndex=function(){var b=document.getElementsByName("fillinRadio");for(var a=0;a<b.length;a++){if(b[a].checked){return a}}};View.prototype.FillinNode.fillinClick=function(b,a){var d=document.getElementById("headerRow");document.getElementById("radio_"+a).checked=true;d.removeChild(document.getElementById("allowableTable"));d.appendChild(this.generateAllowableAnswers(b))};View.prototype.FillinNode.retrieveInteractionText=function(a){return this.spaceMaker(this.getDeclaration(a).correctResponses[0].response)};View.prototype.FillinNode.generateAllowableAnswers=function(e){var b=createElement(document,"td",{id:"allowableTable"});var d=document.createTextNode("Edit/add allowable answers for blank #"+this.getLineNumber(e));var j=this.getDeclaration(e);var g=createElement(document,"input",{type:"button",value:"Add New",onclick:'eventManager.fire("fillinAddNewAllowable","'+e+'")'});b.appendChild(d);for(var f=0;f<j.correctResponses.length;f++){var a=createElement(document,"input",{type:"text",id:"entryInput_"+f,onkeyup:'eventManager.fire("fillinEntryChanged","'+f+'")'});a.value=j.correctResponses[f].response;var h=createElement(document,"input",{type:"button",id:"entryButton_"+f,value:"remove",onclick:'eventManager.fire("fillinRemoveAllowable",["'+e+'","'+f+'"])'});b.appendChild(createBreak());b.appendChild(a);if(f!=0){b.appendChild(h)}}b.appendChild(createBreak());b.appendChild(g);return b};View.prototype.FillinNode.getLineNumber=function(a){return parseInt(a.substring(a.length-1,a.length))+1};View.prototype.FillinNode.entryChanged=function(e){var f=document.getElementById("entryInput_"+e);var g=f.value;var d=this.getSelectedIdentifier();var h=this.getDeclaration(d);var a=this.getInteraction(d);var b=h.correctResponses[e];if(b.response!=g){b.response=g;if(e==0){document.getElementById("input_"+this.getSelectedIndex()).value=g;document.getElementById("questionInput").value=this.generateFullText()}if(a.expectedLength<g.length){a.expectedLength=g.length+2}this.view.eventManager.fire("sourceUpdated")}};View.prototype.FillinNode.removeAllowable=function(b,a){var d=document.getElementById("allowableTable").parentNode;this.getDeclaration(b).correctResponses.splice(a,1);d.removeChild(document.getElementById("allowableTable"));d.appendChild(this.generateAllowableAnswers(this.getSelectedIdentifier()));this.view.eventManager.fire("sourceUpdated")};View.prototype.FillinNode.addNewAllowable=function(a){var b=document.getElementById("allowableTable").parentNode;this.getDeclaration(a).correctResponses.push({response:"",value:"1"});b.removeChild(document.getElementById("allowableTable"));b.appendChild(this.generateAllowableAnswers(a));this.view.eventManager.fire("sourceUpdated")};View.prototype.FillinNode.getDeclaration=function(a){for(var b=0;b<this.content.assessmentItem.responseDeclarations.length;b++){if(this.content.assessmentItem.responseDeclarations[b].identifier==a){return this.content.assessmentItem.responseDeclarations[b]}}};View.prototype.FillinNode.getInteraction=function(d){for(var b=0;b<this.content.assessmentItem.interaction.length;b++){if(this.content.assessmentItem.interaction[b].responseIdentifier==d){return this.content.assessmentItem.interaction[b]}}};View.prototype.FillinNode.createFillin=function(){var g=document.getElementById("questionInput").selectionStart;var b=document.getElementById("questionInput").selectionEnd;if(this.overlaps(g,b,true)){this.view.notificationManager.notify("The existing selection overlaps with another fillin. Either edit the existing fillin or remove it before proceeding. Exiting...",3);return}if(g==b){this.view.notificationManager.notify("Please select some text before creating a fillin. Exiting...",3);return}var a=0;for(var d=0;d<this.fillinIndexes.length;d++){var f=this.fillinIndexes[d].split("|");a=d;if(g<f[0]){break}if(d==this.fillinIndexes.length-1){a=d+1}}var e="response_"+a;this.createResponseDeclaration(e,this.fullText.substring(g,b),a);this.createTextInteraction(e,g,b,this.fullText.substring(g,b));this.regeneratePage();this.view.eventManager.fire("sourceUpdated")};View.prototype.FillinNode.createResponseDeclaration=function(b,d,a){var f=this.content.assessmentItem.responseDeclarations;var g=this.getTextEntryInteractions();if(f.length>0&&a<f.length){for(var e=a;e<f.length;e++){f[e].identifier="response_"+(e+1);g[e].responseIdentifier="response_"+(e+1)}}var h={correctResponses:[{response:d,value:"1"}],identifier:b};this.content.assessmentItem.responseDeclarations.splice(a,0,h)};View.prototype.FillinNode.getTextEntryInteractions=function(){var a=[];for(var b=0;b<this.content.assessmentItem.interaction.length;b++){if(this.content.assessmentItem.interaction[b].type=="textEntryInteraction"){a.push(this.content.assessmentItem.interaction[b])}}return a};View.prototype.FillinNode.createTextInteraction=function(f,b,d,e){var a="";for(var h=0;h<this.content.assessmentItem.interaction.length;h++){if(this.content.assessmentItem.interaction[h].type=="htmltext"){var g=this.spaceMaker(this.content.assessmentItem.interaction[h].text);if((a+g).length>b){var j={type:"textEntryInteraction",responseIdentifier:f,expectedLength:(d-b)+2};var k={type:"htmltext",text:g.substring(d-a.length,(a+g).length)};this.content.assessmentItem.interaction[h].text=g.substring(0,b-a.length);this.content.assessmentItem.interaction.splice(h+1,0,j,k);return}else{a+=g}}else{if(this.content.assessmentItem.interaction[h].type=="textEntryInteraction"){a+=this.retrieveInteractionText(this.content.assessmentItem.interaction[h].responseIdentifier)}}}};View.prototype.FillinNode.overlaps=function(d,f,g){var b="";var e=this.getDifference();var l;var h;if(e>0){l=d;h=f+e}else{l=d+e-1;h=f-1}if(e==0&&!g){return false}else{for(var k=0;k<this.content.assessmentItem.interaction.length;k++){if(this.content.assessmentItem.interaction[k].type=="htmltext"){b+=this.spaceMaker(this.content.assessmentItem.interaction[k].text)}else{if(this.content.assessmentItem.interaction[k].type=="textEntryInteraction"){var j=this.retrieveInteractionText(this.content.assessmentItem.interaction[k].responseIdentifier);var a=(b+j).length;if((b.length>l&&b.length<h)||(a>l&&b<h)){return true}if(l>=b.length&&l<a){return true}b+=j}}}}return false};View.prototype.FillinNode.spaceMaker=function(a){return a.toString().replace(/&nbsp;/g," ")};View.prototype.FillinNode.fillinTextUpdated=function(){if(this.validate()){var h=this.getDifference();if(h==0){return}else{if(h>0){var g=document.getElementById("questionInput").selectionStart;var b=g+h;var d="";for(var a=0;a<this.content.assessmentItem.interaction.length;a++){if(this.content.assessmentItem.interaction[a].type=="htmltext"){var f=this.spaceMaker(this.content.assessmentItem.interaction[a].text);if(g<=(d+f).length){if(b<=(d+f).length){this.content.assessmentItem.interaction[a].text=f.substring(0,g-d.length)+f.substring(b-d.length,f.length);this.charCount-=h;this.generateFullText();this.view.eventManager.fire("sourceUpdated");return}else{this.content.assessmentItem.interaction[a].text=f.substring(0,g-d.length);d+=f;g=d.length}}else{d+=f}}else{if(this.content.assessmentItem.interaction[a].type=="textEntryInteraction"){d+=this.retrieveInteractionText(this.content.assessmentItem.interaction[a].responseIdentifier)}}}this.charCount-=h;this.generateFullText();this.view.eventManager.fire("sourceUpdated")}else{var b=document.getElementById("questionInput").selectionStart;var g=b+h;var e=document.getElementById("questionInput").value.substring(g,b);var d="";if(this.content.assessmentItem.interaction.length>0){for(var a=0;a<this.content.assessmentItem.interaction.length;a++){if(this.content.assessmentItem.interaction[a].type=="htmltext"){if(this.content.assessmentItem.interaction[a].text&&this.content.assessmentItem.interaction[a].text!=""){var f=this.spaceMaker(this.content.assessmentItem.interaction[a].text);if(g<=(d+f).length){this.content.assessmentItem.interaction[a].text=f.substring(0,g-d.length)+e+f.substring(g-d.length,f.length);this.charCount+=e.length;this.generateFullText();this.view.eventManager.fire("sourceUpdated");return}else{d+=f}}else{this.content.assessmentItem.interaction[a].text=e;this.charCount+=e.length;this.generateFullText();this.view.eventManager.fire("sourceUpdated");return}}else{if(this.content.assessmentItem.interaction[a].type=="textEntryInteraction"){d+=this.retrieveInteractionText(this.content.assessmentItem.interaction[a].responseIdentifier)}}}}else{this.content.assessmentItem.interaction.push({type:"htmltext",text:e});this.charCount+=e.length;this.generateFullText();this.view.eventManager.fire("sourceUpdated");return}}}}else{this.regeneratePage()}};View.prototype.FillinNode.updateContent=function(){this.view.activeContent.setContent(this.content)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_fillin.js")}View.prototype.MultipleChoiceNode={};View.prototype.MultipleChoiceNode.generatePage=function(b){this.view=b;this.content=this.view.activeContent.getContentJSON();var f=document.getElementById("dynamicParent");f.removeChild(document.getElementById("dynamicPage"));var e=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var d=document.createTextNode("Edit prompt: ");var h=document.createTextNode("Answers & Feedback:");var a=document.createTextNode("Shuffle answers before next try");var g=document.createTextNode("Feedback Options");e.appendChild(a);e.appendChild(createBreak());e.appendChild(this.generateShuffle());e.appendChild(createBreak());e.appendChild(g);e.appendChild(createBreak());e.appendChild(this.generateFeedbackOptions());e.appendChild(createBreak());e.appendChild(this.generateNumChoiceOption());e.appendChild(createBreak());e.appendChild(d);e.appendChild(createBreak());e.appendChild(this.generatePrompt());e.appendChild(createBreak());e.appendChild(createBreak());e.appendChild(h);e.appendChild(this.generateAnswers());e.appendChild(createBreak());e.appendChild(createElement(document,"input",{type:"button",id:"createNewButton",value:"Create New Answer",onclick:'eventManager.fire("mcCreateNewChoice")'}));e.appendChild(createElement(document,"input",{type:"button",value:"Reset Correct Answer selection",onclick:'eventManager.fire("mcClearCorrectChoice")'}));f.appendChild(e);this.generateDD()};View.prototype.MultipleChoiceNode.generateShuffle=function(){var b=createElement(document,"div",{id:"shuffleDiv"});var a=createElement(document,"input",{type:"radio",name:"shuffleOption",value:"true",onclick:'eventManager.fire("mcShuffleChange","true")'});var d=createElement(document,"input",{type:"radio",name:"shuffleOption",value:"false",onclick:'eventManager.fire("mcShuffleChange","false")'});var e=createElement(document,"label");e.innerHTML="shuffle choices";var f=createElement(document,"label");f.innerHTML="do NOT shuffle choices";b.appendChild(a);b.appendChild(e);b.appendChild(createBreak());b.appendChild(d);b.appendChild(f);if(this.content.assessmentItem.interaction.shuffle){a.checked=true}else{d.checked=true}return b};View.prototype.MultipleChoiceNode.generateFeedbackOptions=function(){var b=createElement(document,"div",{id:"feedbackOptionsDiv"});var a=createElement(document,"input",{type:"radio",name:"feedbackOption",value:"true",onclick:'eventManager.fire("mcFeedbackOptionChange","true")'});var d=createElement(document,"input",{type:"radio",name:"feedbackOption",value:"false",onclick:'eventManager.fire("mcFeedbackOptionChange","false")'});var e=createElement(document,"label");e.innerHTML="has inline feedback";var f=createElement(document,"label");f.innerHTML="does NOT have inline feedback";b.appendChild(a);b.appendChild(e);b.appendChild(createBreak());b.appendChild(d);b.appendChild(f);if(this.content.assessmentItem.interaction.hasInlineFeedback){a.checked=true}else{d.checked=true}return b};View.prototype.MultipleChoiceNode.generateNumChoiceOption=function(){var a=createElement(document,"div",{id:"numChoiceDiv"});var d=document.createTextNode("Enter the number of answers the student is allowed to choose as correct. Enter '0' to allow the student to choose as many as they want.");var b=createElement(document,"input",{type:"text",id:"numChoiceInput",onchange:'eventManager.fire("mcNumChoiceChanged")'});b.value=this.content.assessmentItem.interaction.maxChoices;a.appendChild(d);a.appendChild(createBreak());a.appendChild(b);return a};View.prototype.MultipleChoiceNode.generatePrompt=function(){var a=createElement(document,"textarea",{id:"promptText",name:"promptText",cols:"85",rows:"8",wrap:"hard",onkeyup:'eventManager.fire("mcXmlUpdated")'});a.value=this.content.assessmentItem.interaction.prompt;return a};View.prototype.MultipleChoiceNode.generateAnswers=function(){var b=[];var g=createElement(document,"div",{id:"answerDiv",name:"answerDiv"});var k=createElement(document,"ul",{id:"answerUL","class":"container"});var f=this.content.assessmentItem.interaction.choices;for(var e=0;e<f.length;e++){var j=f[e].text;var d=document.createTextNode("Answer: ");var a=document.createTextNode("Feedback:");feedback=this.generateFeedback(f[e],e);options=this.generateOptions(e,f.length);var l=createElement(document,"li",{id:"answerLI_"+e,name:"answerLI","class":"draggable"});var m=createElement(document,"input",{type:"text",name:"answerInput",value:j,wrap:"hard",onkeyup:'eventManager.fire("mcXmlUpdated")'});l.appendChild(d);l.appendChild(m);l.appendChild(createBreak());l.appendChild(a);l.appendChild(feedback);l.appendChild(createBreak());l.appendChild(options);k.appendChild(l)}g.appendChild(k);return g};View.prototype.MultipleChoiceNode.generateFeedback=function(a,b){if(this.content.assessmentItem.interaction.hasInlineFeedback){var d=createElement(document,"input",{type:"text",wrap:"hard",id:"feedbackInput_"+b,name:"feedbackInput",onkeyup:'eventManager.fire("mcXmlUpdated")'});d.value=a.feedback}else{var d=createElement(document,"div",{id:"feedbackInput_"+b,name:"feedbackInput_"+b})}return d};View.prototype.MultipleChoiceNode.generateOptions=function(b,d){var a=createElement(document,"div");if(this.isCorrect(this.content.assessmentItem.interaction.choices[b].identifier)){var e='<input CHECKED type="checkbox" name="correctRadio" id="radio_'+b+'" value="'+b+"\" onclick=\"eventManager.fire('mcCorrectChoiceChange','"+b+"')\">This is a correct Choice "}else{var e='<input type="checkbox" name="correctRadio" id="radio_'+b+'" value="'+b+"\" onclick=\"eventManager.fire('mcCorrectChoiceChange','"+b+"')\">This is a correct Choice "}e=e+"<a href=\"#\" onclick=\"eventManager.fire('mcRemoveChoice','"+b+"')\">Remove Choice</a>";a.innerHTML=e;return a};View.prototype.MultipleChoiceNode.isCorrect=function(b){for(var a=0;a<this.content.assessmentItem.responseDeclaration.correctResponse.length;a++){if(this.content.assessmentItem.responseDeclaration.correctResponse[a]==b){return true}}return false};View.prototype.MultipleChoiceNode.updateAnswer=function(b){var g=document.getElementsByName("answerLI");this.content.assessmentItem.interaction.choices=[];this.content.assessmentItem.responseDeclaration.correctResponse=[];for(var f=0;f<g.length;f++){var a={feedback:"",fixed:true,identifier:"choice "+(f+1),text:g[f].childNodes[1].value};if(g[f].childNodes[4]!=null&&g[f].childNodes[4].getAttribute("type")=="text"){a.feedback=g[f].childNodes[4].value}if(this.content.assessmentItem.interaction.hasInlineFeedback){var e=g[f].getElementsByTagName("input")[2].checked}else{var e=g[f].getElementsByTagName("input")[1].checked}if(e){this.addCorrectChoice(a.identifier)}this.content.assessmentItem.interaction.choices.push(a)}};View.prototype.MultipleChoiceNode.removeChoice=function(a){this.removeCorrectChoice(this.content.assessmentItem.interaction.choices[a].identifier);this.content.assessmentItem.interaction.choices.splice(a,1);this.regenerateAnswers();this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.createNewChoice=function(){var a={feedback:"Enter feedback",fixed:true,identifier:"choice "+(this.content.assessmentItem.interaction.choices.length+1),text:""};this.content.assessmentItem.interaction.choices.push(a);this.regenerateAnswers();this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.regenerateAnswers=function(){var b=document.getElementById("dynamicPage");b.removeChild(document.getElementById("answerDiv"));var d=this.generateAnswers();var a=document.getElementById("createNewButton");b.insertBefore(d,a);this.generateDD()};View.prototype.MultipleChoiceNode.shuffleChange=function(a){if(a=="true"){this.content.assessmentItem.interaction.shuffle=true}else{this.content.assessmentItem.interaction.shuffle=false}this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.correctChoiceChange=function(a){if(document.getElementById("radio_"+a).checked){this.addCorrectChoice(this.content.assessmentItem.interaction.choices[a].identifier)}else{this.removeCorrectChoice(this.content.assessmentItem.interaction.choices[a].identifier)}this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.addCorrectChoice=function(b){var a=this.content.assessmentItem.responseDeclaration.correctResponse.indexOf(b);if(a==-1){this.content.assessmentItem.responseDeclaration.correctResponse.push(b)}};View.prototype.MultipleChoiceNode.removeCorrectChoice=function(b){var a=this.content.assessmentItem.responseDeclaration.correctResponse.indexOf(b);if(a!=-1){this.content.assessmentItem.responseDeclaration.correctResponse.splice(a,1)}};View.prototype.MultipleChoiceNode.numChoiceChanged=function(){this.content.assessmentItem.interaction.maxChoices=document.getElementById("numChoiceInput").value;this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.clearCorrectChoice=function(){var b=document.getElementsByName("correctRadio");for(var a=0;a<b.length;a++){b[a].checked=false}this.content.assessmentItem.responseDeclaration.correctResponse=[];this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.validate=function(){var d=document.getElementsByName("answerInput");var a=false;for(var b=0;b<d.length;b++){if(d[b].value==null||d[b].value==""){a=true}}if(a){this.view.notificationManager.notify("No choice fields are allowed to be empty or null. Exiting...",3);return false}return true};View.prototype.MultipleChoiceNode.feedbackOptionChange=function(a){if(a=="true"){this.content.assessmentItem.interaction.hasInlineFeedback=true}else{this.content.assessmentItem.interaction.hasInlineFeedback=false}this.regenerateAnswers();this.view.eventManager.fire("mcXmlUpdated")};View.prototype.MultipleChoiceNode.xmlUpdated=function(){this.content.assessmentItem.interaction.prompt=document.getElementById("promptText").value;this.updateAnswer();this.view.eventManager.fire("sourceUpdated")};View.prototype.MultipleChoiceNode.updateContent=function(){this.view.activeContent.setContent(this.content)};View.prototype.MultipleChoiceNode.generateDD=function(){YUI().use("dd-constrain","dd-proxy","dd-drop",function(f){f.DD.DDM.on("drop:over",function(j){var h=j.drag.get("node"),g=j.drop.get("node");if(g.get("tagName").toLowerCase()==="li"){if(!e){g=g.get("nextSibling")}j.drop.get("node").get("parentNode").insertBefore(h,g);j.drop.sizeShim()}});f.DD.DDM.on("drag:drag",function(g){var h=g.target.lastXY[1];if(h<d){e=true}else{e=false}d=h});f.DD.DDM.on("drag:start",function(h){var g=h.target;g.get("node").setStyle("opacity",".25");g.get("dragNode").set("innerHTML",g.get("node").get("innerHTML"));g.get("dragNode").setStyles({opacity:".5",borderColor:g.get("node").getStyle("borderColor"),backgroundColor:g.get("node").getStyle("backgroundColor")})});f.DD.DDM.on("drag:end",function(h){var g=h.target;g.get("node").setStyles({visibility:"",opacity:"1"})});f.DD.DDM.on("drag:drophit",function(j){var g=j.drop.get("node"),h=j.drag.get("node");if(g.get("tagName").toLowerCase()!=="li"){if(!g.contains(h)){g.appendChild(h)}eventManager.fire("mcXmlUpdated")}});var e=false,d=0;var a=f.Node.all("#answerDiv ul li.draggable");if(a!=null){a.each(function(j,h){var g=new f.DD.Drag({node:j,proxy:true,moveOnEnd:false,constrain2node:"#answerDiv",target:{padding:"0 0 0 20"}})})}var b=f.Node.all("#answerDiv ul");b.each(function(j,h){var g=new f.DD.Drop({node:j})})})};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_multiplechoice.js")}View.prototype.MySystemNode={};View.prototype.MySystemNode.generatePage=function(a){this.view=a;this.content=createContent(this.view.getProject().makeUrl(this.view.activeContent.getContentJSON().src));this.view.activeNode.baseHtmlContent=this.content;this.modContent=createContent(this.content.getContentUrl()+"_module.json");this.modFileExists=true;this.mods=this.modContent.getContentJSON();if(!this.mods){this.modFileExists=false;this.mods=[]}this.buildPage()};View.prototype.MySystemNode.buildPage=function(){var e=document.getElementById("dynamicParent");while(e.firstChild){e.removeChild(e.firstChild)}var b=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var a=createElement(document,"div",{id:"mainDiv"});var g=createElement(document,"div",{id:"promptDiv"});var d=createElement(document,"div",{id:"modulesDiv"});var f=document.createTextNode("When entering image filenames, make sure to use the asset uploader on the main authoring page to upload your images and just use image name.");e.appendChild(b);b.appendChild(a);a.appendChild(f);a.appendChild(createBreak());a.appendChild(g);a.appendChild(createBreak());a.appendChild(d);this.generatePrompt();this.generateModules()};View.prototype.MySystemNode.generatePrompt=function(){var d=this.content.getContentString().match(/<authoredPrompt>[\s|\S]*<\/authoredPrompt>/);var b;if(d){b=d[0].substring(16,d[0].length-17)}var f=document.getElementById("promptDiv");var e=document.createTextNode("Enter instructions -- text or html -- here.");var a=createElement(document,"textarea",{id:"promptText",cols:"90",rows:"5",onchange:'eventManager.fire("mysystemPromptChanged")'});f.appendChild(createBreak());f.appendChild(e);f.appendChild(createBreak());f.appendChild(a);f.appendChild(createBreak());if(b){a.value=b}};View.prototype.MySystemNode.promptChanged=function(){this.content.setContent(this.content.getContentString().replace(/<authoredPrompt>[\s\S]*<\/authoredPrompt>/,"<authoredPrompt>"+document.getElementById("promptText").value+"</authoredPrompt>"));this.view.eventManager.fire("sourceUpdated")};View.prototype.MySystemNode.generateModules=function(){var p=document.getElementById("modulesDiv");while(p.firstChild){p.removeChild(p.firstChild)}p.appendChild(createBreak());if(this.mods.length>0){var g=document.createTextNode("Existing Modules")}else{var g=document.createTextNode("Create Modules")}p.appendChild(g);p.appendChild(createBreak());for(var m=0;m<this.mods.length;m++){var q=createElement(document,"div",{id:"modDiv_"+m});var l=document.createTextNode("Module");var k=document.createTextNode("Name: ");var j=document.createTextNode("Icon: ");var h=document.createTextNode("Image: ");var n=createElement(document,"input",{id:"nameInput_"+m,type:"text",value:this.mods[m].name,onchange:'eventManager.fire("mysystemFieldUpdated",["name","'+m+'"])'});var d=createElement(document,"input",{id:"iconInput_"+m,type:"text",value:this.getStripped(this.mods[m].icon),onchange:'eventManager.fire("mysystemFieldUpdated",["icon","'+m+'"])'});var e=createElement(document,"input",{id:"imageInput_"+m,type:"text",value:this.getStripped(this.mods[m].image),onchange:'eventManager.fire("mysystemFieldUpdated",["image","'+m+'"])'});var f=createElement(document,"input",{type:"button",id:"removeButt",value:"remove module",onclick:'eventManager.fire("mysystemRemoveMod","'+m+'")'});p.appendChild(q);q.appendChild(l);q.appendChild(createBreak());q.appendChild(k);q.appendChild(n);q.appendChild(createBreak());q.appendChild(j);q.appendChild(d);q.appendChild(createBreak());q.appendChild(h);q.appendChild(e);q.appendChild(createBreak());q.appendChild(f);q.appendChild(createBreak());q.appendChild(createBreak())}var b=createElement(document,"input",{type:"button",value:"add new mod",onclick:'eventManager.fire("mysystemAddNew")'});p.appendChild(b)};View.prototype.MySystemNode.getStripped=function(a){return a.substring(9,a.length)};View.prototype.MySystemNode.fieldUpdated=function(b,a){var d=document.getElementById(b+"Input_"+a).value;if(b=="name"){this.mods[a][b]=d}else{this.mods[a][b]="./assets/"+d}this.view.eventManager.fire("sourceUpdated")};View.prototype.MySystemNode.removeMod=function(a){this.mods.splice(a,1);this.generateModules();this.view.eventManager.fire("sourceUpdated")};View.prototype.MySystemNode.addNew=function(){this.mods.push({name:"",icon:"",image:"",xtype:"MySystemContainer",etype:"source",fields:{efficiency:"1"}});this.generateModules();this.view.eventManager.fire("sourceUpdated")};View.prototype.MySystemNode.save=function(f){var b=function(h,g,j){j.notificationManager.notify("Updated html content on server",3)};var e=function(h,g,j){j.notificationManager.notify("Failed update of html content on server",3)};this.view.connectionManager.request("POST",3,"filemanager.html",{command:"updateFile",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,this.view.getProject().getContentBase()),param2:this.view.activeNode.baseHtmlContent.getFilename(this.view.getProject().getContentBase()),param3:encodeURIComponent(this.content.getContentString())},b,this.view,e);var d=function(g,h,j){j.stepSaved=true;j.notificationManager.notify("Updated module file on server",3);if(f){j.eventManager.fire("closeOnStepSaved",[true])}};var a=function(g,h,j){j.notificationManager.notify("Failed save of module file to server.",3);if(f){j.eventManager.fire("closeOnStepSaved",[false])}};if(this.modFileExists){this.view.connectionManager.request("POST",3,"filemanager.html",{command:"updateFile",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,this.view.getProject().getContentBase()),param2:this.modContent.getFilename(this.view.getProject().getContentBase()),param3:yui.JSON.stringify(this.mods)},d,this.view,a)}else{this.view.connectionManager.request("POST",3,"filemanager.html",{command:"createFile",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,this.modContent.getContentUrl()),param2:yui.JSON.stringify(this.mods)},d,this.view,a)}};View.prototype.MySystemNode.updateContent=function(){this.view.activeNode.baseHtmlContent.setContent(this.content.getContentString())};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_mysystem.js")}View.prototype.MatchSequenceNode={};View.prototype.MatchSequenceNode.generatePage=function(a){this.view=a;this.content=this.view.activeContent.getContentJSON();this.feedbackMode=false;this.currentChoiceId;this.currentContainerId;this.buildPage()};View.prototype.MatchSequenceNode.buildPage=function(){var s=document.getElementById("dynamicParent");s.removeChild(document.getElementById("dynamicPage"));var l=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var j=createElement(document,"textarea",{id:"promptArea",rows:"10",cols:"75",wrap:"hard",onchange:'eventManager.fire("msUpdatePrompt")'});var e=document.createTextNode("Edit prompt:");var r=createElement(document,"div",{id:"orderingOptions"});var k=createElement(document,"input",{type:"radio",id:"ordered",name:"ordered",value:true,onclick:'eventManager.fire("msUpdateOrdered","true")'});var d=createElement(document,"input",{type:"radio",id:"notOrdered",name:"ordered",value:false,onclick:'eventManager.fire("msUpdateOrdered","false")'});var h=document.createTextNode("Select ordering option:");var b=document.createTextNode("Choices have a specific sequential order per Target");var g=document.createTextNode("Choices are unordered per Target");var n=createElement(document,"input",{type:"button",id:"addContainerButton",onclick:'eventManager.fire("msAddContainer")',value:"Add Container"});var f=createElement(document,"input",{type:"button",value:"Create New Choice",onclick:'eventManager.fire("msAddChoice")'});var m=createElement(document,"input",{type:"button",value:"Remove Choice",onclick:'eventManager.fire("msRemoveChoice")'});var a=createElement(document,"input",{type:"button",id:"removeContainerButton",onclick:'eventManager.fire("msRemoveContainer")',value:"Remove Container"});var q=createElement(document,"input",{type:"button",value:"Edit/Create Feedback",onclick:'eventManager.fire("msEditFeedback")'});var p=createElement(document,"input",{type:"checkbox",id:"shuffled",onclick:'eventManager.fire("msShuffleChanged")'});var t=document.createTextNode("Shuffle Choices");p.checked=this.getShuffle();if(this.getOrdered()){k.checked=true}else{d.checked=true}j.value=this.getPrompt();r.appendChild(h);r.appendChild(createBreak());r.appendChild(k);r.appendChild(b);r.appendChild(createBreak());r.appendChild(d);r.appendChild(g);r.appendChild(createBreak());r.appendChild(createBreak());r.appendChild(p);r.appendChild(t);r.appendChild(createBreak());l.appendChild(e);l.appendChild(createBreak());l.appendChild(j);l.appendChild(r);l.appendChild(createBreak());l.appendChild(n);l.appendChild(a);l.appendChild(createSpace());l.appendChild(createSpace());l.appendChild(createSpace());l.appendChild(f);l.appendChild(m);l.appendChild(q);l.appendChild(createBreak());l.appendChild(this.generateFeedback());l.appendChild(this.generateContainerTable());s.appendChild(l);this.generateFeedbackTable();this.generateContainers();if(this.feedbackMode){showElement("feedbackDiv");hideElement("containerTable")}else{showElement("containerTable");hideElement("feedbackDiv")}};View.prototype.MatchSequenceNode.generateFeedback=function(){var f=createElement(document,"div",{id:"feedbackDiv"});var a=document.createTextNode('Click any colored field to add/edit its text. Click "Hide Feedback" when finished.');var b=createElement(document,"input",{type:"button",value:"Hide Feedback",onclick:'eventManager.fire("msHideFeedback")'});var e=createElement(document,"div",{id:"feedbackEditDiv",style:"display:none;"});var g=createElement(document,"textarea",{id:"feedbackEditInput",cols:"85",rows:"10"});var d=createElement(document,"input",{type:"button",value:"Save",onclick:'eventManager.fire("msSaveFeedback")'});f.appendChild(createBreak());f.appendChild(a);f.appendChild(createBreak());f.appendChild(b);f.appendChild(createBreak());f.appendChild(e);e.appendChild(g);e.appendChild(createBreak());e.appendChild(d);f.appendChild(createBreak());f.appendChild(createBreak());return f};View.prototype.MatchSequenceNode.generateFeedbackTable=function(){var k=document.getElementById("feedbackDiv");var e=document.getElementById("containerChoiceTable");if(e){k.removeChild(e)}var r=this.getChoices();var p=this.getFields();var t=createElement(document,"table",{id:"containerChoiceTable"});var u=createElement(document,"tr",{id:"headerRow"});var d=createElement(document,"td",{id:"headerLabel"});var n=createElement(document,"div",{id:"containerLabelDiv",align:"right"});var j=createElement(document,"div",{id:"choiceLabelDiv"});n.innerHTML="Containers:";j.innerHTML="Choices";d.appendChild(n);d.appendChild(j);u.appendChild(d);for(var x=0;x<p.length;x++){var g=createElement(document,"td",{id:"containerName_"+p[x].identifier});g.innerHTML=p[x].name;u.appendChild(g)}t.appendChild(u);for(var w=0;w<r.length;w++){var h=createElement(document,"tr",{id:"row_"+w});var f=createElement(document,"td",{id:"choiceLabelTD_"+w});f.innerHTML=r[w].value;h.appendChild(f);for(var v=0;v<p.length;v++){var m=r[w].identifier;var q=p[v].identifier;var y=this.getValueByChoiceAndFieldIdentifiers(m,q);var s=createElement(document,"td",{id:"cell_"+w+"_"+v,onclick:'eventManager.fire("msEditIndividualFeedback",["'+m+'","'+q+'"])'});if(y){var l;if(y.isCorrect){s.setAttribute("bgcolor","#99FFCC");l=y.feedback}else{s.setAttribute("bgcolor","#FF9999");l=y.feedback}s.innerHTML=l}else{s.setAttribute("bgcolor","#FF9999");s.innerHTML="Create Feedback"}h.appendChild(s)}t.appendChild(h)}k.appendChild(t)};View.prototype.MatchSequenceNode.hideFeedback=function(){this.feedbackMode=false;showElement("containerTable");hideElement("feedbackDiv")};View.prototype.MatchSequenceNode.editIndividualFeedback=function(a,b){this.currentChoiceId=a;this.currentContainerId=b;document.getElementById("feedbackEditInput").value=this.getValueByChoiceAndFieldIdentifiers(a,b).feedback;showElement("feedbackEditDiv")};View.prototype.MatchSequenceNode.saveFeedback=function(){var a=this.getValueByChoiceAndFieldIdentifiers(this.currentChoiceId,this.currentContainerId);if(!a){this.createNewFeedback(this.currentChoiceId,this.currentContainerId);a=this.getValueByChoiceAndFieldIdentifiers(this.currentChoiceId,this.currentContainerId)}this.updateFeedback(this.currentChoiceId,this.currentContainerId,document.getElementById("feedbackEditInput").value);this.generateFeedbackTable();document.getElementById("feedbackEditInput").value="";hideElement("feedbackEditDiv");this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.generateContainerTable=function(){var a=createElement(document,"table",{id:"containerTable"});var b=createElement(document,"tr",{id:"containerRow"});a.appendChild(b);return a};View.prototype.MatchSequenceNode.generateContainers=function(){var e=document.getElementById("containerTable");var a=this.getFields();var f=document.getElementsByName("containerRow");for(var b=0;b<f.length;b++){e.removeChild(f[b])}for(var d=0;d<a.length;d++){var g=createElement(document,"tr",{id:"containerRow",name:"containerRow"});g.appendChild(this.generateContainer(a[d],d));e.appendChild(g)}};View.prototype.MatchSequenceNode.generateContainer=function(h,f){var g=h.identifier;var a=createElement(document,"td",{id:"containerTD_"+g});var b=createElement(document,"input",{type:"radio",name:"radioContainer",id:"radioContainer_"+g,onfocus:'eventManager.fire("msContainerSelected","radioContainer_'+g+'")',value:g});var d=createElement(document,"input",{type:"text",id:"textContainer_"+g,onfocus:'eventManager.fire("msContainerSelected","radioContainer_'+g+'")',onchange:'eventManager.fire("msContainerTextUpdated","'+g+'")'});var j=createElement(document,"div",{id:"choiceDiv_"+g});var k=document.createTextNode("Title: ");var e=document.createTextNode("Target Box "+f);d.value=h.name;a.appendChild(b);a.appendChild(e);a.appendChild(createBreak());a.appendChild(k);a.appendChild(d);a.appendChild(j);this.generateChoices(j,g);return a};View.prototype.MatchSequenceNode.generateChoices=function(a,b){var d=createElement(document,"table",{id:"choiceTable_"+b,border:"1"});var g=this.getChoicesByContainerIdentifier(b);for(var f=0;f<g.length;f++){d.appendChild(this.generateChoice(g[f],b))}a.appendChild(d);a.appendChild(createBreak())};View.prototype.MatchSequenceNode.generateChoice=function(e,j){var g=e.identifier;var k=createElement(document,"tr",{id:"choiceRow_"+g});var d=createElement(document,"td",{id:"choiceTD_"+g});var a=createElement(document,"input",{type:"radio",name:"radioChoice_"+j,onfocus:'eventManager.fire("msChoiceSelected",["'+g+'", "'+j+'"])',value:g});var b=createElement(document,"input",{type:"text",id:"textChoice_"+g,onfocus:'eventManager.fire("msChoiceSelected",["'+g+'", "'+j+'"])',onchange:'eventManager.fire("msChoiceTextUpdated","'+g+'")'});var f=createElement(document,"input",{type:"text",size:"1",id:"orderChoice_"+g,onfocus:'eventManager.fire("msChoiceSelected",["'+g+'", "'+j+'"])',onkeyup:'eventManager.fire("msOrderUpdated","'+g+'")'});var h=document.createTextNode("order pos:");b.value=e.value;d.appendChild(a);d.appendChild(b);if(this.getOrdered()){f.value=this.getOrderPositionByChoiceIdentifier(g);d.appendChild(h);d.appendChild(f)}k.appendChild(d);return k};View.prototype.MatchSequenceNode.getPrompt=function(){return this.content.assessmentItem.interaction.prompt};View.prototype.MatchSequenceNode.updatePrompt=function(){this.content.assessmentItem.interaction.prompt=document.getElementById("promptArea").value;this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.getOrdered=function(){return this.content.assessmentItem.interaction.ordered};View.prototype.MatchSequenceNode.updateOrdered=function(a){this.content.assessmentItem.interaction.ordered=a;this.buildPage();this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.containerSelected=function(a){document.getElementsByName("radioContainer")[a].checked=true;this.clearOtherChoices(this.getSelectedContainerIdentifier())};View.prototype.MatchSequenceNode.containerSelectedByIdentifier=function(a){document.getElementById("radioContainer_"+a).checked=true};View.prototype.MatchSequenceNode.choiceSelected=function(a,b){var e=document.getElementsByName("radioChoice_"+b);this.clearOtherChoices(b);this.containerSelectedByIdentifier(b);if(e!=null&&e.length>0){for(var d=0;d<e.length;d++){if(e[d].value==a){e[d].checked=true}}}};View.prototype.MatchSequenceNode.clearOtherChoices=function(b){var d=this.getFields();for(var a=0;a<d.length;a++){if(d[a].identifier!=b){var f=document.getElementsByName("radioChoice_"+d[a].identifier);for(var e=0;e<f.length;e++){f[e].checked=false}}}};View.prototype.MatchSequenceNode.containerTextUpdated=function(a){this.getField(a).name=document.getElementById("textContainer_"+a).value;this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.choiceTextUpdated=function(a){this.getChoiceByChoiceIdentifier(a).value=document.getElementById("textChoice_"+this.getSelectedChoiceIdentifier()).value;this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.orderUpdated=function(a){this.updateOrderPositionByChoiceIdentifier(a,document.getElementById("orderChoice_"+a).value);this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.getSelectedContainer=function(){var b=document.getElementsByName("radioContainer");for(var a=0;a<b.length;a++){if(b[a].checked){return b[a]}}};View.prototype.MatchSequenceNode.getSelectedContainerIdentifier=function(){var a=this.getSelectedContainer();if(a){return a.value}};View.prototype.MatchSequenceNode.getSelectedChoice=function(){var b=document.getElementsByName("radioChoice_"+this.getSelectedContainerIdentifier());for(var a=0;a<b.length;a++){if(b[a].checked){return b[a]}}};View.prototype.MatchSequenceNode.getSelectedChoiceIdentifier=function(){var a=this.getSelectedChoice();if(a){return a.value}};View.prototype.MatchSequenceNode.getFields=function(){return this.content.assessmentItem.interaction.fields};View.prototype.MatchSequenceNode.getField=function(b){var a=this.getFields();for(var d=0;d<a.length;d++){if(a[d].identifier==b){return a[d]}}};View.prototype.MatchSequenceNode.getResponseValues=function(){return this.content.assessmentItem.responseDeclaration.correctResponses};View.prototype.MatchSequenceNode.getResponseValuesByFieldIdentifier=function(a){var b=this.getResponseValues();var d=[];for(var e=0;e<b.length;e++){if(b[e].fieldIdentifier==a){d.push(b[e])}}return d};View.prototype.MatchSequenceNode.getResponseValuesByChoiceIdentifier=function(a){var b=this.getResponseValues();var d=[];for(var e=0;e<b.length;e++){if(b[e].choiceIdentifier==a){d.push(b[e])}}return d};View.prototype.MatchSequenceNode.getOrderPositionByChoiceIdentifier=function(a){var d=this.getResponseValuesByChoiceIdentifier(a);for(var b=0;b<d.length;b++){return d[b].order}};View.prototype.MatchSequenceNode.updateOrderPositionByChoiceIdentifier=function(d,a){var e=this.getResponseValuesByChoiceIdentifier(d);for(var b=0;b<e.length;b++){e[b].order=a}};View.prototype.MatchSequenceNode.getChoices=function(){return this.content.assessmentItem.interaction.choices};View.prototype.MatchSequenceNode.getChoiceByChoiceIdentifier=function(d){var e=this.getChoices();for(var b=0;b<e.length;b++){if(e[b].identifier==d){return e[b]}}};View.prototype.MatchSequenceNode.getChoicesByContainerIdentifier=function(e){var f=this.getResponseValuesByFieldIdentifier(e);var d=[];var j=[];for(var a=0;a<f.length;a++){var h=f[a].choiceIdentifier;if(h!=null&&d.indexOf(h)==-1&&f[a].isCorrect){d.push(h)}}for(var g=0;g<d.length;g++){j.push(this.getChoiceByChoiceIdentifier(d[g]))}return j};View.prototype.MatchSequenceNode.getValueByChoiceAndFieldIdentifiers=function(a,b){var e=this.getResponseValuesByChoiceIdentifier(a);for(var d=0;d<e.length;d++){if(e[d].fieldIdentifier==b){return e[d]}}return null};View.prototype.MatchSequenceNode.generateUniqueIdentifier=function(d){var e=0;var b;if(d=="field"){b=this.getFields()}else{if(d=="choice"){b=this.getChoices()}}while(true){var g=d+"_"+e;var f=false;for(var a=0;a<b.length;a++){if(b[a].identifier==g){f=true}}if(!f){return g}e++}};View.prototype.MatchSequenceNode.addContainer=function(){var a={identifier:this.generateUniqueIdentifier("field"),numberOfEntries:"0",ordinal:false,name:"Enter Title Here"};this.content.assessmentItem.interaction.fields.push(a);this.setIncorrectExistingChoices(a.identifier);this.buildPage();this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.removeContainer=function(){var d=this.getSelectedContainerIdentifier();if(d){if(confirm("Removing a container also removes all associated choices, ordering, etc. This can not be undone. Are you sure you wish to continue?")){var e=this.getResponseValuesByFieldIdentifier(d);var f=this.getChoicesByContainerIdentifier(d);this.getFields().splice(this.getFields().indexOf(this.getField(d)),1);for(var b=0;b<f.length;b++){this.getChoices().splice(this.getChoices().indexOf(f[b]),1)}for(var a=0;a<e.length;a++){this.getResponseValues().splice(this.getResponseValues().indexOf(e[a]),1)}this.buildPage();this.view.eventManager.fire("sourceUpdated")}}else{this.view.notificationManager.notify("One of the containers must be selected before removing it",3)}};View.prototype.MatchSequenceNode.addChoice=function(){var d=this.getSelectedContainerIdentifier();if(!d){this.view.notificationManager.notify("Please select a container in which you wish to create a new choice.",3);return}var a={matchMax:"1",value:"Enter Choice",identifier:this.generateUniqueIdentifier("choice")};var b={choiceIdentifier:a.identifier,fieldIdentifier:d,feedback:"Correct.",isCorrect:true,isDefault:false,order:"0"};this.content.assessmentItem.interaction.choices.push(a);this.content.assessmentItem.responseDeclaration.correctResponses.push(b);this.setIncorrectOtherContainers(a.identifier,d);this.buildPage();this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.setIncorrectOtherContainers=function(a,b){var e=this.getFields();for(var f=0;f<e.length;f++){var d=e[f].identifier;if(d!=b){this.createNewFeedback(a,d);this.updateFeedback(a,d,"Incorrect")}}};View.prototype.MatchSequenceNode.setIncorrectExistingChoices=function(d){var e=this.getChoices();for(var b=0;b<e.length;b++){this.createNewFeedback(e[b].identifier,d);this.updateFeedback(e[b].identifier,d,"Incorrect")}};View.prototype.MatchSequenceNode.removeChoice=function(){var a=this.getChoiceByChoiceIdentifier(this.getSelectedChoiceIdentifier());if(a){if(confirm("Removing a choice also removes all associated feedback. This can not be undone. Are you sure you wish to continue?")){var b=this.getResponseValuesByChoiceIdentifier(a.identifier);this.getChoices().splice(this.getChoices().indexOf(a),1);for(var d=0;d<b.length;d++){this.getResponseValues().splice(this.getResponseValues().indexOf(b[d]),1)}this.buildPage();this.view.eventManager.fire("sourceUpdated")}}else{this.view.notificationManager.notify("A choice must be selected before removing it.",3)}};View.prototype.MatchSequenceNode.createNewFeedback=function(a,b,g){var h={choiceIdentifier:a,fieldIdentifier:b,isCorrect:false,isDefault:false,order:"0",feedback:""};if(this.getOrdered()){var f=this.getResponseValuesByChoiceIdentifier(a);if(f!=null&f.length>0){for(var d=0;d<f.length;d++){var e=f[d].getAttribute("order");if(f[d].order!=""){h.order=e}}}}this.content.assessmentItem.responseDeclaration.correctResponses.push(h)};View.prototype.MatchSequenceNode.updateFeedback=function(a,b,d){this.getValueByChoiceAndFieldIdentifiers(a,b).feedback=d};View.prototype.MatchSequenceNode.validateOrdering=function(){if(this.getOrdered()){if(this.duplicated()){return false}else{if(!this.sequential()){return false}else{return true}}}else{return true}};View.prototype.MatchSequenceNode.duplicated=function(){var f=this.getFields();for(var e=0;e<f.length;e++){var g=this.getChoicesByContainerIdentifier(f[e].identifier);var b=[];for(var d=0;d<g.length;d++){var a=this.getValueByChoiceAndFieldIdentifiers(g[d].identifier,f[e].identifier).order;if(a!=null&&a!=""){if(b.indexOf(a)==-1){b.push(a)}else{return true}}}}return false};View.prototype.MatchSequenceNode.sort=function(e,d){if(e>d){return 1}else{if(e==d){return 0}else{return -1}}};View.prototype.MatchSequenceNode.sequential=function(){var f=this.getFields();for(var e=0;e<f.length;e++){var h=this.getChoicesByContainerIdentifier(f[e].identifier);var a=[];for(var d=0;d<h.length;d++){var g=this.getValueByChoiceAndFieldIdentifiers(h[d].identifier,f[e].identifier).order;a.push(g)}a.sort(this.sort);for(var b=0;b<a.length;b++){if(b!=0){if(parseInt(a[b])!=(parseInt(a[b-1])+1)){return false}}}}return true};View.prototype.MatchSequenceNode.getShuffle=function(){return this.content.assessmentItem.interaction.shuffle};View.prototype.MatchSequenceNode.shuffleChanged=function(){this.content.assessmentItem.interaction.shuffle=document.getElementById("shuffled").checked;this.view.eventManager.fire("sourceUpdated")};View.prototype.MatchSequenceNode.editFeedback=function(){this.feedbackMode=true;showElement("feedbackDiv");hideElement("containerTable")};View.prototype.MatchSequenceNode.updateContent=function(){this.view.activeContent.setContent(this.content)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_matchsequence.js")}View.prototype.GlueNode={};View.prototype.GlueNode.generatePage=function(m){this.view=m;this.xmlPage=this.view.activeContent.getContentXML();this.allowedGlue=new Array("MultipleChoiceNode","OpenResponseNode","HtmlNode");var p=document.getElementById("dynamicParent");p.removeChild(document.getElementById("dynamicPage"));var f=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});p.appendChild(f);var l=createElement(document,"div",{id:"promptDiv"});var b=document.createTextNode("Edit Prompt");var n=createElement(document,"textarea",{id:"promptInput",cols:"75",rows:"18",wrap:"soft",onkeyup:'eventManager.fire("glueUpdatePrompt")'});f.appendChild(l);l.appendChild(b);l.appendChild(createBreak());l.appendChild(n);n.value=this.getPrompt();var j=createElement(document,"table",{id:"ddGlueTable",width:"100%"});var k=createElement(document,"tbody");var q=createElement(document,"tr",{id:"ddHeaderRow"});var e=createElement(document,"td",{id:"ddAttachedHeadTD",width:"40%"});var a=createElement(document,"td",{id:"ddNodesHeadTD",width:"40%"});var s=createElement(document,"td",{id:"ddTrashHeadTD",width:"20%"});f.appendChild(j);j.appendChild(k);k.appendChild(q);q.appendChild(e);q.appendChild(a);q.appendChild(s);e.innerHTML="Add/Remove/Arrange Nodes";a.innerHTML="All Allowable Nodes";s.innerHTML="Trash Can";var d=createElement(document,"tr",{id:"ddRow"});var h=createElement(document,"td",{id:"ddAttachedTD"});var g=createElement(document,"td",{id:"ddNodesTD"});var r=createElement(document,"td",{id:"ddTrashTD"});k.appendChild(d);d.appendChild(h);d.appendChild(g);d.appendChild(r);this.generateAttached();this.generateNodes();this.generateTrash();this.generateGlueDD()};View.prototype.GlueNode.generateAttached=function(){var f=document.getElementById("ddAttachedTD");while(f.firstChild){f.removeChild(f.firstChild)}var e=createElement(document,"ul",{id:"attachedUL","class":"container"});var h=createElement(document,"li",{"class":"placeholder"});var b=this.getChildren();f.appendChild(e);e.appendChild(createBreak());e.appendChild(h);for(var a=0;a<b.length;a++){var g=b[a].getAttribute("ref");var j=createElement(document,"li",{id:"attached_"+g,name:"attached","class":"draggable"});var d=document.createTextNode(this.view.getProject().getNodeById(g).title);e.appendChild(j);j.appendChild(d)}};View.prototype.GlueNode.generateNodes=function(){var d=document.getElementById("ddNodesTD");while(d.firstChild){d.removeChild(d.firstChild)}var j=createElement(document,"ul",{id:"nodesUL"});var g=createElement(document,"li",{"class":"placeholder"});var a=this.view.getProject().getLeafNodes();d.appendChild(j);j.appendChild(g);for(var h=0;h<a.length;h++){if(this.allowedGlue.indexOf(a[h].type)>-1){var f=a[h].id;var e=createElement(document,"li",{id:"node_"+f,name:"ddNodes","class":"draggable"});var b=document.createTextNode(a[h].title);j.appendChild(e);e.appendChild(b)}}};View.prototype.GlueNode.generateTrash=function(){var d=document.getElementById("ddTrashTD");var a=document.getElementById("trashDiv");if(a){d.removeChild(a)}var b=createElement(document,"div",{id:"trashDiv","class":"trash"});d.appendChild(b);b.innerHTML="Trash Bin"};View.prototype.GlueNode.getChildren=function(){return this.xmlPage.getElementsByTagName("node-ref")};View.prototype.GlueNode.getPrompt=function(){var a=this.xmlPage.getElementsByTagName("prompt");if(a[0].firstChild){return a[0].firstChild.nodeValue}else{return""}};View.prototype.GlueNode.updatePrompt=function(){var a=document.getElementById("promptInput").value;var b=this.xmlPage.getElementsByTagName("prompt")[0];if(b.firstChild){b.firstChild.nodeValue=a}else{b.appendChild(this.xmlPage.createTextNode(a))}this.view.eventManager.fire("sourceUpdated")};View.prototype.GlueNode.updateContent=function(){this.view.activeContent.setContent(this.xmlPage)};View.prototype.GlueNode.generateGlueDD=function(){YUI().use("dd-constrain","dd-proxy","dd-drop","dd-ddm","dd-ddm-drop",function(g){g.DD.DDM.on("drop:over",function(l){var k=l.drag.get("node"),j=l.drop.get("node");if(j.get("tagName").toLowerCase()==="li"){if(!f){j=j.get("nextSibling")}l.drop.get("node").get("parentNode").insertBefore(k,j);l.drop.sizeShim()}});g.DD.DDM.on("drag:drag",function(j){var k=j.target.lastXY[1];if(k<e){f=true}else{f=false}e=k});g.DD.DDM.on("drag:start",function(k){var j=k.target;j.get("node").setStyle("opacity",".25");j.get("dragNode").set("innerHTML",j.get("node").get("innerHTML"));j.get("dragNode").setStyles({opacity:".5",borderColor:j.get("node").getStyle("borderColor"),backgroundColor:j.get("node").getStyle("backgroundColor")})});g.DD.DDM.on("drag:end",function(k){var j=k.target;j.get("node").setStyles({visibility:"",opacity:"1"})});g.DD.DDM.on("drag:drophit",function(l){var j=l.drop.get("node"),k=l.drag.get("node");if(j.get("tagName").toLowerCase()!=="li"){if(!j.contains(k)){j.appendChild(k)}eventManager.fire("glueNodeDropped",[k,j])}});var f=false,e=0;var b=document.getElementsByName("ddNodes");for(var h=0;h<b.length;h++){eventManager.fire("glueCreateDraggable",[g,b[h]])}var a=document.getElementsByName("attached");for(var d=0;d<a.length;d++){eventManager.fire("glueCreateDraggable",[g,a[d]])}eventManager.fire("glueCreateTarget",[g,document.getElementById("attachedUL")]);eventManager.fire("glueCreateTarget",[g,document.getElementById("trashDiv")]);eventManager.fire("glueCreateTarget",[g,document.getElementById("nodesUL")])})};View.prototype.GlueNode.createTarget=function(d,b){var a=new d.DD.Drop({node:b})};View.prototype.GlueNode.createDraggable=function(d,b){var a=new d.DD.Drag({node:b,proxy:true,moveOnEnd:false,constrain2node:"#ddTable",target:{padding:"0 0 0 20"}})};View.prototype.GlueNode.createReferences=function(){var b=this.xmlPage.getElementsByTagName("children")[0];while(b.firstChild){b.removeChild(b.firstChild)}var d=document.getElementById("attachedUL");var a=d.childNodes;for(var f=0;f<a.length;f++){if(a[f].id!=null&&a[f].id!="placeholder"&&a[f].id!=""){var e=a[f].id.substring(a[f].id.indexOf("_")+1,a[f].id.length);var g=this.xmlPage.createElement("node-ref");g.setAttribute("ref",e);b.appendChild(g)}}};View.prototype.GlueNode.onNodeDropped=function(a,d){if(d.get("id")=="trashDiv"){if(a.get("id").substring(0,a.get("id").indexOf("_"))=="node"){this.view.notificationManager.notify("Please create and remove nodes from the main authoring page only.",3)}else{var b=document.getElementById(a.get("id"));b.parentNode.removeChild(b);this.createReferences()}}else{if(d.get("id")=="attachedUL"){this.createReferences()}}this.generateAttached();this.generateNodes();this.generateTrash();this.generateGlueDD()};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_glue.js")}View.prototype.HtmlNode={};View.prototype.HtmlNode.generatePage=function(a){this.view=a;this.view.activeNode.baseHtmlContent=createContent(this.view.getProject().makeUrl(this.view.activeContent.getContentJSON().src));var e=document.getElementById("dynamicParent");e.removeChild(document.getElementById("dynamicPage"));var d=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var b=createElement(document,"textarea",{id:"sourceTextArea",style:"width:100%;height:100%",onkeyup:'eventManager.fire("sourceUpdated")'});e.appendChild(d);d.appendChild(b);b.value=this.view.activeNode.baseHtmlContent.getContentString()};View.prototype.HtmlNode.updateContent=function(){this.view.activeNode.baseHtmlContent.setContent(document.getElementById("sourceTextArea").value)};View.prototype.HtmlNode.save=function(d){var b=function(f,e,g){g.stepSaved=true;g.notificationManager.notify("Updated html content on server",3);if(d){g.eventManager.fire("closeOnStepSaved",[true])}};var a=function(f,e,g){g.notificationManager.notify("Failed update of html content on server",3);if(d){g.eventManager.fire("closeOnStepSaved",[false])}};this.view.connectionManager.request("POST",3,"filemanager.html",{command:"updateFile",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,this.view.getProject().getContentBase()),param2:this.view.activeNode.baseHtmlContent.getFilename(this.view.getProject().getContentBase()),param3:encodeURIComponent(document.getElementById("sourceTextArea").value)},b,this.view,a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_html.js")}View.prototype.OutsideUrlNode={};View.prototype.OutsideUrlNode.generatePage=function(a){this.view=a;var f=document.getElementById("dynamicParent");f.removeChild(document.getElementById("dynamicPage"));var d=createElement(document,"div",{id:"dynamicPage",style:"width:100%;height:100%"});var e=createElement(document,"input",{id:"tInput",type:"text",size:"50",onkeyup:'eventManager.fire("sourceUpdated")'});var b=document.createTextNode("URL: ");f.appendChild(d);d.appendChild(b);d.appendChild(e);e.value=this.view.activeContent.getContentJSON().url};View.prototype.OutsideUrlNode.updateContent=function(){this.view.activeContent.getContentJSON().url=document.getElementById("tInput").value};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/authoring/nodes/authorview_outsideurl.js")};if(typeof eventManager != "undefined"){eventManager.fire("scriptLoaded", "vle/all/authoring_all-min.js");};