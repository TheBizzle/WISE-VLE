if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var a=arguments,b=null,d,e,c;for(d=0;d<a.length;d=d+1){c=(""+a[d]).split(".");b=YAHOO;for(e=(c[0]=="YAHOO")?1:0;e<c.length;e=e+1){b[c[e]]=b[c[e]]||{};b=b[c[e]]}}return b};YAHOO.log=function(b,a,c){var d=YAHOO.widget.Logger;if(d&&d.log){return d.log(b,a,c)}else{return false}};YAHOO.register=function(d,j,a){var e=YAHOO.env.modules,c,f,g,h,b;if(!e[d]){e[d]={versions:[],builds:[]}}c=e[d];f=a.version;g=a.build;h=YAHOO.env.listeners;c.name=d;c.version=f;c.build=g;c.versions.push(f);c.builds.push(g);c.mainClass=j;for(b=0;b<h.length;b=b+1){h[b](c)}if(j){j.VERSION=f;j.BUILD=g}else{YAHOO.log("mainClass is undefined for module "+d,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.ua=function(){var b={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:0},c=navigator.userAgent,a;if((/KHTML/).test(c)){b.webkit=1}a=c.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){b.webkit=parseFloat(a[1]);if(/ Mobile\//.test(c)){b.mobile="Apple"}else{a=c.match(/NokiaN[^\/]*/);if(a){b.mobile=a[0]}}a=c.match(/AdobeAIR\/([^\s]*)/);if(a){b.air=a[0]}}if(!b.webkit){a=c.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){b.opera=parseFloat(a[1]);a=c.match(/Opera Mini[^;]*/);if(a){b.mobile=a[0]}}else{a=c.match(/MSIE\s([^;]*)/);if(a&&a[1]){b.ie=parseFloat(a[1])}else{a=c.match(/Gecko\/([^\s]*)/);if(a){b.gecko=1;a=c.match(/rv:([^\s\)]*)/);if(a&&a[1]){b.gecko=parseFloat(a[1])}}}}}a=c.match(/Caja\/([^\s]*)/);if(a&&a[1]){b.caja=parseFloat(a[1])}return b}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var d=YAHOO_config.listener,a=YAHOO.env.listeners,b=true,c;if(d){for(c=0;c<a.length;c=c+1){if(a[c]==d){b=false;break}}if(b){a.push(d)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var f=YAHOO.lang,b="[object Array]",e="[object Function]",a=Object.prototype,c=["toString","valueOf"],d={isArray:function(g){return a.toString.apply(g)===b},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return a.toString.apply(g)===e},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return(g&&(typeof g==="object"||f.isFunction(g)))||false},isString:function(g){return typeof g==="string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(j,k){var l,g,h;for(l=0;l<c.length;l=l+1){g=c[l];h=k[g];if(f.isFunction(h)&&h!=a[g]){j[g]=h}}}:function(){},extend:function(h,g,j){if(!g||!h){throw new Error("extend failed, please check that all dependencies are included.")}var k=function(){},l;k.prototype=g.prototype;h.prototype=new k();h.prototype.constructor=h;h.superclass=g.prototype;if(g.prototype.constructor==a.constructor){g.prototype.constructor=g}if(j){for(l in j){if(f.hasOwnProperty(j,l)){h.prototype[l]=j[l]}}f._IEEnumFix(h.prototype,j)}},augmentObject:function(h,j){if(!j||!h){throw new Error("Absorb failed, verify dependencies.")}var m=arguments,k,g,l=m[2];if(l&&l!==true){for(k=2;k<m.length;k=k+1){h[m[k]]=j[m[k]]}}else{for(g in j){if(l||!(g in h)){h[g]=j[g]}}f._IEEnumFix(h,j)}},augmentProto:function(g,h){if(!h||!g){throw new Error("Augment failed, verify dependencies.")}var k=[g.prototype,h.prototype],j;for(j=2;j<arguments.length;j=j+1){k.push(arguments[j])}f.augmentObject.apply(this,k)},dump:function(p,k){var n,l,h=[],g="{...}",o="f(){...}",j=", ",m=" => ";if(!f.isObject(p)){return p+""}else{if(p instanceof Date||("nodeType" in p&&"tagName" in p)){return p}else{if(f.isFunction(p)){return o}}}k=(f.isNumber(k))?k:3;if(f.isArray(p)){h.push("[");for(n=0,l=p.length;n<l;n=n+1){if(f.isObject(p[n])){h.push((k>0)?f.dump(p[n],k-1):g)}else{h.push(p[n])}h.push(j)}if(h.length>1){h.pop()}h.push("]")}else{h.push("{");for(n in p){if(f.hasOwnProperty(p,n)){h.push(n+m);if(f.isObject(p[n])){h.push((k>0)?f.dump(p[n],k-1):g)}else{h.push(p[n])}h.push(j)}}if(h.length>1){h.pop()}h.push("}")}return h.join("")},substitute:function(g,v,o){var r,s,t,l,k,h,m=[],u,q="dump",n=" ",w="{",j="}",p;for(;;){r=g.lastIndexOf(w);if(r<0){break}s=g.indexOf(j,r);if(r+1>=s){break}u=g.substring(r+1,s);l=u;h=null;t=l.indexOf(n);if(t>-1){h=l.substring(t+1);l=l.substring(0,t)}k=v[l];if(o){k=o(l,k,h)}if(f.isObject(k)){if(f.isArray(k)){k=f.dump(k,parseInt(h,10))}else{h=h||"";p=h.indexOf(q);if(p>-1){h=h.substring(4)}if(k.toString===a.toString||p>-1){k=f.dump(k,parseInt(h,10))}else{k=k.toString()}}}else{if(!f.isString(k)&&!f.isNumber(k)){k="~-"+m.length+"-~";m[m.length]=u}}g=g.substring(0,r)+k+g.substring(s+1)}for(r=m.length-1;r>=0;r=r-1){g=g.replace(new RegExp("~-"+r+"-~"),"{"+m[r]+"}","g")}return g},trim:function(h){try{return h.replace(/^\s+|\s+$/g,"")}catch(g){return h}},merge:function(){var g={},j=arguments,k=j.length,h;for(h=0;h<k;h=h+1){f.augmentObject(g,j[h],true)}return g},later:function(h,o,g,m,l){h=h||0;o=o||{};var n=g,j=m,k,p;if(f.isString(g)){n=o[g]}if(!n){throw new TypeError("method undefined")}if(!f.isArray(j)){j=[m]}k=function(){n.apply(o,j)};p=(l)?setInterval(k,h):setTimeout(k,h);return{interval:l,cancel:function(){if(this.interval){clearInterval(p)}else{clearTimeout(p)}}}},isValue:function(g){return(f.isObject(g)||f.isString(g)||f.isNumber(g)||f.isBoolean(g))}};f.hasOwnProperty=(a.hasOwnProperty)?function(h,g){return h&&h.hasOwnProperty(g)}:function(h,g){return !f.isUndefined(h[g])&&h.constructor.prototype[g]!==h[g]};d.augmentObject(f,d,true);YAHOO.util.Lang=f;f.augment=f.augmentProto;YAHOO.augment=f.augmentProto;YAHOO.extend=f.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/yahoo/yahoo-min.js")}YAHOO.util.CustomEvent=function(c,d,e,a){this.type=c;this.scope=d||window;this.silent=e;this.signature=a||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var b="_YUICEOnSubscribe";if(c!==b){this.subscribeEvent=new YAHOO.util.CustomEvent(b,this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(a,c,b){if(!a){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(a,c,b)}this.subscribers.push(new YAHOO.util.Subscriber(a,c,b))},unsubscribe:function(d,b){if(!d){return this.unsubscribeAll()}var c=false;for(var f=0,a=this.subscribers.length;f<a;++f){var e=this.subscribers[f];if(e&&e.contains(d,b)){this._delete(f);c=true}}return c},fire:function(){this.lastError=null;var g=[],n=this.subscribers.length;if(!n&&this.silent){return true}var j=[].slice.call(arguments,0),l=true,a,h=false;if(!this.silent){}var b=this.subscribers.slice(),d=YAHOO.util.Event.throwErrors;for(a=0;a<n;++a){var e=b[a];if(!e){h=true}else{if(!this.silent){}var f=e.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var c=null;if(j.length>0){c=j[0]}try{l=e.fn.call(f,c,e.obj)}catch(m){this.lastError=m;if(d){throw m}}}else{try{l=e.fn.call(f,this.type,j,e.obj)}catch(k){this.lastError=k;if(d){throw k}}}if(false===l){if(!this.silent){}break}}}return(l!==false)},unsubscribeAll:function(){var a=this.subscribers.length,b;for(b=a-1;b>-1;b--){this._delete(b)}this.subscribers=[];return a},_delete:function(a){var b=this.subscribers[a];if(b){delete b.fn;delete b.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(a,c,b){this.fn=a;this.obj=YAHOO.lang.isUndefined(c)?null:c;this.overrideContext=b};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext){if(this.overrideContext===true){return this.obj}else{return this.overrideContext}}return a};YAHOO.util.Subscriber.prototype.contains=function(a,b){if(b){return(this.fn==a&&this.obj==b)}else{return(this.fn==a)}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var j=false;var h=[];var g=[];var k=[];var m=[];var b=0;var l=[];var c=[];var d=0;var a={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};var f=YAHOO.env.ua.ie?"focusin":"focus";var e=YAHOO.env.ua.ie?"focusout":"blur";return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var o=this;var n=function(){o._tryPreloadAttach()};this._interval=setInterval(n,this.POLL_INTERVAL)}},onAvailable:function(n,r,p,o,q){var t=(YAHOO.lang.isString(n))?[n]:n;for(var s=0;s<t.length;s=s+1){l.push({id:t[s],fn:r,obj:p,overrideContext:o,checkReady:q})}b=this.POLL_RETRYS;this.startInterval()},onContentReady:function(n,q,p,o){this.onAvailable(n,q,p,o,true)},onDOMReady:function(p,o,n){if(this.DOMReady){setTimeout(function(){var q=window;if(n){if(n===true){q=o}else{q=n}}p.call(q,"DOMReady",[],o)},0)}else{this.DOMReadyEvent.subscribe(p,o,n)}},_addListener:function(y,A,o,u,q,B){if(!o||!o.call){return false}if(this._isValidCollection(y)){var n=true;for(var t=0,r=y.length;t<r;++t){n=this.on(y[t],A,o,u,q)&&n}return n}else{if(YAHOO.lang.isString(y)){var v=this.getEl(y);if(v){y=v}else{this.onAvailable(y,function(){YAHOO.util.Event.on(y,A,o,u,q)});return true}}}if(!y){return false}if("unload"==A&&u!==this){g[g.length]=[y,A,o,u,q];return true}var z=y;if(q){if(q===true){z=u}else{z=q}}var x=function(D){return o.call(z,YAHOO.util.Event.getEvent(D,y),u)};var C=[y,A,o,x,z,u,q];var s=h.length;h[s]=C;if(this.useLegacyEvent(y,A)){var w=this.getLegacyIndex(y,A);if(w==-1||y!=k[w][0]){w=k.length;c[y.id+A]=w;k[w]=[y,A,y["on"+A]];m[w]=[];y["on"+A]=function(D){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(D),w)}}m[w].push(C)}else{try{this._simpleAdd(y,A,x,B)}catch(p){this.lastError=p;this.removeListener(y,A,o);return false}}return true},addListener:function(q,n,r,p,o){return this._addListener(q,n,r,p,o,false)},addFocusListener:function(p,q,o,n){return this._addListener(p,f,q,o,n,true)},removeFocusListener:function(n,o){return this.removeListener(n,f,o)},addBlurListener:function(p,q,o,n){return this._addListener(p,e,q,o,n,true)},removeBlurListener:function(n,o){return this.removeListener(n,e,o)},fireLegacyEvent:function(r,t){var p=true,w,n,o,v,q;n=m[t].slice();for(var u=0,s=n.length;u<s;++u){o=n[u];if(o&&o[this.WFN]){v=o[this.ADJ_SCOPE];q=o[this.WFN].call(v,r);p=(p&&q)}}w=k[t];if(w&&w[2]){w[2](r)}return p},getLegacyIndex:function(o,n){var p=this.generateId(o)+n;if(typeof c[p]=="undefined"){return -1}else{return c[p]}},useLegacyEvent:function(o,n){return(this.webkit&&this.webkit<419&&("click"==n||"dblclick"==n))},removeListener:function(x,y,p){var u,r,n;if(typeof x=="string"){x=this.getEl(x)}else{if(this._isValidCollection(x)){var o=true;for(u=x.length-1;u>-1;u--){o=(this.removeListener(x[u],y,p)&&o)}return o}}if(!p||!p.call){return this.purgeElement(x,false,y)}if("unload"==y){for(u=g.length-1;u>-1;u--){n=g[u];if(n&&n[0]==x&&n[1]==y&&n[2]==p){g.splice(u,1);return true}}return false}var t=null;var s=arguments[3];if("undefined"===typeof s){s=this._getCacheIndex(x,y,p)}if(s>=0){t=h[s]}if(!x||!t){return false}if(this.useLegacyEvent(x,y)){var v=this.getLegacyIndex(x,y);var w=m[v];if(w){for(u=0,r=w.length;u<r;++u){n=w[u];if(n&&n[this.EL]==x&&n[this.TYPE]==y&&n[this.FN]==p){w.splice(u,1);break}}}}else{try{this._simpleRemove(x,y,t[this.WFN],false)}catch(q){this.lastError=q;return false}}delete h[s][this.WFN];delete h[s][this.FN];h.splice(s,1);return true},getTarget:function(n,o){var p=n.target||n.srcElement;return this.resolveTextNode(p)},resolveTextNode:function(n){try{if(n&&3==n.nodeType){return n.parentNode}}catch(o){}return n},getPageX:function(n){var o=n.pageX;if(!o&&0!==o){o=n.clientX||0;if(this.isIE){o+=this._getScrollLeft()}}return o},getPageY:function(o){var n=o.pageY;if(!n&&0!==n){n=o.clientY||0;if(this.isIE){n+=this._getScrollTop()}}return n},getXY:function(n){return[this.getPageX(n),this.getPageY(n)]},getRelatedTarget:function(n){var o=n.relatedTarget;if(!o){if(n.type=="mouseout"){o=n.toElement}else{if(n.type=="mouseover"){o=n.fromElement}}}return this.resolveTextNode(o)},getTime:function(n){if(!n.time){var o=new Date().getTime();try{n.time=o}catch(p){this.lastError=p;return o}}return n.time},stopEvent:function(n){this.stopPropagation(n);this.preventDefault(n)},stopPropagation:function(n){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}},preventDefault:function(n){if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}},getEvent:function(o,q){var p=o||window.event;if(!p){var n=this.getEvent.caller;while(n){p=n.arguments[0];if(p&&Event==p.constructor){break}n=n.caller}}return p},getCharCode:function(n){var o=n.keyCode||n.charCode||0;if(YAHOO.env.ua.webkit&&(o in a)){o=a[o]}return o},_getCacheIndex:function(o,n,p){for(var q=0,r=h.length;q<r;q=q+1){var s=h[q];if(s&&s[this.FN]==p&&s[this.EL]==o&&s[this.TYPE]==n){return q}}return -1},generateId:function(o){var n=o.id;if(!n){n="yuievtautoid-"+d;++d;o.id=n}return n},_isValidCollection:function(n){try{return(n&&typeof n!=="string"&&n.length&&!n.tagName&&!n.alert&&typeof n[0]!=="undefined")}catch(o){return false}},elCache:{},getEl:function(n){return(typeof n==="string")?document.getElementById(n):n},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(n){if(!j){j=true;var o=YAHOO.util.Event;o._ready();o._tryPreloadAttach()}},_ready:function(n){var o=YAHOO.util.Event;if(!o.DOMReady){o.DOMReady=true;o.DOMReadyEvent.fire();o._simpleRemove(document,"DOMContentLoaded",o._ready)}},_tryPreloadAttach:function(){if(l.length===0){b=0;if(this._interval){clearInterval(this._interval);this._interval=null}return}if(this.locked){return}if(this.isIE){if(!this.DOMReady){this.startInterval();return}}this.locked=true;var o=!j;if(!o){o=(b>0&&l.length>0)}var p=[];var n=function(w,v){var x=w;if(v.overrideContext){if(v.overrideContext===true){x=v.obj}else{x=v.overrideContext}}v.fn.call(x,v.obj)};var t,u,q,r,s=[];for(t=0,u=l.length;t<u;t=t+1){q=l[t];if(q){r=this.getEl(q.id);if(r){if(q.checkReady){if(j||r.nextSibling||!o){s.push(q);l[t]=null}}else{n(r,q);l[t]=null}}else{p.push(q)}}}for(t=0,u=s.length;t<u;t=t+1){q=s[t];n(this.getEl(q.id),q)}b--;if(o){for(t=l.length-1;t>-1;t--){q=l[t];if(!q||!q.id){l.splice(t,1)}}this.startInterval()}else{if(this._interval){clearInterval(this._interval);this._interval=null}}this.locked=false},purgeElement:function(q,p,n){var s=(YAHOO.lang.isString(q))?this.getEl(q):q;var o=this.getListeners(s,n),r,u;if(o){for(r=o.length-1;r>-1;r--){var t=o[r];this.removeListener(s,t.type,t.fn)}}if(p&&s&&s.childNodes){for(r=0,u=s.childNodes.length;r<u;++r){this.purgeElement(s.childNodes[r],p,n)}}},getListeners:function(u,w){var r=[],v;if(!w){v=[h,g]}else{if(w==="unload"){v=[g]}else{v=[h]}}var p=(YAHOO.lang.isString(u))?this.getEl(u):u;for(var s=0;s<v.length;s=s+1){var n=v[s];if(n){for(var q=0,o=n.length;q<o;++q){var t=n[q];if(t&&t[this.EL]===p&&(!w||w===t[this.TYPE])){r.push({type:t[this.TYPE],fn:t[this.FN],obj:t[this.OBJ],adjust:t[this.OVERRIDE],scope:t[this.ADJ_SCOPE],index:q})}}}}return(r.length)?r:null},_unload:function(o){var u=YAHOO.util.Event,r,s,t,p,q,n=g.slice(),v;for(r=0,p=g.length;r<p;++r){t=n[r];if(t){v=window;if(t[u.ADJ_SCOPE]){if(t[u.ADJ_SCOPE]===true){v=t[u.UNLOAD_OBJ]}else{v=t[u.ADJ_SCOPE]}}t[u.FN].call(v,u.getEvent(o,t[u.EL]),t[u.UNLOAD_OBJ]);n[r]=null}}t=null;v=null;g=null;if(h){for(s=h.length-1;s>-1;s--){t=h[s];if(t){u.removeListener(t[u.EL],t[u.TYPE],t[u.FN],s)}}t=null}k=null;u._simpleRemove(window,"unload",u._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var o=document.documentElement,n=document.body;if(o&&(o.scrollTop||o.scrollLeft)){return[o.scrollTop,o.scrollLeft]}else{if(n){return[n.scrollTop,n.scrollLeft]}else{return[0,0]}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(o,n,p,q){o.addEventListener(n,p,(q))}}else{if(window.attachEvent){return function(o,n,p,q){o.attachEvent("on"+n,p)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(o,n,p,q){o.removeEventListener(n,p,(q))}}else{if(window.detachEvent){return function(o,n,p){o.detachEvent("on"+n,p)}}else{return function(){}}}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var b=document.createElement("p");a._dri=setInterval(function(){try{b.doScroll("left");clearInterval(a._dri);a._dri=null;a._ready();b=null}catch(c){}},a.POLL_INTERVAL)}else{if(a.webkit&&a.webkit<525){a._dri=setInterval(function(){var c=document.readyState;if("loaded"==c||"complete"==c){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL)}else{a._simpleAdd(document,"DOMContentLoaded",a._ready)}}a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,e,b,c){this.__yui_events=this.__yui_events||{};var d=this.__yui_events[a];if(d){d.subscribe(e,b,c)}else{this.__yui_subscribers=this.__yui_subscribers||{};var f=this.__yui_subscribers;if(!f[a]){f[a]=[]}f[a].push({fn:e,obj:b,overrideContext:c})}},unsubscribe:function(f,d,b){this.__yui_events=this.__yui_events||{};var a=this.__yui_events;if(f){var c=a[f];if(c){return c.unsubscribe(d,b)}}else{var g=true;for(var e in a){if(YAHOO.lang.hasOwnProperty(a,e)){g=g&&a[e].unsubscribe(d,b)}}return g}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(g,a){this.__yui_events=this.__yui_events||{};var d=a||{};var e=this.__yui_events;if(e[g]){}else{var f=d.scope||this;var j=(d.silent);var c=new YAHOO.util.CustomEvent(g,f,j,YAHOO.util.CustomEvent.FLAT);e[g]=c;if(d.onSubscribeCallback){c.subscribeEvent.subscribe(d.onSubscribeCallback)}this.__yui_subscribers=this.__yui_subscribers||{};var h=this.__yui_subscribers[g];if(h){for(var b=0;b<h.length;++b){c.subscribe(h[b].fn,h[b].obj,h[b].overrideContext)}}}return e[g]},fireEvent:function(d,e,a,f){this.__yui_events=this.__yui_events||{};var b=this.__yui_events[d];if(!b){return null}var g=[];for(var c=1;c<arguments.length;++c){g.push(arguments[c])}return b.fire.apply(b,g)},hasEvent:function(a){if(this.__yui_events){if(this.__yui_events[a]){return true}}return false}};(function(){var a=YAHOO.util.Event,b=YAHOO.lang;YAHOO.util.KeyListener=function(j,d,h,g){if(!j){}else{if(!d){}else{if(!h){}}}if(!g){g=YAHOO.util.KeyListener.KEYDOWN}var f=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(b.isString(j)){j=document.getElementById(j)}if(b.isFunction(h)){f.subscribe(h)}else{f.subscribe(h.fn,h.scope,h.correctScope)}function e(n,o){if(!d.shift){d.shift=false}if(!d.alt){d.alt=false}if(!d.ctrl){d.ctrl=false}if(n.shiftKey==d.shift&&n.altKey==d.alt&&n.ctrlKey==d.ctrl){var m,p=d.keys,k;if(YAHOO.lang.isArray(p)){for(var l=0;l<p.length;l++){m=p[l];k=a.getCharCode(n);if(m==k){f.fire(k,n);break}}}else{k=a.getCharCode(n);if(p==k){f.fire(k,n)}}}}this.enable=function(){if(!this.enabled){a.on(j,g,e);this.enabledEvent.fire(d)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(j,g,e);this.disabledEvent.fire(d)}this.enabled=false};this.toString=function(){return"KeyListener ["+d.keys+"] "+j.tagName+(j.id?"["+j.id+"]":"")}};var c=YAHOO.util.KeyListener;c.KEYDOWN="keydown";c.KEYUP="keyup";c.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/event/event-min.js")}YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(b){var c=YAHOO.util.Event.getTarget(b),a=c.nodeName.toLowerCase();if((a==="input"||a==="button")&&(c.type&&c.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(c.name)+"="+encodeURIComponent(c.value)}});return true}return false})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var c,a;try{a=new XMLHttpRequest();c={conn:a,tId:b}}catch(d){for(var f=0;f<this._msxml_progid.length;++f){try{a=new ActiveXObject(this._msxml_progid[f]);c={conn:a,tId:b};break}catch(e){}}}finally{return c}},getConnectionObject:function(a){var c;var b=this._transaction_id;try{if(!a){c=this.createXhrObject(b)}else{c={};c.tId=b;c.isUpload=true}if(c){this._transaction_id++}}catch(d){}finally{return c}},asyncRequest:function(b,e,c,a){var d=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var f=(c&&c.argument)?c.argument:null;if(!d){return null}else{if(c&&c.customevents){this.initCustomEvents(d,c)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,c,e,a);return d}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(c&&c.cache===false)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}d.conn.open(b,e,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,c);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,f);if(d.startEvent){d.startEvent.fire(d,f)}return d}},initCustomEvents:function(a,b){var c;for(c in b.customevents){if(this._customEvents[c][0]){a[this._customEvents[c][0]]=new YAHOO.util.CustomEvent(this._customEvents[c][1],(b.scope)?b.scope:null);a[this._customEvents[c][0]].subscribe(b.customevents[c])}}},handleReadyState:function(c,b){var d=this;var a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[c.tId]=window.setTimeout(function(){d.abort(c,b,true)},b.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);delete d._poll[c.tId];if(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);delete d._timeOut[c.tId]}d.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}d.handleTransactionResponse(c,b)}},this._polling_interval)},handleTransactionResponse:function(c,b,a){var e,f;var g=(b&&b.argument)?b.argument:null;try{if(c.conn.status!==undefined&&c.conn.status!==0){e=c.conn.status}else{e=13030}}catch(d){e=13030}if(e>=200&&e<300||e===1223){f=this.createResponseObject(c,g);if(b&&b.success){if(!b.scope){b.success(f)}else{b.success.apply(b.scope,[f])}}this.successEvent.fire(f);if(c.successEvent){c.successEvent.fire(f)}}else{switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:f=this.createExceptionObject(c.tId,g,(a?a:false));if(b&&b.failure){if(!b.scope){b.failure(f)}else{b.failure.apply(b.scope,[f])}}break;default:f=this.createResponseObject(c,g);if(b&&b.failure){if(!b.scope){b.failure(f)}else{b.failure.apply(b.scope,[f])}}}this.failureEvent.fire(f);if(c.failureEvent){c.failureEvent.fire(f)}}this.releaseObject(c);f=null},createResponseObject:function(d,g){var a={};var e={};try{var b=d.conn.getAllResponseHeaders();var h=b.split("\n");for(var j=0;j<h.length;j++){var c=h[j].indexOf(":");if(c!=-1){e[h[j].substring(0,c)]=h[j].substring(c+2)}}}catch(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;if(g){a.argument=g}return a},createExceptionObject:function(b,f,a){var d=0;var c="communication failure";var g=-1;var h="transaction aborted";var e={};e.tId=b;if(a){e.status=g;e.statusText=h}else{e.status=d;e.statusText=c}if(f){e.argument=f}return e},initHeader:function(a,b,c){var d=(c)?this._default_headers:this._http_headers;d[a]=b;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}delete this._http_headers;this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false},setForm:function(h,n,b){var j,c,k,m,e,l=false,p=[],f=0,q,o,a,g,d;this.resetFormState();if(typeof h=="string"){j=(document.getElementById(h)||document.forms[h])}else{if(typeof h=="object"){j=h}else{return}}if(n){this.createFrame(b?b:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=j;return}for(q=0,o=j.elements.length;q<o;++q){c=j.elements[q];e=c.disabled;k=c.name;if(!e&&k){k=encodeURIComponent(k)+"=";m=encodeURIComponent(c.value);switch(c.type){case"select-one":if(c.selectedIndex>-1){d=c.options[c.selectedIndex];p[f++]=k+encodeURIComponent((d.attributes.value&&d.attributes.value.specified)?d.value:d.text)}break;case"select-multiple":if(c.selectedIndex>-1){for(a=c.selectedIndex,g=c.options.length;a<g;++a){d=c.options[a];if(d.selected){p[f++]=k+encodeURIComponent((d.attributes.value&&d.attributes.value.specified)?d.value:d.text)}}}break;case"radio":case"checkbox":if(c.checked){p[f++]=k+m}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(l===false){if(this._hasSubmitListener&&this._submitElementValue){p[f++]=this._submitElementValue}l=true}break;default:p[f++]=k+m}}}this._isFormSubmit=true;this._sFormData=p.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""},createFrame:function(a){var c="yuiIO"+this._transaction_id;var b;if(YAHOO.env.ua.ie){b=document.createElement('<iframe id="'+c+'" name="'+c+'" />');if(typeof a=="boolean"){b.src="javascript:false"}}else{b=document.createElement("iframe");b.id=c;b.name=c}b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";document.body.appendChild(b)},appendPostData:function(a){var c=[],e=a.split("&"),d,b;for(d=0;d<e.length;d++){b=e[d].indexOf("=");if(b!=-1){c[d]=document.createElement("input");c[d].type="hidden";c[d].name=decodeURIComponent(e[d].substring(0,b));c[d].value=decodeURIComponent(e[d].substring(b+1));this._formNode.appendChild(c[d])}}return c},uploadFile:function(a,f,p,b){var l="yuiIO"+a.tId,k="multipart/form-data",h=document.getElementById(l),e=this,j=(f&&f.argument)?f.argument:null,g,m,c,n;var d={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",p);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",l);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",k)}else{this._formNode.setAttribute("enctype",k)}if(b){g=this.appendPostData(b)}this._formNode.submit();this.startEvent.fire(a,j);if(a.startEvent){a.startEvent.fire(a,j)}if(f&&f.timeout){this._timeOut[a.tId]=window.setTimeout(function(){e.abort(a,f,true)},f.timeout)}if(g&&g.length>0){for(m=0;m<g.length;m++){this._formNode.removeChild(g[m])}}for(c in d){if(YAHOO.lang.hasOwnProperty(d,c)){if(d[c]){this._formNode.setAttribute(c,d[c])}else{this._formNode.removeAttribute(c)}}}this.resetFormState();var o=function(){if(f&&f.timeout){window.clearTimeout(e._timeOut[a.tId]);delete e._timeOut[a.tId]}e.completeEvent.fire(a,j);if(a.completeEvent){a.completeEvent.fire(a,j)}n={tId:a.tId,argument:f.argument};try{n.responseText=h.contentWindow.document.body?h.contentWindow.document.body.innerHTML:h.contentWindow.document.documentElement.textContent;n.responseXML=h.contentWindow.document.XMLDocument?h.contentWindow.document.XMLDocument:h.contentWindow.document}catch(q){}if(f&&f.upload){if(!f.scope){f.upload(n)}else{f.upload.apply(f.scope,[n])}}e.uploadEvent.fire(n);if(a.uploadEvent){a.uploadEvent.fire(n)}YAHOO.util.Event.removeListener(h,"load",o);setTimeout(function(){document.body.removeChild(h);e.releaseObject(a)},100)};YAHOO.util.Event.addListener(h,"load",o)},abort:function(d,b,a){var e;var g=(b&&b.argument)?b.argument:null;if(d&&d.conn){if(this.isCallInProgress(d)){d.conn.abort();window.clearInterval(this._poll[d.tId]);delete this._poll[d.tId];if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{if(d&&d.isUpload===true){var f="yuiIO"+d.tId;var c=document.getElementById(f);if(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{e=false}}if(e===true){this.abortEvent.fire(d,g);if(d.abortEvent){d.abortEvent.fire(d,g)}this.handleTransactionResponse(d,b,true)}return e},isCallInProgress:function(b){if(b&&b.conn){return b.conn.readyState!==4&&b.conn.readyState!==0}else{if(b&&b.isUpload===true){var a="yuiIO"+b.tId;return document.getElementById(a)?true:false}else{return false}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/connection/connection-min.js")}if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var a=arguments,b=null,d,e,c;for(d=0;d<a.length;d=d+1){c=(""+a[d]).split(".");b=YAHOO;for(e=(c[0]=="YAHOO")?1:0;e<c.length;e=e+1){b[c[e]]=b[c[e]]||{};b=b[c[e]]}}return b};YAHOO.log=function(b,a,c){var d=YAHOO.widget.Logger;if(d&&d.log){return d.log(b,a,c)}else{return false}};YAHOO.register=function(d,j,a){var e=YAHOO.env.modules,c,f,g,h,b;if(!e[d]){e[d]={versions:[],builds:[]}}c=e[d];f=a.version;g=a.build;h=YAHOO.env.listeners;c.name=d;c.version=f;c.build=g;c.versions.push(f);c.builds.push(g);c.mainClass=j;for(b=0;b<h.length;b=b+1){h[b](c)}if(j){j.VERSION=f;j.BUILD=g}else{YAHOO.log("mainClass is undefined for module "+d,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.ua=function(){var b={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:0},c=navigator.userAgent,a;if((/KHTML/).test(c)){b.webkit=1}a=c.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){b.webkit=parseFloat(a[1]);if(/ Mobile\//.test(c)){b.mobile="Apple"}else{a=c.match(/NokiaN[^\/]*/);if(a){b.mobile=a[0]}}a=c.match(/AdobeAIR\/([^\s]*)/);if(a){b.air=a[0]}}if(!b.webkit){a=c.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){b.opera=parseFloat(a[1]);a=c.match(/Opera Mini[^;]*/);if(a){b.mobile=a[0]}}else{a=c.match(/MSIE\s([^;]*)/);if(a&&a[1]){b.ie=parseFloat(a[1])}else{a=c.match(/Gecko\/([^\s]*)/);if(a){b.gecko=1;a=c.match(/rv:([^\s\)]*)/);if(a&&a[1]){b.gecko=parseFloat(a[1])}}}}}a=c.match(/Caja\/([^\s]*)/);if(a&&a[1]){b.caja=parseFloat(a[1])}return b}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var d=YAHOO_config.listener,a=YAHOO.env.listeners,b=true,c;if(d){for(c=0;c<a.length;c=c+1){if(a[c]==d){b=false;break}}if(b){a.push(d)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var f=YAHOO.lang,b="[object Array]",e="[object Function]",a=Object.prototype,c=["toString","valueOf"],d={isArray:function(g){return a.toString.apply(g)===b},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return a.toString.apply(g)===e},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return(g&&(typeof g==="object"||f.isFunction(g)))||false},isString:function(g){return typeof g==="string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(j,k){var l,g,h;for(l=0;l<c.length;l=l+1){g=c[l];h=k[g];if(f.isFunction(h)&&h!=a[g]){j[g]=h}}}:function(){},extend:function(h,g,j){if(!g||!h){throw new Error("extend failed, please check that all dependencies are included.")}var k=function(){},l;k.prototype=g.prototype;h.prototype=new k();h.prototype.constructor=h;h.superclass=g.prototype;if(g.prototype.constructor==a.constructor){g.prototype.constructor=g}if(j){for(l in j){if(f.hasOwnProperty(j,l)){h.prototype[l]=j[l]}}f._IEEnumFix(h.prototype,j)}},augmentObject:function(h,j){if(!j||!h){throw new Error("Absorb failed, verify dependencies.")}var m=arguments,k,g,l=m[2];if(l&&l!==true){for(k=2;k<m.length;k=k+1){h[m[k]]=j[m[k]]}}else{for(g in j){if(l||!(g in h)){h[g]=j[g]}}f._IEEnumFix(h,j)}},augmentProto:function(g,h){if(!h||!g){throw new Error("Augment failed, verify dependencies.")}var k=[g.prototype,h.prototype],j;for(j=2;j<arguments.length;j=j+1){k.push(arguments[j])}f.augmentObject.apply(this,k)},dump:function(p,k){var n,l,h=[],g="{...}",o="f(){...}",j=", ",m=" => ";if(!f.isObject(p)){return p+""}else{if(p instanceof Date||("nodeType" in p&&"tagName" in p)){return p}else{if(f.isFunction(p)){return o}}}k=(f.isNumber(k))?k:3;if(f.isArray(p)){h.push("[");for(n=0,l=p.length;n<l;n=n+1){if(f.isObject(p[n])){h.push((k>0)?f.dump(p[n],k-1):g)}else{h.push(p[n])}h.push(j)}if(h.length>1){h.pop()}h.push("]")}else{h.push("{");for(n in p){if(f.hasOwnProperty(p,n)){h.push(n+m);if(f.isObject(p[n])){h.push((k>0)?f.dump(p[n],k-1):g)}else{h.push(p[n])}h.push(j)}}if(h.length>1){h.pop()}h.push("}")}return h.join("")},substitute:function(g,v,o){var r,s,t,l,k,h,m=[],u,q="dump",n=" ",w="{",j="}",p;for(;;){r=g.lastIndexOf(w);if(r<0){break}s=g.indexOf(j,r);if(r+1>=s){break}u=g.substring(r+1,s);l=u;h=null;t=l.indexOf(n);if(t>-1){h=l.substring(t+1);l=l.substring(0,t)}k=v[l];if(o){k=o(l,k,h)}if(f.isObject(k)){if(f.isArray(k)){k=f.dump(k,parseInt(h,10))}else{h=h||"";p=h.indexOf(q);if(p>-1){h=h.substring(4)}if(k.toString===a.toString||p>-1){k=f.dump(k,parseInt(h,10))}else{k=k.toString()}}}else{if(!f.isString(k)&&!f.isNumber(k)){k="~-"+m.length+"-~";m[m.length]=u}}g=g.substring(0,r)+k+g.substring(s+1)}for(r=m.length-1;r>=0;r=r-1){g=g.replace(new RegExp("~-"+r+"-~"),"{"+m[r]+"}","g")}return g},trim:function(h){try{return h.replace(/^\s+|\s+$/g,"")}catch(g){return h}},merge:function(){var g={},j=arguments,k=j.length,h;for(h=0;h<k;h=h+1){f.augmentObject(g,j[h],true)}return g},later:function(h,o,g,m,l){h=h||0;o=o||{};var n=g,j=m,k,p;if(f.isString(g)){n=o[g]}if(!n){throw new TypeError("method undefined")}if(!f.isArray(j)){j=[m]}k=function(){n.apply(o,j)};p=(l)?setInterval(k,h):setTimeout(k,h);return{interval:l,cancel:function(){if(this.interval){clearInterval(p)}else{clearTimeout(p)}}}},isValue:function(g){return(f.isObject(g)||f.isString(g)||f.isNumber(g)||f.isBoolean(g))}};f.hasOwnProperty=(a.hasOwnProperty)?function(h,g){return h&&h.hasOwnProperty(g)}:function(h,g){return !f.isUndefined(h[g])&&h.constructor.prototype[g]!==h[g]};d.augmentObject(f,d,true);YAHOO.util.Lang=f;f.augment=f.augmentProto;YAHOO.augment=f.augmentProto;YAHOO.extend=f.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.7.0",build:"1799"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var ao=YAHOO.util,ai=YAHOO.lang,aE=YAHOO.env.ua,at=YAHOO.lang.trim,aN={},aJ={},ag=/^t(?:able|d|h)$/i,y=/color$/i,aj=window.document,z=aj.documentElement,aM="ownerDocument",aD="defaultView",av="documentElement",ax="compatMode",aP="offsetLeft",ae="offsetTop",aw="offsetParent",x="parentNode",aF="nodeType",aq="tagName",af="scrollLeft",aI="scrollTop",ad="getBoundingClientRect",au="getComputedStyle",aQ="currentStyle",ah="CSS1Compat",aO="BackCompat",aK="class",an="className",ak="",ar=" ",ay="(?:^|\\s)",aG="(?= |$)",Y="g",aB="position",aL="fixed",G="relative",aH="left",aC="top",az="medium",aA="borderLeftWidth",ac="borderTopWidth",ap=aE.opera,al=aE.webkit,am=aE.gecko,aa=aE.ie;ao.Dom={CUSTOM_ATTRIBUTES:(!z.hasAttribute)?{"for":"htmlFor","class":an}:{htmlFor:"for",className:aK},get:function(f){var e,d,c,a,b;if(f){if(f[aF]||f.item){return f}if(typeof f==="string"){e=f;f=aj.getElementById(f);if(f&&f.id===e){return f}else{if(f&&aj.all){f=null;d=aj.all[e];for(a=0,b=d.length;a<b;++a){if(d[a].id===e){return d[a]}}}}return f}if(f.DOM_EVENTS){f=f.get("element")}if("length" in f){c=[];for(a=0,b=f.length;a<b;++a){c[c.length]=ao.Dom.get(f[a])}return c}return f}return null},getComputedStyle:function(a,b){if(window[au]){return a[aM][aD][au](a,null)[b]}else{if(a[aQ]){return ao.Dom.IE_ComputedStyle.get(a,b)}}},getStyle:function(a,b){return ao.Dom.batch(a,ao.Dom._getStyle,b)},_getStyle:function(){if(window[au]){return function(b,d){d=(d==="float")?d="cssFloat":ao.Dom._toCamel(d);var a=b.style[d],c;if(!a){c=b[aM][aD][au](b,null);if(c){a=c[d]}}return a}}else{if(z[aQ]){return function(b,e){var a;switch(e){case"opacity":a=100;try{a=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{a=b.filters("alpha").opacity}catch(c){}}return a/100;case"float":e="styleFloat";default:e=ao.Dom._toCamel(e);a=b[aQ]?b[aQ][e]:null;return(b.style[e]||a)}}}}}(),setStyle:function(b,c,a){ao.Dom.batch(b,ao.Dom._setStyle,{prop:c,val:a})},_setStyle:function(){if(aa){return function(c,b){var a=ao.Dom._toCamel(b.prop),d=b.val;if(c){switch(a){case"opacity":if(ai.isString(c.style.filter)){c.style.filter="alpha(opacity="+d*100+")";if(!c[aQ]||!c[aQ].hasLayout){c.style.zoom=1}}break;case"float":a="styleFloat";default:c.style[a]=d}}else{}}}else{return function(c,b){var a=ao.Dom._toCamel(b.prop),d=b.val;if(c){if(a=="float"){a="cssFloat"}c.style[a]=d}else{}}}}(),getXY:function(a){return ao.Dom.batch(a,ao.Dom._getXY)},_canPosition:function(a){return(ao.Dom._getStyle(a,"display")!=="none"&&ao.Dom._inDoc(a))},_getXY:function(){if(aj[av][ad]){return function(k){var j,a,h,c,d,e,f,m,l,g=Math.floor,b=false;if(ao.Dom._canPosition(k)){h=k[ad]();c=k[aM];j=ao.Dom.getDocumentScrollLeft(c);a=ao.Dom.getDocumentScrollTop(c);b=[g(h[aH]),g(h[aC])];if(aa&&aE.ie<8){d=2;e=2;f=c[ax];m=ab(c[av],aA);l=ab(c[av],ac);if(aE.ie===6){if(f!==aO){d=0;e=0}}if((f==aO)){if(m!==az){d=parseInt(m,10)}if(l!==az){e=parseInt(l,10)}}b[0]-=d;b[1]-=e}if((a||j)){b[0]+=j;b[1]+=a}b[0]=g(b[0]);b[1]=g(b[1])}else{}return b}}else{return function(h){var a,g,f,d,c,e=false,b=h;if(ao.Dom._canPosition(h)){e=[h[aP],h[ae]];a=ao.Dom.getDocumentScrollLeft(h[aM]);g=ao.Dom.getDocumentScrollTop(h[aM]);c=((am||aE.webkit>519)?true:false);while((b=b[aw])){e[0]+=b[aP];e[1]+=b[ae];if(c){e=ao.Dom._calcBorders(b,e)}}if(ao.Dom._getStyle(h,aB)!==aL){b=h;while((b=b[x])&&b[aq]){f=b[aI];d=b[af];if(am&&(ao.Dom._getStyle(b,"overflow")!=="visible")){e=ao.Dom._calcBorders(b,e)}if(f||d){e[0]-=d;e[1]-=f}}e[0]+=a;e[1]+=g}else{if(ap){e[0]-=a;e[1]-=g}else{if(al||am){e[0]+=a;e[1]+=g}}}e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1])}else{}return e}}}(),getX:function(a){var b=function(c){return ao.Dom.getXY(c)[0]};return ao.Dom.batch(a,b,ao.Dom,true)},getY:function(a){var b=function(c){return ao.Dom.getXY(c)[1]};return ao.Dom.batch(a,b,ao.Dom,true)},setXY:function(b,a,c){ao.Dom.batch(b,ao.Dom._setXY,{pos:a,noRetry:c})},_setXY:function(j,f){var e=ao.Dom._getStyle(j,aB),g=ao.Dom.setStyle,b=f.pos,a=f.noRetry,d=[parseInt(ao.Dom.getComputedStyle(j,aH),10),parseInt(ao.Dom.getComputedStyle(j,aC),10)],c,h;if(e=="static"){e=G;g(j,aB,e)}c=ao.Dom._getXY(j);if(!b||c===false){return false}if(isNaN(d[0])){d[0]=(e==G)?0:j[aP]}if(isNaN(d[1])){d[1]=(e==G)?0:j[ae]}if(b[0]!==null){g(j,aH,b[0]-c[0]+d[0]+"px")}if(b[1]!==null){g(j,aC,b[1]-c[1]+d[1]+"px")}if(!a){h=ao.Dom._getXY(j);if((b[0]!==null&&h[0]!=b[0])||(b[1]!==null&&h[1]!=b[1])){ao.Dom._setXY(j,{pos:b,noRetry:true})}}},setX:function(b,a){ao.Dom.setXY(b,[a,null])},setY:function(a,b){ao.Dom.setXY(a,[null,b])},getRegion:function(a){var b=function(c){var d=false;if(ao.Dom._canPosition(c)){d=ao.Region.getRegion(c)}else{}return d};return ao.Dom.batch(a,b,ao.Dom,true)},getClientWidth:function(){return ao.Dom.getViewportWidth()},getClientHeight:function(){return ao.Dom.getViewportHeight()},getElementsByClassName:function(f,b,e,c,k,d){f=ai.trim(f);b=b||"*";e=(e)?ao.Dom.get(e):null||aj;if(!e){return[]}var a=[],l=e.getElementsByTagName(b),h=ao.Dom.hasClass;for(var j=0,g=l.length;j<g;++j){if(h(l[j],f)){a[a.length]=l[j]}}if(c){ao.Dom.batch(a,c,k,d)}return a},hasClass:function(b,a){return ao.Dom.batch(b,ao.Dom._hasClass,a)},_hasClass:function(a,c){var b=false,d;if(a&&c){d=ao.Dom.getAttribute(a,an)||ak;if(c.exec){b=c.test(d)}else{b=c&&(ar+d+ar).indexOf(ar+c+ar)>-1}}else{}return b},addClass:function(b,a){return ao.Dom.batch(b,ao.Dom._addClass,a)},_addClass:function(a,c){var b=false,d;if(a&&c){d=ao.Dom.getAttribute(a,an)||ak;if(!ao.Dom._hasClass(a,c)){ao.Dom.setAttribute(a,an,at(d+ar+c));b=true}}else{}return b},removeClass:function(b,a){return ao.Dom.batch(b,ao.Dom._removeClass,a)},_removeClass:function(f,a){var e=false,d,c,b;if(f&&a){d=ao.Dom.getAttribute(f,an)||ak;ao.Dom.setAttribute(f,an,d.replace(ao.Dom._getClassRegex(a),ak));c=ao.Dom.getAttribute(f,an);if(d!==c){ao.Dom.setAttribute(f,an,at(c));e=true;if(ao.Dom.getAttribute(f,an)===""){b=(f.hasAttribute&&f.hasAttribute(aK))?aK:an;f.removeAttribute(b)}}}else{}return e},replaceClass:function(a,c,b){return ao.Dom.batch(a,ao.Dom._replaceClass,{from:c,to:b})},_replaceClass:function(g,a){var f,c,e,b=false,d;if(g&&a){c=a.from;e=a.to;if(!e){b=false}else{if(!c){b=ao.Dom._addClass(g,a.to)}else{if(c!==e){d=ao.Dom.getAttribute(g,an)||ak;f=(ar+d.replace(ao.Dom._getClassRegex(c),ar+e)).split(ao.Dom._getClassRegex(e));f.splice(1,0,ar+e);ao.Dom.setAttribute(g,an,at(f.join(ak)));b=true}}}}else{}return b},generateId:function(b,a){a=a||"yui-gen";var c=function(e){if(e&&e.id){return e.id}var d=a+YAHOO.env._id_counter++;if(e){if(e[aM].getElementById(d)){return ao.Dom.generateId(e,d+a)}e.id=d}return d};return ao.Dom.batch(b,c,ao.Dom,true)||c.apply(ao.Dom,arguments)},isAncestor:function(c,a){c=ao.Dom.get(c);a=ao.Dom.get(a);var b=false;if((c&&a)&&(c[aF]&&a[aF])){if(c.contains&&c!==a){b=c.contains(a)}else{if(c.compareDocumentPosition){b=!!(c.compareDocumentPosition(a)&16)}}}else{}return b},inDocument:function(a,b){return ao.Dom._inDoc(ao.Dom.get(a),b)},_inDoc:function(c,a){var b=false;if(c&&c[aq]){a=a||c[aM];b=ao.Dom.isAncestor(a[av],c)}else{}return b},getElementsBy:function(a,b,f,d,j,e,c){b=b||"*";f=(f)?ao.Dom.get(f):null||aj;if(!f){return[]}var k=[],l=f.getElementsByTagName(b);for(var h=0,g=l.length;h<g;++h){if(a(l[h])){if(c){k=l[h];break}else{k[k.length]=l[h]}}}if(d){ao.Dom.batch(k,d,j,e)}return k},getElementBy:function(a,b,c){return ao.Dom.getElementsBy(a,b,c,null,null,null,true)},batch:function(a,c,f,e){var g=[],d=(e)?f:window;a=(a&&(a[aq]||a.item))?a:ao.Dom.get(a);if(a&&c){if(a[aq]||a.length===undefined){return c.call(d,a,f)}for(var b=0;b<a.length;++b){g[g.length]=c.call(d,a[b],f)}}else{return false}return g},getDocumentHeight:function(){var b=(aj[ax]!=ah||al)?aj.body.scrollHeight:z.scrollHeight,a=Math.max(b,ao.Dom.getViewportHeight());return a},getDocumentWidth:function(){var b=(aj[ax]!=ah||al)?aj.body.scrollWidth:z.scrollWidth,a=Math.max(b,ao.Dom.getViewportWidth());return a},getViewportHeight:function(){var a=self.innerHeight,b=aj[ax];if((b||aa)&&!ap){a=(b==ah)?z.clientHeight:aj.body.clientHeight}return a},getViewportWidth:function(){var a=self.innerWidth,b=aj[ax];if(b||aa){a=(b==ah)?z.clientWidth:aj.body.clientWidth}return a},getAncestorBy:function(a,b){while((a=a[x])){if(ao.Dom._testElement(a,b)){return a}}return null},getAncestorByClassName:function(c,b){c=ao.Dom.get(c);if(!c){return null}var a=function(d){return ao.Dom.hasClass(d,b)};return ao.Dom.getAncestorBy(c,a)},getAncestorByTagName:function(c,b){c=ao.Dom.get(c);if(!c){return null}var a=function(d){return d[aq]&&d[aq].toUpperCase()==b.toUpperCase()};return ao.Dom.getAncestorBy(c,a)},getPreviousSiblingBy:function(a,b){while(a){a=a.previousSibling;if(ao.Dom._testElement(a,b)){return a}}return null},getPreviousSibling:function(a){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getPreviousSiblingBy(a)},getNextSiblingBy:function(a,b){while(a){a=a.nextSibling;if(ao.Dom._testElement(a,b)){return a}}return null},getNextSibling:function(a){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getNextSiblingBy(a)},getFirstChildBy:function(b,a){var c=(ao.Dom._testElement(b.firstChild,a))?b.firstChild:null;return c||ao.Dom.getNextSiblingBy(b.firstChild,a)},getFirstChild:function(a,b){a=ao.Dom.get(a);if(!a){return null}return ao.Dom.getFirstChildBy(a)},getLastChildBy:function(b,a){if(!b){return null}var c=(ao.Dom._testElement(b.lastChild,a))?b.lastChild:null;return c||ao.Dom.getPreviousSiblingBy(b.lastChild,a)},getLastChild:function(a){a=ao.Dom.get(a);return ao.Dom.getLastChildBy(a)},getChildrenBy:function(c,d){var a=ao.Dom.getFirstChildBy(c,d),b=a?[a]:[];ao.Dom.getNextSiblingBy(a,function(e){if(!d||d(e)){b[b.length]=e}return false});return b},getChildren:function(a){a=ao.Dom.get(a);if(!a){}return ao.Dom.getChildrenBy(a)},getDocumentScrollLeft:function(a){a=a||aj;return Math.max(a[av].scrollLeft,a.body.scrollLeft)},getDocumentScrollTop:function(a){a=a||aj;return Math.max(a[av].scrollTop,a.body.scrollTop)},insertBefore:function(b,a){b=ao.Dom.get(b);a=ao.Dom.get(a);if(!b||!a||!a[x]){return null}return a[x].insertBefore(b,a)},insertAfter:function(b,a){b=ao.Dom.get(b);a=ao.Dom.get(a);if(!b||!a||!a[x]){return null}if(a.nextSibling){return a[x].insertBefore(b,a.nextSibling)}else{return a[x].appendChild(b)}},getClientRegion:function(){var a=ao.Dom.getDocumentScrollTop(),c=ao.Dom.getDocumentScrollLeft(),d=ao.Dom.getViewportWidth()+c,b=ao.Dom.getViewportHeight()+a;return new ao.Region(a,d,b,c)},setAttribute:function(c,b,a){b=ao.Dom.CUSTOM_ATTRIBUTES[b]||b;c.setAttribute(b,a)},getAttribute:function(b,a){a=ao.Dom.CUSTOM_ATTRIBUTES[a]||a;return b.getAttribute(a)},_toCamel:function(c){var a=aN;function b(e,d){return d.toUpperCase()}return a[c]||(a[c]=c.indexOf("-")===-1?c:c.replace(/-([a-z])/gi,b))},_getClassRegex:function(b){var a;if(b!==undefined){if(b.exec){a=b}else{a=aJ[b];if(!a){b=b.replace(ao.Dom._patterns.CLASS_RE_TOKENS,"\\$1");a=aJ[b]=new RegExp(ay+b+aG,Y)}}}return a},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}])/g},_testElement:function(a,b){return a&&a[aF]==1&&(!b||b(a))},_calcBorders:function(a,d){var c=parseInt(ao.Dom[au](a,ac),10)||0,b=parseInt(ao.Dom[au](a,aA),10)||0;if(am){if(ag.test(a[aq])){c=0;b=0}}d[0]+=b;d[1]+=c;return d}};var ab=ao.Dom[au];if(aE.opera){ao.Dom[au]=function(c,b){var a=ab(c,b);if(y.test(b)){a=ao.Dom.Color.toRGB(a)}return a}}if(aE.webkit){ao.Dom[au]=function(c,b){var a=ab(c,b);if(a==="rgba(0, 0, 0, 0)"){a="transparent"}return a}}})();YAHOO.util.Region=function(c,b,a,d){this.top=c;this.y=c;this[1]=c;this.right=b;this.bottom=a;this.left=d;this.x=d;this[0]=d;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return(a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom)};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left))};YAHOO.util.Region.prototype.intersect=function(b){var d=Math.max(this.top,b.top),c=Math.min(this.right,b.right),a=Math.min(this.bottom,b.bottom),e=Math.max(this.left,b.left);if(a>=d&&c>=e){return new YAHOO.util.Region(d,c,a,e)}else{return null}};YAHOO.util.Region.prototype.union=function(b){var d=Math.min(this.top,b.top),c=Math.max(this.right,b.right),a=Math.max(this.bottom,b.bottom),e=Math.min(this.left,b.left);return new YAHOO.util.Region(d,c,a,e)};YAHOO.util.Region.prototype.toString=function(){return("Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}")};YAHOO.util.Region.getRegion=function(d){var b=YAHOO.util.Dom.getXY(d),e=b[1],c=b[0]+d.offsetWidth,a=b[1]+d.offsetHeight,f=b[0];return new YAHOO.util.Region(e,c,a,f)};YAHOO.util.Point=function(a,b){if(YAHOO.lang.isArray(a)){b=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,b,a,b,a)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var w=YAHOO.util,x="clientTop",s="clientLeft",o="parentNode",n="right",a="hasLayout",p="px",c="opacity",m="auto",u="borderLeftWidth",r="borderTopWidth",h="borderRightWidth",b="borderBottomWidth",e="visible",g="transparent",k="height",t="width",q="style",d="currentStyle",f=/^width|height$/,j=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,l={get:function(B,z){var A="",y=B[d][z];if(z===c){A=w.Dom.getStyle(B,c)}else{if(!y||(y.indexOf&&y.indexOf(p)>-1)){A=y}else{if(w.Dom.IE_COMPUTED[z]){A=w.Dom.IE_COMPUTED[z](B,z)}else{if(j.test(y)){A=w.Dom.IE.ComputedStyle.getPixel(B,z)}else{A=y}}}}return A},getOffset:function(B,A){var y=B[d][A],F=A.charAt(0).toUpperCase()+A.substr(1),E="offset"+F,D="pixel"+F,z="",C;if(y==m){C=B[E];if(C===undefined){z=0}z=C;if(f.test(A)){B[q][A]=C;if(B[E]>C){z=C-(B[E]-C)}B[q][A]=m}}else{if(!B[q][D]&&!B[q][A]){B[q][A]=y}z=B[q][D]}return z+p},getBorderWidth:function(A,y){var z=null;if(!A[d][a]){A[q].zoom=1}switch(y){case r:z=A[x];break;case b:z=A.offsetHeight-A.clientHeight-A[x];break;case u:z=A[s];break;case h:z=A.offsetWidth-A.clientWidth-A[s];break}return z+p},getPixel:function(B,C){var z=null,y=B[d][n],A=B[d][C];B[q][n]=A;z=B[q].pixelRight;B[q][n]=y;return z+p},getMargin:function(z,A){var y;if(z[d][A]==m){y=0+p}else{y=w.Dom.IE.ComputedStyle.getPixel(z,A)}return y},getVisibility:function(z,A){var y;while((y=z[d])&&y[A]=="inherit"){z=z[o]}return(y)?y[A]:e},getColor:function(y,z){return w.Dom.Color.toRGB(y[d][z])||g},getBorderColor:function(A,B){var z=A[d],y=z[B]||z.color;return w.Dom.Color.toRGB(w.Dom.Color.toHex(y))}},v={};v.top=v.right=v.bottom=v.left=v[t]=v[k]=l.getOffset;v.color=l.getColor;v[r]=v[h]=v[b]=v[u]=l.getBorderWidth;v.marginTop=v.marginRight=v.marginBottom=v.marginLeft=l.getMargin;v.visibility=l.getVisibility;v.borderColor=v.borderTopColor=v.borderRightColor=v.borderBottomColor=v.borderLeftColor=l.getBorderColor;w.Dom.IE_COMPUTED=v;w.Dom.IE_ComputedStyle=l})();(function(){var c="toString",a=parseInt,d=RegExp,b=YAHOO.util;b.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){if(!b.Dom.Color.re_RGB.test(e)){e=b.Dom.Color.toHex(e)}if(b.Dom.Color.re_hex.exec(e)){e="rgb("+[a(d.$1,16),a(d.$2,16),a(d.$3,16)].join(", ")+")"}return e},toHex:function(e){e=b.Dom.Color.KEYWORDS[e]||e;if(b.Dom.Color.re_RGB.exec(e)){var f=(d.$1.length===1)?"0"+d.$1:Number(d.$1),g=(d.$2.length===1)?"0"+d.$2:Number(d.$2),h=(d.$3.length===1)?"0"+d.$3:Number(d.$3);e=[f[c](16),g[c](16),h[c](16)].join("")}if(e.length<6){e=e.replace(b.Dom.Color.re_hex3,"$1$1")}if(e!=="transparent"&&e.indexOf("#")<0){e="#"+e}return e.toLowerCase()}}}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.7.0",build:"1799"});YAHOO.util.CustomEvent=function(c,d,e,a){this.type=c;this.scope=d||window;this.silent=e;this.signature=a||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var b="_YUICEOnSubscribe";if(c!==b){this.subscribeEvent=new YAHOO.util.CustomEvent(b,this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(a,c,b){if(!a){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(a,c,b)}this.subscribers.push(new YAHOO.util.Subscriber(a,c,b))},unsubscribe:function(d,b){if(!d){return this.unsubscribeAll()}var c=false;for(var f=0,a=this.subscribers.length;f<a;++f){var e=this.subscribers[f];if(e&&e.contains(d,b)){this._delete(f);c=true}}return c},fire:function(){this.lastError=null;var g=[],n=this.subscribers.length;if(!n&&this.silent){return true}var j=[].slice.call(arguments,0),l=true,a,h=false;if(!this.silent){}var b=this.subscribers.slice(),d=YAHOO.util.Event.throwErrors;for(a=0;a<n;++a){var e=b[a];if(!e){h=true}else{if(!this.silent){}var f=e.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var c=null;if(j.length>0){c=j[0]}try{l=e.fn.call(f,c,e.obj)}catch(m){this.lastError=m;if(d){throw m}}}else{try{l=e.fn.call(f,this.type,j,e.obj)}catch(k){this.lastError=k;if(d){throw k}}}if(false===l){if(!this.silent){}break}}}return(l!==false)},unsubscribeAll:function(){var a=this.subscribers.length,b;for(b=a-1;b>-1;b--){this._delete(b)}this.subscribers=[];return a},_delete:function(a){var b=this.subscribers[a];if(b){delete b.fn;delete b.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(a,c,b){this.fn=a;this.obj=YAHOO.lang.isUndefined(c)?null:c;this.overrideContext=b};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext){if(this.overrideContext===true){return this.obj}else{return this.overrideContext}}return a};YAHOO.util.Subscriber.prototype.contains=function(a,b){if(b){return(this.fn==a&&this.obj==b)}else{return(this.fn==a)}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var j=false;var h=[];var g=[];var k=[];var m=[];var b=0;var l=[];var c=[];var d=0;var a={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};var f=YAHOO.env.ua.ie?"focusin":"focus";var e=YAHOO.env.ua.ie?"focusout":"blur";return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var o=this;var n=function(){o._tryPreloadAttach()};this._interval=setInterval(n,this.POLL_INTERVAL)}},onAvailable:function(n,r,p,o,q){var t=(YAHOO.lang.isString(n))?[n]:n;for(var s=0;s<t.length;s=s+1){l.push({id:t[s],fn:r,obj:p,overrideContext:o,checkReady:q})}b=this.POLL_RETRYS;this.startInterval()},onContentReady:function(n,q,p,o){this.onAvailable(n,q,p,o,true)},onDOMReady:function(p,o,n){if(this.DOMReady){setTimeout(function(){var q=window;if(n){if(n===true){q=o}else{q=n}}p.call(q,"DOMReady",[],o)},0)}else{this.DOMReadyEvent.subscribe(p,o,n)}},_addListener:function(y,A,o,u,q,B){if(!o||!o.call){return false}if(this._isValidCollection(y)){var n=true;for(var t=0,r=y.length;t<r;++t){n=this.on(y[t],A,o,u,q)&&n}return n}else{if(YAHOO.lang.isString(y)){var v=this.getEl(y);if(v){y=v}else{this.onAvailable(y,function(){YAHOO.util.Event.on(y,A,o,u,q)});return true}}}if(!y){return false}if("unload"==A&&u!==this){g[g.length]=[y,A,o,u,q];return true}var z=y;if(q){if(q===true){z=u}else{z=q}}var x=function(D){return o.call(z,YAHOO.util.Event.getEvent(D,y),u)};var C=[y,A,o,x,z,u,q];var s=h.length;h[s]=C;if(this.useLegacyEvent(y,A)){var w=this.getLegacyIndex(y,A);if(w==-1||y!=k[w][0]){w=k.length;c[y.id+A]=w;k[w]=[y,A,y["on"+A]];m[w]=[];y["on"+A]=function(D){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(D),w)}}m[w].push(C)}else{try{this._simpleAdd(y,A,x,B)}catch(p){this.lastError=p;this.removeListener(y,A,o);return false}}return true},addListener:function(q,n,r,p,o){return this._addListener(q,n,r,p,o,false)},addFocusListener:function(p,q,o,n){return this._addListener(p,f,q,o,n,true)},removeFocusListener:function(n,o){return this.removeListener(n,f,o)},addBlurListener:function(p,q,o,n){return this._addListener(p,e,q,o,n,true)},removeBlurListener:function(n,o){return this.removeListener(n,e,o)},fireLegacyEvent:function(r,t){var p=true,w,n,o,v,q;n=m[t].slice();for(var u=0,s=n.length;u<s;++u){o=n[u];if(o&&o[this.WFN]){v=o[this.ADJ_SCOPE];q=o[this.WFN].call(v,r);p=(p&&q)}}w=k[t];if(w&&w[2]){w[2](r)}return p},getLegacyIndex:function(o,n){var p=this.generateId(o)+n;if(typeof c[p]=="undefined"){return -1}else{return c[p]}},useLegacyEvent:function(o,n){return(this.webkit&&this.webkit<419&&("click"==n||"dblclick"==n))},removeListener:function(x,y,p){var u,r,n;if(typeof x=="string"){x=this.getEl(x)}else{if(this._isValidCollection(x)){var o=true;for(u=x.length-1;u>-1;u--){o=(this.removeListener(x[u],y,p)&&o)}return o}}if(!p||!p.call){return this.purgeElement(x,false,y)}if("unload"==y){for(u=g.length-1;u>-1;u--){n=g[u];if(n&&n[0]==x&&n[1]==y&&n[2]==p){g.splice(u,1);return true}}return false}var t=null;var s=arguments[3];if("undefined"===typeof s){s=this._getCacheIndex(x,y,p)}if(s>=0){t=h[s]}if(!x||!t){return false}if(this.useLegacyEvent(x,y)){var v=this.getLegacyIndex(x,y);var w=m[v];if(w){for(u=0,r=w.length;u<r;++u){n=w[u];if(n&&n[this.EL]==x&&n[this.TYPE]==y&&n[this.FN]==p){w.splice(u,1);break}}}}else{try{this._simpleRemove(x,y,t[this.WFN],false)}catch(q){this.lastError=q;return false}}delete h[s][this.WFN];delete h[s][this.FN];h.splice(s,1);return true},getTarget:function(n,o){var p=n.target||n.srcElement;return this.resolveTextNode(p)},resolveTextNode:function(n){try{if(n&&3==n.nodeType){return n.parentNode}}catch(o){}return n},getPageX:function(n){var o=n.pageX;if(!o&&0!==o){o=n.clientX||0;if(this.isIE){o+=this._getScrollLeft()}}return o},getPageY:function(o){var n=o.pageY;if(!n&&0!==n){n=o.clientY||0;if(this.isIE){n+=this._getScrollTop()}}return n},getXY:function(n){return[this.getPageX(n),this.getPageY(n)]},getRelatedTarget:function(n){var o=n.relatedTarget;if(!o){if(n.type=="mouseout"){o=n.toElement}else{if(n.type=="mouseover"){o=n.fromElement}}}return this.resolveTextNode(o)},getTime:function(n){if(!n.time){var o=new Date().getTime();try{n.time=o}catch(p){this.lastError=p;return o}}return n.time},stopEvent:function(n){this.stopPropagation(n);this.preventDefault(n)},stopPropagation:function(n){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}},preventDefault:function(n){if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}},getEvent:function(o,q){var p=o||window.event;if(!p){var n=this.getEvent.caller;while(n){p=n.arguments[0];if(p&&Event==p.constructor){break}n=n.caller}}return p},getCharCode:function(n){var o=n.keyCode||n.charCode||0;if(YAHOO.env.ua.webkit&&(o in a)){o=a[o]}return o},_getCacheIndex:function(o,n,p){for(var q=0,r=h.length;q<r;q=q+1){var s=h[q];if(s&&s[this.FN]==p&&s[this.EL]==o&&s[this.TYPE]==n){return q}}return -1},generateId:function(o){var n=o.id;if(!n){n="yuievtautoid-"+d;++d;o.id=n}return n},_isValidCollection:function(n){try{return(n&&typeof n!=="string"&&n.length&&!n.tagName&&!n.alert&&typeof n[0]!=="undefined")}catch(o){return false}},elCache:{},getEl:function(n){return(typeof n==="string")?document.getElementById(n):n},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(n){if(!j){j=true;var o=YAHOO.util.Event;o._ready();o._tryPreloadAttach()}},_ready:function(n){var o=YAHOO.util.Event;if(!o.DOMReady){o.DOMReady=true;o.DOMReadyEvent.fire();o._simpleRemove(document,"DOMContentLoaded",o._ready)}},_tryPreloadAttach:function(){if(l.length===0){b=0;if(this._interval){clearInterval(this._interval);this._interval=null}return}if(this.locked){return}if(this.isIE){if(!this.DOMReady){this.startInterval();return}}this.locked=true;var o=!j;if(!o){o=(b>0&&l.length>0)}var p=[];var n=function(w,v){var x=w;if(v.overrideContext){if(v.overrideContext===true){x=v.obj}else{x=v.overrideContext}}v.fn.call(x,v.obj)};var t,u,q,r,s=[];for(t=0,u=l.length;t<u;t=t+1){q=l[t];if(q){r=this.getEl(q.id);if(r){if(q.checkReady){if(j||r.nextSibling||!o){s.push(q);l[t]=null}}else{n(r,q);l[t]=null}}else{p.push(q)}}}for(t=0,u=s.length;t<u;t=t+1){q=s[t];n(this.getEl(q.id),q)}b--;if(o){for(t=l.length-1;t>-1;t--){q=l[t];if(!q||!q.id){l.splice(t,1)}}this.startInterval()}else{if(this._interval){clearInterval(this._interval);this._interval=null}}this.locked=false},purgeElement:function(q,p,n){var s=(YAHOO.lang.isString(q))?this.getEl(q):q;var o=this.getListeners(s,n),r,u;if(o){for(r=o.length-1;r>-1;r--){var t=o[r];this.removeListener(s,t.type,t.fn)}}if(p&&s&&s.childNodes){for(r=0,u=s.childNodes.length;r<u;++r){this.purgeElement(s.childNodes[r],p,n)}}},getListeners:function(u,w){var r=[],v;if(!w){v=[h,g]}else{if(w==="unload"){v=[g]}else{v=[h]}}var p=(YAHOO.lang.isString(u))?this.getEl(u):u;for(var s=0;s<v.length;s=s+1){var n=v[s];if(n){for(var q=0,o=n.length;q<o;++q){var t=n[q];if(t&&t[this.EL]===p&&(!w||w===t[this.TYPE])){r.push({type:t[this.TYPE],fn:t[this.FN],obj:t[this.OBJ],adjust:t[this.OVERRIDE],scope:t[this.ADJ_SCOPE],index:q})}}}}return(r.length)?r:null},_unload:function(o){var u=YAHOO.util.Event,r,s,t,p,q,n=g.slice(),v;for(r=0,p=g.length;r<p;++r){t=n[r];if(t){v=window;if(t[u.ADJ_SCOPE]){if(t[u.ADJ_SCOPE]===true){v=t[u.UNLOAD_OBJ]}else{v=t[u.ADJ_SCOPE]}}t[u.FN].call(v,u.getEvent(o,t[u.EL]),t[u.UNLOAD_OBJ]);n[r]=null}}t=null;v=null;g=null;if(h){for(s=h.length-1;s>-1;s--){t=h[s];if(t){u.removeListener(t[u.EL],t[u.TYPE],t[u.FN],s)}}t=null}k=null;u._simpleRemove(window,"unload",u._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var o=document.documentElement,n=document.body;if(o&&(o.scrollTop||o.scrollLeft)){return[o.scrollTop,o.scrollLeft]}else{if(n){return[n.scrollTop,n.scrollLeft]}else{return[0,0]}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(o,n,p,q){o.addEventListener(n,p,(q))}}else{if(window.attachEvent){return function(o,n,p,q){o.attachEvent("on"+n,p)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(o,n,p,q){o.removeEventListener(n,p,(q))}}else{if(window.detachEvent){return function(o,n,p){o.detachEvent("on"+n,p)}}else{return function(){}}}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var b=document.createElement("p");a._dri=setInterval(function(){try{b.doScroll("left");clearInterval(a._dri);a._dri=null;a._ready();b=null}catch(c){}},a.POLL_INTERVAL)}else{if(a.webkit&&a.webkit<525){a._dri=setInterval(function(){var c=document.readyState;if("loaded"==c||"complete"==c){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL)}else{a._simpleAdd(document,"DOMContentLoaded",a._ready)}}a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,e,b,c){this.__yui_events=this.__yui_events||{};var d=this.__yui_events[a];if(d){d.subscribe(e,b,c)}else{this.__yui_subscribers=this.__yui_subscribers||{};var f=this.__yui_subscribers;if(!f[a]){f[a]=[]}f[a].push({fn:e,obj:b,overrideContext:c})}},unsubscribe:function(f,d,b){this.__yui_events=this.__yui_events||{};var a=this.__yui_events;if(f){var c=a[f];if(c){return c.unsubscribe(d,b)}}else{var g=true;for(var e in a){if(YAHOO.lang.hasOwnProperty(a,e)){g=g&&a[e].unsubscribe(d,b)}}return g}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(g,a){this.__yui_events=this.__yui_events||{};var d=a||{};var e=this.__yui_events;if(e[g]){}else{var f=d.scope||this;var j=(d.silent);var c=new YAHOO.util.CustomEvent(g,f,j,YAHOO.util.CustomEvent.FLAT);e[g]=c;if(d.onSubscribeCallback){c.subscribeEvent.subscribe(d.onSubscribeCallback)}this.__yui_subscribers=this.__yui_subscribers||{};var h=this.__yui_subscribers[g];if(h){for(var b=0;b<h.length;++b){c.subscribe(h[b].fn,h[b].obj,h[b].overrideContext)}}}return e[g]},fireEvent:function(d,e,a,f){this.__yui_events=this.__yui_events||{};var b=this.__yui_events[d];if(!b){return null}var g=[];for(var c=1;c<arguments.length;++c){g.push(arguments[c])}return b.fire.apply(b,g)},hasEvent:function(a){if(this.__yui_events){if(this.__yui_events[a]){return true}}return false}};(function(){var a=YAHOO.util.Event,b=YAHOO.lang;YAHOO.util.KeyListener=function(j,d,h,g){if(!j){}else{if(!d){}else{if(!h){}}}if(!g){g=YAHOO.util.KeyListener.KEYDOWN}var f=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(b.isString(j)){j=document.getElementById(j)}if(b.isFunction(h)){f.subscribe(h)}else{f.subscribe(h.fn,h.scope,h.correctScope)}function e(n,o){if(!d.shift){d.shift=false}if(!d.alt){d.alt=false}if(!d.ctrl){d.ctrl=false}if(n.shiftKey==d.shift&&n.altKey==d.alt&&n.ctrlKey==d.ctrl){var m,p=d.keys,k;if(YAHOO.lang.isArray(p)){for(var l=0;l<p.length;l++){m=p[l];k=a.getCharCode(n);if(m==k){f.fire(k,n);break}}}else{k=a.getCharCode(n);if(p==k){f.fire(k,n)}}}}this.enable=function(){if(!this.enabled){a.on(j,g,e);this.enabledEvent.fire(d)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(j,g,e);this.disabledEvent.fire(d)}this.enabled=false};this.toString=function(){return"KeyListener ["+d.keys+"] "+j.tagName+(j.id?"["+j.id+"]":"")}};var c=YAHOO.util.KeyListener;c.KEYDOWN="keydown";c.KEYUP="keyup";c.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.7.0",build:"1799"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/yahoo-dom-event/yahoo-dom-event.js")}(function(){var b=YAHOO.util;var a=function(e,f,d,c){if(!e){}this.init(e,f,d,c)};a.NAME="Anim";a.prototype={toString:function(){var d=this.getEl()||{};var c=d.id||d.tagName;return(this.constructor.NAME+": "+c)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(e,c,d){return this.method(this.currentFrame,c,d-c,this.totalFrames)},setAttribute:function(f,c,d){var e=this.getEl();if(this.patterns.noNegatives.test(f)){c=(c>0)?c:0}if("style" in e){b.Dom.setStyle(e,f,c+d)}else{if(f in e){e[f]=c}}},getAttribute:function(h){var f=this.getEl();var d=b.Dom.getStyle(f,h);if(d!=="auto"&&!this.patterns.offsetUnit.test(d)){return parseFloat(d)}var g=this.patterns.offsetAttribute.exec(h)||[];var c=!!(g[3]);var e=!!(g[2]);if("style" in f){if(e||(b.Dom.getStyle(f,"position")=="absolute"&&c)){d=f["offset"+g[0].charAt(0).toUpperCase()+g[0].substr(1)]}else{d=0}}else{if(h in f){d=f[h]}}return d},getDefaultUnit:function(c){if(this.patterns.defaultUnit.test(c)){return"px"}return""},setRuntimeAttribute:function(h){var c;var g;var f=this.attributes;this.runtimeAttributes[h]={};var d=function(k){return(typeof k!=="undefined")};if(!d(f[h]["to"])&&!d(f[h]["by"])){return false}c=(d(f[h]["from"]))?f[h]["from"]:this.getAttribute(h);if(d(f[h]["to"])){g=f[h]["to"]}else{if(d(f[h]["by"])){if(c.constructor==Array){g=[];for(var e=0,j=c.length;e<j;++e){g[e]=c[e]+f[h]["by"][e]*1}}else{g=c+f[h]["by"]*1}}}this.runtimeAttributes[h].start=c;this.runtimeAttributes[h].end=g;this.runtimeAttributes[h].unit=(d(f[h].unit))?f[h]["unit"]:this.getDefaultUnit(h);return true},init:function(m,g,h,d){var c=false;var l=null;var j=0;m=b.Dom.get(m);this.attributes=g||{};this.duration=!YAHOO.lang.isUndefined(h)?h:1;this.method=d||b.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=b.AnimMgr.fps;this.setEl=function(n){m=b.Dom.get(n)};this.getEl=function(){return m};this.isAnimated=function(){return c};this.getStartTime=function(){return l};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(b.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}b.AnimMgr.registerElement(this);return true};this.stop=function(n){if(!this.isAnimated()){return false}if(n){this.currentFrame=this.totalFrames;this._onTween.fire()}b.AnimMgr.stop(this)};var e=function(){this.onStart.fire();this.runtimeAttributes={};for(var n in this.attributes){this.setRuntimeAttribute(n)}c=true;j=0;l=new Date()};var f=function(){var n={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};n.toString=function(){return("duration: "+n.duration+", currentFrame: "+n.currentFrame)};this.onTween.fire(n);var o=this.runtimeAttributes;for(var p in o){this.setAttribute(p,this.doMethod(p,o[p].start,o[p].end),o[p].unit)}j+=1};var k=function(){var o=(new Date()-l)/1000;var n={duration:o,frames:j,fps:j/o};n.toString=function(){return("duration: "+n.duration+", frames: "+n.frames+", fps: "+n.fps)};c=false;j=0;this.onComplete.fire(n)};this._onStart=new b.CustomEvent("_start",this,true);this.onStart=new b.CustomEvent("start",this);this.onTween=new b.CustomEvent("tween",this);this._onTween=new b.CustomEvent("_tween",this,true);this.onComplete=new b.CustomEvent("complete",this);this._onComplete=new b.CustomEvent("_complete",this,true);this._onStart.subscribe(e);this._onTween.subscribe(f);this._onComplete.subscribe(k)}};b.Anim=a})();YAHOO.util.AnimMgr=new function(){var d=null;var e=[];var a=0;this.fps=1000;this.delay=1;this.registerElement=function(f){e[e.length]=f;a+=1;f._onStart.fire();this.start()};this.unRegister=function(f,g){g=g||b(f);if(!f.isAnimated()||g==-1){return false}f._onComplete.fire();e.splice(g,1);a-=1;if(a<=0){this.stop()}return true};this.start=function(){if(d===null){d=setInterval(this.run,this.delay)}};this.stop=function(f){if(!f){clearInterval(d);for(var g=0,h=e.length;g<h;++g){this.unRegister(e[0],0)}e=[];d=null;a=0}else{this.unRegister(f)}};this.run=function(){for(var f=0,h=e.length;f<h;++f){var g=e[f];if(!g||!g.isAnimated()){continue}if(g.currentFrame<g.totalFrames||g.totalFrames===null){g.currentFrame+=1;if(g.useSeconds){c(g)}g._onTween.fire()}else{YAHOO.util.AnimMgr.stop(g,f)}}};var b=function(f){for(var g=0,h=e.length;g<h;++g){if(e[g]==f){return g}}return -1};var c=function(k){var g=k.totalFrames;var h=k.currentFrame;var j=(k.currentFrame*k.duration*1000/k.totalFrames);var l=(new Date()-k.getStartTime());var f=0;if(l<k.duration*1000){f=Math.round((l/j-1)*k.currentFrame)}else{f=g-(h+1)}if(f>0&&isFinite(f)){if(k.currentFrame+f>=g){f=g-(h+1)}k.currentFrame+=f}}};YAHOO.util.Bezier=new function(){this.getPosition=function(c,d){var b=c.length;var e=[];for(var f=0;f<b;++f){e[f]=[c[f][0],c[f][1]]}for(var a=1;a<b;++a){for(f=0;f<b-a;++f){e[f][0]=(1-d)*e[f][0]+d*e[parseInt(f+1,10)][0];e[f][1]=(1-d)*e[f][1]+d*e[parseInt(f+1,10)][1]}}return[e[0][0],e[0][1]]}};(function(){var a=function(g,h,f,e){a.superclass.constructor.call(this,g,h,f,e)};a.NAME="ColorAnim";a.DEFAULT_BGCOLOR="#fff";var c=YAHOO.util;YAHOO.extend(a,c.Anim);var b=a.superclass;var d=a.prototype;d.patterns.color=/color$/i;d.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;d.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;d.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;d.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;d.parseColor=function(f){if(f.length==3){return f}var e=this.patterns.hex.exec(f);if(e&&e.length==4){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}e=this.patterns.rgb.exec(f);if(e&&e.length==4){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}e=this.patterns.hex3.exec(f);if(e&&e.length==4){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}return null};d.getAttribute=function(j){var g=this.getEl();if(this.patterns.color.test(j)){var e=YAHOO.util.Dom.getStyle(g,j);var f=this;if(this.patterns.transparent.test(e)){var h=YAHOO.util.Dom.getAncestorBy(g,function(k){return !f.patterns.transparent.test(e)});if(h){e=c.Dom.getStyle(h,j)}else{e=a.DEFAULT_BGCOLOR}}}else{e=b.getAttribute.call(this,j)}return e};d.doMethod=function(j,e,h){var f;if(this.patterns.color.test(j)){f=[];for(var g=0,k=e.length;g<k;++g){f[g]=b.doMethod.call(this,j,e[g],h[g])}f="rgb("+Math.floor(f[0])+","+Math.floor(f[1])+","+Math.floor(f[2])+")"}else{f=b.doMethod.call(this,j,e,h)}return f};d.setRuntimeAttribute=function(j){b.setRuntimeAttribute.call(this,j);if(this.patterns.color.test(j)){var g=this.attributes;var e=this.parseColor(this.runtimeAttributes[j].start);var h=this.parseColor(this.runtimeAttributes[j].end);if(typeof g[j]["to"]==="undefined"&&typeof g[j]["by"]!=="undefined"){h=this.parseColor(g[j].by);for(var f=0,k=e.length;f<k;++f){h[f]=e[f]+h[f]}}this.runtimeAttributes[j].start=e;this.runtimeAttributes[j].end=h}};c.ColorAnim=a})();YAHOO.util.Easing={easeNone:function(d,a,b,c){return b*d/c+a},easeIn:function(d,a,b,c){return b*(d/=c)*d+a},easeOut:function(d,a,b,c){return -b*(d/=c)*(d-2)+a},easeBoth:function(d,a,b,c){if((d/=c/2)<1){return b/2*d*d+a}return -b/2*((--d)*(d-2)-1)+a},easeInStrong:function(d,a,b,c){return b*(d/=c)*d*d*d+a},easeOutStrong:function(d,a,b,c){return -b*((d=d/c-1)*d*d*d-1)+a},easeBothStrong:function(d,a,b,c){if((d/=c/2)<1){return b/2*d*d*d*d+a}return -b/2*((d-=2)*d*d*d-2)+a},elasticIn:function(f,a,b,c,g,d){if(f==0){return a}if((f/=c)==1){return a+b}if(!d){d=c*0.3}if(!g||g<Math.abs(b)){g=b;var e=d/4}else{var e=d/(2*Math.PI)*Math.asin(b/g)}return -(g*Math.pow(2,10*(f-=1))*Math.sin((f*c-e)*(2*Math.PI)/d))+a},elasticOut:function(f,a,b,c,g,d){if(f==0){return a}if((f/=c)==1){return a+b}if(!d){d=c*0.3}if(!g||g<Math.abs(b)){g=b;var e=d/4}else{var e=d/(2*Math.PI)*Math.asin(b/g)}return g*Math.pow(2,-10*f)*Math.sin((f*c-e)*(2*Math.PI)/d)+b+a},elasticBoth:function(f,a,b,c,g,d){if(f==0){return a}if((f/=c/2)==2){return a+b}if(!d){d=c*(0.3*1.5)}if(!g||g<Math.abs(b)){g=b;var e=d/4}else{var e=d/(2*Math.PI)*Math.asin(b/g)}if(f<1){return -0.5*(g*Math.pow(2,10*(f-=1))*Math.sin((f*c-e)*(2*Math.PI)/d))+a}return g*Math.pow(2,-10*(f-=1))*Math.sin((f*c-e)*(2*Math.PI)/d)*0.5+b+a},backIn:function(e,a,b,c,d){if(typeof d=="undefined"){d=1.70158}return b*(e/=c)*e*((d+1)*e-d)+a},backOut:function(e,a,b,c,d){if(typeof d=="undefined"){d=1.70158}return b*((e=e/c-1)*e*((d+1)*e+d)+1)+a},backBoth:function(e,a,b,c,d){if(typeof d=="undefined"){d=1.70158}if((e/=c/2)<1){return b/2*(e*e*(((d*=(1.525))+1)*e-d))+a}return b/2*((e-=2)*e*(((d*=(1.525))+1)*e+d)+2)+a},bounceIn:function(d,a,b,c){return b-YAHOO.util.Easing.bounceOut(c-d,0,b,c)+a},bounceOut:function(d,a,b,c){if((d/=c)<(1/2.75)){return b*(7.5625*d*d)+a}else{if(d<(2/2.75)){return b*(7.5625*(d-=(1.5/2.75))*d+0.75)+a}else{if(d<(2.5/2.75)){return b*(7.5625*(d-=(2.25/2.75))*d+0.9375)+a}}}return b*(7.5625*(d-=(2.625/2.75))*d+0.984375)+a},bounceBoth:function(d,a,b,c){if(d<c/2){return YAHOO.util.Easing.bounceIn(d*2,0,b,c)*0.5+a}return YAHOO.util.Easing.bounceOut(d*2-c,0,b,c)*0.5+b*0.5+a}};(function(){var a=function(j,k,h,g){if(j){a.superclass.constructor.call(this,j,k,h,g)}};a.NAME="Motion";var c=YAHOO.util;YAHOO.extend(a,c.ColorAnim);var b=a.superclass;var e=a.prototype;e.patterns.points=/^points$/i;e.setAttribute=function(j,g,h){if(this.patterns.points.test(j)){h=h||"px";b.setAttribute.call(this,"left",g[0],h);b.setAttribute.call(this,"top",g[1],h)}else{b.setAttribute.call(this,j,g,h)}};e.getAttribute=function(h){if(this.patterns.points.test(h)){var g=[b.getAttribute.call(this,"left"),b.getAttribute.call(this,"top")]}else{g=b.getAttribute.call(this,h)}return g};e.doMethod=function(l,g,k){var h=null;if(this.patterns.points.test(l)){var j=this.method(this.currentFrame,0,100,this.totalFrames)/100;h=c.Bezier.getPosition(this.runtimeAttributes[l],j)}else{h=b.doMethod.call(this,l,g,k)}return h};e.setRuntimeAttribute=function(g){if(this.patterns.points.test(g)){var p=this.getEl();var n=this.attributes;var q;var l=n.points["control"]||[];var o;var k,h;if(l.length>0&&!(l[0] instanceof Array)){l=[l]}else{var m=[];for(k=0,h=l.length;k<h;++k){m[k]=l[k]}l=m}if(c.Dom.getStyle(p,"position")=="static"){c.Dom.setStyle(p,"position","relative")}if(d(n.points["from"])){c.Dom.setXY(p,n.points["from"])}else{c.Dom.setXY(p,c.Dom.getXY(p))}q=this.getAttribute("points");if(d(n.points["to"])){o=f.call(this,n.points["to"],q);var j=c.Dom.getXY(this.getEl());for(k=0,h=l.length;k<h;++k){l[k]=f.call(this,l[k],q)}}else{if(d(n.points["by"])){o=[q[0]+n.points["by"][0],q[1]+n.points["by"][1]];for(k=0,h=l.length;k<h;++k){l[k]=[q[0]+l[k][0],q[1]+l[k][1]]}}}this.runtimeAttributes[g]=[q];if(l.length>0){this.runtimeAttributes[g]=this.runtimeAttributes[g].concat(l)}this.runtimeAttributes[g][this.runtimeAttributes[g].length]=o}else{b.setRuntimeAttribute.call(this,g)}};var f=function(j,g){var h=c.Dom.getXY(this.getEl());j=[j[0]-h[0]+g[0],j[1]-h[1]+g[1]];return j};var d=function(g){return(typeof g!=="undefined")};c.Motion=a})();(function(){var b=function(g,h,f,e){if(g){b.superclass.constructor.call(this,g,h,f,e)}};b.NAME="Scroll";var d=YAHOO.util;YAHOO.extend(b,d.ColorAnim);var c=b.superclass;var a=b.prototype;a.doMethod=function(h,e,g){var f=null;if(h=="scroll"){f=[this.method(this.currentFrame,e[0],g[0]-e[0],this.totalFrames),this.method(this.currentFrame,e[1],g[1]-e[1],this.totalFrames)]}else{f=c.doMethod.call(this,h,e,g)}return f};a.getAttribute=function(g){var e=null;var f=this.getEl();if(g=="scroll"){e=[f.scrollLeft,f.scrollTop]}else{e=c.getAttribute.call(this,g)}return e};a.setAttribute=function(h,e,f){var g=this.getEl();if(h=="scroll"){g.scrollLeft=e[0];g.scrollTop=e[1]}else{c.setAttribute.call(this,h,e,f)}};d.Scroll=b})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/animation/animation-min.js")}YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(b){var c=YAHOO.util.Event.getTarget(b),a=c.nodeName.toLowerCase();if((a==="input"||a==="button")&&(c.type&&c.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(c.name)+"="+encodeURIComponent(c.value)}});return true}return false})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var c,a;try{a=new XMLHttpRequest();c={conn:a,tId:b}}catch(d){for(var f=0;f<this._msxml_progid.length;++f){try{a=new ActiveXObject(this._msxml_progid[f]);c={conn:a,tId:b};break}catch(e){}}}finally{return c}},getConnectionObject:function(a){var c;var b=this._transaction_id;try{if(!a){c=this.createXhrObject(b)}else{c={};c.tId=b;c.isUpload=true}if(c){this._transaction_id++}}catch(d){}finally{return c}},asyncRequest:function(b,e,c,a){var d=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var f=(c&&c.argument)?c.argument:null;if(!d){return null}else{if(c&&c.customevents){this.initCustomEvents(d,c)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,c,e,a);return d}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(c&&c.cache===false)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}d.conn.open(b,e,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,c);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,f);if(d.startEvent){d.startEvent.fire(d,f)}return d}},initCustomEvents:function(a,b){var c;for(c in b.customevents){if(this._customEvents[c][0]){a[this._customEvents[c][0]]=new YAHOO.util.CustomEvent(this._customEvents[c][1],(b.scope)?b.scope:null);a[this._customEvents[c][0]].subscribe(b.customevents[c])}}},handleReadyState:function(c,b){var d=this;var a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[c.tId]=window.setTimeout(function(){d.abort(c,b,true)},b.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);delete d._poll[c.tId];if(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);delete d._timeOut[c.tId]}d.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}d.handleTransactionResponse(c,b)}},this._polling_interval)},handleTransactionResponse:function(c,b,a){var e,f;var g=(b&&b.argument)?b.argument:null;try{if(c.conn.status!==undefined&&c.conn.status!==0){e=c.conn.status}else{e=13030}}catch(d){e=13030}if(e>=200&&e<300||e===1223){f=this.createResponseObject(c,g);if(b&&b.success){if(!b.scope){b.success(f)}else{b.success.apply(b.scope,[f])}}this.successEvent.fire(f);if(c.successEvent){c.successEvent.fire(f)}}else{switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:f=this.createExceptionObject(c.tId,g,(a?a:false));if(b&&b.failure){if(!b.scope){b.failure(f)}else{b.failure.apply(b.scope,[f])}}break;default:f=this.createResponseObject(c,g);if(b&&b.failure){if(!b.scope){b.failure(f)}else{b.failure.apply(b.scope,[f])}}}this.failureEvent.fire(f);if(c.failureEvent){c.failureEvent.fire(f)}}this.releaseObject(c);f=null},createResponseObject:function(d,g){var a={};var e={};try{var b=d.conn.getAllResponseHeaders();var h=b.split("\n");for(var j=0;j<h.length;j++){var c=h[j].indexOf(":");if(c!=-1){e[h[j].substring(0,c)]=h[j].substring(c+2)}}}catch(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;if(g){a.argument=g}return a},createExceptionObject:function(b,f,a){var d=0;var c="communication failure";var g=-1;var h="transaction aborted";var e={};e.tId=b;if(a){e.status=g;e.statusText=h}else{e.status=d;e.statusText=c}if(f){e.argument=f}return e},initHeader:function(a,b,c){var d=(c)?this._default_headers:this._http_headers;d[a]=b;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}delete this._http_headers;this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false},setForm:function(h,n,b){var j,c,k,m,e,l=false,p=[],f=0,q,o,a,g,d;this.resetFormState();if(typeof h=="string"){j=(document.getElementById(h)||document.forms[h])}else{if(typeof h=="object"){j=h}else{return}}if(n){this.createFrame(b?b:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=j;return}for(q=0,o=j.elements.length;q<o;++q){c=j.elements[q];e=c.disabled;k=c.name;if(!e&&k){k=encodeURIComponent(k)+"=";m=encodeURIComponent(c.value);switch(c.type){case"select-one":if(c.selectedIndex>-1){d=c.options[c.selectedIndex];p[f++]=k+encodeURIComponent((d.attributes.value&&d.attributes.value.specified)?d.value:d.text)}break;case"select-multiple":if(c.selectedIndex>-1){for(a=c.selectedIndex,g=c.options.length;a<g;++a){d=c.options[a];if(d.selected){p[f++]=k+encodeURIComponent((d.attributes.value&&d.attributes.value.specified)?d.value:d.text)}}}break;case"radio":case"checkbox":if(c.checked){p[f++]=k+m}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(l===false){if(this._hasSubmitListener&&this._submitElementValue){p[f++]=this._submitElementValue}l=true}break;default:p[f++]=k+m}}}this._isFormSubmit=true;this._sFormData=p.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""},createFrame:function(a){var c="yuiIO"+this._transaction_id;var b;if(YAHOO.env.ua.ie){b=document.createElement('<iframe id="'+c+'" name="'+c+'" />');if(typeof a=="boolean"){b.src="javascript:false"}}else{b=document.createElement("iframe");b.id=c;b.name=c}b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";document.body.appendChild(b)},appendPostData:function(a){var c=[],e=a.split("&"),d,b;for(d=0;d<e.length;d++){b=e[d].indexOf("=");if(b!=-1){c[d]=document.createElement("input");c[d].type="hidden";c[d].name=decodeURIComponent(e[d].substring(0,b));c[d].value=decodeURIComponent(e[d].substring(b+1));this._formNode.appendChild(c[d])}}return c},uploadFile:function(a,f,p,b){var l="yuiIO"+a.tId,k="multipart/form-data",h=document.getElementById(l),e=this,j=(f&&f.argument)?f.argument:null,g,m,c,n;var d={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",p);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",l);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",k)}else{this._formNode.setAttribute("enctype",k)}if(b){g=this.appendPostData(b)}this._formNode.submit();this.startEvent.fire(a,j);if(a.startEvent){a.startEvent.fire(a,j)}if(f&&f.timeout){this._timeOut[a.tId]=window.setTimeout(function(){e.abort(a,f,true)},f.timeout)}if(g&&g.length>0){for(m=0;m<g.length;m++){this._formNode.removeChild(g[m])}}for(c in d){if(YAHOO.lang.hasOwnProperty(d,c)){if(d[c]){this._formNode.setAttribute(c,d[c])}else{this._formNode.removeAttribute(c)}}}this.resetFormState();var o=function(){if(f&&f.timeout){window.clearTimeout(e._timeOut[a.tId]);delete e._timeOut[a.tId]}e.completeEvent.fire(a,j);if(a.completeEvent){a.completeEvent.fire(a,j)}n={tId:a.tId,argument:f.argument};try{n.responseText=h.contentWindow.document.body?h.contentWindow.document.body.innerHTML:h.contentWindow.document.documentElement.textContent;n.responseXML=h.contentWindow.document.XMLDocument?h.contentWindow.document.XMLDocument:h.contentWindow.document}catch(q){}if(f&&f.upload){if(!f.scope){f.upload(n)}else{f.upload.apply(f.scope,[n])}}e.uploadEvent.fire(n);if(a.uploadEvent){a.uploadEvent.fire(n)}YAHOO.util.Event.removeListener(h,"load",o);setTimeout(function(){document.body.removeChild(h);e.releaseObject(a)},100)};YAHOO.util.Event.addListener(h,"load",o)},abort:function(d,b,a){var e;var g=(b&&b.argument)?b.argument:null;if(d&&d.conn){if(this.isCallInProgress(d)){d.conn.abort();window.clearInterval(this._poll[d.tId]);delete this._poll[d.tId];if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{if(d&&d.isUpload===true){var f="yuiIO"+d.tId;var c=document.getElementById(f);if(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{e=false}}if(e===true){this.abortEvent.fire(d,g);if(d.abortEvent){d.abortEvent.fire(d,g)}this.handleTransactionResponse(d,b,true)}return e},isCallInProgress:function(b){if(b&&b.conn){return b.conn.readyState!==4&&b.conn.readyState!==0}else{if(b&&b.isUpload===true){var a="yuiIO"+b.tId;return document.getElementById(a)?true:false}else{return false}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/connection/connection-min.js")}if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var a=YAHOO.util.Event,b=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var c=document.createElement("div");c.id="yui-ddm-shim";if(document.body.firstChild){document.body.insertBefore(c,document.body.firstChild)}else{document.body.appendChild(c)}c.style.display="none";c.style.backgroundColor="red";c.style.position="absolute";c.style.zIndex="99999";b.setStyle(c,"opacity","0");this._shim=c;a.on(c,"mouseup",this.handleMouseUp,this,true);a.on(c,"mousemove",this.handleMouseMove,this,true);a.on(window,"scroll",this._sizeShim,this,true)},_sizeShim:function(){if(this._shimActive){var c=this._shim;c.style.height=b.getDocumentHeight()+"px";c.style.width=b.getDocumentWidth()+"px";c.style.top="0";c.style.left="0"}},_activateShim:function(){if(this.useShim){if(!this._shim){this._createShim()}this._shimActive=true;var d=this._shim,c="0";if(this._debugShim){c=".5"}b.setStyle(d,"opacity",c);this._sizeShim();d.style.display="block"}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(e,f){for(var d in this.ids){for(var g in this.ids[d]){var c=this.ids[d][g];if(!this.isTypeOfDD(c)){continue}c[e].apply(c,f)}}},_onLoad:function(){this.init();a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(c){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(c,d){if(!this.initialized){this.init()}if(!this.ids[d]){this.ids[d]={}}this.ids[d][c.id]=c},removeDDFromGroup:function(c,e){if(!this.ids[e]){this.ids[e]={}}var d=this.ids[e];if(d&&d[c.id]){delete d[c.id]}},_remove:function(c){for(var d in c.groups){if(d){var e=this.ids[d];if(e&&e[c.id]){delete e[c.id]}}}delete this.handleIds[c.id]},regHandle:function(c,d){if(!this.handleIds[c]){this.handleIds[c]={}}this.handleIds[c][d]=d},isDragDrop:function(c){return(this.getDDById(c))?true:false},getRelated:function(c,g){var d=[];for(var e in c.groups){for(var f in this.ids[e]){var h=this.ids[e][f];if(!this.isTypeOfDD(h)){continue}if(!g||h.isTarget){d[d.length]=h}}}return d},isLegalTarget:function(c,d){var f=this.getRelated(c,true);for(var e=0,g=f.length;e<g;++e){if(f[e].id==d.id){return true}}return false},isTypeOfDD:function(c){return(c&&c.__ygDragDrop)},isHandle:function(c,d){return(this.handleIds[c]&&this.handleIds[c][d])},getDDById:function(c){for(var d in this.ids){if(this.ids[d][c]){return this.ids[d][c]}}return null},handleMouseDown:function(c,d){this.currentTarget=YAHOO.util.Event.getTarget(c);this.dragCurrent=d;var e=d.getEl();this.startX=YAHOO.util.Event.getPageX(c);this.startY=YAHOO.util.Event.getPageY(c);this.deltaX=this.startX-e.offsetLeft;this.deltaY=this.startY-e.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var f=YAHOO.util.DDM;f.startDrag(f.startX,f.startY);f.fromTimeout=true},this.clickTimeThresh)},startDrag:function(e,c){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true}this._activateShim();clearTimeout(this.clickTimeout);var d=this.dragCurrent;if(d&&d.events.b4StartDrag){d.b4StartDrag(e,c);d.fireEvent("b4StartDragEvent",{x:e,y:c})}if(d&&d.events.startDrag){d.startDrag(e,c);d.fireEvent("startDragEvent",{x:e,y:c})}this.dragThreshMet=true},handleMouseUp:function(c){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(c)}this.fromTimeout=false;this.fireEvents(c,true)}else{}this.stopDrag(c);this.stopEvent(c)}},stopEvent:function(c){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(c)}if(this.preventDefault){YAHOO.util.Event.preventDefault(c)}},stopDrag:function(c,d){var e=this.dragCurrent;if(e&&!d){if(this.dragThreshMet){if(e.events.b4EndDrag){e.b4EndDrag(c);e.fireEvent("b4EndDragEvent",{e:c})}if(e.events.endDrag){e.endDrag(c);e.fireEvent("endDragEvent",{e:c})}}if(e.events.mouseUp){e.onMouseUp(c);e.fireEvent("mouseUpEvent",{e:c})}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=false}}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(c){var f=this.dragCurrent;if(f){if(YAHOO.util.Event.isIE&&!c.button){this.stopEvent(c);return this.handleMouseUp(c)}else{if(c.clientX<0||c.clientY<0){}}if(!this.dragThreshMet){var d=Math.abs(this.startX-YAHOO.util.Event.getPageX(c));var e=Math.abs(this.startY-YAHOO.util.Event.getPageY(c));if(d>this.clickPixelThresh||e>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){if(f&&f.events.b4Drag){f.b4Drag(c);f.fireEvent("b4DragEvent",{e:c})}if(f&&f.events.drag){f.onDrag(c);f.fireEvent("dragEvent",{e:c})}if(f){this.fireEvents(c,false)}}this.stopEvent(c)}},fireEvents:function(j,t){var ad=this.dragCurrent;if(!ad||ad.isLocked()||ad.dragOnly){return}var r=YAHOO.util.Event.getPageX(j),s=YAHOO.util.Event.getPageY(j),p=new YAHOO.util.Point(r,s),u=ad.getTargetCoord(p.x,p.y),z=ad.getDragEl(),A=["out","over","drop","enter"],k=new YAHOO.util.Region(u.y,u.x+z.offsetWidth,u.y+z.offsetHeight,u.x),w=[],B={},o=[],ac={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var m in this.dragOvers){var ab=this.dragOvers[m];if(!this.isTypeOfDD(ab)){continue}if(!this.isOverTarget(p,ab,this.mode,k)){ac.outEvts.push(ab)}w[m]=true;delete this.dragOvers[m]}for(var n in ad.groups){if("string"!=typeof n){continue}for(m in this.ids[n]){var y=this.ids[n][m];if(!this.isTypeOfDD(y)){continue}if(y.isTarget&&!y.isLocked()&&y!=ad){if(this.isOverTarget(p,y,this.mode,k)){B[n]=true;if(t){ac.dropEvts.push(y)}else{if(!w[y.id]){ac.enterEvts.push(y)}else{ac.overEvts.push(y)}this.dragOvers[y.id]=y}}}}}this.interactionInfo={out:ac.outEvts,enter:ac.enterEvts,over:ac.overEvts,drop:ac.dropEvts,point:p,draggedRegion:k,sourceRegion:this.locationCache[ad.id],validDrop:t};for(var aa in B){o.push(aa)}if(t&&!ac.dropEvts.length){this.interactionInfo.validDrop=false;if(ad.events.invalidDrop){ad.onInvalidDrop(j);ad.fireEvent("invalidDropEvent",{e:j})}}for(m=0;m<A.length;m++){var f=null;if(ac[A[m]+"Evts"]){f=ac[A[m]+"Evts"]}if(f&&f.length){var x=A[m].charAt(0).toUpperCase()+A[m].substr(1),g="onDrag"+x,v="b4Drag"+x,q="drag"+x+"Event",h="drag"+x;if(this.mode){if(ad.events[v]){ad[v](j,f,o);ad.fireEvent(v+"Event",{event:j,info:f,group:o})}if(ad.events[h]){ad[g](j,f,o);ad.fireEvent(q,{event:j,info:f,group:o})}}else{for(var e=0,l=f.length;e<l;++e){if(ad.events[v]){ad[v](j,f[e].id,o[0]);ad.fireEvent(v+"Event",{event:j,info:f[e].id,group:o[0]})}if(ad.events[h]){ad[g](j,f[e].id,o[0]);ad.fireEvent(q,{event:j,info:f[e].id,group:o[0]})}}}}}},getBestMatch:function(e){var c=null;var f=e.length;if(f==1){c=e[0]}else{for(var d=0;d<f;++d){var g=e[d];if(this.mode==this.INTERSECT&&g.cursorIsOver){c=g;break}else{if(!c||!c.overlap||(g.overlap&&c.overlap.getArea()<g.overlap.getArea())){c=g}}}}return c},refreshCache:function(g){var e=g||this.ids;for(var h in e){if("string"!=typeof h){continue}for(var f in this.ids[h]){var d=this.ids[h][f];if(this.isTypeOfDD(d)){var c=this.getLocation(d);if(c){this.locationCache[d.id]=c}else{delete this.locationCache[d.id]}}}}},verifyEl:function(d){try{if(d){var e=d.offsetParent;if(e){return true}}}catch(c){}return false},getLocation:function(l){if(!this.isTypeOfDD(l)){return null}var n=l.getEl(),h,o,c,f,g,e,d,j,m;try{h=YAHOO.util.Dom.getXY(n)}catch(k){}if(!h){return null}o=h[0];c=o+n.offsetWidth;f=h[1];g=f+n.offsetHeight;e=f-l.padding[0];d=c+l.padding[1];j=g+l.padding[2];m=o-l.padding[3];return new YAHOO.util.Region(e,d,j,m)},isOverTarget:function(e,d,l,k){var j=this.locationCache[d.id];if(!j||!this.useCache){j=this.getLocation(d);this.locationCache[d.id]=j}if(!j){return false}d.cursorIsOver=j.contains(e);var f=this.dragCurrent;if(!f||(!l&&!f.constrainX&&!f.constrainY)){return d.cursorIsOver}d.overlap=null;if(!k){var h=f.getTargetCoord(e.x,e.y);var c=f.getDragEl();k=new YAHOO.util.Region(h.y,h.x+c.offsetWidth,h.y+c.offsetHeight,h.x)}var g=k.intersect(j);if(g){d.overlap=g;return(l)?true:d.cursorIsOver}else{return false}},_onUnload:function(c,d){this.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);this.ids={}},elementCache:{},getElWrapper:function(c){var d=this.elementCache[c];if(!d||!d.el){d=this.elementCache[c]=new this.ElementWrapper(YAHOO.util.Dom.get(c))}return d},getElement:function(c){return YAHOO.util.Dom.get(c)},getCss:function(c){var d=YAHOO.util.Dom.get(c);return(d)?d.style:null},ElementWrapper:function(c){this.el=c||null;this.id=this.el&&c.id;this.css=this.el&&c.style},getPosX:function(c){return YAHOO.util.Dom.getX(c)},getPosY:function(c){return YAHOO.util.Dom.getY(c)},swapNode:function(d,f){if(d.swapNode){d.swapNode(f)}else{var c=f.parentNode;var e=f.nextSibling;if(e==d){c.insertBefore(d,f)}else{if(f==d.nextSibling){c.insertBefore(f,d)}else{d.parentNode.replaceChild(f,d);c.insertBefore(d,e)}}}},getScroll:function(){var d,f,c=document.documentElement,e=document.body;if(c&&(c.scrollTop||c.scrollLeft)){d=c.scrollTop;f=c.scrollLeft}else{if(e){d=e.scrollTop;f=e.scrollLeft}else{}}return{top:d,left:f}},getStyle:function(c,d){return YAHOO.util.Dom.getStyle(c,d)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,c){var d=YAHOO.util.Dom.getXY(c);YAHOO.util.Dom.setXY(e,d)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(c,d){return(c-d)},_timeoutCount:0,_addListeners:function(){var c=YAHOO.util.DDM;if(YAHOO.util.Event&&document){c._onLoad()}else{if(c._timeoutCount>2000){}else{setTimeout(c._addListeners,10);if(document&&document.body){c._timeoutCount+=1}}}},handleWasClicked:function(e,c){if(this.isHandle(c,e.id)){return true}else{var d=e.parentNode;while(d){if(this.isHandle(c,d.id)){return true}else{d=d.parentNode}}}return false}}}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners()}(function(){var a=YAHOO.util.Event;var b=YAHOO.util.Dom;YAHOO.util.DragDrop=function(c,e,d){if(c){this.init(c,e,d)}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},unlock:function(){this.locked=false},isTarget:true,padding:null,dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(d,c){},startDrag:function(d,c){},b4Drag:function(c){},onDrag:function(c){},onDragEnter:function(d,c){},b4DragOver:function(c){},onDragOver:function(d,c){},b4DragOut:function(c){},onDragOut:function(d,c){},b4DragDrop:function(c){},onDragDrop:function(d,c){},onInvalidDrop:function(c){},b4EndDrag:function(c){},endDrag:function(c){},b4MouseDown:function(c){},onMouseDown:function(c){},onMouseUp:function(c){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=b.get(this.id)}return this._domRef},getDragEl:function(){return b.get(this.dragElId)},init:function(c,f,e){this.initTarget(c,f,e);a.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var d in this.events){this.createEvent(d+"Event")}},initTarget:function(c,e,d){this.config=d||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof c!=="string"){this._domRef=c;c=b.generateId(c)}this.id=c;this.addToGroup((e)?e:"default");this.handleElId=c;a.onAvailable(c,this.handleOnAvailable,this,true);this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig()},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var c in this.config.events){if(this.config.events[c]===false){this.events[c]=false}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);this.useShim=((this.config.useShim===true)?true:false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(d,f,c,e){if(!f&&0!==f){this.padding=[d,d,d,d]}else{if(!c&&0!==c){this.padding=[d,f,d,f]}else{this.padding=[d,f,c,e]}}},setInitPosition:function(e,f){var d=this.getEl();if(!this.DDM.verifyEl(d)){if(d&&d.style&&(d.style.display=="none")){}else{}return}var g=e||0;var h=f||0;var c=b.getXY(d);this.initPageX=c[0]-g;this.initPageY=c[1]-h;this.lastPageX=c[0];this.lastPageY=c[1];this.setStartPosition(c)},setStartPosition:function(c){var d=c||b.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=d[0];this.startPageY=d[1]},addToGroup:function(c){this.groups[c]=true;this.DDM.regDragDrop(this,c)},removeFromGroup:function(c){if(this.groups[c]){delete this.groups[c]}this.DDM.removeDDFromGroup(this,c)},setDragElId:function(c){this.dragElId=c},setHandleElId:function(c){if(typeof c!=="string"){c=b.generateId(c)}this.handleElId=c;this.DDM.regHandle(this.id,c)},setOuterHandleElId:function(c){if(typeof c!=="string"){c=b.generateId(c)}a.on(c,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(c);this.hasOuterHandles=true},unreg:function(){a.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(c,d){var j=c.which||c.button;if(this.primaryButtonOnly&&j>1){return}if(this.isLocked()){return}var k=this.b4MouseDown(c),g=true;if(this.events.b4MouseDown){g=this.fireEvent("b4MouseDownEvent",c)}var h=this.onMouseDown(c),e=true;if(this.events.mouseDown){e=this.fireEvent("mouseDownEvent",c)}if((k===false)||(h===false)||(g===false)||(e===false)){return}this.DDM.refreshCache(this.groups);var f=new YAHOO.util.Point(a.getPageX(c),a.getPageY(c));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(f,this)){}else{if(this.clickValidator(c)){this.setStartPosition();this.DDM.handleMouseDown(c,this);this.DDM.stopEvent(c)}else{}}},clickValidator:function(c){var d=YAHOO.util.Event.getTarget(c);return(this.isValidHandleChild(d)&&(this.id==this.handleElId||this.DDM.handleWasClicked(d,this.id)))},getTargetCoord:function(d,e){var f=d-this.deltaX;var c=e-this.deltaY;if(this.constrainX){if(f<this.minX){f=this.minX}if(f>this.maxX){f=this.maxX}}if(this.constrainY){if(c<this.minY){c=this.minY}if(c>this.maxY){c=this.maxY}}f=this.getTick(f,this.xTicks);c=this.getTick(c,this.yTicks);return{x:f,y:c}},addInvalidHandleType:function(d){var c=d.toUpperCase();this.invalidHandleTypes[c]=c},addInvalidHandleId:function(c){if(typeof c!=="string"){c=b.generateId(c)}this.invalidHandleIds[c]=c},addInvalidHandleClass:function(c){this.invalidHandleClasses.push(c)},removeInvalidHandleType:function(d){var c=d.toUpperCase();delete this.invalidHandleTypes[c]},removeInvalidHandleId:function(c){if(typeof c!=="string"){c=b.generateId(c)}delete this.invalidHandleIds[c]},removeInvalidHandleClass:function(d){for(var c=0,e=this.invalidHandleClasses.length;c<e;++c){if(this.invalidHandleClasses[c]==d){delete this.invalidHandleClasses[c]}}},isValidHandleChild:function(e){var f=true;var c;try{c=e.nodeName.toUpperCase()}catch(d){c=e.nodeName}f=f&&!this.invalidHandleTypes[c];f=f&&!this.invalidHandleIds[e.id];for(var g=0,h=this.invalidHandleClasses.length;f&&g<h;++g){f=!b.hasClass(e,this.invalidHandleClasses[g])}return f},setXTicks:function(c,f){this.xTicks=[];this.xTickSize=f;var d={};for(var e=this.initPageX;e>=this.minX;e=e-f){if(!d[e]){this.xTicks[this.xTicks.length]=e;d[e]=true}}for(e=this.initPageX;e<=this.maxX;e=e+f){if(!d[e]){this.xTicks[this.xTicks.length]=e;d[e]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(c,f){this.yTicks=[];this.yTickSize=f;var d={};for(var e=this.initPageY;e>=this.minY;e=e-f){if(!d[e]){this.yTicks[this.yTicks.length]=e;d[e]=true}}for(e=this.initPageY;e<=this.maxY;e=e+f){if(!d[e]){this.yTicks[this.yTicks.length]=e;d[e]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(c,d,e){this.leftConstraint=parseInt(c,10);this.rightConstraint=parseInt(d,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(e){this.setXTicks(this.initPageX,e)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(e,c,d){this.topConstraint=parseInt(e,10);this.bottomConstraint=parseInt(c,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var c=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var d=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(c,d)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(c,f){if(!f){return c}else{if(f[0]>=c){return f[0]}else{for(var h=0,j=f.length;h<j;++h){var g=h+1;if(f[g]&&f[g]>=c){var d=c-f[h];var e=f[g]-c;return(e>d)?f[h]:f[g]}}return f[f.length-1]}}},toString:function(){return("DragDrop "+this.id)}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider)})();YAHOO.util.DD=function(b,a,c){if(b){this.init(b,a,c)}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(c,d){var a=c-this.startPageX;var b=d-this.startPageY;this.setDelta(a,b)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(b,c){var a=this.getDragEl();this.alignElWithMouse(a,b,c)},alignElWithMouse:function(g,c,d){var e=this.getTargetCoord(c,d);if(!this.deltaSetXY){var b=[e.x,e.y];YAHOO.util.Dom.setXY(g,b);var f=parseInt(YAHOO.util.Dom.getStyle(g,"left"),10);var h=parseInt(YAHOO.util.Dom.getStyle(g,"top"),10);this.deltaSetXY=[f-e.x,h-e.y]}else{YAHOO.util.Dom.setStyle(g,"left",(e.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(g,"top",(e.y+this.deltaSetXY[1])+"px")}this.cachePosition(e.x,e.y);var a=this;setTimeout(function(){a.autoScroll.call(a,e.x,e.y,g.offsetHeight,g.offsetWidth)},0)},cachePosition:function(c,a){if(c){this.lastPageX=c;this.lastPageY=a}else{var b=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=b[0];this.lastPageY=b[1]}},autoScroll:function(j,k,o,h){if(this.scroll){var g=this.DDM.getClientHeight();var c=this.DDM.getClientWidth();var e=this.DDM.getScrollTop();var a=this.DDM.getScrollLeft();var l=o+k;var f=h+j;var m=(g+e-k-this.deltaY);var n=(c+a-j-this.deltaX);var b=40;var d=(document.all)?80:30;if(l>g&&m<b){window.scrollTo(a,e+d)}if(k<e&&e>0&&k-e<b){window.scrollTo(a,e-d)}if(f>c&&n<b){window.scrollTo(a+d,e)}if(j<a&&a>0&&j-a<b){window.scrollTo(a-d,e)}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},b4Drag:function(a){this.setDragElPos(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},toString:function(){return("DD "+this.id)}});YAHOO.util.DDProxy=function(b,a,c){if(b){this.init(b,a,c);this.initFrame()}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var f=this,a=document.body;if(!a||!a.firstChild){setTimeout(function(){f.createFrame()},50);return}var b=this.getDragEl(),c=YAHOO.util.Dom;if(!b){b=document.createElement("div");b.id=this.dragElId;var d=b.style;d.position="absolute";d.visibility="hidden";d.cursor="move";d.border="2px solid #aaa";d.zIndex=999;d.height="25px";d.width="25px";var e=document.createElement("div");c.setStyle(e,"height","100%");c.setStyle(e,"width","100%");c.setStyle(e,"background-color","#ccc");c.setStyle(e,"opacity","0");b.appendChild(e);a.insertBefore(b,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId)},showFrame:function(b,c){var d=this.getEl();var a=this.getDragEl();var e=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(e.width,10)/2),Math.round(parseInt(e.height,10)/2))}this.setDragElPos(b,c);YAHOO.util.Dom.setStyle(a,"visibility","visible")},_resizeProxy:function(){if(this.resizeFrame){var f=YAHOO.util.Dom;var c=this.getEl();var b=this.getDragEl();var g=parseInt(f.getStyle(b,"borderTopWidth"),10);var e=parseInt(f.getStyle(b,"borderRightWidth"),10);var h=parseInt(f.getStyle(b,"borderBottomWidth"),10);var a=parseInt(f.getStyle(b,"borderLeftWidth"),10);if(isNaN(g)){g=0}if(isNaN(e)){e=0}if(isNaN(h)){h=0}if(isNaN(a)){a=0}var j=Math.max(0,c.offsetWidth-e-a);var d=Math.max(0,c.offsetHeight-g-h);f.setStyle(b,"width",j+"px");f.setStyle(b,"height",d+"px")}},b4MouseDown:function(c){this.setStartPosition();var a=YAHOO.util.Event.getPageX(c);var b=YAHOO.util.Event.getPageY(c);this.autoOffset(a,b)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden")},endDrag:function(b){var c=YAHOO.util.Dom;var d=this.getEl();var a=this.getDragEl();c.setStyle(a,"visibility","");c.setStyle(d,"visibility","hidden");YAHOO.util.DDM.moveToEl(d,a);c.setStyle(a,"visibility","hidden");c.setStyle(d,"visibility","")},toString:function(){return("DDProxy "+this.id)}});YAHOO.util.DDTarget=function(b,a,c){if(b){this.initTarget(b,a,c)}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id)}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/dragdrop/dragdrop-min.js")}YAHOO.util.Attribute=function(b,a){if(a){this.owner=a;this.configure(b,true)}};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var a=this.value;if(this.getter){a=this.getter.call(this.owner,this.name)}return a},setValue:function(b,f){var c,a=this.owner,e=this.name;var d={type:e,prevValue:this.getValue(),newValue:b};if(this.readOnly||(this.writeOnce&&this._written)){return false}if(this.validator&&!this.validator.call(a,b)){return false}if(!f){c=a.fireBeforeChangeEvent(d);if(c===false){return false}}if(this.setter){b=this.setter.call(a,b,this.name);if(b===undefined){}}if(this.method){this.method.call(a,b,this.name)}this.value=b;this._written=true;d.type=e;if(!f){this.owner.fireChangeEvent(d)}return true},configure:function(c,b){c=c||{};if(b){this._written=false}this._initialConfig=this._initialConfig||{};for(var a in c){if(c.hasOwnProperty(a)){this[a]=c[a];if(b){this._initialConfig[a]=c[a]}}}},resetValue:function(){return this.setValue(this._initialConfig.value)},resetConfig:function(){this.configure(this._initialConfig,true)},refresh:function(a){this.setValue(this.value,a)}};(function(){var a=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(b){this._configs=this._configs||{};var c=this._configs[b];if(!c||!this._configs.hasOwnProperty(b)){return null}return c.getValue()},set:function(c,b,e){this._configs=this._configs||{};var d=this._configs[c];if(!d){return false}return d.setValue(b,e)},getAttributeKeys:function(){this._configs=this._configs;var b=[],c;for(c in this._configs){if(a.hasOwnProperty(this._configs,c)&&!a.isUndefined(this._configs[c])){b[b.length]=c}}return b},setAttributes:function(b,d){for(var c in b){if(a.hasOwnProperty(b,c)){this.set(c,b[c],d)}}},resetValue:function(b,c){this._configs=this._configs||{};if(this._configs[b]){this.set(b,this._configs[b]._initialConfig.value,c);return true}return false},refresh:function(c,e){this._configs=this._configs||{};var b=this._configs;c=((a.isString(c))?[c]:c)||this.getAttributeKeys();for(var d=0,f=c.length;d<f;++d){if(b.hasOwnProperty(c[d])){this._configs[c[d]].refresh(e)}}},register:function(c,b){this.setAttributeConfig(c,b)},getAttributeConfig:function(c){this._configs=this._configs||{};var d=this._configs[c]||{};var b={};for(c in d){if(a.hasOwnProperty(d,c)){b[c]=d[c]}}return b},setAttributeConfig:function(d,c,b){this._configs=this._configs||{};c=c||{};if(!this._configs[d]){c.name=d;this._configs[d]=this.createAttribute(c)}else{this._configs[d].configure(c,b)}},configureAttribute:function(d,c,b){this.setAttributeConfig(d,c,b)},resetAttributeConfig:function(b){this._configs=this._configs||{};this._configs[b].resetConfig()},subscribe:function(c,b){this._events=this._events||{};if(!(c in this._events)){this._events[c]=this.createEvent(c)}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments)},on:function(){this.subscribe.apply(this,arguments)},addListener:function(){this.subscribe.apply(this,arguments)},fireBeforeChangeEvent:function(b){var c="before";c+=b.type.charAt(0).toUpperCase()+b.type.substr(1)+"Change";b.type=c;return this.fireEvent(b.type,b)},fireChangeEvent:function(b){b.type+="Change";return this.fireEvent(b.type,b)},createAttribute:function(b){return new YAHOO.util.Attribute(b,this)}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider)})();(function(){var c=YAHOO.util.Dom,b=YAHOO.util.AttributeProvider;var a=function(e,d){this.init.apply(this,arguments)};a.DOM_EVENTS={click:true,dblclick:true,keydown:true,keypress:true,keyup:true,mousedown:true,mousemove:true,mouseout:true,mouseover:true,mouseup:true,focus:true,blur:true,submit:true,change:true};a.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(d,f){var e=this.get("element");if(e){e[f]=d}},DEFAULT_HTML_GETTER:function(f){var e=this.get("element"),d;if(e){d=e[f]}return d},appendChild:function(d){d=d.get?d.get("element"):d;return this.get("element").appendChild(d)},getElementsByTagName:function(d){return this.get("element").getElementsByTagName(d)},hasChildNodes:function(){return this.get("element").hasChildNodes()},insertBefore:function(e,d){e=e.get?e.get("element"):e;d=(d&&d.get)?d.get("element"):d;return this.get("element").insertBefore(e,d)},removeChild:function(d){d=d.get?d.get("element"):d;return this.get("element").removeChild(d)},replaceChild:function(e,d){e=e.get?e.get("element"):e;d=d.get?d.get("element"):d;return this.get("element").replaceChild(e,d)},initAttributes:function(d){},addListener:function(e,f,d,g){var h=this.get("element")||this.get("id");g=g||this;var j=this;if(!this._events[e]){if(h&&this.DOM_EVENTS[e]){YAHOO.util.Event.addListener(h,e,function(k){if(k.srcElement&&!k.target){k.target=k.srcElement}j.fireEvent(e,k)},d,g)}this.createEvent(e,this)}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments)},on:function(){return this.addListener.apply(this,arguments)},subscribe:function(){return this.addListener.apply(this,arguments)},removeListener:function(d,e){return this.unsubscribe.apply(this,arguments)},addClass:function(d){c.addClass(this.get("element"),d)},getElementsByClassName:function(d,e){return c.getElementsByClassName(d,e,this.get("element"))},hasClass:function(d){return c.hasClass(this.get("element"),d)},removeClass:function(d){return c.removeClass(this.get("element"),d)},replaceClass:function(d,e){return c.replaceClass(this.get("element"),d,e)},setStyle:function(d,e){return c.setStyle(this.get("element"),d,e)},getStyle:function(d){return c.getStyle(this.get("element"),d)},fireQueue:function(){var e=this._queue;for(var d=0,f=e.length;d<f;++d){this[e[d][0]].apply(this,e[d][1])}},appendTo:function(e,d){e=(e.get)?e.get("element"):c.get(e);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:e});d=(d&&d.get)?d.get("element"):c.get(d);var f=this.get("element");if(!f){return false}if(!e){return false}if(f.parent!=e){if(d){e.insertBefore(f,d)}else{e.appendChild(f)}}this.fireEvent("appendTo",{type:"appendTo",target:e});return f},get:function(f){var d=this._configs||{},e=d.element;if(e&&!d[f]&&!YAHOO.lang.isUndefined(e.value[f])){this._setHTMLAttrConfig(f)}return b.prototype.get.call(this,f)},setAttributes:function(d,g){var j={},f=this._configOrder;for(var e=0,k=f.length;e<k;++e){if(d[f[e]]!==undefined){j[f[e]]=true;this.set(f[e],d[f[e]],g)}}for(var h in d){if(d.hasOwnProperty(h)&&!j[h]){this.set(h,d[h],g)}}},set:function(f,d,g){var e=this.get("element");if(!e){this._queue[this._queue.length]=["set",arguments];if(this._configs[f]){this._configs[f].value=d}return}if(!this._configs[f]&&!YAHOO.lang.isUndefined(e[f])){this._setHTMLAttrConfig(f)}return b.prototype.set.apply(this,arguments)},setAttributeConfig:function(f,e,d){this._configOrder.push(f);b.prototype.setAttributeConfig.apply(this,arguments)},createEvent:function(d,e){this._events[d]=true;return b.prototype.createEvent.apply(this,arguments)},init:function(d,e){this._initElement(d,e)},destroy:function(){var d=this.get("element");YAHOO.util.Event.purgeElement(d,true);this.unsubscribeAll();if(d&&d.parentNode){d.parentNode.removeChild(d)}this._queue=[];this._events={};this._configs={};this._configOrder=[]},_initElement:function(f,g){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];g=g||{};g.element=g.element||f||null;var d=false;var h=a.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var e in h){if(h.hasOwnProperty(e)){this.DOM_EVENTS[e]=h[e]}}if(typeof g.element==="string"){this._setHTMLAttrConfig("id",{value:g.element})}if(c.get(g.element)){d=true;this._initHTMLElement(g);this._initContent(g)}YAHOO.util.Event.onAvailable(g.element,function(){if(!d){this._initHTMLElement(g)}this.fireEvent("available",{type:"available",target:c.get(g.element)})},this,true);YAHOO.util.Event.onContentReady(g.element,function(){if(!d){this._initContent(g)}this.fireEvent("contentReady",{type:"contentReady",target:c.get(g.element)})},this,true)},_initHTMLElement:function(d){this.setAttributeConfig("element",{value:c.get(d.element),readOnly:true})},_initContent:function(d){this.initAttributes(d);this.setAttributes(d,true);this.fireQueue()},_setHTMLAttrConfig:function(f,d){var e=this.get("element");d=d||{};d.name=f;d.setter=d.setter||this.DEFAULT_HTML_SETTER;d.getter=d.getter||this.DEFAULT_HTML_GETTER;d.value=d.value||e[f];this._configs[f]=new YAHOO.util.Attribute(d,this)}};YAHOO.augment(a,b);YAHOO.util.Element=a})();YAHOO.register("element",YAHOO.util.Element,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/element/element-min.js")}(function(){var l=YAHOO.util.Dom,e=YAHOO.util.Event,j=YAHOO.lang,f=YAHOO.env.ua,c=YAHOO.widget.Overlay,h=YAHOO.widget.Menu,a={},g=null,n=null,b=null;function m(s,t,p,r){var o,q;if(j.isString(s)&&j.isString(t)){if(f.ie){q='<input type="'+s+'" name="'+t+'"';if(r){q+=" checked"}q+=">";o=document.createElement(q)}else{o=document.createElement("input");o.name=t;o.type=s;if(r){o.checked=true}}o.value=p}return o}function k(v,p){var w=v.nodeName.toUpperCase(),r=this,q,u,t;function o(x){if(!(x in p)){q=v.getAttributeNode(x);if(q&&("value" in q)){p[x]=q.value}}}function s(){o("type");if(p.type=="button"){p.type="push"}if(!("disabled" in p)){p.disabled=v.disabled}o("name");o("value");o("title")}switch(w){case"A":p.type="link";o("href");o("target");break;case"INPUT":s();if(!("checked" in p)){p.checked=v.checked}break;case"BUTTON":s();u=v.parentNode.parentNode;if(l.hasClass(u,this.CSS_CLASS_NAME+"-checked")){p.checked=true}if(l.hasClass(u,this.CSS_CLASS_NAME+"-disabled")){p.disabled=true}v.removeAttribute("value");v.setAttribute("type","button");break}v.removeAttribute("id");v.removeAttribute("name");if(!("tabindex" in p)){p.tabindex=v.tabIndex}if(!("label" in p)){t=w=="INPUT"?v.value:v.innerHTML;if(t&&t.length>0){p.label=t}}}function d(q){var r=q.attributes,s=r.srcelement,o=s.nodeName.toUpperCase(),p=this;if(o==this.NODE_NAME){q.element=s;q.id=s.id;l.getElementsBy(function(t){switch(t.nodeName.toUpperCase()){case"BUTTON":case"A":case"INPUT":k.call(p,t,r);break}},"*",s)}else{switch(o){case"BUTTON":case"A":case"INPUT":k.call(this,s,r);break}}}YAHOO.widget.Button=function(o,r){if(!c&&YAHOO.widget.Overlay){c=YAHOO.widget.Overlay}if(!h&&YAHOO.widget.Menu){h=YAHOO.widget.Menu}var p=YAHOO.widget.Button.superclass.constructor,q,s;if(arguments.length==1&&!j.isString(o)&&!o.nodeName){if(!o.id){o.id=l.generateId()}p.call(this,(this.createButtonElement(o.type)),o)}else{q={element:null,attributes:(r||{})};if(j.isString(o)){s=l.get(o);if(s){if(!q.attributes.id){q.attributes.id=o}q.attributes.srcelement=s;d.call(this,q);if(!q.element){q.element=this.createButtonElement(q.attributes.type)}p.call(this,q.element,q.attributes)}}else{if(o.nodeName){if(!q.attributes.id){if(o.id){q.attributes.id=o.id}else{q.attributes.id=l.generateId()}}q.attributes.srcelement=o;d.call(this,q);if(!q.element){q.element=this.createButtonElement(q.attributes.type)}p.call(this,q.element,q.attributes)}}}};YAHOO.extend(YAHOO.widget.Button,YAHOO.util.Element,{_button:null,_menu:null,_hiddenFields:null,_onclickAttributeValue:null,_activationKeyPressed:false,_activationButtonPressed:false,_hasKeyEventHandlers:false,_hasMouseEventHandlers:false,_nOptionRegionX:0,NODE_NAME:"SPAN",CHECK_ACTIVATION_KEYS:[32],ACTIVATION_KEYS:[13,32],OPTION_AREA_WIDTH:20,CSS_CLASS_NAME:"yui-button",RADIO_DEFAULT_TITLE:"Unchecked.  Click to check.",RADIO_CHECKED_TITLE:"Checked.  Click another button to uncheck",CHECKBOX_DEFAULT_TITLE:"Unchecked.  Click to check.",CHECKBOX_CHECKED_TITLE:"Checked.  Click to uncheck.",MENUBUTTON_DEFAULT_TITLE:"Menu collapsed.  Click to expand.",MENUBUTTON_MENU_VISIBLE_TITLE:"Menu expanded.  Click or press Esc to collapse.",SPLITBUTTON_DEFAULT_TITLE:("Menu collapsed.  Click inside option region or press down arrow key to show the menu."),SPLITBUTTON_OPTION_VISIBLE_TITLE:"Menu expanded.  Press Esc to hide the menu.",SUBMIT_TITLE:"Click to submit form.",_setType:function(o){if(o=="split"){this.on("option",this._onOption)}},_setLabel:function(p){this._button.innerHTML=p;var o,q=f.gecko;if(q&&q<1.9&&l.inDocument(this.get("element"))){o=this.CSS_CLASS_NAME;this.removeClass(o);j.later(0,this,this.addClass,o)}},_setTabIndex:function(o){this._button.tabIndex=o},_setTitle:function(o){var p=o;if(this.get("type")!="link"){if(!p){switch(this.get("type")){case"radio":p=this.RADIO_DEFAULT_TITLE;break;case"checkbox":p=this.CHECKBOX_DEFAULT_TITLE;break;case"menu":p=this.MENUBUTTON_DEFAULT_TITLE;break;case"split":p=this.SPLITBUTTON_DEFAULT_TITLE;break;case"submit":p=this.SUBMIT_TITLE;break}}this._button.title=p}},_setDisabled:function(o){if(this.get("type")!="link"){if(o){if(this._menu){this._menu.hide()}if(this.hasFocus()){this.blur()}this._button.setAttribute("disabled","disabled");this.addStateCSSClasses("disabled");this.removeStateCSSClasses("hover");this.removeStateCSSClasses("active");this.removeStateCSSClasses("focus")}else{this._button.removeAttribute("disabled");this.removeStateCSSClasses("disabled")}}},_setHref:function(o){if(this.get("type")=="link"){this._button.href=o}},_setTarget:function(o){if(this.get("type")=="link"){this._button.setAttribute("target",o)}},_setChecked:function(p){var o=this.get("type"),q;if(o=="checkbox"||o=="radio"){if(p){this.addStateCSSClasses("checked");q=(o=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE}else{this.removeStateCSSClasses("checked");q=(o=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE}if(!this._hasDefaultTitle){this.set("title",q)}}},_setMenu:function(r){var w=this.get("lazyloadmenu"),u=this.get("element"),y,p=false,o,x,v;function q(){o.render(u.parentNode);this.removeListener("appendTo",q)}function s(){o.cfg.queueProperty("container",u.parentNode);this.removeListener("appendTo",s)}function t(){var z;if(o){l.addClass(o.element,this.get("menuclassname"));l.addClass(o.element,"yui-"+this.get("type")+"-button-menu");o.showEvent.subscribe(this._onMenuShow,null,this);o.hideEvent.subscribe(this._onMenuHide,null,this);o.renderEvent.subscribe(this._onMenuRender,null,this);if(h&&o instanceof h){if(w){z=this.get("container");if(z){o.cfg.queueProperty("container",z)}else{this.on("appendTo",s)}}o.cfg.queueProperty("clicktohide",false);o.keyDownEvent.subscribe(this._onMenuKeyDown,this,true);o.subscribe("click",this._onMenuClick,this,true);this.on("selectedMenuItemChange",this._onSelectedMenuItemChange);v=o.srcElement;if(v&&v.nodeName.toUpperCase()=="SELECT"){v.style.display="none";v.parentNode.removeChild(v)}}else{if(c&&o instanceof c){if(!g){g=new YAHOO.widget.OverlayManager()}g.register(o)}}this._menu=o;if(!p&&!w){if(l.inDocument(u)){o.render(u.parentNode)}else{this.on("appendTo",q)}}}}if(c){if(h){y=h.prototype.CSS_CLASS_NAME}if(r&&h&&(r instanceof h)){o=r;p=true;t.call(this)}else{if(c&&r&&(r instanceof c)){o=r;p=true;o.cfg.queueProperty("visible",false);t.call(this)}else{if(h&&j.isArray(r)){o=new h(l.generateId(),{lazyload:w,itemdata:r});this._menu=o;this.on("appendTo",t)}else{if(j.isString(r)){x=l.get(r);if(x){if(h&&l.hasClass(x,y)||x.nodeName.toUpperCase()=="SELECT"){o=new h(r,{lazyload:w});t.call(this)}else{if(c){o=new c(r,{visible:false});t.call(this)}}}}else{if(r&&r.nodeName){if(h&&l.hasClass(r,y)||r.nodeName.toUpperCase()=="SELECT"){o=new h(r,{lazyload:w});t.call(this)}else{if(c){if(!r.id){l.generateId(r)}o=new c(r,{visible:false});t.call(this)}}}}}}}}},_setOnClick:function(o){if(this._onclickAttributeValue&&(this._onclickAttributeValue!=o)){this.removeListener("click",this._onclickAttributeValue.fn);this._onclickAttributeValue=null}if(!this._onclickAttributeValue&&j.isObject(o)&&j.isFunction(o.fn)){this.on("click",o.fn,o.obj,o.scope);this._onclickAttributeValue=o}},_isActivationKey:function(t){var o=this.get("type"),s=(o=="checkbox"||o=="radio")?this.CHECK_ACTIVATION_KEYS:this.ACTIVATION_KEYS,q=s.length,p=false,r;if(q>0){r=q-1;do{if(t==s[r]){p=true;break}}while(r--)}return p},_isSplitButtonOptionKey:function(o){var p=(e.getCharCode(o)==40);var q=function(r){e.preventDefault(r);this.removeListener("keypress",q)};if(p){if(f.opera){this.on("keypress",q)}e.preventDefault(o)}return p},_addListenersToForm:function(){var o=this.getForm(),p=YAHOO.widget.Button.onFormKeyPress,q,u,r,s,t;if(o){e.on(o,"reset",this._onFormReset,null,this);e.on(o,"submit",this._onFormSubmit,null,this);u=this.get("srcelement");if(this.get("type")=="submit"||(u&&u.type=="submit")){r=e.getListeners(o,"keypress");q=false;if(r){s=r.length;if(s>0){t=s-1;do{if(r[t].fn==p){q=true;break}}while(t--)}}if(!q){e.on(o,"keypress",p)}}}},_showMenu:function(o){if(YAHOO.widget.MenuManager){YAHOO.widget.MenuManager.hideVisible()}if(g){g.hideAll()}var s=this._menu,p=this.get("menualignment"),q=this.get("focusmenu"),r;if(this._renderedMenu){s.cfg.setProperty("context",[this.get("element"),p[0],p[1]]);s.cfg.setProperty("preventcontextoverlap",true);s.cfg.setProperty("constraintoviewport",true)}else{s.cfg.queueProperty("context",[this.get("element"),p[0],p[1]]);s.cfg.queueProperty("preventcontextoverlap",true);s.cfg.queueProperty("constraintoviewport",true)}this.focus();if(h&&s&&(s instanceof h)){r=s.focus;s.focus=function(){};if(this._renderedMenu){s.cfg.setProperty("minscrollheight",this.get("menuminscrollheight"));s.cfg.setProperty("maxheight",this.get("menumaxheight"))}else{s.cfg.queueProperty("minscrollheight",this.get("menuminscrollheight"));s.cfg.queueProperty("maxheight",this.get("menumaxheight"))}s.show();s.focus=r;s.align();if(o.type=="mousedown"){e.stopPropagation(o)}if(q){s.focus()}}else{if(c&&s&&(s instanceof c)){if(!this._renderedMenu){s.render(this.get("element").parentNode)}s.show();s.align()}}},_hideMenu:function(){var o=this._menu;if(o){o.hide()}},_onMouseOver:function(q){var o=this.get("type"),r,p;if(o==="split"){r=this.get("element");p=(l.getX(r)+(r.offsetWidth-this.OPTION_AREA_WIDTH));this._nOptionRegionX=p}if(!this._hasMouseEventHandlers){if(o==="split"){this.on("mousemove",this._onMouseMove)}this.on("mouseout",this._onMouseOut);this._hasMouseEventHandlers=true}this.addStateCSSClasses("hover");if(o==="split"&&(e.getPageX(q)>p)){this.addStateCSSClasses("hoveroption")}if(this._activationButtonPressed){this.addStateCSSClasses("active")}if(this._bOptionPressed){this.addStateCSSClasses("activeoption")}if(this._activationButtonPressed||this._bOptionPressed){e.removeListener(document,"mouseup",this._onDocumentMouseUp)}},_onMouseMove:function(p){var o=this._nOptionRegionX;if(o){if(e.getPageX(p)>o){this.addStateCSSClasses("hoveroption")}else{this.removeStateCSSClasses("hoveroption")}}},_onMouseOut:function(p){var o=this.get("type");this.removeStateCSSClasses("hover");if(o!="menu"){this.removeStateCSSClasses("active")}if(this._activationButtonPressed||this._bOptionPressed){e.on(document,"mouseup",this._onDocumentMouseUp,null,this)}if(o==="split"&&(e.getPageX(p)>this._nOptionRegionX)){this.removeStateCSSClasses("hoveroption")}},_onDocumentMouseUp:function(p){this._activationButtonPressed=false;this._bOptionPressed=false;var o=this.get("type"),r,q;if(o=="menu"||o=="split"){r=e.getTarget(p);q=this._menu.element;if(r!=q&&!l.isAncestor(q,r)){this.removeStateCSSClasses((o=="menu"?"active":"activeoption"));this._hideMenu()}}e.removeListener(document,"mouseup",this._onDocumentMouseUp)},_onMouseDown:function(p){var o,q=true;function r(){this._hideMenu();this.removeListener("mouseup",r)}if((p.which||p.button)==1){if(!this.hasFocus()){this.focus()}o=this.get("type");if(o=="split"){if(e.getPageX(p)>this._nOptionRegionX){this.fireEvent("option",p);q=false}else{this.addStateCSSClasses("active");this._activationButtonPressed=true}}else{if(o=="menu"){if(this.isActive()){this._hideMenu();this._activationButtonPressed=false}else{this._showMenu(p);this._activationButtonPressed=true}}else{this.addStateCSSClasses("active");this._activationButtonPressed=true}}if(o=="split"||o=="menu"){this._hideMenuTimer=j.later(250,this,this.on,["mouseup",r])}}return q},_onMouseUp:function(p){var o=this.get("type"),r=this._hideMenuTimer,q=true;if(r){r.cancel()}if(o=="checkbox"||o=="radio"){this.set("checked",!(this.get("checked")))}this._activationButtonPressed=false;if(o!="menu"){this.removeStateCSSClasses("active")}if(o=="split"&&e.getPageX(p)>this._nOptionRegionX){q=false}return q},_onFocus:function(o){var p;this.addStateCSSClasses("focus");if(this._activationKeyPressed){this.addStateCSSClasses("active")}b=this;if(!this._hasKeyEventHandlers){p=this._button;e.on(p,"blur",this._onBlur,null,this);e.on(p,"keydown",this._onKeyDown,null,this);e.on(p,"keyup",this._onKeyUp,null,this);this._hasKeyEventHandlers=true}this.fireEvent("focus",o)},_onBlur:function(o){this.removeStateCSSClasses("focus");if(this.get("type")!="menu"){this.removeStateCSSClasses("active")}if(this._activationKeyPressed){e.on(document,"keyup",this._onDocumentKeyUp,null,this)}b=null;this.fireEvent("blur",o)},_onDocumentKeyUp:function(o){if(this._isActivationKey(e.getCharCode(o))){this._activationKeyPressed=false;e.removeListener(document,"keyup",this._onDocumentKeyUp)}},_onKeyDown:function(o){var p=this._menu;if(this.get("type")=="split"&&this._isSplitButtonOptionKey(o)){this.fireEvent("option",o)}else{if(this._isActivationKey(e.getCharCode(o))){if(this.get("type")=="menu"){this._showMenu(o)}else{this._activationKeyPressed=true;this.addStateCSSClasses("active")}}}if(p&&p.cfg.getProperty("visible")&&e.getCharCode(o)==27){p.hide();this.focus()}},_onKeyUp:function(p){var o;if(this._isActivationKey(e.getCharCode(p))){o=this.get("type");if(o=="checkbox"||o=="radio"){this.set("checked",!(this.get("checked")))}this._activationKeyPressed=false;if(this.get("type")!="menu"){this.removeStateCSSClasses("active")}}},_onClick:function(q){var o=this.get("type"),t,p,s,r;switch(o){case"radio":case"checkbox":if(!this._hasDefaultTitle){if(this.get("checked")){t=(o=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE}else{t=(o=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE}this.set("title",t)}break;case"submit":if(q.returnValue!==false){this.submitForm()}break;case"reset":p=this.getForm();if(p){p.reset()}break;case"menu":t=this._menu.cfg.getProperty("visible")?this.MENUBUTTON_MENU_VISIBLE_TITLE:this.MENUBUTTON_DEFAULT_TITLE;this.set("title",t);break;case"split":if(this._nOptionRegionX>0&&(e.getPageX(q)>this._nOptionRegionX)){r=false}else{this._hideMenu();s=this.get("srcelement");if(s&&s.type=="submit"&&q.returnValue!==false){this.submitForm()}}t=this._menu.cfg.getProperty("visible")?this.SPLITBUTTON_OPTION_VISIBLE_TITLE:this.SPLITBUTTON_DEFAULT_TITLE;this.set("title",t);break}return r},_onDblClick:function(o){var p=true;if(this.get("type")=="split"&&e.getPageX(o)>this._nOptionRegionX){p=false}return p},_onAppendTo:function(o){j.later(0,this,this._addListenersToForm)},_onFormReset:function(p){var o=this.get("type"),q=this._menu;if(o=="checkbox"||o=="radio"){this.resetValue("checked")}if(h&&q&&(q instanceof h)){this.resetValue("selectedMenuItem")}},_onFormSubmit:function(o){this.createHiddenFields()},_onDocumentMouseDown:function(o){var r=e.getTarget(o),p=this.get("element"),q=this._menu.element;if(r!=p&&!l.isAncestor(p,r)&&r!=q&&!l.isAncestor(q,r)){this._hideMenu();e.removeListener(document,"mousedown",this._onDocumentMouseDown)}},_onOption:function(o){if(this.hasClass("yui-split-button-activeoption")){this._hideMenu();this._bOptionPressed=false}else{this._showMenu(o);this._bOptionPressed=true}},_onMenuShow:function(p){e.on(document,"mousedown",this._onDocumentMouseDown,null,this);var q,o;if(this.get("type")=="split"){q=this.SPLITBUTTON_OPTION_VISIBLE_TITLE;o="activeoption"}else{q=this.MENUBUTTON_MENU_VISIBLE_TITLE;o="active"}this.addStateCSSClasses(o);this.set("title",q)},_onMenuHide:function(p){var q=this._menu,r,o;if(this.get("type")=="split"){r=this.SPLITBUTTON_DEFAULT_TITLE;o="activeoption"}else{r=this.MENUBUTTON_DEFAULT_TITLE;o="active"}this.removeStateCSSClasses(o);this.set("title",r);if(this.get("type")=="split"){this._bOptionPressed=false}},_onMenuKeyDown:function(o,p){var q=p[0];if(e.getCharCode(q)==27){this.focus();if(this.get("type")=="split"){this._bOptionPressed=false}}},_onMenuRender:function(r){var o=this.get("element"),s=o.parentNode,t=this._menu,p=t.element,q=t.srcElement;if(s!=p.parentNode){s.appendChild(p)}this._renderedMenu=true;if(q&&q.nodeName.toLowerCase()==="select"&&q.value){this.set("selectedMenuItem",t.getItem(q.selectedIndex))}},_onMenuClick:function(q,r){var o=r[1],p;if(o){this.set("selectedMenuItem",o);p=this.get("srcelement");if(p&&p.type=="submit"){this.submitForm()}this._hideMenu()}},_onSelectedMenuItemChange:function(q){var p=q.prevValue,o=q.newValue;if(p){l.removeClass(p.element,"yui-button-selectedmenuitem")}if(o){l.addClass(o.element,"yui-button-selectedmenuitem")}},createButtonElement:function(q){var o=this.NODE_NAME,p=document.createElement(o);p.innerHTML="<"+o+' class="first-child">'+(q=="link"?"<a></a>":'<button type="button"></button>')+"</"+o+">";return p},addStateCSSClasses:function(p){var o=this.get("type");if(j.isString(p)){if(p!="activeoption"&&p!="hoveroption"){this.addClass(this.CSS_CLASS_NAME+("-"+p))}this.addClass("yui-"+o+("-button-"+p))}},removeStateCSSClasses:function(p){var o=this.get("type");if(j.isString(p)){this.removeClass(this.CSS_CLASS_NAME+("-"+p));this.removeClass("yui-"+o+("-button-"+p))}},createHiddenFields:function(){this.removeHiddenFields();var s=this.getForm(),o,z,v,q,p,u,t,A,w,r,y,x=false;if(s&&!this.get("disabled")){z=this.get("type");v=(z=="checkbox"||z=="radio");if((v&&this.get("checked"))||(n==this)){o=m((v?z:"hidden"),this.get("name"),this.get("value"),this.get("checked"));if(o){if(v){o.style.display="none"}s.appendChild(o)}}q=this._menu;if(h&&q&&(q instanceof h)){p=this.get("selectedMenuItem");y=q.srcElement;x=(y&&y.nodeName.toUpperCase()=="SELECT");if(p){t=(p.value===null||p.value==="")?p.cfg.getProperty("text"):p.value;u=this.get("name");if(x){r=y.name}else{if(u){r=(u+"_options")}}if(t&&r){A=m("hidden",r,t);s.appendChild(A)}}else{if(x){s.appendChild(y)}}}if(o&&A){this._hiddenFields=[o,A]}else{if(!o&&A){this._hiddenFields=A}else{if(o&&!A){this._hiddenFields=o}}}w=this._hiddenFields}return w},removeHiddenFields:function(){var o=this._hiddenFields,q,p;function r(s){if(l.inDocument(s)){s.parentNode.removeChild(s)}}if(o){if(j.isArray(o)){q=o.length;if(q>0){p=q-1;do{r(o[p])}while(p--)}}else{r(o)}this._hiddenFields=null}},submitForm:function(){var o=this.getForm(),p=this.get("srcelement"),q=false,r;if(o){if(this.get("type")=="submit"||(p&&p.type=="submit")){n=this}if(f.ie){q=o.fireEvent("onsubmit")}else{r=document.createEvent("HTMLEvents");r.initEvent("submit",true,true);q=o.dispatchEvent(r)}if((f.ie||f.webkit)&&q){o.submit()}}return q},init:function(z,E){var x=E.type=="link"?"a":"button",s=E.srcelement,o=z.getElementsByTagName(x)[0],q;if(!o){q=z.getElementsByTagName("input")[0];if(q){o=document.createElement("button");o.setAttribute("type","button");q.parentNode.replaceChild(o,q)}}this._button=o;this._hasDefaultTitle=(E.title&&E.title.length>0);YAHOO.widget.Button.superclass.init.call(this,z,E);var u=this.get("id"),A=u+"-button";o.id=A;var t,r;var B=function(F){return(F.htmlFor===u)};var v=function(){r.setAttribute((f.ie?"htmlFor":"for"),A)};if(s&&this.get("type")!="link"){t=l.getElementsBy(B,"label");if(j.isArray(t)&&t.length>0){r=t[0]}}a[u]=this;this.addClass(this.CSS_CLASS_NAME);this.addClass("yui-"+this.get("type")+"-button");e.on(this._button,"focus",this._onFocus,null,this);this.on("mouseover",this._onMouseOver);this.on("mousedown",this._onMouseDown);this.on("mouseup",this._onMouseUp);this.on("click",this._onClick);var p=this.get("onclick");this.set("onclick",null);this.set("onclick",p);this.on("dblclick",this._onDblClick);if(r){this.on("appendTo",v)}this.on("appendTo",this._onAppendTo);var C=this.get("container"),y=this.get("element"),D=l.inDocument(y),w;if(C){if(s&&s!=y){w=s.parentNode;if(w){w.removeChild(s)}}if(j.isString(C)){e.onContentReady(C,this.appendTo,C,this)}else{this.on("init",function(){j.later(0,this,this.appendTo,C)})}}else{if(!D&&s&&s!=y){w=s.parentNode;if(w){this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:w});w.replaceChild(y,s);this.fireEvent("appendTo",{type:"appendTo",target:w})}}else{if(this.get("type")!="link"&&D&&s&&s==y){this._addListenersToForm()}}}this.fireEvent("init",{type:"init",target:this})},initAttributes:function(o){var p=o||{};YAHOO.widget.Button.superclass.initAttributes.call(this,p);this.setAttributeConfig("type",{value:(p.type||"push"),validator:j.isString,writeOnce:true,method:this._setType});this.setAttributeConfig("label",{value:p.label,validator:j.isString,method:this._setLabel});this.setAttributeConfig("value",{value:p.value});this.setAttributeConfig("name",{value:p.name,validator:j.isString});this.setAttributeConfig("tabindex",{value:p.tabindex,validator:j.isNumber,method:this._setTabIndex});this.configureAttribute("title",{value:p.title,validator:j.isString,method:this._setTitle});this.setAttributeConfig("disabled",{value:(p.disabled||false),validator:j.isBoolean,method:this._setDisabled});this.setAttributeConfig("href",{value:p.href,validator:j.isString,method:this._setHref});this.setAttributeConfig("target",{value:p.target,validator:j.isString,method:this._setTarget});this.setAttributeConfig("checked",{value:(p.checked||false),validator:j.isBoolean,method:this._setChecked});this.setAttributeConfig("container",{value:p.container,writeOnce:true});this.setAttributeConfig("srcelement",{value:p.srcelement,writeOnce:true});this.setAttributeConfig("menu",{value:null,method:this._setMenu,writeOnce:true});this.setAttributeConfig("lazyloadmenu",{value:(p.lazyloadmenu===false?false:true),validator:j.isBoolean,writeOnce:true});this.setAttributeConfig("menuclassname",{value:(p.menuclassname||"yui-button-menu"),validator:j.isString,method:this._setMenuClassName,writeOnce:true});this.setAttributeConfig("menuminscrollheight",{value:(p.menuminscrollheight||90),validator:j.isNumber});this.setAttributeConfig("menumaxheight",{value:(p.menumaxheight||0),validator:j.isNumber});this.setAttributeConfig("menualignment",{value:(p.menualignment||["tl","bl"]),validator:j.isArray});this.setAttributeConfig("selectedMenuItem",{value:null});this.setAttributeConfig("onclick",{value:p.onclick,method:this._setOnClick});this.setAttributeConfig("focusmenu",{value:(p.focusmenu===false?false:true),validator:j.isBoolean})},focus:function(){if(!this.get("disabled")){this._button.focus()}},blur:function(){if(!this.get("disabled")){this._button.blur()}},hasFocus:function(){return(b==this)},isActive:function(){return this.hasClass(this.CSS_CLASS_NAME+"-active")},getMenu:function(){return this._menu},getForm:function(){var p=this._button,o;if(p){o=p.form}return o},getHiddenFields:function(){return this._hiddenFields},destroy:function(){var q=this.get("element"),r=q.parentNode,s=this._menu,o;if(s){if(g&&g.find(s)){g.remove(s)}s.destroy()}e.purgeElement(q);e.purgeElement(this._button);e.removeListener(document,"mouseup",this._onDocumentMouseUp);e.removeListener(document,"keyup",this._onDocumentKeyUp);e.removeListener(document,"mousedown",this._onDocumentMouseDown);var p=this.getForm();if(p){e.removeListener(p,"reset",this._onFormReset);e.removeListener(p,"submit",this._onFormSubmit)}this.unsubscribeAll();if(r){r.removeChild(q)}delete a[this.get("id")];o=l.getElementsByClassName(this.CSS_CLASS_NAME,this.NODE_NAME,p);if(j.isArray(o)&&o.length===0){e.removeListener(p,"keypress",YAHOO.widget.Button.onFormKeyPress)}},fireEvent:function(p,q){var o=arguments[0];if(this.DOM_EVENTS[o]&&this.get("disabled")){return false}return YAHOO.widget.Button.superclass.fireEvent.apply(this,arguments)},toString:function(){return("Button "+this.get("id"))}});YAHOO.widget.Button.onFormKeyPress=function(u){var w=e.getTarget(u),t=e.getCharCode(u),v=w.nodeName&&w.nodeName.toUpperCase(),y=w.type,s=false,q,o,x,p;function r(z){var A,B;switch(z.nodeName.toUpperCase()){case"INPUT":case"BUTTON":if(z.type=="submit"&&!z.disabled){if(!s&&!x){x=z}}break;default:A=z.id;if(A){q=a[A];if(q){s=true;if(!q.get("disabled")){B=q.get("srcelement");if(!o&&(q.get("type")=="submit"||(B&&B.type=="submit"))){o=q}}}}break}}if(t==13&&((v=="INPUT"&&(y=="text"||y=="password"||y=="checkbox"||y=="radio"||y=="file"))||v=="SELECT")){l.getElementsBy(r,"*",this);if(x){x.focus()}else{if(!x&&o){e.preventDefault(u);if(f.ie){o.get("element").fireEvent("onclick")}else{p=document.createEvent("HTMLEvents");p.initEvent("click",true,true);if(f.gecko<1.9){o.fireEvent("click",p)}else{o.get("element").dispatchEvent(p)}}}}}};YAHOO.widget.Button.addHiddenFieldsToForm=function(t){var o=l.getElementsByClassName(YAHOO.widget.Button.prototype.CSS_CLASS_NAME,"*",t),q=o.length,p,s,r;if(q>0){for(r=0;r<q;r++){s=o[r].id;if(s){p=a[s];if(p){p.createHiddenFields()}}}}};YAHOO.widget.Button.getButton=function(o){return a[o]}})();(function(){var d=YAHOO.util.Dom,e=YAHOO.util.Event,c=YAHOO.lang,a=YAHOO.widget.Button,b={};YAHOO.widget.ButtonGroup=function(g,j){var h=YAHOO.widget.ButtonGroup.superclass.constructor,f,k,l;if(arguments.length==1&&!c.isString(g)&&!g.nodeName){if(!g.id){l=d.generateId();g.id=l}h.call(this,(this._createGroupElement()),g)}else{if(c.isString(g)){k=d.get(g);if(k){if(k.nodeName.toUpperCase()==this.NODE_NAME){h.call(this,k,j)}}}else{f=g.nodeName.toUpperCase();if(f&&f==this.NODE_NAME){if(!g.id){g.id=d.generateId()}h.call(this,g,j)}}}};YAHOO.extend(YAHOO.widget.ButtonGroup,YAHOO.util.Element,{_buttons:null,NODE_NAME:"DIV",CSS_CLASS_NAME:"yui-buttongroup",_createGroupElement:function(){var f=document.createElement(this.NODE_NAME);return f},_setDisabled:function(g){var f=this.getCount(),h;if(f>0){h=f-1;do{this._buttons[h].set("disabled",g)}while(h--)}},_onKeyDown:function(f){var k=e.getTarget(f),h=e.getCharCode(f),j=k.parentNode.parentNode.id,g=b[j],l=-1;if(h==37||h==38){l=(g.index===0)?(this._buttons.length-1):(g.index-1)}else{if(h==39||h==40){l=(g.index===(this._buttons.length-1))?0:(g.index+1)}}if(l>-1){this.check(l);this.getButton(l).focus()}},_onAppendTo:function(g){var f=this._buttons,h=f.length,j;for(j=0;j<h;j++){f[j].appendTo(this.get("element"))}},_onButtonCheckedChange:function(h,j){var f=h.newValue,g=this.get("checkedButton");if(f&&g!=j){if(g){g.set("checked",false,true)}this.set("checkedButton",j);this.set("value",j.get("value"))}else{if(g&&!g.set("checked")){g.set("checked",true,true)}}},init:function(g,h){this._buttons=[];YAHOO.widget.ButtonGroup.superclass.init.call(this,g,h);this.addClass(this.CSS_CLASS_NAME);var f=this.getElementsByClassName("yui-radio-button");if(f.length>0){this.addButtons(f)}function k(l){return(l.type=="radio")}f=d.getElementsBy(k,"input",this.get("element"));if(f.length>0){this.addButtons(f)}this.on("keydown",this._onKeyDown);this.on("appendTo",this._onAppendTo);var j=this.get("container");if(j){if(c.isString(j)){e.onContentReady(j,function(){this.appendTo(j)},null,this)}else{this.appendTo(j)}}},initAttributes:function(f){var g=f||{};YAHOO.widget.ButtonGroup.superclass.initAttributes.call(this,g);this.setAttributeConfig("name",{value:g.name,validator:c.isString});this.setAttributeConfig("disabled",{value:(g.disabled||false),validator:c.isBoolean,method:this._setDisabled});this.setAttributeConfig("value",{value:g.value});this.setAttributeConfig("container",{value:g.container,writeOnce:true});this.setAttributeConfig("checkedButton",{value:null})},addButton:function(h){var f,g,l,m,k,j;if(h instanceof a&&h.get("type")=="radio"){f=h}else{if(!c.isString(h)&&!h.nodeName){h.type="radio";f=new a(h)}else{f=new a(h,{type:"radio"})}}if(f){m=this._buttons.length;k=f.get("name");j=this.get("name");f.index=m;this._buttons[m]=f;b[f.get("id")]=f;if(k!=j){f.set("name",j)}if(this.get("disabled")){f.set("disabled",true)}if(f.get("checked")){this.set("checkedButton",f)}g=f.get("element");l=this.get("element");if(g.parentNode!=l){l.appendChild(g)}f.on("checkedChange",this._onButtonCheckedChange,f,this)}return f},addButtons:function(j){var h,g,f,k;if(c.isArray(j)){h=j.length;f=[];if(h>0){for(k=0;k<h;k++){g=this.addButton(j[k]);if(g){f[f.length]=g}}}}return f},removeButton:function(g){var f=this.getButton(g),h,j;if(f){this._buttons.splice(g,1);delete b[f.get("id")];f.removeListener("checkedChange",this._onButtonCheckedChange);f.destroy();h=this._buttons.length;if(h>0){j=this._buttons.length-1;do{this._buttons[j].index=j}while(j--)}}},getButton:function(f){return this._buttons[f]},getButtons:function(){return this._buttons},getCount:function(){return this._buttons.length},focus:function(g){var f,h,j;if(c.isNumber(g)){f=this._buttons[g];if(f){f.focus()}}else{h=this.getCount();for(j=0;j<h;j++){f=this._buttons[j];if(!f.get("disabled")){f.focus();break}}}},check:function(g){var f=this.getButton(g);if(f){f.set("checked",true)}},destroy:function(){var f=this._buttons.length,g=this.get("element"),j=g.parentNode,h;if(f>0){h=this._buttons.length-1;do{this._buttons[h].destroy()}while(h--)}e.purgeElement(g);j.removeChild(g)},toString:function(){return("ButtonGroup "+this.get("id"))}})})();YAHOO.register("button",YAHOO.widget.Button,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/button/button-min.js")}(function(){YAHOO.util.Config=function(d){if(d){this.init(d)}};var c=YAHOO.lang,b=YAHOO.util.CustomEvent,a=YAHOO.util.Config;a.CONFIG_CHANGED_EVENT="configChanged";a.BOOLEAN_TYPE="boolean";a.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(d){this.owner=d;this.configChangedEvent=this.createEvent(a.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=b.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(d){return(typeof d==a.BOOLEAN_TYPE)},checkNumber:function(d){return(!isNaN(d))},fireEvent:function(f,d){var e=this.config[f];if(e&&e.event){e.event.fire(d)}},addProperty:function(d,e){d=d.toLowerCase();this.config[d]=e;e.event=this.createEvent(d,{scope:this.owner});e.event.signature=b.LIST;e.key=d;if(e.handler){e.event.subscribe(e.handler,this.owner)}this.setProperty(d,e.value,true);if(!e.suppressEvent){this.queueProperty(d,e.value)}},getConfig:function(){var g={},e=this.config,d,f;for(d in e){if(c.hasOwnProperty(e,d)){f=e[d];if(f&&f.event){g[d]=f.value}}}return g},getProperty:function(e){var d=this.config[e.toLowerCase()];if(d&&d.event){return d.value}else{return undefined}},resetProperty:function(e){e=e.toLowerCase();var d=this.config[e];if(d&&d.event){if(this.initialConfig[e]&&!c.isUndefined(this.initialConfig[e])){this.setProperty(e,this.initialConfig[e]);return true}}else{return false}},setProperty:function(f,d,g){var e;f=f.toLowerCase();if(this.queueInProgress&&!g){this.queueProperty(f,d);return true}else{e=this.config[f];if(e&&e.event){if(e.validator&&!e.validator(d)){return false}else{e.value=d;if(!g){this.fireEvent(f,d);this.configChangedEvent.fire([f,d])}return true}}else{return false}}},queueProperty:function(f,j){f=f.toLowerCase();var g=this.config[f],o=false,p,s,r,q,k,h,t,m,l,d,n,e,u;if(g&&g.event){if(!c.isUndefined(j)&&g.validator&&!g.validator(j)){return false}else{if(!c.isUndefined(j)){g.value=j}else{j=g.value}o=false;p=this.eventQueue.length;for(n=0;n<p;n++){s=this.eventQueue[n];if(s){r=s[0];q=s[1];if(r==f){this.eventQueue[n]=null;this.eventQueue.push([f,(!c.isUndefined(j)?j:q)]);o=true;break}}}if(!o&&!c.isUndefined(j)){this.eventQueue.push([f,j])}}if(g.supercedes){k=g.supercedes.length;for(e=0;e<k;e++){h=g.supercedes[e];t=this.eventQueue.length;for(u=0;u<t;u++){m=this.eventQueue[u];if(m){l=m[0];d=m[1];if(l==h.toLowerCase()){this.eventQueue.push([l,d]);this.eventQueue[u]=null;break}}}}}return true}else{return false}},refireEvent:function(e){e=e.toLowerCase();var d=this.config[e];if(d&&d.event&&!c.isUndefined(d.value)){if(this.queueInProgress){this.queueProperty(e)}else{this.fireEvent(e,d.value)}}},applyConfig:function(g,d){var e,f;if(d){f={};for(e in g){if(c.hasOwnProperty(g,e)){f[e.toLowerCase()]=g[e]}}this.initialConfig=f}for(e in g){if(c.hasOwnProperty(g,e)){this.queueProperty(e,g[e])}}},refresh:function(){var d;for(d in this.config){if(c.hasOwnProperty(this.config,d)){this.refireEvent(d)}}},fireQueue:function(){var g,d,h,e,f;this.queueInProgress=true;for(g=0;g<this.eventQueue.length;g++){d=this.eventQueue[g];if(d){h=d[0];e=d[1];f=this.config[h];f.value=e;this.eventQueue[g]=null;this.fireEvent(h,e)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(g,f,d,h){var e=this.config[g.toLowerCase()];if(e&&e.event){if(!a.alreadySubscribed(e.event,f,d)){e.event.subscribe(f,d,h)}return true}else{return false}},unsubscribeFromConfigEvent:function(g,f,d){var e=this.config[g.toLowerCase()];if(e&&e.event){return e.event.unsubscribe(f,d)}else{return false}},toString:function(){var d="Config";if(this.owner){d+=" ["+this.owner.toString()+"]"}return d},outputEventQueue:function(){var g="",d,f,e=this.eventQueue.length;for(f=0;f<e;f++){d=this.eventQueue[f];if(d){g+=d[0]+"="+d[1]+", "}}return g},destroy:function(){var e=this.config,f,d;for(f in e){if(c.hasOwnProperty(e,f)){d=e[f];d.event.unsubscribeAll();d.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};a.alreadySubscribed=function(h,e,d){var g=h.subscribers.length,j,f;if(g>0){f=g-1;do{j=h.subscribers[f];if(j&&j.obj==d&&j.fn==e){return true}}while(f--)}return false};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Module=function(r,s){if(r){this.init(r,s)}else{}};var p=YAHOO.util.Dom,a=YAHOO.util.Config,g=YAHOO.util.Event,h=YAHOO.util.CustomEvent,o=YAHOO.widget.Module,m=YAHOO.env.ua,n,e,f,q,d={BEFORE_INIT:"beforeInit",INIT:"init",APPEND:"append",BEFORE_RENDER:"beforeRender",RENDER:"render",CHANGE_HEADER:"changeHeader",CHANGE_BODY:"changeBody",CHANGE_FOOTER:"changeFooter",CHANGE_CONTENT:"changeContent",DESTORY:"destroy",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE:"beforeHide",HIDE:"hide"},l={VISIBLE:{key:"visible",value:true,validator:YAHOO.lang.isBoolean},EFFECT:{key:"effect",suppressEvent:true,supercedes:["visible"]},MONITOR_RESIZE:{key:"monitorresize",value:true},APPEND_TO_DOCUMENT_BODY:{key:"appendtodocumentbody",value:false}};o.IMG_ROOT=null;o.IMG_ROOT_SSL=null;o.CSS_MODULE="yui-module";o.CSS_HEADER="hd";o.CSS_BODY="bd";o.CSS_FOOTER="ft";o.RESIZE_MONITOR_SECURE_URL="javascript:false;";o.RESIZE_MONITOR_BUFFER=1;o.textResizeEvent=new h("textResize");o.forceDocumentRedraw=function(){var r=document.documentElement;if(r){r.className+=" ";r.className=YAHOO.lang.trim(r.className)}};function j(){if(!n){n=document.createElement("div");n.innerHTML=('<div class="'+o.CSS_HEADER+'"></div><div class="'+o.CSS_BODY+'"></div><div class="'+o.CSS_FOOTER+'"></div>');e=n.firstChild;f=e.nextSibling;q=f.nextSibling}return n}function k(){if(!e){j()}return(e.cloneNode(false))}function c(){if(!f){j()}return(f.cloneNode(false))}function b(){if(!q){j()}return(q.cloneNode(false))}o.prototype={constructor:o,element:null,header:null,body:null,footer:null,id:null,imageRoot:o.IMG_ROOT,initEvents:function(){var r=h.LIST;this.beforeInitEvent=this.createEvent(d.BEFORE_INIT);this.beforeInitEvent.signature=r;this.initEvent=this.createEvent(d.INIT);this.initEvent.signature=r;this.appendEvent=this.createEvent(d.APPEND);this.appendEvent.signature=r;this.beforeRenderEvent=this.createEvent(d.BEFORE_RENDER);this.beforeRenderEvent.signature=r;this.renderEvent=this.createEvent(d.RENDER);this.renderEvent.signature=r;this.changeHeaderEvent=this.createEvent(d.CHANGE_HEADER);this.changeHeaderEvent.signature=r;this.changeBodyEvent=this.createEvent(d.CHANGE_BODY);this.changeBodyEvent.signature=r;this.changeFooterEvent=this.createEvent(d.CHANGE_FOOTER);this.changeFooterEvent.signature=r;this.changeContentEvent=this.createEvent(d.CHANGE_CONTENT);this.changeContentEvent.signature=r;this.destroyEvent=this.createEvent(d.DESTORY);this.destroyEvent.signature=r;this.beforeShowEvent=this.createEvent(d.BEFORE_SHOW);this.beforeShowEvent.signature=r;this.showEvent=this.createEvent(d.SHOW);this.showEvent.signature=r;this.beforeHideEvent=this.createEvent(d.BEFORE_HIDE);this.beforeHideEvent.signature=r;this.hideEvent=this.createEvent(d.HIDE);this.hideEvent.signature=r},platform:function(){var r=navigator.userAgent.toLowerCase();if(r.indexOf("windows")!=-1||r.indexOf("win32")!=-1){return"windows"}else{if(r.indexOf("macintosh")!=-1){return"mac"}else{return false}}}(),browser:function(){var r=navigator.userAgent.toLowerCase();if(r.indexOf("opera")!=-1){return"opera"}else{if(r.indexOf("msie 7")!=-1){return"ie7"}else{if(r.indexOf("msie")!=-1){return"ie"}else{if(r.indexOf("safari")!=-1){return"safari"}else{if(r.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true}else{return false}}(),initDefaultConfig:function(){this.cfg.addProperty(l.VISIBLE.key,{handler:this.configVisible,value:l.VISIBLE.value,validator:l.VISIBLE.validator});this.cfg.addProperty(l.EFFECT.key,{suppressEvent:l.EFFECT.suppressEvent,supercedes:l.EFFECT.supercedes});this.cfg.addProperty(l.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:l.MONITOR_RESIZE.value});this.cfg.addProperty(l.APPEND_TO_DOCUMENT_BODY.key,{value:l.APPEND_TO_DOCUMENT_BODY.value})},init:function(s,t){var v,r;this.initEvents();this.beforeInitEvent.fire(o);this.cfg=new a(this);if(this.isSecure){this.imageRoot=o.IMG_ROOT_SSL}if(typeof s=="string"){v=s;s=document.getElementById(s);if(!s){s=(j()).cloneNode(false);s.id=v}}this.id=p.generateId(s);this.element=s;r=this.element.firstChild;if(r){var w=false,x=false,u=false;do{if(1==r.nodeType){if(!w&&p.hasClass(r,o.CSS_HEADER)){this.header=r;w=true}else{if(!x&&p.hasClass(r,o.CSS_BODY)){this.body=r;x=true}else{if(!u&&p.hasClass(r,o.CSS_FOOTER)){this.footer=r;u=true}}}}}while((r=r.nextSibling))}this.initDefaultConfig();p.addClass(this.element,o.CSS_MODULE);if(t){this.cfg.applyConfig(t,true)}if(!a.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true)}this.initEvent.fire(o)},initResizeMonitor:function(){var r=(m.gecko&&this.platform=="windows");if(r){var s=this;setTimeout(function(){s._initResizeMonitor()},0)}else{this._initResizeMonitor()}},_initResizeMonitor:function(){var x,v,t;function r(){o.textResizeEvent.fire()}if(!m.opera){v=p.get("_yuiResizeMonitor");var s=this._supportsCWResize();if(!v){v=document.createElement("iframe");if(this.isSecure&&o.RESIZE_MONITOR_SECURE_URL&&m.ie){v.src=o.RESIZE_MONITOR_SECURE_URL}if(!s){t=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");v.src="data:text/html;charset=utf-8,"+encodeURIComponent(t)}v.id="_yuiResizeMonitor";v.title="Text Resize Monitor";v.style.position="absolute";v.style.visibility="hidden";var w=document.body,u=w.firstChild;if(u){w.insertBefore(v,u)}else{w.appendChild(v)}v.style.width="2em";v.style.height="2em";v.style.top=(-1*(v.offsetHeight+o.RESIZE_MONITOR_BUFFER))+"px";v.style.left="0";v.style.borderWidth="0";v.style.visibility="visible";if(m.webkit){x=v.contentWindow.document;x.open();x.close()}}if(v&&v.contentWindow){o.textResizeEvent.subscribe(this.onDomResize,this,true);if(!o.textResizeInitialized){if(s){if(!g.on(v.contentWindow,"resize",r)){g.on(v,"resize",r)}}o.textResizeInitialized=true}this.resizeMonitor=v}}},_supportsCWResize:function(){var r=true;if(m.gecko&&m.gecko<=1.8){r=false}return r},onDomResize:function(r,s){var t=-1*(this.resizeMonitor.offsetHeight+o.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=t+"px";this.resizeMonitor.style.left="0"},setHeader:function(r){var s=this.header||(this.header=k());if(r.nodeName){s.innerHTML="";s.appendChild(r)}else{s.innerHTML=r}this.changeHeaderEvent.fire(r);this.changeContentEvent.fire()},appendToHeader:function(r){var s=this.header||(this.header=k());s.appendChild(r);this.changeHeaderEvent.fire(r);this.changeContentEvent.fire()},setBody:function(r){var s=this.body||(this.body=c());if(r.nodeName){s.innerHTML="";s.appendChild(r)}else{s.innerHTML=r}this.changeBodyEvent.fire(r);this.changeContentEvent.fire()},appendToBody:function(r){var s=this.body||(this.body=c());s.appendChild(r);this.changeBodyEvent.fire(r);this.changeContentEvent.fire()},setFooter:function(r){var s=this.footer||(this.footer=b());if(r.nodeName){s.innerHTML="";s.appendChild(r)}else{s.innerHTML=r}this.changeFooterEvent.fire(r);this.changeContentEvent.fire()},appendToFooter:function(r){var s=this.footer||(this.footer=b());s.appendChild(r);this.changeFooterEvent.fire(r);this.changeContentEvent.fire()},render:function(t,v){var s=this,r;function u(w){if(typeof w=="string"){w=document.getElementById(w)}if(w){s._addToParent(w,s.element);s.appendEvent.fire()}}this.beforeRenderEvent.fire();if(!v){v=this.element}if(t){u(t)}else{if(!p.inDocument(this.element)){return false}}if(this.header&&!p.inDocument(this.header)){r=v.firstChild;if(r){v.insertBefore(this.header,r)}else{v.appendChild(this.header)}}if(this.body&&!p.inDocument(this.body)){if(this.footer&&p.isAncestor(this.moduleElement,this.footer)){v.insertBefore(this.body,this.footer)}else{v.appendChild(this.body)}}if(this.footer&&!p.inDocument(this.footer)){v.appendChild(this.footer)}this.renderEvent.fire();return true},destroy:function(){var r;if(this.element){g.purgeElement(this.element,true);r=this.element.parentNode}if(r){r.removeChild(this.element)}this.element=null;this.header=null;this.body=null;this.footer=null;o.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire()},show:function(){this.cfg.setProperty("visible",true)},hide:function(){this.cfg.setProperty("visible",false)},configVisible:function(t,u,s){var r=u[0];if(r){this.beforeShowEvent.fire();p.setStyle(this.element,"display","block");this.showEvent.fire()}else{this.beforeHideEvent.fire();p.setStyle(this.element,"display","none");this.hideEvent.fire()}},configMonitorResize:function(s,t,r){var u=t[0];if(u){this.initResizeMonitor()}else{o.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null}},_addToParent:function(s,r){if(!this.cfg.getProperty("appendtodocumentbody")&&s===document.body&&s.firstChild){s.insertBefore(r,s.firstChild)}else{s.appendChild(r)}},toString:function(){return"Module "+this.id}};YAHOO.lang.augmentProto(o,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Overlay=function(p,q){YAHOO.widget.Overlay.superclass.constructor.call(this,p,q)};var k=YAHOO.lang,f=YAHOO.util.CustomEvent,m=YAHOO.widget.Module,e=YAHOO.util.Event,n=YAHOO.util.Dom,a=YAHOO.util.Config,h=YAHOO.env.ua,c=YAHOO.widget.Overlay,l="subscribe",o="unsubscribe",b="contained",j,d={BEFORE_MOVE:"beforeMove",MOVE:"move"},g={X:{key:"x",validator:k.isNumber,suppressEvent:true,supercedes:["iframe"]},Y:{key:"y",validator:k.isNumber,suppressEvent:true,supercedes:["iframe"]},XY:{key:"xy",suppressEvent:true,supercedes:["iframe"]},CONTEXT:{key:"context",suppressEvent:true,supercedes:["iframe"]},FIXED_CENTER:{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},WIDTH:{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},HEIGHT:{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},AUTO_FILL_HEIGHT:{key:"autofillheight",supercedes:["height"],value:"body"},ZINDEX:{key:"zindex",value:null},CONSTRAIN_TO_VIEWPORT:{key:"constraintoviewport",value:false,validator:k.isBoolean,supercedes:["iframe","x","y","xy"]},IFRAME:{key:"iframe",value:(h.ie==6?true:false),validator:k.isBoolean,supercedes:["zindex"]},PREVENT_CONTEXT_OVERLAP:{key:"preventcontextoverlap",value:false,validator:k.isBoolean,supercedes:["constraintoviewport"]}};c.IFRAME_SRC="javascript:false;";c.IFRAME_OFFSET=3;c.VIEWPORT_OFFSET=10;c.TOP_LEFT="tl";c.TOP_RIGHT="tr";c.BOTTOM_LEFT="bl";c.BOTTOM_RIGHT="br";c.CSS_OVERLAY="yui-overlay";c.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;c.windowScrollEvent=new f("windowScroll");c.windowResizeEvent=new f("windowResize");c.windowScrollHandler=function(p){var q=e.getTarget(p);if(!q||q===window||q===window.document){if(h.ie){if(!window.scrollEnd){window.scrollEnd=-1}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){c.windowScrollEvent.fire()},1)}else{c.windowScrollEvent.fire()}}};c.windowResizeHandler=function(p){if(h.ie){if(!window.resizeEnd){window.resizeEnd=-1}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){c.windowResizeEvent.fire()},100)}else{c.windowResizeEvent.fire()}};c._initialized=null;if(c._initialized===null){e.on(window,"scroll",c.windowScrollHandler);e.on(window,"resize",c.windowResizeHandler);c._initialized=true}c._TRIGGER_MAP={windowScroll:c.windowScrollEvent,windowResize:c.windowResizeEvent,textResize:m.textResizeEvent};YAHOO.extend(c,m,{CONTEXT_TRIGGERS:[],init:function(p,q){c.superclass.init.call(this,p);this.beforeInitEvent.fire(c);n.addClass(this.element,c.CSS_OVERLAY);if(q){this.cfg.applyConfig(q,true)}if(this.platform=="mac"&&h.gecko){if(!a.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true)}if(!a.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true)}}this.initEvent.fire(c)},initEvents:function(){c.superclass.initEvents.call(this);var p=f.LIST;this.beforeMoveEvent=this.createEvent(d.BEFORE_MOVE);this.beforeMoveEvent.signature=p;this.moveEvent=this.createEvent(d.MOVE);this.moveEvent.signature=p},initDefaultConfig:function(){c.superclass.initDefaultConfig.call(this);var p=this.cfg;p.addProperty(g.X.key,{handler:this.configX,validator:g.X.validator,suppressEvent:g.X.suppressEvent,supercedes:g.X.supercedes});p.addProperty(g.Y.key,{handler:this.configY,validator:g.Y.validator,suppressEvent:g.Y.suppressEvent,supercedes:g.Y.supercedes});p.addProperty(g.XY.key,{handler:this.configXY,suppressEvent:g.XY.suppressEvent,supercedes:g.XY.supercedes});p.addProperty(g.CONTEXT.key,{handler:this.configContext,suppressEvent:g.CONTEXT.suppressEvent,supercedes:g.CONTEXT.supercedes});p.addProperty(g.FIXED_CENTER.key,{handler:this.configFixedCenter,value:g.FIXED_CENTER.value,validator:g.FIXED_CENTER.validator,supercedes:g.FIXED_CENTER.supercedes});p.addProperty(g.WIDTH.key,{handler:this.configWidth,suppressEvent:g.WIDTH.suppressEvent,supercedes:g.WIDTH.supercedes});p.addProperty(g.HEIGHT.key,{handler:this.configHeight,suppressEvent:g.HEIGHT.suppressEvent,supercedes:g.HEIGHT.supercedes});p.addProperty(g.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:g.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:g.AUTO_FILL_HEIGHT.supercedes});p.addProperty(g.ZINDEX.key,{handler:this.configzIndex,value:g.ZINDEX.value});p.addProperty(g.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:g.CONSTRAIN_TO_VIEWPORT.value,validator:g.CONSTRAIN_TO_VIEWPORT.validator,supercedes:g.CONSTRAIN_TO_VIEWPORT.supercedes});p.addProperty(g.IFRAME.key,{handler:this.configIframe,value:g.IFRAME.value,validator:g.IFRAME.validator,supercedes:g.IFRAME.supercedes});p.addProperty(g.PREVENT_CONTEXT_OVERLAP.key,{value:g.PREVENT_CONTEXT_OVERLAP.value,validator:g.PREVENT_CONTEXT_OVERLAP.validator,supercedes:g.PREVENT_CONTEXT_OVERLAP.supercedes})},moveTo:function(q,p){this.cfg.setProperty("xy",[q,p])},hideMacGeckoScrollbars:function(){n.replaceClass(this.element,"show-scrollbars","hide-scrollbars")},showMacGeckoScrollbars:function(){n.replaceClass(this.element,"hide-scrollbars","show-scrollbars")},_setDomVisibility:function(p){n.setStyle(this.element,"visibility",(p)?"visible":"hidden");if(p){n.removeClass(this.element,"yui-overlay-hidden")}else{n.addClass(this.element,"yui-overlay-hidden")}},configVisible:function(x,A,r){var y=A[0],w=n.getStyle(this.element,"visibility"),q=this.cfg.getProperty("effect"),t=[],u=(this.platform=="mac"&&h.gecko),B=a.alreadySubscribed,s,z,C,E,F,G,D,p,v;if(w=="inherit"){C=this.element.parentNode;while(C.nodeType!=9&&C.nodeType!=11){w=n.getStyle(C,"visibility");if(w!="inherit"){break}C=C.parentNode}if(w=="inherit"){w="visible"}}if(q){if(q instanceof Array){p=q.length;for(E=0;E<p;E++){s=q[E];t[t.length]=s.effect(this,s.duration)}}else{t[t.length]=q.effect(this,q.duration)}}if(y){if(u){this.showMacGeckoScrollbars()}if(q){if(y){if(w!="visible"||w===""){this.beforeShowEvent.fire();v=t.length;for(F=0;F<v;F++){z=t[F];if(F===0&&!B(z.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){z.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true)}z.animateIn()}}}}else{if(w!="visible"||w===""){this.beforeShowEvent.fire();this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire()}else{this._setDomVisibility(true)}}}else{if(u){this.hideMacGeckoScrollbars()}if(q){if(w=="visible"){this.beforeHideEvent.fire();v=t.length;for(G=0;G<v;G++){D=t[G];if(G===0&&!B(D.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){D.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true)}D.animateOut()}}else{if(w===""){this._setDomVisibility(false)}}}else{if(w=="visible"||w===""){this.beforeHideEvent.fire();this._setDomVisibility(false);this.hideEvent.fire()}else{this._setDomVisibility(false)}}}},doCenterOnDOMEvent:function(){var q=this.cfg,p=q.getProperty("fixedcenter");if(q.getProperty("visible")){if(p&&(p!==b||this.fitsInViewport())){this.center()}}},fitsInViewport:function(){var q=c.VIEWPORT_OFFSET,s=this.element,p=s.offsetWidth,r=s.offsetHeight,u=n.getViewportWidth(),t=n.getViewportHeight();return((p+q<u)&&(r+q<t))},configFixedCenter:function(r,t,q){var p=t[0],u=a.alreadySubscribed,s=c.windowResizeEvent,v=c.windowScrollEvent;if(p){this.center();if(!u(this.beforeShowEvent,this.center)){this.beforeShowEvent.subscribe(this.center)}if(!u(s,this.doCenterOnDOMEvent,this)){s.subscribe(this.doCenterOnDOMEvent,this,true)}if(!u(v,this.doCenterOnDOMEvent,this)){v.subscribe(this.doCenterOnDOMEvent,this,true)}}else{this.beforeShowEvent.unsubscribe(this.center);s.unsubscribe(this.doCenterOnDOMEvent,this);v.unsubscribe(this.doCenterOnDOMEvent,this)}},configHeight:function(q,s,p){var t=s[0],r=this.element;n.setStyle(r,"height",t);this.cfg.refireEvent("iframe")},configAutoFillHeight:function(s,t,w){var q=t[0],v=this.cfg,r="autofillheight",p="height",u=v.getProperty(r),x=this._autoFillOnHeightChange;v.unsubscribeFromConfigEvent(p,x);m.textResizeEvent.unsubscribe(x);this.changeContentEvent.unsubscribe(x);if(u&&q!==u&&this[u]){n.setStyle(this[u],p,"")}if(q){q=k.trim(q.toLowerCase());v.subscribeToConfigEvent(p,x,this[q],this);m.textResizeEvent.subscribe(x,this[q],this);this.changeContentEvent.subscribe(x,this[q],this);v.setProperty(r,q,true)}},configWidth:function(q,t,p){var r=t[0],s=this.element;n.setStyle(s,"width",r);this.cfg.refireEvent("iframe")},configzIndex:function(r,t,q){var p=t[0],s=this.element;if(!p){p=n.getStyle(s,"zIndex");if(!p||isNaN(p)){p=0}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(p<=0){p=1}}n.setStyle(s,"zIndex",p);this.cfg.setProperty("zIndex",p,true);if(this.iframe){this.stackIframe()}},configXY:function(s,t,r){var p=t[0],u=p[0],q=p[1];this.cfg.setProperty("x",u);this.cfg.setProperty("y",q);this.beforeMoveEvent.fire([u,q]);u=this.cfg.getProperty("x");q=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([u,q])},configX:function(r,s,q){var t=s[0],p=this.cfg.getProperty("y");this.cfg.setProperty("x",t,true);this.cfg.setProperty("y",p,true);this.beforeMoveEvent.fire([t,p]);t=this.cfg.getProperty("x");p=this.cfg.getProperty("y");n.setX(this.element,t,true);this.cfg.setProperty("xy",[t,p],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([t,p])},configY:function(r,s,q){var t=this.cfg.getProperty("x"),p=s[0];this.cfg.setProperty("x",t,true);this.cfg.setProperty("y",p,true);this.beforeMoveEvent.fire([t,p]);t=this.cfg.getProperty("x");p=this.cfg.getProperty("y");n.setY(this.element,p,true);this.cfg.setProperty("xy",[t,p],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([t,p])},showIframe:function(){var p=this.iframe,q;if(p){q=this.element.parentNode;if(q!=p.parentNode){this._addToParent(q,p)}p.style.display="block"}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none"}},syncIframe:function(){var t=this.iframe,r=this.element,p=c.IFRAME_OFFSET,s=(p*2),q;if(t){t.style.width=(r.offsetWidth+s+"px");t.style.height=(r.offsetHeight+s+"px");q=this.cfg.getProperty("xy");if(!k.isArray(q)||(isNaN(q[0])||isNaN(q[1]))){this.syncPosition();q=this.cfg.getProperty("xy")}n.setXY(t,[(q[0]-p),(q[1]-p)])}},stackIframe:function(){if(this.iframe){var p=n.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(p)&&!isNaN(p)){n.setStyle(this.iframe,"zIndex",(p-1))}}},configIframe:function(r,s,q){var u=s[0];function p(){var w=this.iframe,v=this.element,y;if(!w){if(!j){j=document.createElement("iframe");if(this.isSecure){j.src=c.IFRAME_SRC}if(h.ie){j.style.filter="alpha(opacity=0)";j.frameBorder=0}else{j.style.opacity="0"}j.style.position="absolute";j.style.border="none";j.style.margin="0";j.style.padding="0";j.style.display="none";j.tabIndex=-1}w=j.cloneNode(false);y=v.parentNode;var x=y||document.body;this._addToParent(x,w);this.iframe=w}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true}}function t(){p.call(this);this.beforeShowEvent.unsubscribe(t);this._iframeDeferred=false}if(u){if(this.cfg.getProperty("visible")){p.call(this)}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(t);this._iframeDeferred=true}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM)}},configConstrainToViewport:function(r,s,q){var p=s[0];if(p){if(!a.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true)}if(!a.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM)}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this)}},configContext:function(s,t,w){var p=t[0],v,x,r,u,q=this.CONTEXT_TRIGGERS;if(p){v=p[0];x=p[1];r=p[2];u=p[3];if(q&&q.length>0){u=(u||[]).concat(q)}if(v){if(typeof v=="string"){this.cfg.setProperty("context",[document.getElementById(v),x,r,u],true)}if(x&&r){this.align(x,r)}if(this._contextTriggers){this._processTriggers(this._contextTriggers,o,this._alignOnTrigger)}if(u){this._processTriggers(u,l,this._alignOnTrigger);this._contextTriggers=u}}}},_alignOnTrigger:function(p,q){this.align()},_findTriggerCE:function(q){var p=null;if(q instanceof f){p=q}else{if(c._TRIGGER_MAP[q]){p=c._TRIGGER_MAP[q]}}return p},_processTriggers:function(r,p,s){var t,q;for(var u=0,v=r.length;u<v;++u){t=r[u];q=this._findTriggerCE(t);if(q){q[p](s,this,true)}else{this[p](t,s)}}},align:function(v,w){var q=this.cfg.getProperty("context"),r=this,s,t,p;function u(x,y){switch(v){case c.TOP_LEFT:r.moveTo(y,x);break;case c.TOP_RIGHT:r.moveTo((y-t.offsetWidth),x);break;case c.BOTTOM_LEFT:r.moveTo(y,(x-t.offsetHeight));break;case c.BOTTOM_RIGHT:r.moveTo((y-t.offsetWidth),(x-t.offsetHeight));break}}if(q){s=q[0];t=this.element;r=this;if(!v){v=q[1]}if(!w){w=q[2]}if(t&&s){p=n.getRegion(s);switch(w){case c.TOP_LEFT:u(p.top,p.left);break;case c.TOP_RIGHT:u(p.top,p.right);break;case c.BOTTOM_LEFT:u(p.bottom,p.left);break;case c.BOTTOM_RIGHT:u(p.bottom,p.right);break}}}},enforceConstraints:function(s,t,r){var p=t[0];var q=this.getConstrainedXY(p[0],p[1]);this.cfg.setProperty("x",q[0],true);this.cfg.setProperty("y",q[1],true);this.cfg.setProperty("xy",q,true)},getConstrainedX:function(t){var w=this,A=w.element,G=A.offsetWidth,I=c.VIEWPORT_OFFSET,D=n.getViewportWidth(),H=n.getDocumentScrollLeft(),q=(G+I<D),J=this.cfg.getProperty("context"),y,r,B,v=false,F,s,E=H+I,z=H+D-G-I,C=t,u={tltr:true,blbr:true,brbl:true,trtl:true};var p=function(){var L;if((w.cfg.getProperty("x")-H)>r){L=(r-G)}else{L=(r+B)}w.cfg.setProperty("x",(L+H),true);return L};var x=function(){if((w.cfg.getProperty("x")-H)>r){return(s-I)}else{return(F-I)}};var K=function(){var M=x(),L;if(G>M){if(v){p()}else{p();v=true;L=K()}}return L};if(t<E||t>z){if(q){if(this.cfg.getProperty("preventcontextoverlap")&&J&&u[(J[1]+J[2])]){y=J[0];r=n.getX(y)-H;B=y.offsetWidth;F=r;s=(D-(r+B));K();C=this.cfg.getProperty("x")}else{if(t<E){C=E}else{if(t>z){C=z}}}}else{C=I+H}}return C},getConstrainedY:function(p){var s=this,z=s.element,C=z.offsetHeight,D=c.VIEWPORT_OFFSET,H=n.getViewportHeight(),E=n.getDocumentScrollTop(),G=(C+D<H),F=this.cfg.getProperty("context"),u,K,J,r=false,t,y,I=E+D,w=E+H-C-D,A=p,q={trbr:true,tlbl:true,bltl:true,brtr:true};var v=function(){var L;if((s.cfg.getProperty("y")-E)>K){L=(K-C)}else{L=(K+J)}s.cfg.setProperty("y",(L+E),true);return L};var x=function(){if((s.cfg.getProperty("y")-E)>K){return(y-D)}else{return(t-D)}};var B=function(){var L=x(),M;if(C>L){if(r){v()}else{v();r=true;M=B()}}return M};if(p<I||p>w){if(G){if(this.cfg.getProperty("preventcontextoverlap")&&F&&q[(F[1]+F[2])]){u=F[0];J=u.offsetHeight;K=(n.getY(u)-E);t=K;y=(H-(K+J));B();A=s.cfg.getProperty("y")}else{if(p<I){A=I}else{if(p>w){A=w}}}}else{A=D+E}}return A},getConstrainedXY:function(q,p){return[this.getConstrainedX(q),this.getConstrainedY(p)]},center:function(){var s=c.VIEWPORT_OFFSET,r=this.element.offsetWidth,t=this.element.offsetHeight,u=n.getViewportWidth(),q=n.getViewportHeight(),v,p;if(r<u){v=(u/2)-(r/2)+n.getDocumentScrollLeft()}else{v=s+n.getDocumentScrollLeft()}if(t<q){p=(q/2)-(t/2)+n.getDocumentScrollTop()}else{p=s+n.getDocumentScrollTop()}this.cfg.setProperty("xy",[parseInt(v,10),parseInt(p,10)]);this.cfg.refireEvent("iframe");if(h.webkit){this.forceContainerRedraw()}},syncPosition:function(){var p=n.getXY(this.element);this.cfg.setProperty("x",p[0],true);this.cfg.setProperty("y",p[1],true);this.cfg.setProperty("xy",p,true)},onDomResize:function(p,q){var r=this;c.superclass.onDomResize.call(this,p,q);setTimeout(function(){r.syncPosition();r.cfg.refireEvent("iframe");r.cfg.refireEvent("context")},0)},_getComputedHeight:(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(q){var r=null;if(q.ownerDocument&&q.ownerDocument.defaultView){var p=q.ownerDocument.defaultView.getComputedStyle(q,"");if(p){r=parseInt(p.height,10)}}return(k.isNumber(r))?r:null}}else{return function(p){var q=null;if(p.style.pixelHeight){q=p.style.pixelHeight}return(k.isNumber(q))?q:null}}})(),_validateAutoFillHeight:function(p){return(!p)||(k.isString(p)&&c.STD_MOD_RE.test(p))},_autoFillOnHeightChange:function(p,r,q){var s=this.cfg.getProperty("height");if((s&&s!=="auto")||(s===0)){this.fillHeight(q)}},_getPreciseHeight:function(q){var r=q.offsetHeight;if(q.getBoundingClientRect){var p=q.getBoundingClientRect();r=p.bottom-p.top}return r},fillHeight:function(v){if(v){var x=this.innerElement||this.element,y=[this.header,this.body,this.footer],r,q=0,p=0,t=0,w=false;for(var s=0,u=y.length;s<u;s++){r=y[s];if(r){if(v!==r){p+=this._getPreciseHeight(r)}else{w=true}}}if(w){if(h.ie||h.opera){n.setStyle(v,"height",0+"px")}q=this._getComputedHeight(x);if(q===null){n.addClass(x,"yui-override-padding");q=x.clientHeight;n.removeClass(x,"yui-override-padding")}t=Math.max(q-p,0);n.setStyle(v,"height",t+"px");if(v.offsetHeight!=t){t=Math.max(t-(v.offsetHeight-t),0)}n.setStyle(v,"height",t+"px")}}},bringToTop:function(){var s=[],t=this.element;function p(A,B){var y=n.getStyle(A,"zIndex"),z=n.getStyle(B,"zIndex"),C=(!y||isNaN(y))?0:parseInt(y,10),x=(!z||isNaN(z))?0:parseInt(z,10);if(C>x){return -1}else{if(C<x){return 1}else{return 0}}}function u(y){var z=n.hasClass(y,c.CSS_OVERLAY),x=YAHOO.widget.Panel;if(z&&!n.isAncestor(t,y)){if(x&&n.hasClass(y,x.CSS_PANEL)){s[s.length]=y.parentNode}else{s[s.length]=y}}}n.getElementsBy(u,"DIV",document.body);s.sort(p);var w=s[0],q;if(w){q=n.getStyle(w,"zIndex");if(!isNaN(q)){var r=false;if(w!=t){r=true}else{if(s.length>1){var v=n.getStyle(s[1],"zIndex");if(!isNaN(v)&&(q==v)){r=true}}}if(r){this.cfg.setProperty("zindex",(parseInt(q,10)+2))}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null;c.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);c.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);m.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);c.superclass.destroy.call(this)},forceContainerRedraw:function(){var p=this;n.addClass(p.element,"yui-force-redraw");setTimeout(function(){n.removeClass(p.element,"yui-force-redraw")},0)},toString:function(){return"Overlay "+this.id}})}());(function(){YAHOO.widget.OverlayManager=function(g){this.init(g)};var d=YAHOO.widget.Overlay,e=YAHOO.util.Event,c=YAHOO.util.Dom,f=YAHOO.util.Config,b=YAHOO.util.CustomEvent,a=YAHOO.widget.OverlayManager;a.CSS_FOCUSED="focused";a.prototype={constructor:a,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"})},init:function(g){this.cfg=new f(this);this.initDefaultConfig();if(g){this.cfg.applyConfig(g,true)}this.cfg.fireQueue();var h=null;this.getActive=function(){return h};this.focus=function(l){var k=this.find(l);if(k){k.focus()}};this.remove=function(l){var n=this.find(l),m;if(n){if(h==n){h=null}var k=(n.element===null&&n.cfg===null)?true:false;if(!k){m=c.getStyle(n.element,"zIndex");n.cfg.setProperty("zIndex",-1000,true)}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));n.hideEvent.unsubscribe(n.blur);n.destroyEvent.unsubscribe(this._onOverlayDestroy,n);n.focusEvent.unsubscribe(this._onOverlayFocusHandler,n);n.blurEvent.unsubscribe(this._onOverlayBlurHandler,n);if(!k){e.removeListener(n.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);n.cfg.setProperty("zIndex",m,true);n.cfg.setProperty("manager",null)}if(n.focusEvent._managed){n.focusEvent=null}if(n.blurEvent._managed){n.blurEvent=null}if(n.focus._managed){n.focus=null}if(n.blur._managed){n.blur=null}}};this.blurAll=function(){var k=this.overlays.length,l;if(k>0){l=k-1;do{this.overlays[l].blur()}while(l--)}};this._manageBlur=function(l){var k=false;if(h==l){c.removeClass(h.element,a.CSS_FOCUSED);h=null;k=true}return k};this._manageFocus=function(l){var k=false;if(h!=l){if(h){h.blur()}h=l;this.bringToTop(h);c.addClass(h.element,a.CSS_FOCUSED);k=true}return k};var j=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[]}if(j){this.register(j);this.overlays.sort(this.compareZIndexDesc)}},_onOverlayElementFocus:function(g){var j=e.getTarget(g),h=this.close;if(h&&(j==h||c.isAncestor(h,j))){this.blur()}else{this.focus()}},_onOverlayDestroy:function(h,j,g){this.remove(g)},_onOverlayFocusHandler:function(h,j,g){this._manageFocus(g)},_onOverlayBlurHandler:function(h,j,g){this._manageBlur(g)},_bindFocus:function(h){var g=this;if(!h.focusEvent){h.focusEvent=h.createEvent("focus");h.focusEvent.signature=b.LIST;h.focusEvent._managed=true}else{h.focusEvent.subscribe(g._onOverlayFocusHandler,h,g)}if(!h.focus){e.on(h.element,g.cfg.getProperty("focusevent"),g._onOverlayElementFocus,null,h);h.focus=function(){if(g._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst){this.focusFirst()}this.focusEvent.fire()}};h.focus._managed=true}},_bindBlur:function(h){var g=this;if(!h.blurEvent){h.blurEvent=h.createEvent("blur");h.blurEvent.signature=b.LIST;h.focusEvent._managed=true}else{h.blurEvent.subscribe(g._onOverlayBlurHandler,h,g)}if(!h.blur){h.blur=function(){if(g._manageBlur(this)){this.blurEvent.fire()}};h.blur._managed=true}h.hideEvent.subscribe(h.blur)},_bindDestroy:function(h){var g=this;h.destroyEvent.subscribe(g._onOverlayDestroy,h,g)},_syncZIndex:function(h){var g=c.getStyle(h.element,"zIndex");if(!isNaN(g)){h.cfg.setProperty("zIndex",parseInt(g,10))}else{h.cfg.setProperty("zIndex",0)}},register:function(k){var g=false,j,h;if(k instanceof d){k.cfg.addProperty("manager",{value:this});this._bindFocus(k);this._bindBlur(k);this._bindDestroy(k);this._syncZIndex(k);this.overlays.push(k);this.bringToTop(k);g=true}else{if(k instanceof Array){for(j=0,h=k.length;j<h;j++){g=this.register(k[j])||g}}}return g},bringToTop:function(n){var k=this.find(n),g,m,j;if(k){j=this.overlays;j.sort(this.compareZIndexDesc);m=j[0];if(m){g=c.getStyle(m.element,"zIndex");if(!isNaN(g)){var h=false;if(m!==k){h=true}else{if(j.length>1){var l=c.getStyle(j[1].element,"zIndex");if(!isNaN(l)&&(g==l)){h=true}}}if(h){k.cfg.setProperty("zindex",(parseInt(g,10)+2))}}j.sort(this.compareZIndexDesc)}}},find:function(m){var h=m instanceof d,k=this.overlays,n=k.length,j=null,g,l;if(h||typeof m=="string"){for(l=n-1;l>=0;l--){g=k[l];if((h&&(g===m))||(g.id==m)){j=g;break}}}return j},compareZIndexDesc:function(g,h){var j=(g.cfg)?g.cfg.getProperty("zIndex"):null,k=(h.cfg)?h.cfg.getProperty("zIndex"):null;if(j===null&&k===null){return 0}else{if(j===null){return 1}else{if(k===null){return -1}else{if(j>k){return -1}else{if(j<k){return 1}else{return 0}}}}}},showAll:function(){var h=this.overlays,g=h.length,j;for(j=g-1;j>=0;j--){h[j].show()}},hideAll:function(){var h=this.overlays,g=h.length,j;for(j=g-1;j>=0;j--){h[j].hide()}},toString:function(){return"OverlayManager"}}}());(function(){YAHOO.widget.Tooltip=function(p,q){YAHOO.widget.Tooltip.superclass.constructor.call(this,p,q)};var o=YAHOO.lang,e=YAHOO.util.Event,f=YAHOO.util.CustomEvent,b=YAHOO.util.Dom,j=YAHOO.widget.Tooltip,l=YAHOO.env.ua,m=(l.ie&&(l.ie<=6||document.compatMode=="BackCompat")),n,k={PREVENT_OVERLAP:{key:"preventoverlap",value:true,validator:o.isBoolean,supercedes:["x","y","xy"]},SHOW_DELAY:{key:"showdelay",value:200,validator:o.isNumber},AUTO_DISMISS_DELAY:{key:"autodismissdelay",value:5000,validator:o.isNumber},HIDE_DELAY:{key:"hidedelay",value:250,validator:o.isNumber},TEXT:{key:"text",suppressEvent:true},CONTAINER:{key:"container"},DISABLED:{key:"disabled",value:false,suppressEvent:true}},d={CONTEXT_MOUSE_OVER:"contextMouseOver",CONTEXT_MOUSE_OUT:"contextMouseOut",CONTEXT_TRIGGER:"contextTrigger"};j.CSS_TOOLTIP="yui-tt";function h(q,s){var r=this.cfg,p=r.getProperty("width");if(p==s){r.setProperty("width",q)}}function a(u,v){if("_originalWidth" in this){h.call(this,this._originalWidth,this._forcedWidth)}var t=document.body,p=this.cfg,q=p.getProperty("width"),s,r;if((!q||q=="auto")&&(p.getProperty("container")!=t||p.getProperty("x")>=b.getViewportWidth()||p.getProperty("y")>=b.getViewportHeight())){r=this.element.cloneNode(true);r.style.visibility="hidden";r.style.top="0px";r.style.left="0px";t.appendChild(r);s=(r.offsetWidth+"px");t.removeChild(r);r=null;p.setProperty("width",s);p.refireEvent("xy");this._originalWidth=q||"";this._forcedWidth=s}}function c(q,r,p){this.render(p)}function g(){e.onDOMReady(c,this.cfg.getProperty("container"),this)}YAHOO.extend(j,YAHOO.widget.Overlay,{init:function(p,q){j.superclass.init.call(this,p);this.beforeInitEvent.fire(j);b.addClass(this.element,j.CSS_TOOLTIP);if(q){this.cfg.applyConfig(q,true)}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",a);this.subscribe("init",g);this.subscribe("render",this.onRender);this.initEvent.fire(j)},initEvents:function(){j.superclass.initEvents.call(this);var p=f.LIST;this.contextMouseOverEvent=this.createEvent(d.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=p;this.contextMouseOutEvent=this.createEvent(d.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=p;this.contextTriggerEvent=this.createEvent(d.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=p},initDefaultConfig:function(){j.superclass.initDefaultConfig.call(this);this.cfg.addProperty(k.PREVENT_OVERLAP.key,{value:k.PREVENT_OVERLAP.value,validator:k.PREVENT_OVERLAP.validator,supercedes:k.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(k.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:k.SHOW_DELAY.validator});this.cfg.addProperty(k.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:k.AUTO_DISMISS_DELAY.value,validator:k.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(k.HIDE_DELAY.key,{handler:this.configHideDelay,value:k.HIDE_DELAY.value,validator:k.HIDE_DELAY.validator});this.cfg.addProperty(k.TEXT.key,{handler:this.configText,suppressEvent:k.TEXT.suppressEvent});this.cfg.addProperty(k.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(k.DISABLED.key,{handler:this.configContainer,value:k.DISABLED.value,supressEvent:k.DISABLED.suppressEvent})},configText:function(r,s,q){var p=s[0];if(p){this.setBody(p)}},configContainer:function(q,r,p){var s=r[0];if(typeof s=="string"){this.cfg.setProperty("container",document.getElementById(s),true)}},_removeEventListeners:function(){var p=this._context,s,q,r;if(p){s=p.length;if(s>0){r=s-1;do{q=p[r];e.removeListener(q,"mouseover",this.onContextMouseOver);e.removeListener(q,"mousemove",this.onContextMouseMove);e.removeListener(q,"mouseout",this.onContextMouseOut)}while(r--)}}},configContext:function(r,v,q){var s=v[0],p,w,t,u;if(s){if(!(s instanceof Array)){if(typeof s=="string"){this.cfg.setProperty("context",[document.getElementById(s)],true)}else{this.cfg.setProperty("context",[s],true)}s=this.cfg.getProperty("context")}this._removeEventListeners();this._context=s;p=this._context;if(p){w=p.length;if(w>0){u=w-1;do{t=p[u];e.on(t,"mouseover",this.onContextMouseOver,this);e.on(t,"mousemove",this.onContextMouseMove,this);e.on(t,"mouseout",this.onContextMouseOut,this)}while(u--)}}}},onContextMouseMove:function(p,q){q.pageX=e.getPageX(p);q.pageY=e.getPageY(p)},onContextMouseOver:function(p,q){var r=this;if(r.title){q._tempTitle=r.title;r.title=""}if(q.fireEvent("contextMouseOver",r,p)!==false&&!q.cfg.getProperty("disabled")){if(q.hideProcId){clearTimeout(q.hideProcId);q.hideProcId=null}e.on(r,"mousemove",q.onContextMouseMove,q);q.showProcId=q.doShow(p,r)}},onContextMouseOut:function(p,q){var r=this;if(q._tempTitle){r.title=q._tempTitle;q._tempTitle=null}if(q.showProcId){clearTimeout(q.showProcId);q.showProcId=null}if(q.hideProcId){clearTimeout(q.hideProcId);q.hideProcId=null}q.fireEvent("contextMouseOut",r,p);q.hideProcId=setTimeout(function(){q.hide()},q.cfg.getProperty("hidedelay"))},doShow:function(q,s){var p=25,r=this;if(l.opera&&s.tagName&&s.tagName.toUpperCase()=="A"){p+=12}return setTimeout(function(){var t=r.cfg.getProperty("text");if(r._tempTitle&&(t===""||YAHOO.lang.isUndefined(t)||YAHOO.lang.isNull(t))){r.setBody(r._tempTitle)}else{r.cfg.refireEvent("text")}r.moveTo(r.pageX,r.pageY+p);if(r.cfg.getProperty("preventoverlap")){r.preventOverlap(r.pageX,r.pageY)}e.removeListener(s,"mousemove",r.onContextMouseMove);r.contextTriggerEvent.fire(s);r.show();r.hideProcId=r.doHide()},this.cfg.getProperty("showdelay"))},doHide:function(){var p=this;return setTimeout(function(){p.hide()},this.cfg.getProperty("autodismissdelay"))},preventOverlap:function(p,q){var t=this.element.offsetHeight,r=new YAHOO.util.Point(p,q),s=b.getRegion(this.element);s.top-=5;s.left-=5;s.right+=5;s.bottom+=5;if(s.contains(r)){this.cfg.setProperty("y",(q-t-5))}},onRender:function(r,s){function q(){var w=this.element,x=this.underlay;if(x){x.style.width=(w.offsetWidth+6)+"px";x.style.height=(w.offsetHeight+1)+"px"}}function u(){b.addClass(this.underlay,"yui-tt-shadow-visible");if(l.ie){this.forceUnderlayRedraw()}}function v(){b.removeClass(this.underlay,"yui-tt-shadow-visible")}function p(){var A=this.underlay,w,x,y,z;if(!A){w=this.element;x=YAHOO.widget.Module;y=l.ie;z=this;if(!n){n=document.createElement("div");n.className="yui-tt-shadow"}A=n.cloneNode(false);w.appendChild(A);this.underlay=A;this._shadow=this.underlay;u.call(this);this.subscribe("beforeShow",u);this.subscribe("hide",v);if(m){window.setTimeout(function(){q.call(z)},0);this.cfg.subscribeToConfigEvent("width",q);this.cfg.subscribeToConfigEvent("height",q);this.subscribe("changeContent",q);x.textResizeEvent.subscribe(q,this,true);this.subscribe("destroy",function(){x.textResizeEvent.unsubscribe(q,this)})}}}function t(){p.call(this);this.unsubscribe("beforeShow",t)}if(this.cfg.getProperty("visible")){p.call(this)}else{this.subscribe("beforeShow",t)}},forceUnderlayRedraw:function(){var p=this;b.addClass(p.underlay,"yui-force-redraw");setTimeout(function(){b.removeClass(p.underlay,"yui-force-redraw")},0)},destroy:function(){this._removeEventListeners();j.superclass.destroy.call(this)},toString:function(){return"Tooltip "+this.id}})}());(function(){YAHOO.widget.Panel=function(v,w){YAHOO.widget.Panel.superclass.constructor.call(this,v,w)};var b=null;var q=YAHOO.lang,p=YAHOO.util,u=p.Dom,a=p.Event,h=p.CustomEvent,k=YAHOO.util.KeyListener,m=p.Config,n=YAHOO.widget.Overlay,f=YAHOO.widget.Panel,j=YAHOO.env.ua,e=(j.ie&&(j.ie<=6||document.compatMode=="BackCompat")),o,d,s,r={SHOW_MASK:"showMask",HIDE_MASK:"hideMask",DRAG:"drag"},g={CLOSE:{key:"close",value:true,validator:q.isBoolean,supercedes:["visible"]},DRAGGABLE:{key:"draggable",value:(p.DD?true:false),validator:q.isBoolean,supercedes:["visible"]},DRAG_ONLY:{key:"dragonly",value:false,validator:q.isBoolean,supercedes:["draggable"]},UNDERLAY:{key:"underlay",value:"shadow",supercedes:["visible"]},MODAL:{key:"modal",value:false,validator:q.isBoolean,supercedes:["visible","zindex"]},KEY_LISTENERS:{key:"keylisteners",suppressEvent:true,supercedes:["visible"]},STRINGS:{key:"strings",supercedes:["close"],validator:q.isObject,value:{close:"Close"}}};f.CSS_PANEL="yui-panel";f.CSS_PANEL_CONTAINER="yui-panel-container";f.FOCUSABLE=["a","button","select","textarea","input","iframe"];function l(v,w){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;")}}function c(x,y,v){var z=v[0],B=v[1],A=this.cfg,w=A.getProperty("width");if(w==B){A.setProperty("width",z)}this.unsubscribe("hide",c,v)}function t(w,x){var y,z,v;if(e){y=this.cfg;z=y.getProperty("width");if(!z||z=="auto"){v=(this.element.offsetWidth+"px");y.setProperty("width",v);this.subscribe("hide",c,[(z||""),v])}}}YAHOO.extend(f,n,{init:function(v,w){f.superclass.init.call(this,v);this.beforeInitEvent.fire(f);u.addClass(this.element,f.CSS_PANEL);this.buildWrapper();if(w){this.cfg.applyConfig(w,true)}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",l);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",this.setFirstLastFocusable)});this.subscribe("show",this.focusFirst);this.initEvent.fire(f)},_onElementFocus:function(y){if(b===this){var z=a.getTarget(y),A=document.documentElement,w=(z!==A&&z!==window);if(w&&z!==this.element&&z!==this.mask&&!u.isAncestor(this.element,z)){try{if(this.firstElement){this.firstElement.focus()}else{if(this._modalFocus){this._modalFocus.focus()}else{this.innerElement.focus()}}}catch(v){try{if(w&&z!==document.body){z.blur()}}catch(x){}}}}},_addFocusHandlers:function(v,w){if(!this.firstElement){if(j.webkit||j.opera){if(!this._modalFocus){this._createHiddenFocusElement()}}else{this.innerElement.tabIndex=0}}this.setTabLoop(this.firstElement,this.lastElement);a.onFocus(document.documentElement,this._onElementFocus,this,true);b=this},_createHiddenFocusElement:function(){var v=document.createElement("button");v.style.height="1px";v.style.width="1px";v.style.position="absolute";v.style.left="-10000em";v.style.opacity=0;v.tabIndex=-1;this.innerElement.appendChild(v);this._modalFocus=v},_removeFocusHandlers:function(v,w){a.removeFocusListener(document.documentElement,this._onElementFocus,this);if(b==this){b=null}},focusFirst:function(v,x,y){var w=this.firstElement;if(x&&x[1]){a.stopEvent(x[1])}if(w){try{w.focus()}catch(z){}}},focusLast:function(v,x,y){var w=this.lastElement;if(x&&x[1]){a.stopEvent(x[1])}if(w){try{w.focus()}catch(z){}}},setTabLoop:function(A,y){var w=this.preventBackTab,v=this.preventTabOut,x=this.showEvent,z=this.hideEvent;if(w){w.disable();x.unsubscribe(w.enable,w);z.unsubscribe(w.disable,w);w=this.preventBackTab=null}if(v){v.disable();x.unsubscribe(v.enable,v);z.unsubscribe(v.disable,v);v=this.preventTabOut=null}if(A){this.preventBackTab=new k(A,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});w=this.preventBackTab;x.subscribe(w.enable,w,true);z.subscribe(w.disable,w,true)}if(y){this.preventTabOut=new k(y,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});v=this.preventTabOut;x.subscribe(v.enable,v,true);z.subscribe(v.disable,v,true)}},getFocusableElements:function(x){x=x||this.innerElement;var y={};for(var v=0;v<f.FOCUSABLE.length;v++){y[f.FOCUSABLE[v]]=true}function w(z){if(z.focus&&z.type!=="hidden"&&!z.disabled&&y[z.tagName.toLowerCase()]){return true}return false}return u.getElementsBy(w,null,x)},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var v=this.getFocusableElements();this.focusableElements=v;if(v.length>0){this.firstElement=v[0];this.lastElement=v[v.length-1]}if(this.cfg.getProperty("modal")){this.setTabLoop(this.firstElement,this.lastElement)}},initEvents:function(){f.superclass.initEvents.call(this);var v=h.LIST;this.showMaskEvent=this.createEvent(r.SHOW_MASK);this.showMaskEvent.signature=v;this.hideMaskEvent=this.createEvent(r.HIDE_MASK);this.hideMaskEvent.signature=v;this.dragEvent=this.createEvent(r.DRAG);this.dragEvent.signature=v},initDefaultConfig:function(){f.superclass.initDefaultConfig.call(this);this.cfg.addProperty(g.CLOSE.key,{handler:this.configClose,value:g.CLOSE.value,validator:g.CLOSE.validator,supercedes:g.CLOSE.supercedes});this.cfg.addProperty(g.DRAGGABLE.key,{handler:this.configDraggable,value:(p.DD)?true:false,validator:g.DRAGGABLE.validator,supercedes:g.DRAGGABLE.supercedes});this.cfg.addProperty(g.DRAG_ONLY.key,{value:g.DRAG_ONLY.value,validator:g.DRAG_ONLY.validator,supercedes:g.DRAG_ONLY.supercedes});this.cfg.addProperty(g.UNDERLAY.key,{handler:this.configUnderlay,value:g.UNDERLAY.value,supercedes:g.UNDERLAY.supercedes});this.cfg.addProperty(g.MODAL.key,{handler:this.configModal,value:g.MODAL.value,validator:g.MODAL.validator,supercedes:g.MODAL.supercedes});this.cfg.addProperty(g.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:g.KEY_LISTENERS.suppressEvent,supercedes:g.KEY_LISTENERS.supercedes});this.cfg.addProperty(g.STRINGS.key,{value:g.STRINGS.value,handler:this.configStrings,validator:g.STRINGS.validator,supercedes:g.STRINGS.supercedes})},configClose:function(A,w,z){var y=w[0],v=this.close,x=this.cfg.getProperty("strings");if(y){if(!v){if(!s){s=document.createElement("a");s.className="container-close";s.href="#"}v=s.cloneNode(true);this.innerElement.appendChild(v);v.innerHTML=(x&&x.close)?x.close:"&#160;";a.on(v,"click",this._doClose,this,true);this.close=v}else{v.style.display="block"}}else{if(v){v.style.display="none"}}},_doClose:function(v){a.preventDefault(v);this.hide()},configDraggable:function(w,x,v){var y=x[0];if(y){if(!p.DD){this.cfg.setProperty("draggable",false);return}if(this.header){u.setStyle(this.header,"cursor","move");this.registerDragDrop()}this.subscribe("beforeShow",t)}else{if(this.dd){this.dd.unreg()}if(this.header){u.setStyle(this.header,"cursor","auto")}this.unsubscribe("beforeShow",t)}},configUnderlay:function(C,D,v){var E=(this.platform=="mac"&&j.gecko),B=D[0].toLowerCase(),z=this.underlay,y=this.element;function x(){var G=false;if(!z){if(!d){d=document.createElement("div");d.className="underlay"}z=d.cloneNode(false);this.element.appendChild(z);this.underlay=z;if(e){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true)}if(j.webkit&&j.webkit<420){this.changeContentEvent.subscribe(this.forceUnderlayRedraw)}G=true}}function F(){var G=x.call(this);if(!G&&e){this.sizeUnderlay()}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(F)}function w(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(F);this._underlayDeferred=false}if(z){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(z);this.underlay=null}}switch(B){case"shadow":u.removeClass(y,"matte");u.addClass(y,"shadow");break;case"matte":if(!E){w.call(this)}u.removeClass(y,"shadow");u.addClass(y,"matte");break;default:if(!E){w.call(this)}u.removeClass(y,"shadow");u.removeClass(y,"matte");break}if((B=="shadow")||(E&&!z)){if(this.cfg.getProperty("visible")){var A=x.call(this);if(!A&&e){this.sizeUnderlay()}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(F);this._underlayDeferred=true}}}},configModal:function(w,x,y){var v=x[0];if(v){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);n.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask()}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);n.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false}}},removeMask:function(){var v=this.mask,w;if(v){this.hideMask();w=v.parentNode;if(w){w.removeChild(v)}this.mask=null}},configKeyListeners:function(B,y,x){var v=y[0],z,A,w;if(v){if(v instanceof Array){A=v.length;for(w=0;w<A;w++){z=v[w];if(!m.alreadySubscribed(this.showEvent,z.enable,z)){this.showEvent.subscribe(z.enable,z,true)}if(!m.alreadySubscribed(this.hideEvent,z.disable,z)){this.hideEvent.subscribe(z.disable,z,true);this.destroyEvent.subscribe(z.disable,z,true)}}}else{if(!m.alreadySubscribed(this.showEvent,v.enable,v)){this.showEvent.subscribe(v.enable,v,true)}if(!m.alreadySubscribed(this.hideEvent,v.disable,v)){this.hideEvent.subscribe(v.disable,v,true);this.destroyEvent.subscribe(v.disable,v,true)}}}},configStrings:function(w,x,v){var y=q.merge(g.STRINGS.value,x[0]);this.cfg.setProperty(g.STRINGS.key,y,true)},configHeight:function(z,w,y){var x=w[0],v=this.innerElement;u.setStyle(v,"height",x);this.cfg.refireEvent("iframe")},_autoFillOnHeightChange:function(y,w,v){f.superclass._autoFillOnHeightChange.apply(this,arguments);if(e){var x=this;setTimeout(function(){x.sizeUnderlay()},0)}},configWidth:function(z,x,y){var v=x[0],w=this.innerElement;u.setStyle(w,"width",v);this.cfg.refireEvent("iframe")},configzIndex:function(w,x,y){f.superclass.configzIndex.call(this,w,x,y);if(this.mask||this.cfg.getProperty("modal")===true){var v=u.getStyle(this.element,"zIndex");if(!v||isNaN(v)){v=0}if(v===0){this.cfg.setProperty("zIndex",1)}else{this.stackMask()}}},buildWrapper:function(){var v=this.element.parentNode,x=this.element,w=document.createElement("div");w.className=f.CSS_PANEL_CONTAINER;w.id=x.id+"_c";if(v){v.insertBefore(w,x)}w.appendChild(x);this.element=w;this.innerElement=x;u.setStyle(this.innerElement,"visibility","inherit")},sizeUnderlay:function(){var v=this.underlay,w;if(v){w=this.element;v.style.width=w.offsetWidth+"px";v.style.height=w.offsetHeight+"px"}},registerDragDrop:function(){var v=this;if(this.header){if(!p.DD){return}var w=(this.cfg.getProperty("dragonly")===true);this.dd=new p.DD(this.element.id,this.id,{dragOnly:w});if(!this.header.id){this.header.id=this.id+"_h"}this.dd.startDrag=function(){var D,A,y,C,x,z;if(YAHOO.env.ua.ie==6){u.addClass(v.element,"drag")}if(v.cfg.getProperty("constraintoviewport")){var B=n.VIEWPORT_OFFSET;D=v.element.offsetHeight;A=v.element.offsetWidth;y=u.getViewportWidth();C=u.getViewportHeight();x=u.getDocumentScrollLeft();z=u.getDocumentScrollTop();if(D+B<C){this.minY=z+B;this.maxY=z+C-D-B}else{this.minY=z+B;this.maxY=z+B}if(A+B<y){this.minX=x+B;this.maxX=x+y-A-B}else{this.minX=x+B;this.maxX=x+B}this.constrainX=true;this.constrainY=true}else{this.constrainX=false;this.constrainY=false}v.dragEvent.fire("startDrag",arguments)};this.dd.onDrag=function(){v.syncPosition();v.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars()}v.dragEvent.fire("onDrag",arguments)};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){u.removeClass(v.element,"drag")}v.dragEvent.fire("endDrag",arguments);v.moveEvent.fire(v.cfg.getProperty("xy"))};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA")}},buildMask:function(){var v=this.mask;if(!v){if(!o){o=document.createElement("div");o.className="mask";o.innerHTML="&#160;"}v=o.cloneNode(true);v.id=this.id+"_mask";document.body.insertBefore(v,document.body.firstChild);this.mask=v;if(YAHOO.env.ua.gecko&&this.platform=="mac"){u.addClass(this.mask,"block-scrollbars")}this.stackMask()}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";u.removeClass(document.body,"masked");this.hideMaskEvent.fire()}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){u.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire()}},sizeMask:function(){if(this.mask){var w=this.mask,v=u.getViewportWidth(),x=u.getViewportHeight();if(w.offsetHeight>x){w.style.height=x+"px"}if(w.offsetWidth>v){w.style.width=v+"px"}w.style.height=u.getDocumentHeight()+"px";w.style.width=u.getDocumentWidth()+"px"}},stackMask:function(){if(this.mask){var v=u.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(v)&&!isNaN(v)){u.setStyle(this.mask,"zIndex",v-1)}}},render:function(v){return f.superclass.render.call(this,v,this.innerElement)},destroy:function(){n.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){a.purgeElement(this.close)}f.superclass.destroy.call(this)},forceUnderlayRedraw:function(){var v=this.underlay;u.addClass(v,"yui-force-redraw");setTimeout(function(){u.removeClass(v,"yui-force-redraw")},0)},toString:function(){return"Panel "+this.id}})}());(function(){YAHOO.widget.Dialog=function(j,k){YAHOO.widget.Dialog.superclass.constructor.call(this,j,k)};var h=YAHOO.util.Event,c=YAHOO.util.CustomEvent,e=YAHOO.util.Dom,a=YAHOO.widget.Dialog,d=YAHOO.lang,b={BEFORE_SUBMIT:"beforeSubmit",SUBMIT:"submit",MANUAL_SUBMIT:"manualSubmit",ASYNC_SUBMIT:"asyncSubmit",FORM_SUBMIT:"formSubmit",CANCEL:"cancel"},g={POST_METHOD:{key:"postmethod",value:"async"},POST_DATA:{key:"postdata",value:null},BUTTONS:{key:"buttons",value:"none",supercedes:["visible"]},HIDEAFTERSUBMIT:{key:"hideaftersubmit",value:true}};a.CSS_DIALOG="yui-dialog";function f(){var j=this._aButtons,l,k,m;if(d.isArray(j)){l=j.length;if(l>0){m=l-1;do{k=j[m];if(YAHOO.widget.Button&&k instanceof YAHOO.widget.Button){k.destroy()}else{if(k.tagName.toUpperCase()=="BUTTON"){h.purgeElement(k);h.purgeElement(k,false)}}}while(m--)}}}YAHOO.extend(a,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){a.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(g.POST_METHOD.key,{handler:this.configPostMethod,value:g.POST_METHOD.value,validator:function(j){if(j!="form"&&j!="async"&&j!="none"&&j!="manual"){return false}else{return true}}});this.cfg.addProperty(g.POST_DATA.key,{value:g.POST_DATA.value});this.cfg.addProperty(g.HIDEAFTERSUBMIT.key,{value:g.HIDEAFTERSUBMIT.value});this.cfg.addProperty(g.BUTTONS.key,{handler:this.configButtons,value:g.BUTTONS.value,supercedes:g.BUTTONS.supercedes})},initEvents:function(){a.superclass.initEvents.call(this);var j=c.LIST;this.beforeSubmitEvent=this.createEvent(b.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=j;this.submitEvent=this.createEvent(b.SUBMIT);this.submitEvent.signature=j;this.manualSubmitEvent=this.createEvent(b.MANUAL_SUBMIT);this.manualSubmitEvent.signature=j;this.asyncSubmitEvent=this.createEvent(b.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=j;this.formSubmitEvent=this.createEvent(b.FORM_SUBMIT);this.formSubmitEvent.signature=j;this.cancelEvent=this.createEvent(b.CANCEL);this.cancelEvent.signature=j},init:function(j,k){a.superclass.init.call(this,j);this.beforeInitEvent.fire(a);e.addClass(this.element,a.CSS_DIALOG);this.cfg.setProperty("visible",false);if(k){this.cfg.applyConfig(k,true)}this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(a)},doSubmit:function(){var l=YAHOO.util.Connect,k=this.form,q=false,n=false,j,o,p,s;switch(this.cfg.getProperty("postmethod")){case"async":j=k.elements;o=j.length;if(o>0){p=o-1;do{if(j[p].type=="file"){q=true;break}}while(p--)}if(q&&YAHOO.env.ua.ie&&this.isSecure){n=true}s=this._getFormAttributes(k);l.setForm(k,q,n);var r=this.cfg.getProperty("postdata");var m=l.asyncRequest(s.method,s.action,this.callback,r);this.asyncSubmitEvent.fire(m);break;case"form":k.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break}},_getFormAttributes:function(k){var m={method:null,action:null};if(k){if(k.getAttributeNode){var l=k.getAttributeNode("action");var j=k.getAttributeNode("method");if(l){m.action=l.value}if(j){m.method=j.value}}else{m.action=k.getAttribute("action");m.method=k.getAttribute("method")}}m.method=(d.isString(m.method)?m.method:"POST").toUpperCase();m.action=d.isString(m.action)?m.action:"";return m},registerForm:function(){var j=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==j&&e.isAncestor(this.element,this.form)){return}else{h.purgeElement(this.form);this.form=null}}if(!j){j=document.createElement("form");j.name="frm_"+this.id;this.body.appendChild(j)}if(j){this.form=j;h.on(j,"submit",this._submitHandler,this,true)}},_submitHandler:function(j){h.stopEvent(j);this.submit();this.form.blur()},setTabLoop:function(k,j){k=k||this.firstButton;j=this.lastButton||j;a.superclass.setTabLoop.call(this,k,j)},setFirstLastFocusable:function(){a.superclass.setFirstLastFocusable.call(this);var l,m,k,j=this.focusableElements;this.firstFormElement=null;this.lastFormElement=null;if(this.form&&j&&j.length>0){m=j.length;for(l=0;l<m;++l){k=j[l];if(this.form===k.form){this.firstFormElement=k;break}}for(l=m-1;l>=0;--l){k=j[l];if(this.form===k.form){this.lastFormElement=k;break}}}},configClose:function(k,l,j){a.superclass.configClose.apply(this,arguments)},_doClose:function(j){h.preventDefault(j);this.cancel()},configButtons:function(l,m,r){var q=YAHOO.widget.Button,j=m[0],t=this.innerElement,k,o,u,n,p,v,s;f.call(this);this._aButtons=null;if(d.isArray(j)){p=document.createElement("span");p.className="button-group";n=j.length;this._aButtons=[];this.defaultHtmlButton=null;for(s=0;s<n;s++){k=j[s];if(q){u=new q({label:k.text});u.appendTo(p);o=u.get("element");if(k.isDefault){u.addClass("default");this.defaultHtmlButton=o}if(d.isFunction(k.handler)){u.set("onclick",{fn:k.handler,obj:this,scope:this})}else{if(d.isObject(k.handler)&&d.isFunction(k.handler.fn)){u.set("onclick",{fn:k.handler.fn,obj:((!d.isUndefined(k.handler.obj))?k.handler.obj:this),scope:(k.handler.scope||this)})}}this._aButtons[this._aButtons.length]=u}else{o=document.createElement("button");o.setAttribute("type","button");if(k.isDefault){o.className="default";this.defaultHtmlButton=o}o.innerHTML=k.text;if(d.isFunction(k.handler)){h.on(o,"click",k.handler,this,true)}else{if(d.isObject(k.handler)&&d.isFunction(k.handler.fn)){h.on(o,"click",k.handler.fn,((!d.isUndefined(k.handler.obj))?k.handler.obj:this),(k.handler.scope||this))}}p.appendChild(o);this._aButtons[this._aButtons.length]=o}k.htmlButton=o;if(s===0){this.firstButton=o}if(s==(n-1)){this.lastButton=o}}this.setFooter(p);v=this.footer;if(e.inDocument(this.element)&&!e.isAncestor(t,v)){t.appendChild(v)}this.buttonSpan=p}else{p=this.buttonSpan;v=this.footer;if(p&&v){v.removeChild(p);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null}}this.changeContentEvent.fire()},getButtons:function(){return this._aButtons||null},focusFirst:function(k,m,n){var l=this.firstFormElement;if(m&&m[1]){h.stopEvent(m[1])}if(l){try{l.focus()}catch(j){}}else{if(this.defaultHtmlButton){this.focusDefaultButton()}else{this.focusFirstButton()}}},focusLast:function(k,m,o){var n=this.cfg.getProperty("buttons"),l=this.lastFormElement;if(m&&m[1]){h.stopEvent(m[1])}if(n&&d.isArray(n)){this.focusLastButton()}else{if(l){try{l.focus()}catch(j){}}}},_getButton:function(j){var k=YAHOO.widget.Button;if(k&&j&&j.nodeName&&j.id){j=k.getButton(j.id)||j}return j},focusDefaultButton:function(){var k=this._getButton(this.defaultHtmlButton);if(k){try{k.focus()}catch(j){}}},blurButtons:function(){var n=this.cfg.getProperty("buttons"),k,o,l,m;if(n&&d.isArray(n)){k=n.length;if(k>0){m=(k-1);do{o=n[m];if(o){l=this._getButton(o.htmlButton);if(l){try{l.blur()}catch(j){}}}}while(m--)}}},focusFirstButton:function(){var j=this.cfg.getProperty("buttons"),k,m;if(j&&d.isArray(j)){k=j[0];if(k){m=this._getButton(k.htmlButton);if(m){try{m.focus()}catch(l){}}}}},focusLastButton:function(){var n=this.cfg.getProperty("buttons"),l,j,m;if(n&&d.isArray(n)){l=n.length;if(l>0){j=n[(l-1)];if(j){m=this._getButton(j.htmlButton);if(m){try{m.focus()}catch(k){}}}}}},configPostMethod:function(k,l,j){this.registerForm()},validate:function(){return true},submit:function(){if(this.validate()){this.beforeSubmitEvent.fire();this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide()}return true}else{return false}},cancel:function(){this.cancelEvent.fire();this.hide()},getData:function(){var k=this.form,y,r,o,w,q,t,u,z,n,x,m,j,A,v,B,l,p;function s(D){var C=D.tagName.toUpperCase();return((C=="INPUT"||C=="TEXTAREA"||C=="SELECT")&&D.name==w)}if(k){y=k.elements;r=y.length;o={};for(l=0;l<r;l++){w=y[l].name;q=e.getElementsBy(s,"*",k);t=q.length;if(t>0){if(t==1){q=q[0];u=q.type;z=q.tagName.toUpperCase();switch(z){case"INPUT":if(u=="checkbox"){o[w]=q.checked}else{if(u!="radio"){o[w]=q.value}}break;case"TEXTAREA":o[w]=q.value;break;case"SELECT":n=q.options;x=n.length;m=[];for(p=0;p<x;p++){j=n[p];if(j.selected){A=j.value;if(!A||A===""){A=j.text}m[m.length]=A}}o[w]=m;break}}else{u=q[0].type;switch(u){case"radio":for(p=0;p<t;p++){v=q[p];if(v.checked){o[w]=v.value;break}}break;case"checkbox":m=[];for(p=0;p<t;p++){B=q[p];if(B.checked){m[m.length]=B.value}}o[w]=m;break}}}}}return o},destroy:function(){f.call(this);this._aButtons=null;var k=this.element.getElementsByTagName("form"),j;if(k.length>0){j=k[0];if(j){h.purgeElement(j);if(j.parentNode){j.parentNode.removeChild(j)}this.form=null}}a.superclass.destroy.call(this)},toString:function(){return"Dialog "+this.id}})}());(function(){YAHOO.widget.SimpleDialog=function(d,e){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,d,e)};var b=YAHOO.util.Dom,c=YAHOO.widget.SimpleDialog,a={ICON:{key:"icon",value:"none",suppressEvent:true},TEXT:{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};c.ICON_BLOCK="blckicon";c.ICON_ALARM="alrticon";c.ICON_HELP="hlpicon";c.ICON_INFO="infoicon";c.ICON_WARN="warnicon";c.ICON_TIP="tipicon";c.ICON_CSS_CLASSNAME="yui-icon";c.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(c,YAHOO.widget.Dialog,{initDefaultConfig:function(){c.superclass.initDefaultConfig.call(this);this.cfg.addProperty(a.ICON.key,{handler:this.configIcon,value:a.ICON.value,suppressEvent:a.ICON.suppressEvent});this.cfg.addProperty(a.TEXT.key,{handler:this.configText,value:a.TEXT.value,suppressEvent:a.TEXT.suppressEvent,supercedes:a.TEXT.supercedes})},init:function(d,e){c.superclass.init.call(this,d);this.beforeInitEvent.fire(c);b.addClass(this.element,c.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(e){this.cfg.applyConfig(e,true)}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("")}},this,true);this.initEvent.fire(c)},registerForm:function(){c.superclass.registerForm.call(this);this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>'},configIcon:function(j,k,e){var d=k[0],l=this.body,f=c.ICON_CSS_CLASSNAME,g,h;if(d&&d!="none"){g=b.getElementsByClassName(f,"*",l);if(g){h=g.parentNode;if(h){h.removeChild(g);g=null}}if(d.indexOf(".")==-1){g=document.createElement("span");g.className=(f+" "+d);g.innerHTML="&#160;"}else{g=document.createElement("img");g.src=(this.imageRoot+d);g.className=f}if(g){l.insertBefore(g,l.firstChild)}}},configText:function(f,g,e){var d=g[0];if(d){this.setBody(d);this.cfg.refireEvent("icon")}},toString:function(){return"SimpleDialog "+this.id}})}());(function(){YAHOO.widget.ContainerEffect=function(g,d,e,h,f){if(!f){f=YAHOO.util.Anim}this.overlay=g;this.attrIn=d;this.attrOut=e;this.targetElement=h||g.element;this.animClass=f};var c=YAHOO.util.Dom,b=YAHOO.util.CustomEvent,a=YAHOO.widget.ContainerEffect;a.FADE=function(j,g){var f=YAHOO.util.Easing,d={attributes:{opacity:{from:0,to:1}},duration:g,method:f.easeIn},h={attributes:{opacity:{to:0}},duration:g,method:f.easeOut},e=new a(j,d,h,j.element);e.handleUnderlayStart=function(){var k=this.overlay.underlay;if(k&&YAHOO.env.ua.ie){var l=(k.filters&&k.filters.length>0);if(l){c.addClass(j.element,"yui-effect-fade")}}};e.handleUnderlayComplete=function(){var k=this.overlay.underlay;if(k&&YAHOO.env.ua.ie){c.removeClass(j.element,"yui-effect-fade")}};e.handleStartAnimateIn=function(l,m,k){c.addClass(k.overlay.element,"hide-select");if(!k.overlay.underlay){k.overlay.cfg.refireEvent("underlay")}k.handleUnderlayStart();k.overlay._setDomVisibility(true);c.setStyle(k.overlay.element,"opacity",0)};e.handleCompleteAnimateIn=function(l,m,k){c.removeClass(k.overlay.element,"hide-select");if(k.overlay.element.style.filter){k.overlay.element.style.filter=null}k.handleUnderlayComplete();k.overlay.cfg.refireEvent("iframe");k.animateInCompleteEvent.fire()};e.handleStartAnimateOut=function(l,m,k){c.addClass(k.overlay.element,"hide-select");k.handleUnderlayStart()};e.handleCompleteAnimateOut=function(l,m,k){c.removeClass(k.overlay.element,"hide-select");if(k.overlay.element.style.filter){k.overlay.element.style.filter=null}k.overlay._setDomVisibility(false);c.setStyle(k.overlay.element,"opacity",1);k.handleUnderlayComplete();k.overlay.cfg.refireEvent("iframe");k.animateOutCompleteEvent.fire()};e.init();return e};a.SLIDE=function(m,d){var j=YAHOO.util.Easing,f=m.cfg.getProperty("x")||c.getX(m.element),g=m.cfg.getProperty("y")||c.getY(m.element),e=c.getClientWidth(),k=m.element.offsetWidth,h={attributes:{points:{to:[f,g]}},duration:d,method:j.easeIn},n={attributes:{points:{to:[(e+25),g]}},duration:d,method:j.easeOut},l=new a(m,h,n,m.element,YAHOO.util.Motion);l.handleStartAnimateIn=function(p,q,o){o.overlay.element.style.left=((-25)-k)+"px";o.overlay.element.style.top=g+"px"};l.handleTweenAnimateIn=function(q,r,p){var o=c.getXY(p.overlay.element),s=o[0],t=o[1];if(c.getStyle(p.overlay.element,"visibility")=="hidden"&&s<f){p.overlay._setDomVisibility(true)}p.overlay.cfg.setProperty("xy",[s,t],true);p.overlay.cfg.refireEvent("iframe")};l.handleCompleteAnimateIn=function(p,q,o){o.overlay.cfg.setProperty("xy",[f,g],true);o.startX=f;o.startY=g;o.overlay.cfg.refireEvent("iframe");o.animateInCompleteEvent.fire()};l.handleStartAnimateOut=function(s,t,p){var r=c.getViewportWidth(),o=c.getXY(p.overlay.element),q=o[1];p.animOut.attributes.points.to=[(r+25),q]};l.handleTweenAnimateOut=function(r,s,q){var o=c.getXY(q.overlay.element),t=o[0],p=o[1];q.overlay.cfg.setProperty("xy",[t,p],true);q.overlay.cfg.refireEvent("iframe")};l.handleCompleteAnimateOut=function(p,q,o){o.overlay._setDomVisibility(false);o.overlay.cfg.setProperty("xy",[f,g]);o.animateOutCompleteEvent.fire()};l.init();return l};a.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=b.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=b.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=b.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=b.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this)},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate()},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate()},handleStartAnimateIn:function(e,f,d){},handleTweenAnimateIn:function(e,f,d){},handleCompleteAnimateIn:function(e,f,d){},handleStartAnimateOut:function(e,f,d){},handleTweenAnimateOut:function(e,f,d){},handleCompleteAnimateOut:function(e,f,d){},toString:function(){var d="ContainerEffect";if(this.overlay){d+=" ["+this.overlay.toString()+"]"}return d}};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.7.0",build:"1799"});if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/yui/yui_2.7.0b/build/container/container-min.js")}var DDSPEED=3;var DDTIMER=15;function ddMenu(f,b){var a=document.getElementById(f+"-ddheader");var e=document.getElementById(f+"-ddcontent");clearInterval(e.timer);if(b==1){clearTimeout(a.timer);if(e.maxh&&e.maxh<=e.offsetHeight){return}else{if(!e.maxh){e.style.display="block";e.style.height="auto";e.maxh=e.offsetHeight;e.style.height="0px"}}e.timer=setInterval(function(){ddSlide(e,1)},DDTIMER)}else{ddCollapse(e)}}function ddCollapse(a){a.timer=setInterval(function(){ddSlide(a,-1)},DDTIMER)}function cancelHide(d){var a=document.getElementById(d+"-ddheader");var b=document.getElementById(d+"-ddcontent");clearTimeout(a.timer);clearInterval(b.timer);if(b.offsetHeight<b.maxh){b.timer=setInterval(function(){ddSlide(b,1)},DDTIMER)}}function ddSlide(f,e){var b=f.offsetHeight;var a;if(e==1){a=(Math.round((f.maxh-b)/DDSPEED))}else{a=(Math.round(b/DDSPEED))}if(a<=1&&e==1){a=1}f.style.height=b+(a*e)+"px";f.style.opacity=b/f.maxh;f.style.filter="alpha(opacity="+(b*100/f.maxh)+")";if((b<2&&e!=1)||(b>(f.maxh-2)&&e==1)){clearInterval(f.timer)}}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/common/dropdown.js")}View.prototype.dropDownMenuDispatcher=function(b,a,c){if(b=="showJournal"){c.showJournal()}else{if(b=="showAllWork"){c.showAllWork()}else{if(b=="displayProgress"){c.displayProgress(a[0],a[1])}}}};View.prototype.showJournal=function(){if(this.journalPanel==null||this.journalPanel.cfg==null){this.journalPanel=new YAHOO.widget.Panel("journalPanel",{width:"600px",height:"600px",fixedcenter:false,constraintoviewport:false,underlay:"shadow",close:true,visible:true,draggable:true,context:["showbtn","tl","bl"]});this.journalPanel.hideEvent.subscribe(this.saveJournal,this);this.journalPanel.setHeader("Journal");this.journalPanel.setBody("<iframe name='journalFrame' id='journalFrame' frameborder='0' width='100%' height='100%' src='journal/journal.html'></iframe>");this.journalPanel.render();window.frames.journalFrame.eventManager=eventManager}else{this.journalPanel.cfg.setProperty("visible",true)}};View.prototype.saveJournal=function(){if(this.journal){this.journal.saveToServer()}};View.prototype.resizeJournal=function(b){var c=window.innerHeight;var a=window.innerWidth;if(b=="minimize"){this.journalPanel.cfg.setProperty("height","100px");this.journalPanel.cfg.setProperty("width","430px")}else{if(b=="original"){this.journalPanel.cfg.setProperty("height","550px");this.journalPanel.cfg.setProperty("width","600px")}else{if(b=="narrow"){this.journalPanel.cfg.setProperty("height",(c-10)+"px");this.journalPanel.cfg.setProperty("width","225px")}else{if(b=="wide"){this.journalPanel.cfg.setProperty("height","200px");this.journalPanel.cfg.setProperty("width","1000px")}else{if(b=="maximize"){this.journalPanel.cfg.setProperty("height",(c-10)+"px");this.journalPanel.cfg.setProperty("width","1000px")}}}}}};View.prototype.showAllWork=function(){var a=true;this.getAnnotations(a)};View.prototype.displayShowAllWork=function(a){var c="";c='<div id="showWorkContainer">'+this.project.getShowAllWorkHtml(this.project.getRootNode(),a)+"</div>";YAHOO.namespace("example.container");var b=document.getElementById("showAllWorkDiv");b.innerHTML='<div class="test"></div>';if(!YAHOO.example.container.showallwork){YAHOO.example.container.showallwork=new YAHOO.widget.Panel("showallwork",{width:"980px",height:"665px",constraintoviewport:true,fixedcenter:true,close:true,draggable:true,zindex:4,modal:true,visible:false});YAHOO.example.container.showallwork.setHeader("MY WORK (w/Teacher Feedback and Scores)");YAHOO.example.container.showallwork.setBody(c);YAHOO.example.container.showallwork.render(document.body)}else{YAHOO.example.container.showallwork.setBody(c)}YAHOO.example.container.showallwork.show()};View.prototype.getAnnotations=function(a){var c=function(e,f,d){var g=d[0];g.annotations=Annotations.prototype.parseDataJSONString(e);if(a){g.displayShowAllWork(true)}};var b={runId:this.getConfig().getConfigParam("runId"),toWorkgroup:this.getUserAndClassInfo().getWorkgroupId(),fromWorkgroup:this.getUserAndClassInfo().getTeacherWorkgroupId(),periodId:this.getUserAndClassInfo().getPeriodId()};this.connectionManager.request("GET",3,this.getConfig().getConfigParam("getAnnotationsUrl"),b,c,[this])};View.prototype.displayProgress=function(b,a){if(b){YAHOO.namespace("example.container");if(!YAHOO.example.container.displayprogress){YAHOO.example.container.displayprogress=new YAHOO.widget.Panel("displayProgress",{width:"800px",height:"300px",fixedcenter:true,close:true,draggable:false,zindex:4,modal:true,visible:false});YAHOO.example.container.displayprogress.setHeader("My Progress");YAHOO.example.container.displayprogress.setBody(vle.getProgress(a));YAHOO.example.container.displayprogress.render(document.body)}else{YAHOO.example.container.displayprogress.setBody(vle.getProgress(a))}YAHOO.example.container.displayprogress.show()}else{document.getElementById("centeredDiv").style.display="none";document.getElementById("progressDiv").innerHTML=vle.getProgress(a)}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_dropdownmenu.js")}function createAttribute(d,c,a,e){var b=d.createAttribute(a);b.nodeValue=e;c.setAttributeNode(b)}function createElement(d,c,a){var e=d.createElement(c);if(a!=null){for(var b in a){createAttribute(d,e,b,a[b])}}return e}function createBreak(){return createElement(document,"br",null)}function createSpace(){return document.createTextNode(" ")}function encodeString(a){return encodeURIComponent(a)}function getElementsByAttribute(c,f,a){notificationManager.notify("attributeName:"+c+", attributeValue:"+f,4);var e=null;if(a!=null){notificationManager.notify("frameName:"+a,4);e=yui.get(window.frames.ifrm.frames[a].document.body)}else{e=yui.get(window.frames.ifrm.document.body)}if(f!=null){var g=e.query("["+c+"="+f+"]");notificationManager.notify("audioNode:"+g,4);return g}else{var b=e.queryAll("["+c+"]");if(b!=null){notificationManager.notify("audioNodes.length:"+b.size(),4);for(var d=0;d<b.size();d++){notificationManager.notify("audioNode textContent:"+b.item(d).get("textContent"),4)}}return b}}function checkAccessibility(a){var c={success:function(d){return true},failure:function(d){return false}};var b=YAHOO.util.Connect.asyncRequest("HEAD",a,c,null)}function normalizeHTML(a){return a.replace(/\s+/g,"")}function injectVleUrl(b){var c=window.location.toString();var a=c.substring(0,c.indexOf("/vle/"))+"/vle/";b=b.replace(/(src='|src="|href='|href=")(?!http|\/)/gi,"$1"+a);return b}if(!Array.contains){Array.prototype.contains=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return true}}return false}}if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}if(!Array.map){Array.prototype.map=function(a){var c=[];for(var b=0;b<this.length;b++){c.push(a(this[i]))}return c}}if(!Array.compare){Array.prototype.compare=function(b){if(this.length!=b.length){return false}for(var a=0;a<b.length;a++){if(this[a].compare){if(!this[a].compare(b[a])){return false}}if(this[a]!==b[a]){return false}}return true}}function hideElement(a){document.getElementById(a).style.display="none"}function showElement(a){document.getElementById(a).style.display="block"}function findPos(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}return{left:b,top:curtop}}function objSize(c){var a=0;for(var b in c){if(c.hasOwnProperty(b)){a++}}return a}function loadXMLDocFromString(a){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(a);return(xmlDoc)}catch(b){try{parser=new DOMParser();xmlDoc=parser.parseFromString(a,"text/xml");return(xmlDoc)}catch(b){alert(b.message)}}return(null)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/common/helperfunctions.js")}View.prototype.loadProject=function(b,a,c){eventManager.fire("loadingProjectStart");this.project=createProject(createContent(b),a,c,this);eventManager.fire("loadingProjectComplete")};View.prototype.getProject=function(){return this.project};View.prototype.injectVleUrl=function(b){var c=window.location.toString();var a=c.substring(0,c.indexOf("/vle/"))+"/vle/";b=b.replace(/(src='|src="|href='|href=")(?!http|\/)/gi,"$1"+a);return b};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/coreview.js")}View.prototype.utils={};View.prototype.utils.containsApplet=function(a){var b=a.getContentString();if(b.indexOf("<applet")!=-1&&b.indexOf("</applet>")!=-1){return true}else{return false}};View.prototype.utils.insertAppletParam=function(b,a,c){var e=b.getContentString();var d='<param name="'+a+'" value="'+c+'">';if(e.indexOf(d)==-1){b.setContent(e.replace("</applet>",d+"\n</applet>"))}};View.prototype.utils.getContentPath=function(b,a){return a.substring(a.indexOf(b)+b.length,a.length)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/view_utils.js")}function ConnectionManager(a){this.em=a;this.MAX=5;this.queue=[];this.running=0;this.counter=0}ConnectionManager.prototype.request=function(f,d,c,a,e,h,g){var b;if(f=="GET"){b=new GetConnection(d,c,a,e,h,this.em,g)}else{if(f=="POST"){b=new PostConnection(d,c,a,e,h,this.em,g)}else{alert("unknown connection type: "+f+"\nExiting...");return}}this.queue.push(b);this.launchNext()};ConnectionManager.prototype.launchNext=function(){if(this.queue.length>0){if(this.running<this.MAX){this.queue.sort(this.orderByPriority);var a=this.queue.shift();var c=this.generateEventName();var b=function(e,d,f){f.running--;f.launchNext()};this.em.addEvent(c);this.em.subscribe(c,b,this);this.running++;a.startRequest(c)}}};ConnectionManager.prototype.orderByPriority=function(d,c){if(d.priority<c.priority){return -1}if(d.priority>c.priority){return 1}if(d.priority==c.priority){return 0}};ConnectionManager.prototype.generateEventName=function(){while(true){var a="connectionEnded"+this.counter;if(!this.em.isEvent(a)){return a}this.counter++}};function Connection(d,b,a,e,f,c){this.em=c}Connection.prototype.startRequest=function(a){var b=a;var c={success:function(d){this.em.fire(b);if((d.responseText&&!d.responseXML)||(typeof ActiveXObject!="undefined")){d.responseXML=loadXMLString(d.responseText)}if(d.responseText!="undefined"&&d.getResponseHeader["Content-Length"]<10000&&d.responseText.match("login for portal")!=null){if(notificationManager){notificationManager.notify("You have been inactive for too long and have been logged out. Please log back in to continue.",3)}else{alert("You have been inactive for too long and have been logged out. Please log back in to continue.")}vle.logout=true;window.location="/webapp/j_spring_security_logout"}this.handler(d.responseText,d.responseXML,this.hArgs)},failure:function(e){this.em.fire(b);if(this.fHandler){this.fHandler(e,this.hArgs)}else{var d="Connection request failed: transactionId="+e.tId+"  TEXT="+e.statusText;if(notificationManager){notificationManager.notify(d,2)}else{alert(d)}}},scope:this};YAHOO.util.Connect.asyncRequest(this.type,this.url,c,this.params)};GetConnection.prototype=new Connection();GetConnection.prototype.constructor=GetConnection;GetConnection.prototype.parent=Connection.prototype;function GetConnection(d,b,a,e,g,c,f){this.type="GET";this.priority=d;this.em=c;this.url=b;this.cArgs=a,this.handler=e;this.hArgs=g;this.fHandler=f;this.params=null;this.parseConnectionArgs()}GetConnection.prototype.parseConnectionArgs=function(){var b=true;if(this.url.indexOf("?")>-1){b=false}if(this.cArgs){for(var a in this.cArgs){if(b){b=false;this.url+="?"}else{this.url+="&"}this.url+=a+"="+this.cArgs[a]}}};PostConnection.prototype=new Connection();PostConnection.prototype.constructor=PostConnection;PostConnection.prototype.parent=Connection.prototype;function PostConnection(d,b,a,e,g,c,f){this.type="POST";this.priority=d;this.em=c;this.url=b;this.cArgs=a,this.handler=e;this.hArgs=g;this.fHandler=f;this.params=null;this.parseConnectionArgs()}PostConnection.prototype.parseConnectionArgs=function(){var b=true;if(this.cArgs){this.params="";for(var a in this.cArgs){if(b){b=false}else{this.params+="&"}this.params+=a+"="+this.cArgs[a]}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/io/ConnectionManager.js")}var notificationManager={init:function(){window.notificationEventManager=new EventManager();notificationEventManager.addEvent("removeMsg")}(),count:0,debugMode:false,levels:{1:"info",2:"warn",3:"alert",4:"log",5:"fatal"},notify:function(a,c){if(c){var b=this.levels[c];if(this.debugMode){if(window.console){if(!b){b="log"}if(b=="alert"){b="error"}window.console[b]("Notify debug: "+a)}else{this.notifyAlert("Notify debug: "+a)}}else{if(b){if(b=="alert"){this.notifyAlert("Notify message: "+a)}else{if(b=="fatal"){eventManager.fire("fatalError",a)}else{if(b!="log"){if(window.console&&window.console[b]){window.console[b](a)}else{}}}}}}}else{this.notifyAlert("Notify message: "+a)}},notifyAlert:function(b){var a=this.generateUniqueMessageDiv();document.body.appendChild(a);new AlertObject(a,b)},generateUniqueMessageDiv:function(){var b="superSecretMessageDiv_"+this.count;if(document.getElementById(b)){this.count++;return generateUniqueMessageDiv()}else{var a=createElement(document,"div",{id:b,"class":"messages",style:"display:none;"});this.count++;return a}}};function AlertObject(a,b){this.MSG_TIME=3000;this.el=a;this.msg=b;notificationEventManager.subscribe("removeMsg",this.removeMsg,this);a.style.display="block";a.innerHTML=b;a.style.left=(document.body.clientWidth/2)-150;setTimeout('notificationEventManager.fire("removeMsg","'+a.id+'")',this.MSG_TIME)}AlertObject.prototype.removeMsg=function(b,a,c){if(a[0]==c.el.id){document.body.removeChild(c.el);c=null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/NotificationManager.js")}function createContent(a){return function(d){var d=d;var n;var f;var p;var l=false;var k=30000;var e;var g=function(r){if(typeof eventManager!="undefined"){eventManager.fire("alert",r)}else{alert(r)}};var j=function(r){if(l){return q(r)}else{return c(r)}};var q=function(r){if(r=="xml"){return f}else{if(r=="json"){return p}else{if(r=="string"){return n}else{return null}}}};var c=function(r){e=setTimeout('eventManager.fire("contentTimedOut","'+d+'")',k);var s=new XMLHttpRequest();s.open("GET",d,false);s.send(null);clearTimeout(e);if(s.responseText||s.responseXML){if(s.responseXML){f=s.responseXML}else{b(s.responseText)}if(s.responseText){n=s.responseText}else{if(window.ActiveXObject){n=s.responseXML.xml}else{n=(new XMLSerializer()).serializeToString(s.responseXML)}}try{p=yui.JSON.parse(n)}catch(t){p=undefined}l=true;return q(r)}else{g("Error retrieving content for url: "+d);return null}};var h=function(r){if(typeof r=="string"){n=r;b(n);try{p=yui.JSON.parse(n)}catch(s){p=undefined}}else{if(window.ActiveXObject){if(r.xml){f=r;n=r.xml;try{p=yui.JSON.parse(n)}catch(s){p=undefined}}else{p=r;try{n=yui.JSON.stringify(p);b(n)}catch(s){p=undefined}}}else{if(r instanceof Document){f=r;n=(new XMLSerializer()).serializeToString(f);try{p=yui.JSON.parse(n)}catch(s){p=undefined}}else{p=r;try{n=yui.JSON.stringify(p);b(n)}catch(s){n=undefined}}}}l=true};var m=function(r){if(window.ActiveXObject){if(r.xml.length==0){return false}else{return true}}else{return r.getElementsByTagName("parsererror").length<1}};var b=function(r){if(document.implementation&&document.implementation.createDocument){f=new DOMParser().parseFromString(r,"text/xml")}else{if(window.ActiveXObject){f=new ActiveXObject("Microsoft.XMLDOM");f.loadXML(r)}}if(!m(f)){f=undefined}};var o=function(r){return d.substring(d.indexOf(r)+r.length+1,d.length)};return{getContentXML:function(){return j("xml")},getContentJSON:function(){return j("json")},getContentString:function(){return j("string")},setContent:function(r){h(r)},retrieveContent:function(){j("string")},getContentUrl:function(){return d},getFilename:function(r){return o(r)}}}(a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/content/content.js")}var SELF_RENDERING_NODES=["BlueJNode","DrawNode","FlashNode","HtmlNode","MySystemNode","SVGDrawNode"];var HTML_MAP={BrainstormNode:{server:"node/brainstorm/brainfull.html",serverless:"node/brainstorm/brainlite.html"},ChallengeQuestionNode:"node/challengequestion/challengequestion.html",DataGraphNode:"node/datagraph/datagraph.html",FillinNode:"node/fillin/fillin.html",GlueNode:"node/glue/glue.html",MatchSequenceNode:"node/matchsequence/matchsequence.html",MultipleChoiceNode:"node/multiplechoice/multiplechoice.html",NoteNode:"node/openresponse/note.html",OpenResponseNode:"node/openresponse/openresponse.html",OutsideUrlNode:"node/outsideurl/outsideurl.html",TickerNode:"node/ticker/ticker.html"};function removeClassFromElement(a,b){YUI().use("node",function(d){var c=d.get("#"+a);c.removeClass(b)})}function addClassToElement(a,b){YUI().use("node",function(d){var c=d.get("#"+a);c.addClass(b)})}function hasClass(a,b){var c=document.getElementById(a).getAttribute("class");return c!=null&&(c.indexOf(b)!=-1)}function clearFeedbackDiv(){document.getElementById("feedbackDiv").innerHTML=""}function clearResponseBox(){document.getElementById("responseBox").value=""}function setButtonVisible(c,b){var a=document.getElementById(c);if(b){a.style.visibility="visible"}else{a.style.visibility="hidden"}}function setCheckAnswerButtonEnabled(a){var b=document.getElementById("checkAnswerButton");if(a){b.removeAttribute("disabled")}else{b.setAttribute("disabled","true")}}function setResponseBoxEnabled(b){var a=document.getElementById("responseBox");if(b){a.removeAttribute("disabled")}else{a.setAttribute("disabled","disabled")}}function displayNumberAttempts(f,d,b){var c=b.length+1;var a="";if(c==1){a="1st"}else{if(c==2){a="2nd"}else{if(c==3){a="3rd"}else{a=c+"th"}}}var e=document.getElementById("numberAttemptsDiv");var g=f+" "+a+" "+d+".";e.innerHTML=g}function displayLastAttempt(c){if(c.length>0){var e=c[c.length-1].timestamp;var g=e.getMonth()+1;var a=e.getHours();var d=e.getMinutes();var h=e.getSeconds();var b=g+"/"+e.getDate()+"/"+e.getFullYear()+" at "+a+":"+d+":"+h;var f=document.getElementById("lastAttemptDiv");f.innerHTML=" Your last attempt was on "+b}}function makeHtmlSafe(a){if(a){a=a.replace(/\&/g,"&amp;");a=a.replace(/\"/g,"&quot;");return a}else{return""}}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/common/nodehelpers.js")}function createProject(c,b,d,a){return function(u,x,M,k){var u=u;var Z=x;var K=M;var E=[];var P=[];var W;var ae;var L;var q;var p;var k=k;var v=[];var D=function(){var al=u.getContentJSON().nodes;for(var ak=0;ak<al.length;ak++){var ai=al[ak];var aj=NodeFactory.createNode(ai,k);if(aj==null){k.notificationManager.notify("null was returned from project factory for node: "+ai.identifier+" \nSkipping node.",2)}else{if(!ai.identifier||ai.identifier==""){k.notificationManager.notify("No identifier for node in project file.",3)}else{aj.id=ai.identifier;if(ac(aj.id)){k.notificationManager.notify("Duplicate node id: "+aj.id+" found in project",3)}}if(!ai.title||ai.title==""){k.notificationManager.notify("No title attribute for node with id: "+aj.id,2)}else{aj.title=ai.title}if(!ai["class"]||ai["class"]==""){k.notificationManager.notify("No class attribute for node with id: "+aj.id,2)}else{aj.className=ai["class"]}if(!ai.ref||ai.ref==""){k.notificationManager.notify("No filename specified for node with id: "+aj.id+" in the project file",2)}else{aj.content=createContent(y(ai.ref))}E.push(aj);if(!K){aj.content.retrieveContent()}if(aj.type=="NoteNode"){aj.renderFrame()}aj.prevWorkNodeIds=ai.previousWorkNodeIds;eventManager.subscribe("pageRenderComplete",aj.pageRenderComplete,aj);eventManager.subscribe("contentRenderComplete",aj.contentRenderComplete,aj);eventManager.subscribe("scriptsLoaded",aj.loadContentAfterScriptsLoad,aj)}}};var S=function(){var an=u.getContentJSON();var ao=an.sequences;for(var am=0;am<ao.length;am++){var aj=NodeFactory.createNode(ao[am],k);aj.json=ao[am];if(ac(aj.id)){k.notificationManager.notify("Duplicate sequence id: "+aj.id+" found in project.",3)}P.push(aj)}if(an.startPoint){var ak=ab(an.startPoint)}else{k.notificationManager.notify("No starting sequence specified for this project",3)}if(ak){for(var al=0;al<P.length;al++){var ai=[];if(ag(P[al].id,ai,"file")){r(P[al].id)}else{k.notificationManager.notify("Infinite loop discovered in sequences, check sequence references",3);return null}}p=ak}};var ac=function(ai){return ab(ai)};var ab=function(ak){for(var ai=0;ai<E.length;ai++){if(E[ai].id==ak){return E[ai]}}for(var aj=0;aj<P.length;aj++){if(P[aj].id==ak){return P[aj]}}return null};var A=function(ai){if(ai){var al=ai.split(".");var ak=p;var am;for(var aj=0;aj<al.length;aj++){am=ak.children[al[aj]];if(!am){return null}else{if(aj==al.length-1){return am}else{ak=am}}}}else{return null}};var y=function(ai){if(Z!=null){if(Z.lastIndexOf("\\")!=-1){return Z+"\\"+ai}else{return Z+"/"+ai}}return ai};var ag=function(am,aj,al){if(aj.indexOf(am)==-1){var ak=n(am,al);if(ak.length>0){aj.push(am);for(var ai=0;ai<ak.length;ai++){if(!ag(ak[ai],aj)){return false}}aj.pop(am);return true}else{return true}}else{return false}};var r=function(am){var al=ab(am);var ak=al.json.refs;for(var ai=0;ai<ak.length;ai++){var aj=ab(ak[ai]);if(!aj){k.notificationManager.notify("Node reference "+ak[ai]+" exists in sequence node "+am+" but the node has not been defined and does not exist.",2)}else{al.addChildNode(aj)}}};var n=function(ao,an){var am=ab(ao);if(!am){k.notificationManager.notify("Sequence with id: "+ao+" is referenced but this sequence does not exist.",2);return[]}var ai=[];if(an=="file"){var aj=am.json.refs;for(var al=0;al<aj.length;al++){ai.push(aj[al])}}else{var ak=am.children;for(var al=0;al<ak.length;al++){if(ak[al].type=="sequence"){ai.push(ak[al].id)}}}return ai};var g=function(aj){for(var ak=0;ak<E.length;ak++){if(E[ak].title==aj){return E[ak]}}for(var ai=0;ai<P.length;ai++){if(P[ai].title==aj){return P[ai]}}return null};var Y=function(ai){if(ai){if(ai.type=="sequence"){for(var ak=0;ak<ai.children.length;ak++){var aj=Y(ai.children[ak]);if(aj!=null){return aj}}}else{return ai.id}}else{k.notificationManager.notify("Cannot get start node! Possibly no start sequence is specified or invalid node exists in project.",2)}};var o=function(ak){for(var ai=0;ai<P.length;ai++){for(var aj=0;aj<P[ai].children.length;aj++){if(P[ai].children[aj].id==ak){P[ai].children.splice(aj,1)}}}};var f=function(ai,aj){if(ai.type=="sequence"){for(var al=0;al<ai.children.length;al++){var ak=f(ai.children[al],aj+"."+al);if(ak!=undefined&&ak!=null){return ak}}}else{return aj}};var ah=function(ai,ak,am){if(ai.id==am){return ak}else{if(ai.type=="sequence"){for(var aj=0;aj<ai.children.length;aj++){var al=ah(ai.children[aj],ak+"."+aj,am);if(al){return al}}}}};var V=function(){s();ad();G();O();h();T()};var s=function(){var ai="Sequences defined by Id: ";for(var aj=0;aj<P.length;aj++){if(aj==P.length-1){ai+=" "+P[aj].id}else{ai+=" "+P[aj].id+","}}k.notificationManager.notify(ai,1)};var ad=function(){var aj="Nodes defined by Id: ";for(var ai=0;ai<E.length;ai++){if(ai==E.length-1){aj+=" "+E[ai].id}else{aj+=" "+E[ai].id+","}}k.notificationManager.notify(aj,1)};var G=function(){var ak="Sequence(s) with id(s): ";var aj=false;for(var ai=0;ai<P.length;ai++){if(!R(P[ai].id)&&P[ai].id!=p.id){aj=true;ak+=" "+P[ai].id}}if(aj){k.notificationManager.notify(ak+" is/are never used in this project",1)}};var O=function(){var ak="Node(s) with id(s): ";var aj=false;for(var ai=0;ai<E.length;ai++){if(!R(E[ai].id)){aj=true;ak+=" "+E[ai].id}}if(aj){k.notificationManager.notify(ak+" is/are never used in this project",1)}};var h=function(){var al="Duplicate sequence Id(s) are: ";var ak=false;for(var am=0;am<P.length;am++){var aj=0;for(var ai=0;ai<P.length;ai++){if(P[am].id==P[ai].id){aj++}}if(aj>1){ak=true;al+=P[am].id+" "}}if(ak){k.notificationManager.notify(al,1)}};var T=function(){var al="Duplicate node Id(s) are: ";var ak=false;for(var am=0;am<E.length;am++){var aj=0;for(var ai=0;ai<E.length;ai++){if(E[am].id==E[ai].id){aj++}}if(aj>1){ak=true;al+=E[am].id+" "}}if(ak){k.notificationManager.notify(al,1)}};var R=function(ak){for(var aj=0;aj<P.length;aj++){for(var ai=0;ai<P[aj].children.length;ai++){if(P[aj].children[ai].id==ak){return true}}}return false};var I=function(ak){var al=[];if(ak=="node"){var aj=E}else{var aj=P}for(var ai=0;ai<aj.length;ai++){if(!R(aj[ai].id)&&!(p==aj[ai])){al.push(aj[ai])}}return al};var Q=function(aj){var al="";for(var ai=0;ai<E.length;ai++){var am=E[ai];var an=am.id;var ak=am.type;if(aj.indexOf(ak)==-1){if(al!=""){al+=":"}al+=an}}return al};var F=function(ak){var aj="";for(var ai=0;ai<E.length;ai++){var am=E[ai];var al=am.type;if(ak.indexOf(al)==-1){if(aj!=""){aj+=":"}aj+=al}}return aj};var J=function(al,an){var am="";if(al.children.length>0){for(var ak=0;ak<al.children.length;ak++){am+=J(al.children[ak],an)}}else{am+='<div id="showallStep"><a href="#" onclick="view.renderNode(\''+X(al.id)+"'); YAHOO.example.container.showallwork.hide();\">"+al.title+'</a><div class="type">'+al.getType(true)+"</div></div>";if(an){am+='<div class="showallStatus">Status: '+al.getShowAllWorkHtml(k)+"</div>";am+="<div><table id='teacherTable'>";var aj=k.annotations.getAnnotationsByNodeId(al.id);if(aj.length>0){for(var ak=0;ak<aj.length;ak++){var ai=aj[ak];if(ai.type=="comment"){am+="<tr><td class='teachermsg1'>TEACHER FEEDBACK: "+ai.value+"</td></tr>"}if(ai.type=="score"){am+="<tr><td class='teachermsg2'>TEACHER SCORE: "+ai.value+"</td></tr>"}}}else{am+="<td class='teachermsg3'>Grading: Your Teacher hasn't graded this step yet.<td>"}am+="</table></div>"}else{am+=al.getShowAllWorkHtml(k)}am+=""}return am};var t=function(ak){for(var aj=0;aj<P.length;aj++){if(P[aj].id==ak){P.splice(aj,1);o(ak);return}}for(var ai=0;ai<E.length;ai++){if(E[ai].id==ak){E.splice(ai,1);o(ak);return}}};var m=function(ak,ai){var aj=ab(ak);aj.children.splice(ai,1)};var H=function(am,ak,aj){var al=ab(am);var an=ab(ak);an.children.splice(aj,0,al);var ai=[];if(!ag(ak,ai)){k.notificationManager.notify("This would cause an infinite loop! Undoing changes...",3);an.children.splice(aj,1)}};var aa=function(){var ak={autoStep:W,stepLevelNum:ae,stepTerm:q,title:L,nodes:[],sequences:[],startPoint:""};if(p){ak.startPoint=p.id}for(var ai=0;ai<E.length;ai++){ak.nodes.push(E[ai].nodeJSON(Z))}for(var aj=0;aj<P.length;aj++){ak.sequences.push(P[aj].nodeJSON())}return ak};var U=function(){for(var aj=0;aj<p.children.length;aj++){var ai=f(p.children[aj],aj);if(ai!=undefined&&ai!=null){return ai}}};var X=function(ak){for(var aj=0;aj<p.children.length;aj++){var ai=ah(p.children[aj],aj,ak);if(ai!=undefined&&ai!=null){return ai}}};var C=function(){var ai=u.getContentUrl();return ai.substring(ai.indexOf(Z)+Z.length+1,ai.length)};var B=function(aj){var ai=ab(aj);if(ai){return ai.content.getFilename(Z)}else{return null}};var af=function(aj){var ai=1;while(true){var ak=aj+" "+ai;if(!g(ak)){return ak}ai++}};var w=function(ak){var aj=1;while(true){var ai=ak+"_"+aj;if((!ab(ai))&&(v.indexOf(ai)==-1)){return ai}aj++}};var j=function(ak,ai){var an=function(at,ar,ax){var aw=ar[0];var ap=ar[1];var av=ax;var au=av.queue.shift();if(au.id!=aw){av.view.notificationManager("Copied node id and node id from queue do match, error when copying.",3)}if(!ap){av.msg+=" Failed copy of "+aw}else{av.msg+=" Copied "+aw+" to "+ap;av.view.getProject().addCopyId(ap);av.copiedIds.push(ap)}if(av.queue.length>0){var aq=av.queue[0];aq.node.copy(aq.eventName)}else{av.view.eventManager.fire(av.eventName,[av.copiedIds,av.msg])}};var al={view:k,queue:[],eventName:ai,msg:"",copiedIds:[]};for(var am=0;am<ak.length;am++){var aj=z();al.queue.push({id:ak[am],node:ab(ak[am]),eventName:aj});k.eventManager.addEvent(aj);k.eventManager.subscribe(aj,an,al)}if(al.queue.length>0){var ao=al.queue[0];ao.node.copy(ao.eventName)}else{k.eventManager.fire(ai,[null,null])}};var z=function(){return k.eventManager.generateUniqueEventName("copy_")};var N=function(ai){v.push(ai)};var l=function(ao){var an=ab(ao);var am=an.content;var al=am.getContentJSON();var ai=null;if(al.assessmentItem!=null){var ak=al.assessmentItem;var aj=ak.interaction;ai=aj.prompt}return ai};var e=u.getContentJSON();if(e){W=e.autoStep;ae=e.stepLevelNum;q=e.stepTerm;L=e.title;D();S();V()}else{k.notificationManager.notify("Unable to parse project content, check project.json file. Unable to continue.",5)}return{useAutoStep:function(){return W},setAutoStep:function(ai){W=ai},useStepLevelNumbering:function(){return ae},setStepLevelNumbering:function(ai){ae=ai},getStepTerm:function(){return q},setStepTerm:function(ai){q=ai},getTitle:function(){return L},setTitle:function(ai){L=ai},getNodeById:function(ai){return ab(ai)},validateNoLoops:function(ak,ai,aj){return ag(ak,ai,aj)},getNodeByTitle:function(ai){return g(ai)},getNodeByPosition:function(ai){return A(ai)},getNodeIds:function(ai){return Q(ai)},getNodeTypes:function(ai){return F(ai)},getShowAllWorkHtml:function(ai,aj){return J(ai,aj)},getStartNodeId:function(){return Y(p)},removeNodeById:function(ai){t(ai)},removeReferenceFromSequence:function(aj,ai){m(aj,ai)},addNodeToSequence:function(ak,aj,ai){H(ak,aj,ai)},copyNodes:function(aj,ai){j(aj,ai)},getStartNodePosition:function(){return U()},getPositionById:function(ai){return X(ai)},getContentBase:function(){return Z},getProjectFilename:function(){return C()},getUrl:function(){return u.getContentUrl()},getLeafNodes:function(){return E},getSequenceNodes:function(){return P},getRootNode:function(){return p},getUnattached:function(ai){return I(ai)},getNodeFilename:function(ai){return B(ai)},generateUniqueTitle:function(ai){return af(ai)},generateUniqueId:function(ai){return w(ai)},generateUniqueCopyEventName:function(){return z()},addCopyId:function(ai){N(ai)},projectJSON:function(){return aa()},makeUrl:function(ai){return y(ai)},getNodePromptByNodeId:function(ai){return l(ai)}}}(c,b,d,a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/project/Project.js")}function NodeFactory(){}NodeFactory.createNode=function(c,b){var d=new Array("node","HtmlNode","MultipleChoiceNode","sequence","FillinNode","MatchSequenceNode","NoteNode","JournalEntryNode","OutsideUrlNode","BrainstormNode","GlueNode","OpenResponseNode","FlashNode","BlueJNode","DataGraphNode","DrawNode","MySystemNode","SVGDrawNode");if(c.type){var e=c.type}else{var e=null}if(d.indexOf(e)>-1){if(e=="HtmlNode"){return new HtmlNode("HtmlNode",b)}else{if(e=="MultipleChoiceNode"){return new MultipleChoiceNode("MultipleChoiceNode",b)}else{if(e=="FillinNode"){return new FillinNode("FillinNode",b)}else{if(e=="NoteNode"){return new NoteNode("NoteNode",b)}else{if(e=="JournalEntryNode"){return new JournalEntryNode("JournalEntryNode",b)}else{if(e=="MatchSequenceNode"){return new MatchSequenceNode("MatchSequenceNode",b)}else{if(e=="OutsideUrlNode"){return new OutsideUrlNode("OutsideUrlNode",b)}else{if(e=="BrainstormNode"){return new BrainstormNode("BrainstormNode",b)}else{if(e=="FlashNode"){return new FlashNode("FlashNode",b)}else{if(e=="GlueNode"){return new GlueNode("GlueNode",b)}else{if(e=="OpenResponseNode"){return new OpenResponseNode("OpenResponseNode",b)}else{if(e=="BlueJNode"){return new BlueJNode("BlueJNode",b)}else{if(e=="DataGraphNode"){return new DataGraphNode("DataGraphNode",b)}else{if(e=="DrawNode"){return new DrawNode("DrawNode",b)}else{if(e=="MySystemNode"){return new MySystemNode("MySystemNode",b)}else{if(e=="SVGDrawNode"){return new SVGDrawNode("SVGDrawNode",b)}else{if(e=="sequence"){var a=new Node("sequence",b);a.id=c.identifier;a.title=c.title;return a}else{return new Node(null,b)}}}}}}}}}}}}}}}}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/nodefactory.js")}function Node(b,a){this.id;this.parent;this.children=[];this.type=b;this.title;this.className;this.content;this.contentPanel;this.baseHtmlContent;this.prevWorkNodeIds=[];this.extraData;this.view=a}Node.prototype.getNodeId=function(){return this.id};Node.prototype.getTitle=function(){if(this.title!=null){return this.title}return this.id};Node.prototype.getContent=function(){return this.content};Node.prototype.setContent=function(a){this.content=a};Node.prototype.getType=function(a){if(this.type){if(!a){return this.type}else{if(this.type.lastIndexOf("Node")>-1){return this.type.substring(0,this.type.lastIndexOf("Node"))}else{return this.type}}}else{return""}};Node.prototype.addChildNode=function(a){this.children.push(a);a.parent=this};Node.prototype.getNodeById=function(c){if(this.id==c){return this}else{if(this.children.length==0){return null}else{var a=false;for(var b=0;b<this.children.length;b++){a=a||this.children[b].getNodeById(c)}return a}}};Node.prototype.alertNodeInfo=function(a){notificationManager.notify("node.js, "+a+"\nthis.id:"+this.id+"\nthis.title:"+this.title,3)};Node.prototype.render=function(c,a){this.studentWork=a;this.contentPanel=c;if(c){this.contentPanel=window.frames[c.name]}else{if(c==null){if(this.type=="NoteNode"){this.contentPanel=window.frames["noteiframe"+this.id];document["notePanel_"+this.id].cfg.setProperty("visible",true)}else{this.contentPanel=window.frames.ifrm}}}if(SELF_RENDERING_NODES.indexOf(this.type)==-1){if(this.contentPanel.nodeId!=this.id){var b=HTML_MAP[this.type];if(this.type=="BrainstormNode"){if(this.isUsingServer()){b=b.server}else{b=b.serverless}}this.baseHtmlContent=createContent(b);this.contentPanel.nodeId=this.id;this.contentPanel.document.open();this.contentPanel.document.write(this.injectBaseRef(this.view.injectVleUrl(this.baseHtmlContent.getContentString())));this.contentPanel.document.close()}else{this.contentPanel.loadContentAfterScriptsLoad(this)}}else{if(!this.baseHtmlContent){this.baseHtmlContent=createContent(this.view.getProject().makeUrl(this.content.getContentJSON().src));if(this.type=="MySystemNode"){this.baseHtmlContent.setContent(this.updateJSONContentPath(this.view.getConfig().getConfigParam("getContentBaseUrl"),this.baseHtmlContent.getContentString()))}}if(this.handlePreviousOutsideLink(this)){return}this.contentPanel.document.open();this.contentPanel.document.write(this.injectBaseRef(this.baseHtmlContent.getContentString()));this.contentPanel.document.close();this.view.eventManager.fire("contentRenderComplete",this.id)}if(this.contentPanel!=null){this.contentPanel.eventManager=eventManager;this.contentPanel.nodeId=this.id;this.contentPanel.scriptloader=this.view.scriptloader;this.contentPanel.yui=yui;if(this.type=="MySystemNode"||this.type=="SVGDrawNode"){this.contentPanel.vle=this.view}}if(this.content.getContentJSON().blueJProjectPath&&this.content.getContentJSON().blueJProjectPath!=""&&this.view.postCurrentStep){this.extraData=this.content.getContentJSON.blueJProjectPath;this.view.postCurrentStep(this)}};Node.prototype.pageRenderComplete=function(b,a,c){if(c.id==a[0]){c.contentPanel.loadContent(c);c.insertPreviousWorkIntoPage(c.contentPanel.document)}};Node.prototype.loadContentAfterScriptsLoad=function(b,a,c){if(c.id==a[0]){c.contentPanel.loadContentAfterScriptsLoad(c)}};Node.prototype.contentRenderComplete=function(b,a,c){};Node.prototype.onExit=function(){};Node.prototype.getView=function(){if(this.isSequence()){if(this.json.view==null){return"normal"}else{return this.json.view}}else{return null}};Node.prototype.isSequence=function(){return this.type=="sequence"};Node.prototype.nodeJSON=function(b){if(this.type=="sequence"){var d={type:"sequence",identifier:makeHtmlSafe(this.id),title:makeHtmlSafe(this.title),view:this.getView(),refs:[]};for(var a=0;a<this.children.length;a++){d.refs.push(this.children[a].id)}return d}else{var c={type:this.type,identifier:makeHtmlSafe(this.id),title:makeHtmlSafe(this.title),ref:this.content.getFilename(b),previousWorkNodeIds:this.prevWorkNodeIds};c["class"]=this.className;return c}};Node.prototype.getLatestWork=function(b,a){return null};Node.prototype.translateStudentWork=function(a){return a};Node.prototype.injectBaseRef=function(c){if(c.search(/<base/i)>-1){return c}else{var b=this.view.getConfig().getConfigParam("getContentBaseUrl");var d="<base href='"+b+"'/>";var a=c.replace("<head>","<head>"+d);return a}};Node.prototype.isLeafNode=function(){return this.type!="sequence"};Node.prototype.getDataXML=function(d){var c="";for(var a=0;a<d.length;a++){var b=d[a];c+="<state>"+b.getDataXML()+"</state>"}return c};Node.prototype.parseDataXML=function(b){var a=b.getElementsByTagName("type")[0].textContent;var d=b.getElementsByTagName("id")[0].textContent;var c=NodeFactory.createNode(a);c.id=d;return c};Node.prototype.handlePreviousOutsideLink=function(c,a){if(!window.frames.ifrm){return false}else{try{window.frames.ifrm.host}catch(b){history.back();setTimeout(function(){c.render(a)},500);return true}return false}};Node.prototype.insertPreviousWorkIntoPage=function(e){if(this.prevWorkNodeIds.length>0){var c="";for(var f=0;f<this.prevWorkNodeIds.length;f++){var b=vle.getLatestWorkByNodeId(this.prevWorkNodeIds[f]);if(b){var d=vle.project.getNodeById(this.prevWorkNodeIds[f]);c+="Remember, your response to step "+d.title+" was: "+b.getStudentWork()+"</br></br>"}}var a=e.getElementById("previousWorkDiv");if(a){a.innerHTML=c}}};Node.prototype.copy=function(f,h){var k=function(n,l,m){m[0].view.eventManager.fire(m[1],[m[0].id,n])};var j=function(l,m){m[0].view.eventManager.fire(m[1],m[0].id)};if(this.type!="sequence"){var h=this.view.getProject();var d=this.content.getContentString();if(this.type=="HtmlNode"||this.type=="DrawNode"||this.type=="MySystemNode"){var c=this.content.getContentJSON().src}else{var c=""}if(this.type=="MySystemNode"){this.view.notificationManager.notify("My System Nodes cannot be copied, ignoring",3);this.view.eventManager.fire(f,[this.id,null]);return}this.view.connectionManager.request("POST",1,"filemanager.html",{command:"copyNode",param1:this.view.utils.getContentPath(this.view.authoringBaseUrl,h.getUrl()),param2:this.content.getContentString(),param3:this.type,param4:h.generateUniqueTitle(this.title),param5:this.className,param6:c},k,[this,f],j)}else{var a=function(s,r,o){if(r[0]){var p=r[0]}else{var p=[]}if(r[1]){var l=r[1]}else{var l=""}var m=o[0];var q=o[1];var t=m.view.getProject();var n={type:"sequence",identifier:t.generateUniqueId(m.id),title:t.generateUniqueTitle(m.title),view:m.getView(),refs:p};m.view.connectionManager.request("POST",1,"filemanager.html",{command:"createSequenceFromJSON",param1:m.view.utils.getContentPath(m.view.authoringBaseUrl,m.view.getProject().getUrl()),param2:yui.JSON.stringify(n)},k,[m,q],j)};var e=this.view.project.generateUniqueCopyEventName();this.view.eventManager.addEvent(e);this.view.eventManager.subscribe(e,a,[this,f]);var b=[];for(var g=0;g<this.children.length;g++){b.push(this.children[g].id)}this.view.getProject().copyNodes(b,e)}};Node.prototype.getShowAllWorkHtml=function(h){var d="";var g=h.state.getNodeVisitsByNodeId(this.id);if(g.length>0){var k=[];var b=g[g.length-1];for(var c=0;c<g.length;c++){var e=g[c];for(var a=0;a<e.nodeStates.length;a++){k.push(e.nodeStates[a])}}var f=k[k.length-1];d+="Last visited on ";if(b!=null){d+=""+new Date(parseInt(b.visitStartTime)).toLocaleString()}if(f!=null){d+='<div class="showallLatest">Latest Work:</div><div class="showallLatestWork">'+this.translateStudentWork(f.getStudentWork())+"</div>"}}else{d+="Step not visited yet."}for(var c=0;c<this.children.length;c++){d+=this.children[c].getShowAllWorkHtml()}return d};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/Node.js")}OpenResponseNode.prototype=new Node();OpenResponseNode.prototype.constructor=OpenResponseNode;OpenResponseNode.prototype.parent=Node.prototype;function OpenResponseNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}OpenResponseNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(e,c,d){d.contentPanel.document.open();d.contentPanel.document.write(d.injectBaseRef(injectVleUrl(e)));d.contentPanel.document.close();if(d.contentPanel.name!="ifrm"){d.contentPanel.renderComplete=function(){d.load()}}d.contentPanel.renderLoadComplete=function(){d.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/openresponse/openresponse.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(d,c,e){e[0].render(e[1])},[this,b])}};OpenResponseNode.prototype.load=function(){var b=[];for(var d=0;d<vle.state.visitedNodes.length;d++){var a=vle.state.visitedNodes[d];if(a.getNodeId()==this.id){for(var c=0;c<a.nodeStates.length;c++){b.push(a.nodeStates[c])}}}if(this.contentPanel&&this.contentPanel.loadContent){this.contentPanel.loadContent([this.element,vle,b])}if(this.contentPanel){this.insertPreviousWorkIntoPage(this.contentPanel.document)}};OpenResponseNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading){this.retrieveFile()}if(a){this.liteState=a}var b=function(f,d,e){e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();e.contentPanel.renderComplete=function(){e.loadLite()}};var c={success:function(d){b(d.responseText,d.responseXML,d.argument)},failure:function(d){this.view.notificationManager.notify("failed to retrieve file",3)},argument:this};YAHOO.util.Connect.asyncRequest("GET","node/openresponse/openresponselite.html",c,null)};OpenResponseNode.prototype.loadLite=function(){if(this.contentPanel&&this.contentPanel.loadContent){this.contentPanel.loadContent([this.element,this,vle,this.liteState])}};OpenResponseNode.prototype.parseDataXML=function(d){var c=d.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var e=c[a];b.push(OPENRESPONSESTATE.prototype.parseDataXML(e))}return b};OpenResponseNode.prototype.getDataXML=function(a){return OpenResponseNode.prototype.parent.getDataXML(a)};OpenResponseNode.prototype.parseDataJSONObj=function(a){return OPENRESPONSESTATE.prototype.parseDataJSONObj(a)};OpenResponseNode.prototype.translateStudentWork=function(a){return a};OpenResponseNode.prototype.parseStateXML=function(a){return OPENRESPONSESTATE.prototype.parseDataXML(a)};OpenResponseNode.prototype.onExit=function(){if(this.contentPanel&&this.contentPanel.save){this.contentPanel.save()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/OpenResponseNode.js")}HtmlNode.prototype=new Node();HtmlNode.prototype.constructor=HtmlNode;HtmlNode.prototype.parent=Node.prototype;function HtmlNode(b,a){this.view=a;this.type=b;this.audios=[];this.contentBase;this.audioSupported=true}HtmlNode.prototype.setHtmlContent=function(a){this.content.setContent(a)};HtmlNode.prototype.load=function(){this.prepareAudio();if(vle.audioManager!=null){vle.audioManager.setCurrentNode(this)}};HtmlNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading){this.retrieveFile()}};HtmlNode.prototype.loadLite=function(a){if(!this.elementText){if(!this.htmlContent){this.elementText=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;this.htmlContent=this.element.getElementsByTagName("content")[0].firstChild.nodeValue}else{this.elementText=this.htmlContent}}window.frames.ifrm.frames[a].document.open();window.frames.ifrm.frames[a].document.write(this.injectBaseRef(this.elementText));window.frames.ifrm.frames[a].document.close();window.frames.ifrm.frames[a].getAnswered=function(){return true};window.frames.ifrm.frames[a].checkAnswerLite=function(){return"visited html: "+this.id}};HtmlNode.prototype.getDataXML=function(a){return HtmlNode.prototype.parent.getDataXML(a)};HtmlNode.prototype.parseDataXML=function(d){var c=d.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var e=c[a];b.push(HTMLSTATE.prototype.parseDataXML(e))}return b};HtmlNode.prototype.parseDataJSONObj=function(a){return HTMLSTATE.prototype.parseDataJSONObj(a)};HtmlNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<content><![CDATA[";a+=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;a+="]]></content>";a+=this.exportNodeFooter();return a};HtmlNode.prototype.doNothing=function(){window.frames.ifrm.document.open();window.frames.ifrm.document.write(this.injectBaseRef(this.elementText));window.frames.ifrm.document.close()};HtmlNode.prototype.onExit=function(){if(this.contentPanel){try{if(this.contentPanel.onExit){try{this.contentPanel.onExit()}catch(a){}}}catch(a){history.back()}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/HtmlNode.js")}DrawNode.prototype=new HtmlNode();DrawNode.prototype.constructor=DrawNode;DrawNode.prototype.parent=HtmlNode.prototype;function DrawNode(b,a){this.view=a;this.type=b;this.content=null;this.audios=[];this.contentBase;this.audioSupported=true}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/DrawNode.js")}MySystemNode.prototype=new HtmlNode();MySystemNode.prototype.constructor=MySystemNode;MySystemNode.prototype.parent=HtmlNode.prototype;function MySystemNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[];this.contentBase;this.audioSupported=true}MySystemNode.prototype.updateJSONContentPath=function(b,c){this.filename="modules.json";var a=new RegExp(this.filename);var c=c.replace(a,b+"/"+this.filename);return c};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MySystemNode.js")}MatchSequenceNode.prototype=new Node();MatchSequenceNode.prototype.constructor=MatchSequenceNode;MatchSequenceNode.prototype.parent=Node.prototype;function MatchSequenceNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}MatchSequenceNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(e,d,c){c.contentPanel.document.open();c.contentPanel.document.write(c.injectBaseRef(injectVleUrl(e)));c.contentPanel.document.close();if(c.contentPanel.name!="ifrm"){c.contentPanel.renderComplete=function(){c.load()}}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/matchsequence/matchsequence.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(d,c,e){e[0].render(e[1])},[this,b])}};MatchSequenceNode.prototype.load=function(){var a=this.element.getElementsByTagName("customCheck");if(a[0]!=null){a=a[0].firstChild.nodeValue}else{a=null}this.contentPanel.loadContent(this.getXMLString(),a);this.insertPreviousWorkIntoPage(this.contentPanel.document)};MatchSequenceNode.prototype.getDataXML=function(a){return MatchSequenceNode.prototype.parent.getDataXML(a)};MatchSequenceNode.prototype.parseDataXML=function(e){var c=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var f=c[a];var d=MSSTATE.prototype.parseDataXML(f);if(d!=null){b.push(d)}}return b};MatchSequenceNode.prototype.onExit=function(){};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MatchSequenceNode.js")}FillinNode.prototype=new Node();FillinNode.prototype.constructor=FillinNode;FillinNode.prototype.parent=Node.prototype;function FillinNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}FillinNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(e,c,d){if(d.filename!=null&&vle.project.lazyLoading){d.retrieveFile()}d.contentPanel.document.open();d.contentPanel.document.write(d.injectBaseRef(injectVleUrl(e)));d.contentPanel.document.close();if(d.contentPanel.name!="ifrm"){d.contentPanel.renderComplete=function(){d.load()}}};if(this.handlePreviousOutsideLink(this)){return}if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/fillin/fillin.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(d,c,e){e[0].render(e[1])},[this,b])}};FillinNode.prototype.load=function(){var a=function(d,b,c){if(!c){c=d}c.contentPanel.loadContent([c.element,vle]);c.insertPreviousWorkIntoPage(c.contentPanel.document)};if(this.contentLoaded){a(this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,a,this)}};FillinNode.prototype.getDataXML=function(a){return FillinNode.prototype.parent.getDataXML(a)};FillinNode.prototype.parseDataXML=function(d){var c=d.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var e=c[a];b.push(FILLINSTATE.prototype.parseDataXML(e))}return b};FillinNode.prototype.parseDataJSONObj=function(a){return FILLINSTATE.prototype.parseDataJSONObj(a)};FillinNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<jaxbXML><![CDATA[";a+=this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue;a+="]]></jaxbXML>";a+=this.exportNodeFooter();return a};FillinNode.prototype.translateStudentWork=function(a){return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/FillinNode.js")}FlashNode.prototype=new Node();FlashNode.prototype.constructor=FlashNode;FlashNode.prototype.parent=Node.prototype;function FlashNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[]}FlashNode.prototype.setContent=function(a){this.content=a};FlashNode.prototype.render_old=function(a){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.elementText!=null){this.content=this.elementText}else{if(this.filename!=null){if(window.ActiveXObject){this.content=this.element.xml}else{this.content=(new XMLSerializer()).serializeToString(this.element)}}else{if(this.content==null){this.content=this.element.getElementsByTagName("content")[0].firstChild.nodeValue}}}if(a==null){this.contentPanel=window.frames.ifrm}else{this.contentPanel=window.frames[a.name]}if(this.contentPanel.document){this.writeHTML(this.contentPanel.document)}else{this.writeHTML(window.frames.ifrm.document)}};FlashNode.prototype.writeHTML=function(a){this.replaceVars(a);a.open();a.write(this.content);a.close()};FlashNode.prototype.replaceVars=function(){var g='<param name="movie" value="';var c='"/>';var d=vle.project.contentBaseUrl;if(d){d=d+"/"}else{d=""}var a=this.content.match(/<object.*>(.|\n|\r)*<\/object.*>/i);for(var h=0;h<a.length;h++){if(a[h]&&a[h]!=""&&a[h]!="\n"&&a[h]!="\r"&&a[h]!="\t"&&a[h]!=" "){var j=a[h].indexOf(g)+g.length;var f=a[h].indexOf('"',j);var b=a[h].substring(j,f);var e=new RegExp(b,"g");this.content=this.content.replace(e,d+b)}}};FlashNode.prototype.load=function(){this.createFlashJSInterface();document.getElementById("topStepTitle").innerHTML=this.title};FlashNode.prototype.getDataXML=function(a){return""};FlashNode.prototype.parseDataXML=function(b){var a=new Array();return a};FlashNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<content><![CDATA[";a+=this.element.getElementsByTagName("content")[0].firstChild.nodeValue;a+="]]></content>";a+=this.exportNodeFooter();return a};FlashNode.prototype.createFlashJSInterface=function(){window.frames.ifrm.showJsAlert=function(){alert("calling js from flash")};window.frames.ifrm.callToFlash=function(a){if(navigator.appName.indexOf("Microsoft")!=-1){window.frames.ifrm.window[a].callToFlash()}else{window.frames.ifrm.document[a].callToFlash()}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/FlashNode.js")}NoteNode.prototype=new OpenResponseNode();NoteNode.prototype.constructor=NoteNode;NoteNode.prototype.parent=OpenResponseNode.prototype;function NoteNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[]}NoteNode.prototype.renderFrame=function(){if(document["notePanel_"+this.id]==null||document.getElementById("noteiframe"+this.id)==null){var b=createElement(document,"div",{id:"notePanelDiv_"+this.id});var d=createElement(document,"div",{"class":"noteHead"});var a=createElement(document,"div",{"class":"noteBody"});var c=createElement(document,"div",{"class":"noteFooter"});document.getElementById("centeredDiv").appendChild(b);b.appendChild(d);b.appendChild(a);b.appendChild(c);document["notePanel_"+this.id]=new YAHOO.widget.Panel("notePanelDiv_"+this.id,{width:"650px",height:"625px",fixedcenter:false,constraintoviewport:true,underlay:"shadow",y:55,close:true,visible:false,draggable:true});document["notePanel_"+this.id].setHeader("Reflection Note");document["notePanel_"+this.id].setBody('<iframe name="noteiframe'+this.id+'" id="noteiframe'+this.id+'" frameborder="0" width="100%" height="100%" src="node/openresponse/note.html"><iframe>');document["notePanel_"+this.id].cfg.setProperty("underlay","matte");document["notePanel_"+this.id].render()}};NoteNode.prototype.render_old=function(g){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var d=function(k,h,j){j.contentPanel.document.open();k=k.replace(/(\.\.\/\.\.\/)/gi,"");j.contentPanel.document.write(j.injectBaseRef(k));j.contentPanel.document.close();if(j.contentPanel.name!="noteiframe"+this.id){j.contentPanel.renderComplete=function(){j.load()}}};var f=vle.state.getNodeVisitsByNodeId(this.id);var b=[];for(var e=0;e<vle.state.visitedNodes.length;e++){var a=vle.state.visitedNodes[e];if(a.getNodeId()==this.id){for(var c=0;c<a.nodeStates.length;c++){b.push(a.nodeStates[c])}}}if(g){this.contentPanel=window.frames[g.name]}else{this.contentPanel=window.frames["noteiframe"+this.id];this.contentPanel.loadContent([this.element,vle,b]);document["notePanel_"+this.id].cfg.setProperty("visible",true);this.insertPreviousWorkIntoPage(this.contentPanel.document);return}vle.connectionManager.request("GET",1,"node/openresponse/note.html",null,d,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(j,h,k){k[0].render(k[1])},[this,g])}};NoteNode.prototype.load=function(){var e=vle.state.getNodeVisitsByNodeId(this.id);var b=[];for(var d=0;d<vle.state.visitedNodes.length;d++){var a=vle.state.visitedNodes[d];if(a.getNodeId()==this.id){for(var c=0;c<a.nodeStates.length;c++){b.push(a.nodeStates[c])}}}this.contentPanel.loadContent([this.element,vle,b]);this.insertPreviousWorkIntoPage(this.contentPanel.document)};NoteNode.prototype.onExit=function(){if(this.contentPanel&&this.contentPanel.save){this.contentPanel.save()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/NoteNode.js")}OutsideUrlNode.prototype=new Node();OutsideUrlNode.prototype.constructor=OutsideUrlNode;OutsideUrlNode.prototype.parent=Node.prototype;function OutsideUrlNode(b,a){this.view=a;this.type=b}OutsideUrlNode.prototype.getUrl=function(){return this.content.getContentJSON().url};OutsideUrlNode.prototype.getDataXML=function(a){return OutsideUrlNode.prototype.parent.getDataXML(a)};OutsideUrlNode.prototype.parseDataXML=function(a){return new Array()};OutsideUrlNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<url>";a+=this.element.getElementsByTagName("url")[0].firstChild.nodeValue;a+="</url>";a+=this.exportNodeFooter();return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/OutsideUrlNode.js")}MultipleChoiceNode.prototype=new Node();MultipleChoiceNode.prototype.constructor=MultipleChoiceNode;MultipleChoiceNode.prototype.parent=Node.prototype;function MultipleChoiceNode(b,a){this.view=a;this.type=b;this.mc=null;this.contentBase;this.contentPanel;this.audioSupported=true;this.prevWorkNodeIds=[]}MultipleChoiceNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(e,c,d){d.contentPanel.document.open();d.contentPanel.document.write(d.injectBaseRef(injectVleUrl(e)));d.contentPanel.document.close();if(d.contentPanel.name!="ifrm"){d.contentPanel.renderComplete=function(){d.load()}}d.contentPanel.renderLoadComplete=function(){d.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/multiplechoice/multiplechoice.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(d,c,e){e[0].render(e[1])},[this,b])}};MultipleChoiceNode.prototype.load=function(){this.contentPanel.loadContent([this.elementText,this,vle]);this.insertPreviousWorkIntoPage(this.contentPanel.document)};MultipleChoiceNode.prototype.renderLite=function(a){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(a){this.liteState=a}var b=function(f,d,e){e.contentPanel.document.open();e.contentPanel.document.write(e.injectBaseRef(injectVleUrl(f)));e.contentPanel.document.close();e.contentPanel.renderComplete=function(){e.loadLite()}};var c={success:function(d){b(d.responseText,d.responseXML,d.argument)},failure:function(d){this.view.notificationManager.notify("failed to retrieve file",3)},argument:this};YAHOO.util.Connect.asyncRequest("GET","node/multiplechoice/multiplechoicelite.html",c,null)};MultipleChoiceNode.prototype.loadLite=function(){this.contentPanel.loadContent([this.element,this,vle,this.liteState])};MultipleChoiceNode.prototype.getDataXML=function(a){return MultipleChoiceNode.prototype.parent.getDataXML(a)};MultipleChoiceNode.prototype.parseDataXML=function(d){var c=d.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var e=c[a];b.push(MCSTATE.prototype.parseDataXML(e))}return b};MultipleChoiceNode.prototype.parseDataJSONObj=function(a){return MCSTATE.prototype.parseDataJSONObj(a)};MultipleChoiceNode.prototype.exportNode=function(){var a="";a+=this.exportNodeHeader();a+="<jaxbXML><![CDATA[";a+=this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue;a+="]]></jaxbXML>";a+=this.exportNodeFooter();return a};MultipleChoiceNode.prototype.getLatestWork=function(a){var b=null;this.mc=new MC(loadXMLString(this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue));this.mc.loadForTicker(this,a);b=this.mc.getLatestState(this.id);if(b==null){return null}return new MultipleChoiceQueryEntry(a.getWorkgroupId(),a.getUserName(),this.id,this.mc.promptText,b.getIdentifier(),this.mc.getCHOICEByIdentifier(b.getIdentifier()).text)};MultipleChoiceNode.prototype.getPrompt=function(){var a=loadXMLString(this.getXMLString());this.mc=new MC(a);return this.mc.promptText};MultipleChoiceNode.prototype.makeQueryContainer=function(a){this.mc=new MC(loadXMLString(this.element.getElementsByTagName("jaxbXML")[0].firstChild.nodeValue));this.mc.loadForTicker(this,a);return new MultipleChoiceQueryContainer(this.id,this.mc.promptText,this.mc.choiceToValueArray)};MultipleChoiceNode.prototype.translateStudentWork=function(a){this.mc=new MC(loadXMLString(this.getXMLString()));return this.mc.getCHOICEByIdentifier(a).text};MultipleChoiceNode.prototype.parseStateXML=function(a){return MCSTATE.prototype.parseDataXML(a)};MultipleChoiceNode.prototype.onExit=function(){};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/MultipleChoiceNode.js")}BrainstormNode.prototype=new Node();BrainstormNode.prototype.constructor=BrainstormNode;BrainstormNode.prototype.parent=Node.prototype;function BrainstormNode(b,a){this.view=a;this.type=b;this.audioSupported=true;this.serverless=true;this.prevWorkNodeIds=[]}BrainstormNode.prototype.isUsingServer=function(){if(this.content.getContentJSON().useServer){this.serverless=false;return true}else{this.serverless=true;return false}};BrainstormNode.prototype.getDataXML=function(a){return BrainstormNode.prototype.parent.getDataXML(a)};BrainstormNode.prototype.parseDataXML=function(e){var c=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var f=c[a];var d=BRAINSTORMSTATE.prototype.parseDataXML(f);if(d!=null){b.push(d)}}return b};BrainstormNode.prototype.parseDataJSONObj=function(a){return BRAINSTORMSTATE.prototype.parseDataJSONObj(a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/BrainstormNode.js")}GlueNode.prototype=new Node();GlueNode.prototype.constructor=GlueNode;GlueNode.prototype.parent=Node.prototype;function GlueNode(b,a){this.view=a;this.type=b}GlueNode.prototype.renderPrev=function(){this.contentPanel.renderPrev()};GlueNode.prototype.renderNext=function(){this.contentPanel.renderNext()};GlueNode.prototype.getDataXML=function(a){return GlueNode.prototype.parent.getDataXML(a)};GlueNode.prototype.parseDataXML=function(e){var c=e.getElementsByTagName("state");var b=new Array();for(var a=0;a<c.length;a++){var f=c[a];var d=GLUESTATE.prototype.parseDataXML(f);if(d!=null){b.push(d)}}return b};GlueNode.prototype.parseDataJSONObj=function(a){return GLUESTATE.prototype.parseDataJSONObj(a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/GlueNode.js")}DataGraphNode.prototype=new Node();DataGraphNode.prototype.constructor=DataGraphNode;DataGraphNode.prototype.parent=Node.prototype;function DataGraphNode(b,a){this.view=a;this.type=b;this.contentPanel;this.prevWorkNodeIds=[]}DataGraphNode.prototype.render_old=function(b){if(this.filename!=null&&vle.project.lazyLoading&&(!this.contentLoaded)){this.retrieveFile()}if(this.contentLoaded){var a=function(e,c,d){d.contentPanel.document.open();d.contentPanel.document.write(d.injectBaseRef(injectVleUrl(e)));d.contentPanel.document.close();if(d.contentPanel.name!="ifrm"){d.contentPanel.renderComplete=function(){d.load()}}d.contentPanel.renderLoadComplete=function(){d.onNodefullyloaded()}};if(b){this.contentPanel=window.frames[b.name]}else{this.contentPanel=window.frames.ifrm}vle.connectionManager.request("GET",1,"node/datagraph/datagraph.html",null,a,this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,function(d,c,e){e[0].render(e[1])},[this,b])}};DataGraphNode.prototype.load=function(){var a=function(f,c,e){if(!e){e=f}var g;for(var d=0;d<vle.state.visitedNodes.length;d++){var b=vle.state.visitedNodes[d];if(b.getNodeId()==e.id){if(b.nodeStates.length>0){g=b.nodeStates[b.nodeStates.length-1]}}}e.contentPanel.loadContent([e.element,vle,g]);e.insertPreviousWorkIntoPage(e.contentPanel.document)};if(this.contentLoaded){a(this)}else{vle.eventManager.subscribe("nodeLoadingContentComplete_"+this.id,a,this)}};DataGraphNode.prototype.getDataXML=function(a){return DataGraphNode.prototype.parent.getDataXML(a)};DataGraphNode.prototype.parseDataXML=function(a){};DataGraphNode.prototype.parseDataJSONObj=function(a){};DataGraphNode.prototype.exportNode=function(){};DataGraphNode.prototype.translateStudentWork=function(a){return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/DataGraphNode.js")}SVGDrawNode.prototype=new HtmlNode();SVGDrawNode.prototype.constructor=SVGDrawNode;SVGDrawNode.prototype.parent=HtmlNode.prototype;function SVGDrawNode(b,a){this.view=a;this.type=b;this.content=null;this.filename=null;this.audios=[];this.contentBase;this.audioSupported=true}SVGDrawNode.prototype.updateJSONContentPath=function(b){var a=new RegExp(this.filename);this.content.replace(a,b+"/"+this.filename)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/SVGDrawNode.js")}function createKeystrokeManager(b,a){return function(e,q){var p=e;var n={};var j;var m;var t=false;var l=false;var s=false;var d=function(r){if(r.altKey){t=true}else{t=false}if(r.ctrlKey){s=true}else{s=false}if(r.shiftKey){l=true}else{l=false}};var k=function(r){d(r)};var h=function(w){d(w);var r=n[w.keyCode];if(r){var u=[];if(w.ctrlKey){u.push("ctrl")}if(w.altKey){u.push("alt")}if(w.shiftKey){u.push("shift")}for(var w=0;w<r.specials.length;w++){var v=r.specials[w];if(v&&v.length==u.length){v.sort();u.sort();if(v.compare(u)){p.fire(r.events[w])}}else{if(!v&&u.length==0){p.fire(r.events[w])}}}}};var g=function(){j=window.onkeydown;m=window.onkeyup;window.onkeydown=h;window.onkeyup=k};var o=function(){window.onkeydown=j;window.onkeyup=m};var f=function(w,u,v){var r=n[u];if(w&&u){if(!r){n[u]={events:[],specials:[]};r=n[u]}r.events.push(w);r.specials.push(v)}else{alert("unable to add shortcut, check eventName or keycode")}};if(q){for(var c=0;c<q.length;c++){f(q[c][0],q[c][1],q[c][2])}}g();return{addShortcut:function(v,r,u){f(v,r,u)},stopListener:function(){o()},startListener:function(){g()},isAltkeydown:function(){return t},isShiftkeydown:function(){return l},isCtrlkeydown:function(){return s}}}(b,a)}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/keystrokemanager.js")}View.prototype.createConfig=function(a){return function(c){var d=c;var b=d.getContentJSON();if(b.playAudioOnStart==null){b.playAudioOnStart=false}return{isValidTheme:function(f){var e=["UCCP","WISE"];return e.contains(f)},getConfigParam:function(e){return b[e]}}}(a)};View.prototype.getConfig=function(){return this.config};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/config/config.js")}View.prototype.loadUserAndClassInfo=function(a){this.userAndClassInfo=this.parseUserAndClassInfo(a);this.userAndClassInfoLoaded=true;this.eventManager.fire("getUserAndClassInfoComplete")};View.prototype.getUserAndClassInfo=function(){return this.userAndClassInfo};View.prototype.createUserAndClassInfo=function(c,b,a){return function(f,q,s){var t=f;var m=q;var j=s;var p=function(){return t.workgroupId};var h=function(){return t.userName};var d=function(){return t.periodId};var n=function(){return t.periodName};var o=function(){var u=new Array();for(var v=0;v<m.length;v++){u.push(m[v])}u.push(t);return u};var k=function(v){if(v==p()){return h()}for(var u=0;u<m.length;u++){if(v==m[u].workgroupId){return m[u].userName}}return null};var e=function(v){for(var u=0;u<m.length;u++){if(m[u].workgroupId==v){return m[u]}}return null};var r=function(w){var u="";for(var v=0;v<m.length;v++){if(m[v].periodId==w){if(u!=""){u+=":"}u+=m[v].workgroupId}}return u};var g=function(w){for(var u=0;u<m.length;u++){var v=m[u];if(v.workgroupId==w){return v.periodName}}return null};var l=function(){return j.workgroupId};return{getWorkgroupId:function(){return p()},getUserName:function(){return h()},getPeriodId:function(){return d()},getPeriodName:function(){return n()},getUsersInClass:function(){return o()},getUserNameByUserId:function(u){return k(u)},getClassmateByWorkgroupId:function(u){return e(u)},getClassmateIdsByPeriodId:function(u){return r(u)},getClassmatePeriodNameByWorkgroupId:function(u){return g(u)},getTeacherWorkgroupId:function(){return l()}}}(c,b,a)};View.prototype.parseUserAndClassInfo=function(e){var a=e.getContentJSON();var d;var f;var c;var b;if(a.myUserInfo!=null){d=a.myUserInfo.myClassInfo;f=a.myUserInfo;if(d!=null){if(d.classmateUserInfos!=null){c=d.classmateUserInfos}if(d.teacherUserInfo!=null){b=d.teacherUserInfo}}}return this.createUserAndClassInfo(f,c,b)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/user/userandclassinfo.js")}function VLE_STATE(){this.visitedNodes=[];this.userName=null;this.dataId=null}VLE_STATE.prototype.setUserName=function(a){this.userName=a};VLE_STATE.prototype.setDataId=function(a){this.dataId=a};VLE_STATE.prototype.getCurrentNodeVisit=function(){if(this.visitedNodes.length==0){return null}else{return this.visitedNodes[this.visitedNodes.length-1]}};VLE_STATE.prototype.endCurrentNodeVisit=function(){var a=this.getCurrentNodeVisit();if(a){a.visitEndTime=Date.parse(new Date())}};VLE_STATE.prototype.saveState=function(a,b){};VLE_STATE.prototype.getNodeVisitsByNodeId=function(c){var a=[];for(var b=0;b<this.visitedNodes.length;b++){if(this.visitedNodes[b].nodeId==c){a.push(this.visitedNodes[b])}}return a};VLE_STATE.prototype.getLatestNodeVisitByNodeId=function(b){for(var a=this.visitedNodes.length-1;a>=0;a--){if(this.visitedNodes[a].nodeId==b){if(this.visitedNodes[a].getLatestWork()!=""){return this.visitedNodes[a]}}}return null};VLE_STATE.prototype.getLatestWorkByNodeId=function(d){for(var b=this.visitedNodes.length-1;b>=0;b--){var a=this.visitedNodes[b];if(a.nodeId==d){var c=a.getLatestWork();if(c!=""){return c}}}return""};VLE_STATE.prototype.getDataXML=function(){var a="";a+="<vle_state>";a+=this.getVisitedNodesDataXML();a+="</vle_state>";return a};VLE_STATE.prototype.getVisitedNodesDataXML=function(){var b="";for(var a=0;a<this.visitedNodes.length;a++){b+=this.visitedNodes[a].getDataXML()}return b};VLE_STATE.prototype.getCompletelyVisitedNodesDataXML=function(){var b="";for(var a=0;a<this.visitedNodes.length;a++){if(this.visitedNodes[a].visitEndTime!=null){b+=this.visitedNodes[a].getDataXML()}}return b};VLE_STATE.prototype.parseDataXML=function(e){var d=new VLE_STATE();var g=e.getElementsByTagName("node_visit");for(var c=0;c<g.length;c++){var a=g[c];var f=vle.getNodeById(a.getElementsByTagName("id")[0].textContent);if(f&&f!=null){var b=NODE_VISIT.prototype.parseDataXML(a);d.visitedNodes.push(b)}}return d};VLE_STATE.prototype.parseDataJSONString=function(f,c){var b=yui.JSON.parse(f);if(b){var e=new Array();for(var d=0;d<b.vle_states.length;d++){var a=b.vle_states[d];e.push(VLE_STATE.prototype.parseDataJSONObj(a))}if(e.length==1&&!c){return e[0]}else{return e}}else{notificationManager.notify("Error when parsing JSON state. Cannot proceed.",5)}};VLE_STATE.prototype.parseDataJSONObj=function(b){var e=new VLE_STATE();e.userName=b.userName;e.dataId=b.userId;if(b.visitedNodes!=null){for(var a=0;a<b.visitedNodes.length;a++){var c=b.visitedNodes[a];var d=NODE_VISIT.prototype.parseDataJSONObj(c);if(d!=null){e.visitedNodes.push(d)}}}return e};VLE_STATE.prototype.parseVLEStatesDataXMLString=function(g){var k=null;try{k=new ActiveXObject("Microsoft.XMLDOM");k.loadXML(g)}catch(f){try{var a=new DOMParser();k=a.parseFromString(g,"text/xml")}catch(f){notificationManager.notify(f.message,3)}}var j=new Array();var d=k.getElementsByTagName("workgroup");for(var h=0;h<d.length;h++){var c=d[h].attributes.getNamedItem("dataId").firstChild.nodeValue;var b=d[h].getElementsByTagName("vle_state")[0];j[c]=VLE_STATE.prototype.parseDataXML(b)}return j};VLE_STATE.prototype.parseVLEStatesDataXMLObject=function(g){var f=new Array();var d=g.getElementsByTagName("workgroup");for(var a=0;a<d.length;a++){var c=d[a].attributes.getNamedItem("userId").nodeValue;var e=d[a].attributes.getNamedItem("userName").nodeValue;var b=d[a].getElementsByTagName("vle_state")[0];var h=VLE_STATE.prototype.parseDataXML(b);h.userName=e;h.dataId=c;f.push(h)}return f};VLE_STATE.prototype.setCurrentNodeVisit=function(b){var c=this.getCurrentNodeVisit();var a=new NODE_VISIT(b.id,b.type);this.visitedNodes.push(a)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/data/vlestate.js")}function NODE_VISIT(d,b,c,a,e){this.id;this.nodeId=d;this.nodeType=b;this.visitPostTime=null;if(arguments.length==2){this.nodeStates=[];this.visitStartTime=Date.parse(new Date());this.visitEndTime=null}else{this.nodeStates=c;this.visitStartTime=a;this.visitEndTime=e}}NODE_VISIT.prototype.getNodeId=function(){return this.nodeId};NODE_VISIT.prototype.getDataXML=function(){var b="";b+="<node_visit>";b+="<node><type>";b+=this.nodeType;b+="</type><id>";b+=this.nodeId;b+="</id></node>";b+="<nodeStates>";var a=vle.getNodeById(this.nodeId);b+=a.getDataXML(this.nodeStates);b+="</nodeStates>";b+="<visitStartTime>";b+=this.visitStartTime;b+="</visitStartTime>";b+="<visitEndTime>";b+=this.visitEndTime;b+="</visitEndTime>";b+="</node_visit>";return b};NODE_VISIT.prototype.parseDataXML=function(d){var f=vle.getNodeById(d.getElementsByTagName("id")[0].textContent);if(!f||f==null){return null}var b=d.getElementsByTagName("visitStartTime")[0].textContent;var e=d.getElementsByTagName("visitEndTime")[0].textContent;var a=f.parseDataXML(d.getElementsByTagName("nodeStates")[0]);var c=new NODE_VISIT(f.id,f.type,a,b,e);if(d.getElementsByTagName("node_visit_id")!=null&&d.getElementsByTagName("node_visit_id").length>0){c.id=d.getElementsByTagName("node_visit_id")[0].textContent}return c};NODE_VISIT.prototype.parseDataJSONObj=function(d){var c=new NODE_VISIT();c.id=d.stepWorkId;c.nodeId=d.nodeId;c.nodeType=d.nodeType;c.visitStartTime=d.visitStartTime;c.visitEndTime=d.visitEndTime;c.visitPostTime=d.visitPostTime;var g=env.getProject().getNodeById(c.nodeId);if(!g||g==null){return null}var b=new Array();if(d.nodeStates!=null){for(var a=0;a<d.nodeStates.length;a++){var f=d.nodeStates[a];var e=g.parseDataJSONObj(f);b.push(e)}}c.nodeStates=b;return c};NODE_VISIT.prototype.getLatestState=function(){return this.nodeStates[this.nodeStates.length-1]};NODE_VISIT.prototype.getLatestWork=function(){for(var a=this.nodeStates.length-1;a>=0;a--){if(this.nodeStates[a]!=null&&this.nodeStates[a].getStudentWork()!=null&&this.nodeStates[a].getStudentWork()!=""){return this.nodeStates[a].getStudentWork()}}return""};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/data/nodevisit.js")}function BRAINSTORMSTATE(a,b){this.type="bs";this.response=a;if(arguments.length==1){this.timestamp=Date.parse(new Date())}else{this.timestamp=b}}BRAINSTORMSTATE.prototype.getHtml=function(){return"timestamp: "+this.timestamp+"<br/>response: "+this.response};BRAINSTORMSTATE.prototype.getDataXML=function(){return"<response>"+this.response+"</response><timestamp>"+this.timestamp+"</timestamp>"};BRAINSTORMSTATE.prototype.parseDataXML=function(c){var b=c.getElementsByTagName("response")[0];var a=c.getElementsByTagName("timestamp")[0];if(b==undefined||a==undefined){return null}else{return new BRAINSTORMSTATE(b.textContent,a.textContent)}};BRAINSTORMSTATE.prototype.parseDataJSONObj=function(b){var a=new BRAINSTORMSTATE();a.response=b.response;a.timestamp=b.timestamp;return a};BRAINSTORMSTATE.prototype.getStudentWork=function(){return this.response};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/brainstorm/brainstormstate.js")}function DATAGRAPHSTATE(a){this.timestamp=a[1];this.table=a[0];this.tableString;if(!this.timestamp){this.timestamp=Date.parse(new Date())}if(this.table){this.tableString=yui.JSON.stringify(this.table)}}DATAGRAPHSTATE.prototype.parseDataJSONObj=function(a){return new DATAGRAPHSTATE([a.table,a.timestamp])};DATAGRAPHSTATE.prototype.getDataXML=function(){return this.tableString+"<timestamp>"+this.timestamp+"</timestamp>"};DATAGRAPHSTATE.prototype.getStudentWork=function(){return this.tableString};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/datagraph/datagraphstate.js")}function FILLINSTATE(b,a,c){this.type="fi";this.textEntryInteractionIndex=b;this.response=a;if(arguments.length==2){this.timestamp=Date.parse(new Date())}else{this.timestamp=c}}FILLINSTATE.prototype.print=function(){};FILLINSTATE.prototype.getDataXML=function(){return"<textEntryInteractionIndex>"+this.textEntryInteractionIndex+"</textEntryInteractionIndex><response>"+this.response+"</response><timestamp>"+this.timestamp+"</timestamp>"};FILLINSTATE.prototype.parseDataXML=function(d){var b=d.getElementsByTagName("textEntryInteractionIndex")[0];var a=d.getElementsByTagName("response")[0];var c=d.getElementsByTagName("timestamp")[0];if(b==undefined||a==undefined||c==undefined){return null}else{return new FILLINSTATE(b.textContent,a.textContent,c.textContent)}};FILLINSTATE.prototype.parseDataJSONObj=function(b){var a=new FILLINSTATE();a.textEntryInteractionIndex=b.textEntryInteractionIndex;a.response=b.response;a.timestamp=b.timestamp;return a};FILLINSTATE.prototype.getStudentWork=function(){return this.response};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/fillin/fillinstate.js")}function GLUESTATE(a,b){this.type="glue";this.childStates=new Array();if(arguments.length==1){this.timestamp=Date.parse(new Date())}else{this.timestamp=b}}GLUESTATE.prototype.getHtml=function(){return"timestamp: "+this.timestamp+"<br/>response: "+this.response};GLUESTATE.prototype.getDataXML=function(){return"<response>"+this.response+"</response><timestamp>"+this.timestamp+"</timestamp>"};GLUESTATE.prototype.parseDataXML=function(c){var b=c.getElementsByTagName("response")[0];var a=c.getElementsByTagName("timestamp")[0];if(b==undefined||a==undefined){return null}else{return new GLUESTATE(b.textContent,a.textContent)}};GLUESTATE.prototype.parseDataJSONObj=function(f){var b=new GLUESTATE();for(var e=0;e<f.childStates.length;e++){var a=f.childStates[e];var g=a.childId;var d=a.type;var c=null;if(d=="mc"){c=MultipleChoiceNode.prototype.parseDataJSONObj(a)}else{if(d=="or"){c=OpenResponseNode.prototype.parseDataJSONObj(a)}}if(c==null){alert("gluestate.js, childstate not supported in glue yet")}else{c.childId=g;b.childStates.push(c)}}return b};GLUESTATE.prototype.getStudentWork=function(){var a="<table>";for(var b=0;b<this.childStates.length;b++){a+="<tr><td>"+this.childStates[b].getStudentWork()+"</td></tr>"}return a+"</table>"};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/glue/gluestate.js")}function HTMLSTATE(b,a){this.type="html";this.data=b;if(a==null){this.timestamp=new Date().getTime()}else{this.timestamp=a}}HTMLSTATE.prototype.getDataXML=function(){var a="<data>"+this.data+"</data>";a+="<timestamp>"+this.timestamp+"</timestamp>";return a};HTMLSTATE.prototype.parseDataXML=function(f){var b=f.getElementsByTagName("data")[0];var a=f.getElementsByTagName("timestamp")[0];if(b!=null&&a!=null){var e=b.textContent;var d=a.textContent;var c=new HTMLSTATE(e,d);return c}else{return null}};HTMLSTATE.prototype.parseDataJSONObj=function(b){var a=new HTMLSTATE();a.data=b.data;a.timestamp=b.timestamp;return a};HTMLSTATE.prototype.getStudentWork=function(){return this.data};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/html/htmlstate.js")}function MSSTATE(){this.type="ms";this.sourceBucket=null;this.buckets=[]}MSSTATE.prototype.getXMLString=function(){var a="<state>";a+="</state>";return a};MSSTATE.prototype.getDataXML=function(){};MSSTATE.prototype.parseDataXML=function(a){};MSSTATE.prototype.getStudentWork=function(){var c="";for(var a=0;a<this.buckets.length;a++){c+="You placed the choices ";for(var b=0;b<this.buckets[a].choices.length;b++){c+=this.buckets[a].choices[b]+" "}c+=" in "+this.buckets[a].text+" \n"}return c};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/matchsequence/matchsequencestate.js")}function MCSTATE(a){this.type="mc";this.isCorrect=null;this.response=new Array();if(a){if(a[0]){this.timestamp=a[0]}if(a[1]){this.choices=a[1]}}if(!this.timestamp){this.timestamp=new Date().getTime()}if(!this.choices){this.choices=new Array()}}MCSTATE.prototype.addChoice=function(a){this.choices.push(a)};MCSTATE.prototype.addResponse=function(a){this.response.push(a)};MCSTATE.prototype.print=function(){};MCSTATE.prototype.getDataXML=function(){var b="<choices>";for(var a=0;a<this.choices.length;a++){b+="<choice>"+this.choices[a]+"</choice>"}b+="</choices>";b+="<isCorrect>"+this.isCorrect+"</isCorrect>";b+="<timestamp>"+this.timestamp+"</timestamp>";return b};MCSTATE.prototype.parseDataXML=function(g){var f=g.getElementsByTagName("choices")[0];var e=f.getElementsByTagName("choice");var k=new Array();for(var j=0;j<e.length;j++){var d=e[j];var c=d.textContent;k.push(c)}var h=g.getElementsByTagName("timestamp")[0];var b=Boolean(g.getElementsByTagName("isCorrect")[0].firstChild.nodeValue);if(h==undefined||k.length==0){return null}else{var a=new MCSTATE([h.textContent,k]);a.isCorrect=b;return a}};MCSTATE.prototype.parseDataJSONObj=function(b){var a=new MCSTATE();a.isCorrect=b.isCorrect;a.timestamp=b.timestamp;a.choices=b.choices;a.response=b.response;return a};MCSTATE.prototype.getHumanReadableForm=function(){var a="isCorrect: "+this.isCorrect;a+="choices: "+this.choices;return a};MCSTATE.prototype.getStudentWork=function(){var b="";if(this.response){for(var a=0;a<this.response.length;a++){if(b!=""){b+=", "}b+=this.response[a]}}return b};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/multiplechoice/multiplechoicestate.js")}function OPENRESPONSESTATE(){this.type="or";this.response=arguments[0];if(!arguments[1]){this.timestamp=Date.parse(new Date())}else{this.timestamp=arguments[1]}}OPENRESPONSESTATE.prototype.toJSON=function(){encodeURIComponent(this.response)};OPENRESPONSESTATE.prototype.print=function(){};OPENRESPONSESTATE.prototype.getHtml=function(){return"timestamp: "+this.timestamp+"<br/>response: "+this.response};OPENRESPONSESTATE.prototype.getDataXML=function(){return"<response><![CDATA["+this.response+"]]></response><timestamp>"+this.timestamp+"</timestamp>"};OPENRESPONSESTATE.prototype.parseDataXML=function(c){var b=c.getElementsByTagName("response")[0];var a=c.getElementsByTagName("timestamp")[0];if(b==undefined||a==undefined){return null}else{return new OPENRESPONSESTATE([b.textContent,a.textContent])}};OPENRESPONSESTATE.prototype.parseDataJSONObj=function(c){var a=c.response;var d=c.timestamp;var b=new OPENRESPONSESTATE(a,d);return b};OPENRESPONSESTATE.prototype.getStudentWork=function(){return this.response};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/openresponse/openresponsestate.js")}function MYSYSTEMSTATE(b,a){this.type="mysystem";this.data=b;if(a==null){this.timestamp=new Date().getTime()}else{this.timestamp=a}}MYSYSTEMSTATE.prototype.getDataXML=function(){var a="<data>"+this.data+"</data>";a+="<timestamp>"+this.timestamp+"</timestamp>";return a};MYSYSTEMSTATE.prototype.parseDataXML=function(f){var b=f.getElementsByTagName("data")[0];var a=f.getElementsByTagName("timestamp")[0];if(b!=null&&a!=null){var e=b.textContent;var d=a.textContent;var c=new MYSYSTEMSTATE(e,d);return c}else{return null}};MYSYSTEMSTATE.prototype.parseDataJSONObj=function(b){var a=new MYSYSTEMSTATE();a.data=b.data;a.timestamp=b.timestamp;return a};MYSYSTEMSTATE.prototype.getStudentWork=function(){return this.data};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/mysystem/mysystemstate.js")}function SVGDRAWSTATE(b,a){this.type="html";this.data=b;if(a==null){this.timestamp=new Date().getTime()}else{this.timestamp=a}}SVGDRAWSTATE.prototype.parseDataJSONObj=function(a){var b=new SVGDRAWSTATE();b.data=a.data;b.timestamp=a.timestamp;return b};SVGDRAWSTATE.prototype.getStudentWork=function(){return this.data};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/node/draw/svg-edit/svgdrawstate.js")}var iconUrl="images/stepIcons/UCCP/";var nodeTypes=["HtmlNode","BrainstormNode","FillinNode","MatchSequenceNode","MultipleChoiceNode","NoteNode","JournalEntryNode","OutsideUrlNode","GlueNode","OpenResponseNode","BlueJNode","DrawNode","DataGraphNode","MySystemNode"];var nodeClasses=[["intro","curriculum","display","cartoon","codeit","simulation","movie","homework","summary"],["brainstorm","qadiscuss"],["fillblank"],["matchsequence"],["multiplechoice"],["note"],["journal"],["www"],["instantquiz","teacherquiz"],["openresponse"],["codeit"],["quickdraw"],["datatable"],["mysystem"]];var nodeClassText=[["Introductory Page","Curriculum Page","Display Page","Cartoon Page","Coding Page","Simulation Page","Movie Page","Homework Page","Summary Page"],["Brainstorm session","Q&A Discussion"],["Fill the Blank"],["Match & Sequence"],["Multiple Choice"],["Reflection Note (popup)"],["Journal Question"],["WWW Page"],["Survey 1","Survey 2"],["Open Response"],["Code it"],["Drawing"],["Data Graph"],["My System"]];if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/util/icon.js")}View.prototype.vleDispatcher=function(b,a,c){if(b=="startVLEFromConfig"){c.startVLEFromConfig(a[0])}else{if(b=="startVLEFromParams"){c.startVLEFromParams(a[0])}else{if(b=="loadingProjectComplete"){c.onProjectLoad();c.renderStartNode()}else{if(b=="processUserAndClassInfoComplete"){c.renderStartNode()}else{if(b=="renderNode"){c.renderNode(a[0])}else{if(b=="renderNodeStart"){if(a){c.onRenderNodeStart(a[0])}else{c.onRenderNodeStart(null)}}else{if(b=="renderNodeComplete"){if(a){c.onRenderNodeComplete(a[0])}else{c.onRenderNodeComplete(null)}}else{if(b=="resizeNote"){c.utils.resizePanel(a[0],a[1])}else{if(b=="resizeJournal"){c.utils.resizePanel(a[0],a[1])}else{if(b=="onNotePanelResized"){c.utils.onNotePanelResized(a[0])}else{if(b=="setStyleOnElement"){c.utils.setStyleOnElement(a[0],a[1],a[2])}else{if(b=="closeDialogs"){if(a){c.utils.closeDialogs(a[0])}else{c.utils.closeDialogs()}}else{if(b=="closeDialog"){c.utils.closeDialog(a[0])}else{if(b=="postAllUnsavedNodeVisits"){c.postAllUnsavedNodeVisits()}else{if(b=="pushStudentWork"){c.pushStudentWork(a[0])}else{if(b=="cleanupVLE"){c.cleanupVLE()}}}}}}}}}}}}}}}}};View.prototype.startVLEFromConfig=function(a){this.config=this.createConfig(createContent(a));this.startVLE()};View.prototype.startVLEFromParams=function(b){var a=createContent();a.setContent(b);this.config=this.createConfig(a);this.startVLE()};View.prototype.startVLE=function(){this.eventManager.fire("startVLEBegin");this.loadProject(this.config.getConfigParam("getContentUrl"),this.config.getConfigParam("getContentBaseUrl"),true);if(this.config.getConfigParam("mode")=="run"){this.notificationManager.notify("vleConfig.mode is run, getUserInfoUrl:"+this.config.getConfigParam("getUserInfoUrl"),4);this.loadLearnerData(this.config.getConfigParam("getUserInfoUrl"))}else{if(this.config.getConfigParam("mode")=="preview"){this.loadUserAndClassInfo(createContent(this.config.getConfigParam("getUserInfoUrl")));eventManager.fire("processUserAndClassInfoComplete")}}this.loadTheme(this.config.getConfigParam("theme"));this.eventManager.fire("startVLEComplete")};View.prototype.loadTheme=function(b){var a="wise";if(b&&b!=null){a=b.toLowerCase();if(b=="UCCP"){document.getElementById("gotoStudentHomePageLink").href="../../moodle/index.php";document.getElementById("quitAndLogoutLink").href="../index.php"}}scriptloader.loadScripts(b,document,"theme",this.eventManager)};View.prototype.loadLearnerData=function(a){if(a&&a!=null){this.eventManager.fire("getUserAndClassInfoBegin");this.loadUserAndClassInfo(createContent(a));this.loadVLEState()}};View.prototype.loadVLEState=function(){if(this.userAndClassInfo&&this.userAndClassInfo.getWorkgroupId()){this.connectionManager.request("GET",2,this.config.getConfigParam("getStudentDataUrl"),{userId:this.userAndClassInfo.getWorkgroupId()},this.processLoadViewStateResponse,this)}else{this.connectionManager.request("GET",2,this.config.getConfigParam("getStudentDataUrl"),null,this.processLoadViewStateResponse,this)}};View.prototype.processLoadViewStateResponse=function(d,f,a){if(d){var b=VLE_STATE.prototype.parseDataJSONString(d);a.setViewState(b)}var g=a.state.getCurrentNodeVisit();if(g!=null){var c=a.getProject().getNodeById(g.nodeId);a.renderNode(a.getProject().getPositionById(c.id))}var e=null;a.eventManager.fire("processUserAndClassInfoComplete",e)};View.prototype.setViewState=function(a){this.state=a};View.prototype.onProjectLoad=function(){this.notificationManager.notify("vleInitializerListener",4);if(this.getProject()){if(document.getElementById("title")!=null&&this.getProject().getTitle()!=null){document.getElementById("title").innerHTML=this.getProject().getTitle();document.getElementsByTagName("title")[0].innerHTML=this.getProject().getTitle();if(window.parent){window.parent.document.title=window.parent.document.title+": "+this.getProject().getTitle()}}if(document.getElementById("logInBox")!=null&&this.userAndClassInfo){document.getElementById("logInBox").innerHTML="Hello "+this.userAndClassInfo.getUserName()}if(this.runManager!=null&&this.runManager.isFlaggingEnabled){document.getElementById("flagDiv").innerHTML="<a href='#' id='flagButton' onClick='javascript:vle.displayFlaggedItems();' >Show Me Flagged Items</a>"}}else{this.notificationManager.notify("VLE and project not ready to load any nodes",3)}};View.prototype.renderStartNode=function(){if(this.getProject()){var c=this.getCurrentNode();if(c==null){var b;if(this.config.getConfigParam("mode")=="run"||this.config.getConfigParam("mode")=="preview"){if(this.userAndClassInfoLoaded){b=this.getProject().getStartNodePosition()}}else{b=this.getProject().getStartNodePosition()}if(b){this.eventManager.fire("renderNode",b)}}var a=document.getElementById("loadingMessageDiv");if(a!=null&&a!=undefined){a.innerHTML=""}}};View.prototype.onRenderNodeStart=function(a){this.eventManager.fire("closeDialogs");var b=this.getProject().getNodeByPosition(a);if(b){b.onExit();if(this.state){this.state.endCurrentNodeVisit()}}this.eventManager.fire("postAllUnsavedNodeVisits")};View.prototype.onRenderNodeComplete=function(a){var b=this.getProject().getNodeByPosition(a);if(b.className&&b.className!="null"&&b.className!=""){document.getElementById("stepIcon").innerHTML="<img src='"+iconUrl+b.className+"28.png'/>"}if(document.getElementById("topStepTitle")!=null){document.getElementById("topStepTitle").innerHTML=b.title}if(document.getElementById("projectLeftBox").offsetHeight>0){document.getElementById("ifrm").style.height=document.getElementById("projectLeftBox").offsetHeight-2}};View.prototype.renderNode=function(b){this.eventManager.fire("renderNodeStart",this.currentPosition);this.notificationManager.notify("rendering  node, pos: "+b,4);var c=null;if(b==null){if(this.state.visitedNodes.length>0){c=this.state.visitedNodes[this.state.visitedNodes.length-1];this.currentPosition=this.getProject().getPositionById(c.id)}}else{c=this.getProject().getNodeByPosition(b);this.currentPosition=b}if(c==null){this.notificationManager.notify("VLE: nodeToVisit is null Exception. Exiting",3);return}var a=this.getStudentWorkForNodeId(c.id);this.state.setCurrentNodeVisit(c);c.render(null,a);this.eventManager.fire("renderNodeComplete",this.currentPosition)};View.prototype.getCurrentNode=function(){return this.getProject().getNodeByPosition(this.currentPosition)};View.prototype.getCurrentPosition=function(){return this.currentPosition};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_core.js")}View.prototype.utils.setStyleOnElement=function(c,b,a){if(c&&c!=null){c.setStyle(b,a)}};View.prototype.utils.closeDialogs=function(a){if(a!=null){this.closeDialog(a)}else{this.closeDialog("journalPanel");for(var b in document){if(b.indexOf&&b.indexOf("notePanel_")==0){this.closeDialog(b)}}}};View.prototype.utils.closeDialog=function(a){if(document[a]&&document[a].cfg){document[a].cfg.setProperty("visible",false)}};View.prototype.utils.resizePanel=function(a,c){var d=window.innerHeight;var b=window.innerWidth;if(c=="minimize"){a.cfg.setProperty("height","100px");a.cfg.setProperty("width","430px")}else{if(c=="original"){a.cfg.setProperty("height","550px");a.cfg.setProperty("width","650px")}else{if(c=="narrow"){a.cfg.setProperty("height",(d-10)+"px");a.cfg.setProperty("width","245px")}else{if(c=="wide"){a.cfg.setProperty("height","200px");a.cfg.setProperty("width","1000px")}else{if(c=="maximize"){a.cfg.setProperty("height",(d-10)+"px");a.cfg.setProperty("width","1000px")}}}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_utils.js")}View.prototype.pushStudentWork=function(a){this.state.getCurrentNodeVisit().nodeStates.push(a)};View.prototype.postCurrentStep=function(a){if(this.config.postCurrentStepUrl){this.connectionManager.request("POST",3,this.config.postCurrentStepUrl,{nodeId:a.id,nodeType:a.type,extraData:a.extraData})}};View.prototype.postCurrentNodeVisit=function(){if(this.config.mode=="preview"){return}var d=this.state.getCurrentNodeVisit();var c=d.id;var a;if(this.postDataUrl){a=this.postDataUrl}else{a="postdata.html"}var b=encodeURIComponent(global_yui.JSON.stringify(d));if(vle.myUserInfo!=null){this.connectionManager.request("POST",3,a,{id:c,runId:this.runId,userId:vle.myUserInfo.workgroupId,data:b},this.processPostResponse,{vle:this,nodeVisit:d})}else{this.connectionManager.request("POST",3,a,{id:c,runId:this.runId,userId:"-2",data:prepareDataForPost(diff)},this.processPostResponse)}};View.prototype.postUnsavedNodeVisit=function(a){if(!this.getConfig()||!this.getConfig().getConfigParam("mode")||this.getConfig().getConfigParam("mode")=="preview"){return}var b=this.getConfig().getConfigParam("postStudentDataUrl");var c=encodeURIComponent(yui.JSON.stringify(a));var d={id:a.id,runId:this.getConfig().getConfigParam("runId"),userId:this.getUserAndClassInfo().getWorkgroupId(),data:c};this.connectionManager.request("POST",3,b,d,this.processPostResponse,{vle:this,nodeVisit:a})};View.prototype.postAllUnsavedNodeVisits=function(){for(var b=0;b<this.state.visitedNodes.length;b++){var a=this.state.visitedNodes[b];if(a!=null&&a.visitPostTime==null&&a.visitEndTime!=null){this.postUnsavedNodeVisit(a)}}};View.prototype.processPostResponse=function(d,e,b){notificationManager.notify("processPostResponse, responseText:"+d,4);notificationManager.notify("processPostResponse, nodeVisit: "+b.nodeVisit,4);var c=yui.JSON.parse(d);var f=c.id;var a=c.visitPostTime;if(b.nodeVisit.id!=null){}b.nodeVisit.id=f;b.nodeVisit.visitPostTime=a;eventManager.fire("processPostResponseComplete")};View.prototype.getStudentWorkForNodeId=function(e){var b=[];for(var d=0;d<this.state.visitedNodes.length;d++){var a=this.state.visitedNodes[d];if(a.getNodeId()==e){for(var c=0;c<a.nodeStates.length;c++){b.push(a.nodeStates[c])}}}return b};View.prototype.getLatestStateForCurrentNode=function(){var d=this.getCurrentNode();if(d.type!="HtmlNode"&&d.type!="MySystemNode"&&d.type!="SVGDrawNode"){return}var e="";var a=this.state.getNodeVisitsByNodeId(d.id);for(var c=0;c<a.length;c++){var f=a[c].nodeStates;if(f!=null){for(var b=0;b<f.length;b++){if(f[b].data!=""){e=f[b].data}}}}return e};View.prototype.saveState=function(e,d){var b=this.getCurrentNode();if(d!=null){b=d}var f=null;if(b.type=="HtmlNode"||b.type=="DrawNode"){f=new HTMLSTATE(e)}else{if(b.type=="MySystemNode"){f=new MYSYSTEMSTATE(e)}else{if(b.type=="SVGDrawNode"){f=new SVGDRAWSTATE(e)}else{return}}}var c=this.state.getNodeVisitsByNodeId(b.getNodeId());var a=c[c.length-1];a.nodeStates.push(f)};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_studentwork.js")}function NavigationLogic(a){this.algorithm=a}NavigationLogic.prototype.findVisitingOrder=function(b){this.visitingOrder.push(b);for(var a=0;a<b.children.length;a++){this.findVisitingOrder(b.children[a])}};NavigationLogic.prototype.canVisitNode=function(b,a){if(this.algorithm!=null){return this.algorithm.canVisitNode(b.visitedNodes,a)}return true};NavigationLogic.prototype.getNextNode=function(a){if(this.algorithm!=null){return this.algorithm.getNextNode(a)}else{return null}};NavigationLogic.prototype.getPrevNode=function(a){if(this.algorithm!=null){return this.algorithm.getPrevNode(a)}else{return null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/navigation/NavigationLogic.js")}function DFS(c){this.rootNode=c;this.visitingOrder=[];for(var b=0;b<this.rootNode.children.length;b++){this.findVisitingOrder(this.rootNode.children[b],b)}}DFS.prototype.findVisitingOrder=function(b,c){if(b){this.visitingOrder.push(String(c));for(var a=0;a<b.children.length;a++){this.findVisitingOrder(b.children[a],c+"."+a)}}};DFS.prototype.canVisitNode=function(b,a){return true};DFS.prototype.findDeepestSoFar=function(a,b,c){if(a==c.length){return c[b]}if(this.isBefore(c[b].node,c[a].node)){return this.findDeepestSoFar(a+1,a,c)}else{return this.findDeepestSoFar(a+1,b,c)}};DFS.prototype.isBefore=function(b,a){var d=this.visitingOrder.indexOf(b);var c=this.visitingOrder.indexOf(a);if(d==-1||c==-1){alert("node visiting error");alert("1:"+d);alert("2:"+c);return}return d<=c};DFS.prototype.getNextNode=function(a){var b=this.visitingOrder.indexOf(a);if(b==this.visitingOrder.length){return null}return this.visitingOrder[b+1]};DFS.prototype.getPrevNode=function(a){var b=this.visitingOrder.indexOf(a);if(b==0){return null}return this.visitingOrder[b-1]};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/navigation/DFS.js")}View.prototype.navigationDispatcher=function(b,a,c){if(b=="renderNextNode"){c.renderNextNode()}else{if(b=="renderPrevNode"){c.renderPrevNode()}else{if(b=="loadingProjectComplete"){c.createNavigationLogicOnProjectLoad()}}}};View.prototype.createNavigationLogicOnProjectLoad=function(){this.navigationLogic=new NavigationLogic(new DFS(this.getProject().getRootNode()))};View.prototype.renderPrevNode=function(){var b=this.getProject().getNodeByPosition(this.currentPosition);if(!b){b=this.getProject().getRootNode()}if(this.navigationLogic==null){this.notificationManager.notify("nav logic not defined.",1)}if(b.type=="NoteNode"){this.eventManager.fire("closeDialog","notePanel_"+b.id)}var c=this.navigationLogic.getPrevNode(this.getCurrentPosition());var a=this.getProject().getNodeByPosition(c);while(a!=null&&(a.children.length>0)){c=this.navigationLogic.getPrevNode(c);a=this.getProject().getNodeByPosition(c)}if(a==null){this.notificationManager.notify("prevNode does not exist",1)}else{this.eventManager.fire("renderNode",c);return a}};View.prototype.renderNextNode=function(){var b=this.getProject().getNodeByPosition(this.currentPosition);if(!b){b=this.getProject().getRootNode()}if(this.navigationLogic==null){this.notificationManager.notify("next is not defined.",1)}if(b.type=="NoteNode"){this.eventManager.fire("closeDialog","notePanel_"+b.id)}var c=this.navigationLogic.getNextNode(this.getCurrentPosition());var a=this.getProject().getNodeByPosition(c);while(a!=null&&(a.children.length>0)){c=this.navigationLogic.getNextNode(c);a=this.getProject().getNodeByPosition(c)}if(a==null){this.notificationManager.notify("nextNode does not exist",1)}else{this.eventManager.fire("renderNode",c);return a}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_navigation.js")}function SDMenu(a){if(!document.getElementById||!document.getElementsByTagName){return false}this.menu=document.getElementById(a);this.submenus=this.menu.getElementsByTagName("div");this.remember=true;this.speed=5;this.markCurrent=true;this.oneSmOnly=false}SDMenu.prototype.init=function(){var c=this;for(var d=0;d<this.submenus.length;d++){this.submenus[d].getElementsByTagName("span")[0].onclick=function(){c.toggleMenu(this.parentNode)}}if(this.markCurrent){var b=this.menu.getElementsByTagName("a");for(var d=0;d<b.length;d++){if(b[d].href==document.location.href){this.addClass(b[d],"current");break}}}for(var a=0;a<this.submenus.length;a++){if(a==0){this.removeClass(this.submenus[a],"collapsed")}else{this.addClass(this.submenus[a],"collapsed")}}};SDMenu.prototype.toggleMenu=function(a){if(this.containsClass(a,"collapsed")){this.expandMenu(a)}else{this.collapseMenu(a)}};SDMenu.prototype.expandMenu=function(f){var d=f.getElementsByTagName("span")[0].offsetHeight;var c=f.getElementsByTagName("a");for(var e=0;e<c.length;e++){d+=c[e].offsetHeight}var g=Math.round(this.speed*c.length);var b=this;var a=setInterval(function(){var j=f.offsetHeight;var h=j+g;if(h<d){f.style.height=h+"px"}else{clearInterval(a);f.style.height="";SDMenu.prototype.removeClass(f,"collapsed");b.memorize()}},30);this.collapseOthers(f)};SDMenu.prototype.collapseMenu=function(c){var d=c.getElementsByTagName("span")[0].offsetHeight;var e=Math.round(this.speed*c.getElementsByTagName("a").length);var b=this;var a=setInterval(function(){var g=c.offsetHeight;var f=g-e;if(f>d){c.style.height=f+"px"}else{clearInterval(a);c.style.height="";SDMenu.prototype.addClass(c,"collapsed");b.memorize()}},30)};SDMenu.prototype.collapseOthers=function(b){if(this.oneSmOnly){for(var a=0;a<this.submenus.length;a++){if(this.submenus[a]!=b&&!this.containsClass(this.submenus[a],"collapsed")){this.collapseMenu(this.submenus[a])}}}};SDMenu.prototype.forceCollapseOthers=function(b){for(var a=0;a<this.submenus.length;a++){if(this.submenus[a]!=b&&!this.containsClass(this.submenus[a],"collapsed")){this.collapseMenu(this.submenus[a])}}};SDMenu.prototype.forceCollapseOthersNDeep=function(d){for(var c=0;c<this.submenus.length;c++){var b=false;for(var a=0;a<d.length;a++){if(d[a]==this.submenus[c]){this.expandMenu(this.submenus[c]);b=true}}if(!b){this.collapseMenu(this.submenus[c])}}};SDMenu.prototype.expandAll=function(){var b=this.oneSmOnly;this.oneSmOnly=false;for(var a=0;a<this.submenus.length;a++){if(this.containsClass(this.submenus[a],"collapsed")){this.expandMenu(this.submenus[a])}}this.oneSmOnly=b};SDMenu.prototype.collapseAll=function(){eventManager.fire("menuCollapseAllNonImmediate")};SDMenu.prototype.memorize=function(){if(this.remember){var a=new Array();for(var b=0;b<this.submenus.length;b++){if(this.containsClass(this.submenus[b],"collapsed")){a.push(0)}else{a.push(1)}}var c=new Date();c.setTime(c.getTime()+(30*24*60*60*1000));document.cookie="sdmenu_"+encodeURIComponent(this.menu.id)+"="+a.join("")+"; expires="+c.toGMTString()+"; path=/"}};SDMenu.prototype.addClass=function(a,b){if(a.className.indexOf(b)==-1){a.className=a.className+" "+b}};SDMenu.prototype.removeClass=function(a,b){a.className=a.className.replace(b,"")};SDMenu.prototype.containsClass=function(a,b){if(a.className.indexOf(b)!=-1){return true}else{return false}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/menu/sdmenu.js")}function NavigationPanel(a){this.view=a;this.rootNode=this.view.getProject().getRootNode();this.autoStep=this.view.getProject().useAutoStep();this.stepLevelNumbering=this.view.getProject().useStepLevelNumbering();this.stepTerm=this.view.getProject().getStepTerm();this.currentStepNum}NavigationPanel.prototype.render=function(){var b=document.getElementById("my_menu").innerHTML.replace(/^\s*/,"").replace(/\s*$/,"");if(b!=""){var q=this.view.yui.get(".currentNode").get("id");var r=this.view.getCurrentPosition();var e=document.getElementById(q);var d=document.getElementById(r);var s=null;if(e!=null){s=e.getAttribute("class");if(!s){s=e.getAttribute("className");if(s){s=s.replace("currentNode","");e.setAttribute("className",s)}}else{s=s.replace("currentNode","");e.setAttribute("class",s)}var j=this.view.getProject().getNodeByPosition(q);var a=this.view.getProject().getNodeByPosition(r);if(j&&j.parent.getView()=="glue"&&(a.parent!=j.parent)){var k=e.firstChild.nextSibling.nodeValue;var o;var p=j.parent.title;e.firstChild.src=iconUrl+"instantquiz16.png";if(k&&k.indexOf(p)!=-1){o=k.substring(0,k.indexOf(p)+p.length+1);e.firstChild.nextSibling.nodeValue=o}}}if(d!=null){var f="className";var g=d.getAttribute(f);if(g){g=g+" currentNode";d.setAttribute(f,g)}else{f="class";g=d.getAttribute(f);if(g){g=g+" currentNode";d.setAttribute(f,g)}}var c=this.view.getProject().getNodeById(this.view.state.getCurrentNodeVisit().getNodeId());if(c.parent.getView()=="glue"){this.processGlue(d,c)}}else{var n=this.getEnclosingNavParent(r);if(n!=null){var c=this.view.getProject().getNodeById(this.view.state.getCurrentNodeVisit().getNodeId());if(c.parent.getView()=="glue"){this.processGlue(n,c)}var f="class";var h=n.getAttribute(f);if(!h){f="className";h=n.getAttribute(f)}h=h+" currentNode";n.setAttribute(f,h)}}}else{this.currentStepNum=1;var m="";for(var l=0;l<this.rootNode.children.length;l++){m+=this.getNavigationHtml(this.rootNode.children[l],0,l)}document.getElementById("my_menu").innerHTML=m}eventManager.fire("menuCollapseAllNonImmediate")};NavigationPanel.prototype.processGlue=function(b,f){var c=b.firstChild.nextSibling.nodeValue;var e;var d=f.parent.title;var a=" (part "+(f.parent.children.indexOf(f)+1)+" of "+f.parent.children.length+")";b.firstChild.src=iconUrl+f.className+"16.png";if(c&&c.indexOf(d)!=-1){e=c.substring(0,c.indexOf(d)+d.length+1)+a;b.firstChild.nextSibling.nodeValue=e}};NavigationPanel.prototype.getEnclosingNavParent=function(c){if(c!=null){var b=this.view.navigationLogic.getPrevNode(c);if(b!=null){var a=document.getElementById(b);if(a!=null){return a}else{return this.getEnclosingNavParent(b)}}}return null};NavigationPanel.prototype.toggleVisibility=function(){var a=document.getElementById("projectLeftBox").style.display;if(a==null||a=="none"){document.getElementById("projectLeftBox").style.display="block";document.getElementById("projectRightUpperBox").style.marginLeft="0";document.getElementById("projectRightLowerBox").style.marginLeft="226"}else{document.getElementById("projectLeftBox").style.display="none";document.getElementById("projectRightUpperBox").style.marginLeft="0";document.getElementById("projectRightLowerBox").style.marginLeft="0"}};NavigationPanel.prototype.getNavigationHtml=function(c,f,g){var m="";var l="node";var b="";var n=f;var d=10*f;if(!n){n=0}if(c==null){return}if(c.id==this.view.state.getCurrentNodeVisit().getNodeId()){l+=" currentNode"}if(this.view.visibilityLogic!=null&&!this.view.visibilityLogic.isNodeVisible(this.view.state,c)){l+=" hiddenNode"}if(c.children.length>0){if(c.getView()=="hidden"){for(var k=0;k<c.children.length;k++){m+=this.getNavigationHtml(c.children[k],n,g+"."+k)}}else{if(c.getView()=="glue"){var h="<img src='images/stepIcons/UCCP/instantquiz16.png'/>";m;for(var o=0;o<f;o++){m+=b}if(c.className&&c.className!="null"&&c.className!=""){h="<img src='"+iconUrl+c.className+"16.png'/> "}if(this.autoStep){m+=this.createStepHtml(d,l,n,c.children[0].id,h,g,c.getTitle(),this.currentStepNum);this.currentStepNum++}else{m+=this.createStepHtml(d,l,n,c.children[0].id,h,g,c.getTitle())}}else{var a=document.getElementById(g);if(a&&a.className){m+=this.createSequenceHtml(d,a.classname,n,c.id,c.getTitle(),g)}else{m+=this.createSequenceHtml(d,l,n,c.id,c.getTitle(),g)}for(var e=0;e<c.children.length;e++){m+=this.getNavigationHtml(c.children[e],n+1,g+"."+e)}m+="</div>"}}}else{var j="";m;for(var o=0;o<f;o++){m+=b}if(c.className&&c.className!="null"&&c.className!=""){j="<img src='"+iconUrl+c.className+"16.png'/> "}if(this.autoStep){m+=this.createStepHtml(d,l,n,c.id,j,g,c.getTitle(),this.currentStepNum);this.currentStepNum++}else{m+=this.createStepHtml(d,l,n,c.id,j,g,c.getTitle())}}return m};NavigationPanel.prototype.createSequenceHtml=function(f,c,b,e,d,a){return'<div class="'+c+" depth"+(b+2)+" "+a+'_menu" id="'+a+"\"><span onclick=\"eventManager.fire('toggleMenu', '"+a+"')\">"+d+"</span>"};NavigationPanel.prototype.createStepHtml=function(b,h,j,a,f,d,g,e){var c='<a class="'+h+" depth"+(j+2)+" "+d+"_menu\" onclick=\"eventManager.fire('renderNode','"+d+'\');" id="'+d+'">'+f;if(e!=null){c+=this.stepTerm+" "+e+": "}else{if(this.stepTerm&&this.stepTerm!=""){c+=this.stepTerm+": "}}if(!this.stepLevelNumbering){d=""}c+=getTitlePositionFromLocation(d)+" "+g+"</a>";return c};function getTitlePositionFromLocation(d){if(d&&d!=""){var a=d.split(".");var b="";for(var e=0;e<a.length;e++){b+=(parseInt(a[e])+1);if(e!=a.length-1){b+="."}}return b}else{return""}}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/menu/NavigationPanel.js")}View.prototype.menuDispatcher=function(b,a,c){if(b=="loadingProjectComplete"){c.createMenuOnProjectLoad()}else{if(b=="renderNodeComplete"){c.renderNavigationPanel();c.expandActivity(a[0])}else{if(b=="toggleNavigationPanelVisibility"){c.navigationPanel.toggleVisibility()}else{if(b=="menuExpandAll"){c.myMenu.expandAll()}else{if(b=="menuCollapseAll"){c.myMenu.collapseAll()}else{if(b=="menuCollapseAllNonImmediate"){c.collapseAllNonImmediate()}else{if(b=="toggleMenu"){c.myMenu.toggleMenu(document.getElementById(a[0]))}}}}}}}};View.prototype.createMenuOnProjectLoad=function(){var b=document.getElementById("my_menu");if(b){this.myMenu=new SDMenu("my_menu")}if(typeof this.myMenu!="undefined"){this.myMenu.init()}if(this.config!=null&&this.config.getConfigParam("mainNav")!=null){var a=this.config.getConfigParam("mainNav");if(a=="none"){this.eventManager.fire("toggleNagivationPanelVisibility")}}};View.prototype.renderNavigationPanel=function(){if(!this.navigationPanel){this.navigationPanel=new NavigationPanel(this)}this.navigationPanel.render("render")};View.prototype.expandActivity=function(a){var b=this.getProject().getNodeByPosition(a);if(b.parent){submenu=document.getElementById(this.getProject().getPositionById(b.parent.id));if(submenu){submenu.className=submenu.className.replace("collapsed","")}}};View.prototype.collapseAllNonImmediate=function(){var a=this.getEnclosingNavParents(this.getCurrentPosition());if(a!=null&&a.length!=0&&this.myMenu){this.myMenu.forceCollapseOthersNDeep(a)}};View.prototype.getEnclosingNavParents=function(a,d){if(d==null){d=new Array()}var b=a.lastIndexOf(".");if(b!=-1){var e=a.substring(0,a.lastIndexOf("."));var c=document.getElementById(e);if(c!=null){d.push(c)}return this.getEnclosingNavParents(e,d)}else{return d}};View.prototype.toggleNavigationPanelVisibility=function(){this.navigationPanel.toggleVisibility()};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_menu.js")}function AudioManager(b,a){this.view=a;this.currentSound=null;this.isPlaying=false;this.isSoundManagerLoaded=false;this.currentNode=null;this.postReportUrl=null;if(b!=null){if(b!="true"){this.isPlaying=false}else{this.isPlaying=true}}}AudioManager.prototype.createSoundFromAudioElement=function(a,b){if(soundManager.canPlayURL(a.url)){var c={success:function(d){notificationManager.notify("success getting audio using audio=filename. o.responseText: "+d.responseText,4);a.audio=soundManager.createSound({id:a.id,url:a.url,onplay:function(){onPlayCallBack(this,b)},whileplaying:function(){whilePlayingCallBack(this,b)},onpause:function(){onPauseCallBack(this,b)},onfinish:function(){onFinishCallBack(this,b)},onstop:function(){onStopCallBack(this,b)},onload:function(e){if(!e){if(this.readyState==3){}else{notificationManager.notify("error loading audio #1")}}}});a.audio.elementId=a.elementId;this.doEnableButtons(true);if(this.isPlaying&&a.index==0){this.currentSound=a.audio;this.currentSound.play()}},failure:function(e){notificationManager.notify("failure getting audio using audio=filename. o.responseText:"+e.responseText,4);var d={success:function(f){notificationManager.notify("success getting md5 audio",4);a.audio=soundManager.createSound({id:a.id,url:a.md5url,onplay:function(){onPlayCallBack(this,b)},whileplaying:function(){whilePlayingCallBack(this,b)},onpause:function(){onPauseCallBack(this,b)},onfinish:function(){onFinishCallBack(this,b)},onstop:function(){onStopCallBack(this,b)},onload:function(g){if(!g){if(this.readyState==3){}else{notificationManager.notify("error loading audio #2")}}}});a.audio.elementId=a.elementId;this.doEnableButtons(true);if(this.isPlaying&&a.index==0){this.currentSound=a.audio;this.currentSound.play()}},failure:function(k){notificationManager.notify("failure getting md5 audio, resorting to default",4);a.audio=soundManager.createSound({id:a.id,url:"sound/NoAudioAvailable.mp3",onplay:function(){onPlayCallBack(this,b)},whileplaying:function(){whilePlayingCallBack(this,b)},onpause:function(){onPauseCallBack(this,b)},onfinish:function(){onFinishCallBack(this,b)},onstop:function(){onStopCallBack(this,b)},onload:function(l){}});a.audio.elementId=a.elementId;this.doEnableButtons(true);if(this.isPlaying&&a.index==0){this.currentSound=a.audio;this.currentSound.play()}if(this.postReportUrl!=null){var j={success:function(l){},failure:function(l){},scope:this};var f=global_yui.JSON.stringify(a,["id","url","elementId","elementTextContent","md5url","index"]);var h={success:function(l){},failure:function(l){},scope:this};var g="save_mp3=1&make_audio=true&speech=["+f+"]";YAHOO.util.Connect.asyncRequest("POST",this.postReportUrl,h,g)}},scope:this};YAHOO.util.Connect.asyncRequest("HEAD",a.md5url,d,null)},scope:this};YAHOO.util.Connect.asyncRequest("HEAD",a.url,c,null)}};AudioManager.prototype.setCurrentNode=function(c){if(this.currentSound!=null){this.currentSound=null}this.currentNode=c;var a=this.view.nodeAudioMap[this.currentNode.id];if(a&&a.length>0){for(var b=0;b<a.length;b++){this.createSoundFromAudioElement(a[b],c)}}else{notificationManager.notify("no pre-associated audio exists for this node",4);var d=soundManager.createSound({id:"NoAudioAvailable",url:"sound/NoAudioAvailable.mp3",whileplaying:function(){whilePlayingCallBack(this,c)}});this.currentSound=d;this.doEnableButtons(false)}};AudioManager.prototype.playMD5Audio=function(d,c){notificationManager.notify("playmd5audio, id:"+d.id,4);var b=soundManager.getSoundById("md5_"+d.id);soundManager.play("md5_"+d.id);this.currentSound=b;for(var a=0;a<c.audios.length;a++){if(c.audios[a].id==d.id){c.audios[a].id=b.id;c.audios[a].audio=b}}};AudioManager.prototype.playBackupAudio=function(d,c){notificationManager.notify("playbackupaudio, id:"+d.id,4);soundManager.stop(d.id);var b=soundManager.getSoundById("backup_"+d.id);soundManager.play("backup_"+d.id);this.currentSound=b;for(var a=0;a<c.audios.length;a++){if(c.audios[a].id==d.id){c.audios[a].id=b.id;c.audios[a].audio=b}}};AudioManager.prototype.doEnableButtons=function(a){if(a){notificationManager.notify("enabling buttons",4);document.getElementById("rewindButton").onclick=function(){eventManager.fire("rewindStepAudio")};document.getElementById("rewindButton").ondblclick=function(){eventManager.fire("previousStepAudio")};document.getElementById("forwardButton").onclick=function(){eventManager.fire("forwardStepAudio")};document.getElementById("playPause").onclick=function(){eventManager.fire("playPauseStepAudio")}}else{notificationManager.notify("disabling buttons",4);document.getElementById("rewindButton").onclick="";document.getElementById("rewindButton").ondblclick="";document.getElementById("forwardButton").onclick="";document.getElementById("playPause").onclick=""}};var onPlayCallBack=function(c,b){if(c.readyState==3){}else{notificationManager.notify("file not ready, play backup",4)}for(var a=0;a<b.audios.length;a++){if(b.audios[a].id==c.id){b.audios[a].id=c.id;b.audios[a].audio=c}}};var onStopCallBack=function(b,a){highlightTextElement(b.elementId,a,false);showPlayPauseButton(false)};var onFinishCallBack=function(b,a){highlightTextElement(b.elementId,a,false);showPlayPauseButton(false);vle.audioManager.nextStepAudio()};var whilePlayingCallBack=function(b,a){showPlayPauseButton(true);highlightTextElement(b.elementId,a,true);vle.audioManager.currentSound=b};var onPauseCallBack=function(b,a){showPlayPauseButton(false)};function showPlayPauseButton(b){var c=document.getElementById("playPause");if(b){var a=global_yui.get("#playPause");a.removeClass("play");a.addClass("pause")}else{var a=global_yui.get("#playPause");a.removeClass("pause");a.addClass("play")}}var highlightTextElement=function(a,b,c){if(b!=null&&b.isAudioSupported()){var d=null;d=getElementsByAttribute("audio",a);if(c){notificationManager.notify("highlighting elementId:"+a,4);eventManager.fire("setStyleOnElement",[d,"outline","3px dotted #CC6633"]);eventManager.fire("setStyleOnElement",[d,"outline","3px dotted #CC6633"])}else{notificationManager.notify("unhighlighting elementId:"+a,4);eventManager.fire("setStyleOnElement",[d,"outline","none"]);eventManager.fire("setStyleOnElement",[d,"outline","none"])}}};AudioManager.prototype.playPauseStepAudio=function(){if(this.isPlaying&&this.currentSound){this.currentSound.pause();this.isPlaying=false}else{if(this.currentSound!=null){this.currentSound.play();this.isPlaying=true}}};AudioManager.prototype.getPreviousSound=function(){var a=this.currentSound.sID;for(var b=0;b<this.currentNode.audios.length;b++){if(this.currentNode.audios[b].id==a){if(b==0){return null}else{return this.currentNode.audios[b-1].audio}}}};AudioManager.prototype.rewindStepAudio=function(){notificationManager.notify("Rewind. CurrentSound:"+vle.audioManager.currentSound.sID+","+vle.audioManager.currentSound.position,4);if(vle.audioManager.currentSound.position==0&&vle.audioManager.getPreviousSound()!=null){this.previousStepAudio()}else{vle.audioManager.currentSound.setPosition(0)}};AudioManager.prototype.previousStepAudio=function(){notificationManager.notify("Previous step audio. CurrentSound:"+vle.audioManager.currentSound.sID+","+vle.audioManager.currentSound.position,4);soundManager.stopAll();this.removeAllHighlights();var a=this.getPreviousSound();if(a==null&&this.currentSound!=null){this.currentSound.setPosition(0);highlightTextElement(this.currentSound.elementId,this.currentNode,true);if(this.isPlaying){this.playCurrentSound()}}else{this.currentSound=a;if(this.isPlaying){this.playCurrentSound()}else{highlightTextElement(this.currentSound.elementId,this.currentNode,true)}}};AudioManager.prototype.getNextSound=function(){if(this.currentSound==null&&this.currentNode!=null&&this.currentNode.audios.length>0){return this.currentNode.audios[0].audio}else{if(this.currentSound==null&&this.currentNode==null){return null}}var a=this.currentSound.sID;notificationManager.notify("getNextSound currentSoundId:"+a,4);for(var b=0;b<this.currentNode.audios.length;b++){if(this.currentNode.audios[b].id==a){if(b==this.currentNode.audios.length-1){return null}else{return this.currentNode.audios[b+1].audio}}}};AudioManager.prototype.nextStepAudio=function(){soundManager.stopAll();this.removeAllHighlights();var a=this.getNextSound();notificationManager.notify("nextSound:"+a,4);if(a==null&&this.currentNode.audios.length>0){this.currentSound=this.currentNode.audios[0].audio}else{this.currentSound=a;if(this.isPlaying){this.playCurrentSound()}else{highlightTextElement(this.currentSound.elementId,this.currentNode,true)}}};AudioManager.prototype.playCurrentSound=function(){if(this.currentSound!=null){this.currentSound.play()}};AudioManager.prototype.removeAllHighlights=function(){if(this.currentNode!=null){for(var b=0;b<this.currentNode.audios.length;b++){var a=this.currentNode.audios[b];highlightTextElement(a.elementId,this.currentNode,false)}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/sound/AudioManager.js")}var hexcase=0;var b64pad="";var chrsz=8;function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function b64_md5(a){return binl2b64(core_md5(str2binl(a),a.length*chrsz))}function str_md5(a){return binl2str(core_md5(str2binl(a),a.length*chrsz))}function hex_hmac_md5(a,b){return binl2hex(core_hmac_md5(a,b))}function b64_hmac_md5(a,b){return binl2b64(core_hmac_md5(a,b))}function str_hmac_md5(a,b){return binl2str(core_hmac_md5(a,b))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,l,k,e,j,h){return md5_cmn((f&l)|((~f)&k),g,f,e,j,h)}function md5_gg(g,f,l,k,e,j,h){return md5_cmn((f&k)|(l&(~k)),g,f,e,j,h)}function md5_hh(g,f,l,k,e,j,h){return md5_cmn(f^l^k,g,f,e,j,h)}function md5_ii(g,f,l,k,e,j,h){return md5_cmn(l^(f|(~k)),g,f,e,j,h)}function core_hmac_md5(c,f){var e=str2binl(c);if(e.length>16){e=core_md5(e,c.length*chrsz)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828}var g=core_md5(a.concat(str2binl(f)),512+f.length*chrsz);return core_md5(d.concat(g),512+128)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))}function str2binl(d){var c=Array();if(d){var a=(1<<chrsz)-1;for(var b=0;b<d.length*chrsz;b+=chrsz){c[b>>5]|=(d.charCodeAt(b/chrsz)&a)<<(b%32)}return c}else{return Array()}}function binl2str(c){var d="";var a=(1<<chrsz)-1;for(var b=0;b<c.length*32;b+=chrsz){d+=String.fromCharCode((c[b>>5]>>>(b%32))&a)}return d}function binl2hex(c){var b=hexcase?"0123456789ABCDEF":"0123456789abcdef";var d="";for(var a=0;a<c.length*4;a++){d+=b.charAt((c[a>>2]>>((a%4)*8+4))&15)+b.charAt((c[a>>2]>>((a%4)*8))&15)}return d}function binl2b64(d){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var f="";for(var b=0;b<d.length*4;b+=3){var e=(((d[b>>2]>>8*(b%4))&255)<<16)|(((d[b+1>>2]>>8*((b+1)%4))&255)<<8)|((d[b+2>>2]>>8*((b+2)%4))&255);for(var a=0;a<4;a++){if(b*8+a*6>d.length*32){f+=b64pad}else{f+=c.charAt((e>>6*(3-a))&63)}}}return f}if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/sound/md5.js")}function NodeAudio(f,c,a,d,e,b){this.id=f;this.url=c;this.elementId=a;this.elementTextContent=d;this.md5url=e;this.audio=null;this.backupAudio=null;this.index=b}NodeAudio.prototype.play=function(){this.audio.play()};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/sound/nodeaudio.js")}View.prototype.audioDispatcher=function(b,a,c){if(b=="loadingProjectComplete"){c.createAudioManagerOnProjectLoad()}else{if(b=="rewindStepAudio"){c.rewindStepAudio()}else{if(b=="previousStepAudio"){c.previousStepAudio()}else{if(b=="forwardStepAudio"){c.forwardStepAudio()}else{if(b=="playPauseStepAudio"){c.playPauseStepAudio()}else{if(b=="updateAudio"){c.updateAudio()}else{if(b=="renderNodeComplete"){c.startAudioAfterRender(a[0])}else{if(b=="stepThruProject"){c.stepThruProject()}else{if(b=="contentRenderComplete"){c.prepareAudio(a[0])}else{if(b=="createAudioFiles"){c.createAudioFiles(a[0])}}}}}}}}}}};View.prototype.createAudioManagerOnProjectLoad=function(){this.audioManager=new AudioManager("true",this);document.getElementById("audioControls").style.display="block";if(this.config.getConfigParam("updateAudio")){eventManager.fire("updateAudio")}};View.prototype.rewindStepAudio=function(){if(this.audioManager){this.audioManager.rewindStepAudio()}};View.prototype.previousStepAudio=function(){if(this.audioManager){this.audioManager.previousStepAudio()}};View.prototype.forwardStepAudio=function(){if(this.audioManager){this.audioManager.nextStepAudio()}};View.prototype.playPauseStepAudio=function(){if(this.audioManager){this.audioManager.playPauseStepAudio()}};View.prototype.updateAudio=function(){this.eventManager.fire("lockScreenEvent","Generating Audio Files...");this.updateAudioOnRender=true;this.audioReady=[];setTimeout('eventManager.fire("renderNode","'+this.getProject().getStartNodePosition()+'")',2500);setTimeout('eventManager.fire("stepThruProject")',5000)};View.prototype.startAudioAfterRender=function(a){if(!this.updateAudioOnRender&&this.audioManager){this.audioManager.setCurrentNode(this.getProject().getNodeByPosition(a))}};View.prototype.stepThruProject=function(){if(this.renderNextNode()){setTimeout('eventManager.fire("stepThruProject")',2500)}else{this.updateAudioOnRender=false;this.eventManager.fire("lockScreenEvent","Finished generating audio files. Close this window.")}};View.prototype.prepareAudio=function(b){if(this.audioReady.indexOf(b)!=-1){return}var g=null;g=getElementsByAttribute("audio",null);for(var d=0;d<g.size();d++){var l=g.item(d);var e=l.getAttribute("audio");var c=b+"."+e;var h=this.getProject().getContentBase()+"/"+this.audioLocation+"/"+c+".mp3";var f=l.get("textContent");if(f==null||f==""){f=l.get("innerText")}var j=hex_md5(normalizeHTML(f));var m=this.getProject().getContentBase()+"/"+this.audioLocation+"/audio_"+j+".mp3";var a=new NodeAudio(c,h,e,f,m,d);if(!this.nodeAudioMap[b]){this.nodeAudioMap[b]=[]}this.nodeAudioMap[b].push(a)}if(this.updateAudioOnRender){this.eventManager.fire("createAudioFiles",b)}this.audioReady.push(b)};View.prototype.createAudioFiles=function(h){var f=this.nodeAudioMap[h];if(!f||f.length==0){return}var e=this.getProject().getContentBase();var d="filemanager.html?command=retrieveFile&param1=";if(e.indexOf(d)!=-1){e=this.utils.getContentPath(d,e)}var c=0;for(var b=0;b<f.length;b++){if(f[b].elementId){var j={success:function(a){if(a.responseText=="success"){c++}else{if(a.responseText=="audioAlreadyExists"){}else{notificationManager.notify("could not create audio. Is your filesystem write-able? Does it have the right directories, ie audio, where the audio will go?",3)}}},failure:function(a){notificationManager.notify("could not create audio",3)},scope:this};var g=f[b].md5url;if(g.indexOf(d)!=-1){g=this.utils.getContentPath(d,g)}YAHOO.util.Connect.asyncRequest("POST","filemanager.html",j,"command=updateAudioFiles&param1="+e+"&param2="+g+"&param3="+f[b].elementTextContent)}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_audio.js")}function Annotations(){this.annotationsArray=new Array()}Annotations.prototype.addAnnotation=function(a){this.annotationsArray.push(a)};Annotations.prototype.removeAnnotation=function(e,g,f,d,c){for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.runId==e&&a.nodeId==g&&a.toWorkgroup==f&&a.fromWorkgroup==d&&a.studentWork==c){this.annotationsArray.splice(b,1)}}};Annotations.prototype.removeFlagAnnotation=function(d,f,e,c){for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.runId==d&&a.nodeId==f&&a.toWorkgroup==e&&a.fromWorkgroup==c){this.annotationsArray.splice(b,1)}}};Annotations.prototype.parseDataXML=function(c){var f=new Annotations();f.annotationsArray=new Array();var e=c.getElementsByTagName("annotationEntry");for(var b=0;b<e.length;b++){var d=e[b];var a=Annotation.prototype.parseDataXML(d);f.annotationsArray.push(a)}return f};Annotations.prototype.parseDataJSONString=function(a){var b=yui.JSON.parse(a);return Annotations.prototype.parseDataJSONObj(b)};Annotations.prototype.parseDataJSONObj=function(d){var c=new Annotations();c.annotationsArray=new Array();if(d.annotationsArray!=null){for(var a=0;a<d.annotationsArray.length;a++){var b=d.annotationsArray[a];var e=Annotation.prototype.parseDataJSONObj(b);c.annotationsArray.push(e)}}return c};Annotations.prototype.getLatestAnnotationForNodeId=function(c){var b=null;for(var a=0;a<this.annotationsArray.length;a++){tempAnnotation=this.annotationsArray[a];if(tempAnnotation.nodeId==c){b=tempAnnotation}}return b};Annotations.prototype.getAnnotationsByNodeId=function(d){var c=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.nodeId==d){c.push(a)}}return c};Annotations.prototype.getAnnotationsByToWorkgroup=function(c){var d=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.toWorkgroup==c){d.push(a)}}return d};Annotations.prototype.getAnnotationsByToWorkgroupAndFromWorkgroup=function(d,c){var e=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.toWorkgroup==d&&a.fromWorkgroup==c){e.push(a)}}return e};Annotations.prototype.getTotalScoreByToWorkgroup=function(b){var d=this.getAnnotationsByToWorkgroup(b);var c=0;for(var a=0;a<d.length;a++){if(d[a].type=="score"){c+=parseInt(d[a].value)}}return c};Annotations.prototype.getTotalScoreByToWorkgroupAndFromWorkgroup=function(c,a){var e=this.getAnnotationsByToWorkgroupAndFromWorkgroup(c,a);var d=0;for(var b=0;b<e.length;b++){if(e[b].type=="score"){d+=parseInt(e[b].value)}}return d};Annotations.prototype.getAnnotationsByNodeIdAndToWorkgroup=function(e,c){var d=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.nodeId==e&&a.toWorkgroup==c){d.push(a)}}return d};Annotations.prototype.getLatestAnnotation=function(e,h,g,d,f){var c=null;for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.runId==e&&a.nodeId==h&&a.toWorkgroup==g&&a.fromWorkgroup==d&&a.type==f){c=a}}return c};Annotations.prototype.getAnnotationsByFromWorkgroup=function(c){var d=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.fromWorkgroup==c){d.push(a)}}return d};Annotations.prototype.getAnnotationsByType=function(c){var d=new Array();for(var b=0;b<this.annotationsArray.length;b++){var a=this.annotationsArray[b];if(a.type==c){d.push(a)}}return d};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/grading/Annotations.js")}function Annotation(c,g,f,a,d,e,b){this.runId=c;this.nodeId=g;this.toWorkgroup=f;this.fromWorkgroup=a;this.type=d;this.value=e;this.postTime=b}Annotation.prototype.parseDataXML=function(b){var a=new Annotation();a.runId=b.getElementsByTagName("runId")[0].firstChild.nodeValue;a.nodeId=b.getElementsByTagName("nodeId")[0].firstChild.nodeValue;a.toWorkgroup=b.getElementsByTagName("toWorkgroup")[0].firstChild.nodeValue;a.fromWorkgroup=b.getElementsByTagName("fromWorkgroup")[0].firstChild.nodeValue;a.type=b.getElementsByTagName("type")[0].firstChild.nodeValue;if(a.type!="flag"){if(b.getElementsByTagName("value")[0].firstChild!=null){a.value=b.getElementsByTagName("value")[0].firstChild.nodeValue}else{a.value=""}}return a};Annotation.prototype.parseDataJSONString=function(a){var b=global_yui.JSON.parse(a);return Annotation.prototype.parseDataJSONObj(b)};Annotation.prototype.parseDataJSONObj=function(b){var a=new Annotation();a.runId=b.runId;a.nodeId=b.nodeId;a.toWorkgroup=b.toWorkgroup;a.fromWorkgroup=b.fromWorkgroup;a.type=b.type;a.value=b.value;a.postTime=b.postTime;a.stepWorkId=b.stepWorkId;return a};Annotation.prototype.getDataXML=function(){var a="";a+="<annotationEntry>";a+="<runId>"+this.runId+"</runId>";a+="<nodeId>"+this.nodeId+"</nodeId>";a+="<toWorkgroup>"+this.toWorkgroup+"</toWorkgroup>";a+="<fromWorkgroup>"+this.fromWorkgroup+"</fromWorkgroup>";a+="<type>"+this.type+"</type>";a+="<value>"+this.value+"</value>";a+="</annotationEntry>";return a};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/grading/Annotation.js")}function RunManager(c,d,b,a){this.runInfoUrl=c;this.pollInterval=d;this.view=a;this.isPaused=false;this.visibleNodes=[];this.message="";this.isPollingEnabled=true;this.runId=b;this.showNodeId=null;this.isFlaggingEnabled=false;if(this.pollInterval&&this.pollInterval!=null&&this.pollInterval!=""&&parseInt(this.pollInterval)>0){this.view.notificationManager.notify("RunManager, polling at pollInterval="+this.pollInterval,1);setInterval('eventManager.fire("runManagerPoll")',this.pollInterval)}}RunManager.prototype.poll=function(){if(this.isPollingEnabled){this.view.connectionManager.request("GET",1,this.runInfoUrl,null,this.processRetrievedRunInfo,this.view)}};RunManager.prototype.processRetrievedRunInfo=function(a,c,b){if(c&&c!=null){b.runManager.parseRunInfo(c)}else{b.runManager.setDefaultRunInfo()}b.runManager.updateVLE()};RunManager.prototype.setDefaultRunInfo=function(){this.isPaused=false;this.showNodeId=null};RunManager.prototype.parseRunInfo=function(c){if(c.getElementsByTagName("isPaused").length>0){var a=c.getElementsByTagName("isPaused")[0].firstChild.nodeValue;if(a=="true"){this.isPaused=true}else{this.isPaused=false}}else{this.isPaused=false}if(c.getElementsByTagName("showNodeId").length>0){var b=c.getElementsByTagName("showNodeId")[0].firstChild.nodeValue;this.showNodeId=b}else{this.showNodeId=null}if(c.getElementsByTagName("visibleNodes").length>0){this.visibleNodes=c.getElementsByTagName("visibleNodes")[0]}else{this.visibleNodes=[]}if(c.getElementsByTagName("isFlaggingEnabled").length>0){this.isFlaggingEnabled=c.getElementsByTagName("isFlaggingEnabled")[0]}else{this.isFlaggingEnabled=false}};RunManager.prototype.updateVLE=function(){if(this.isPaused){this.view.eventManager.fire("lockScreenEvent",this.message);if(this.message!=""){YAHOO.example.container.wait.setBody("<table><tr align='center'>Teacher has locked your screen. Please talk to your teacher.</tr><tr align='center'></tr></table>")}}else{this.view.eventManager.fire("unlockScreenEvent",this.message)}if(this.showNodeId!=null){if(this.view.getCurrentNode().id!=this.showNodeId){this.view.eventManager.fire("closeDialogs");this.view.renderNode(this.view.getProject().getPositionById(this.showNodeId))}}if(this.visibleNodes!=null&&this.visibleNodes.length>0){this.updateVisibleNodes(this.visibleNodes)}};RunManager.prototype.updateVisibleNodes=function(b){var a=[];var c=b.getElementsByTagName("visiblenode");for(var d=0;d<c.length;d++){a.push(c[d].firstChild.nodeValue)}if(!this.visibleNodes.compare(a)){this.visibleNodes=[];for(var d=0;d<c.length;d++){this.visibleNodes.push(c[d].firstChild.nodeValue)}if(this.view.runManager.visibleNodes.length>0){this.view.visibilityLogic=new VisibilityLogic(new OnlyShowSelectedNodes(this.view.getProject().getRootNode(),this.view.runManager.visibleNodes));this.view.navigationPanel.render();if(this.view.getCurrentNode().id!=this.visibleNodes[0]){this.view.renderNode(this.view.getProject().getPositionById(this.visibleNodes[0]))}}}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/RunManager.js")}function VisibilityLogic(a){this.algorithm=a}VisibilityLogic.prototype.isNodeVisible=function(d,c){if(this.algorithm!=null){var a=false;for(var b=0;b<this.algorithm.length;b++){a=a||this.algorithm[b].isNodeVisible(d,c)}return a}return true};VisibilityLogic.prototype.getNextVisibleNode=function(e,d){if(this.algorithm!=null){var b=d;for(var c=0;c<this.algorithm.length;c++){var a=this.algorithm[c].getNextVisibleNode(e,d);if(a){b=a}}return b}return d};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/visibility/VisibilityLogic.js")}function OnlyShowSelectedNodes(b,a){this.rootNode=b;this.visibleNodes=[];for(var c=0;c<a.length;c++){var e=a[c];var d=b.getNodeById(e);this.visibleNodes.push(d)}}OnlyShowSelectedNodes.prototype.isNodeVisible=function(b,a){if(this.visibleNodes.indexOf(a)>-1){return true}return false};OnlyShowSelectedNodes.prototype.getNextVisibleNode=function(c,b){if(this.isNodeVisible(c,b)){return b}else{for(var a=0;a<b.children.length;a++){return null||this.getNextVisibleNode(c,b.children[a])}return null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/visibility/OnlyShowSelectedNodes.js")}function OnlyShowLeafNode(a){this.rootNode=a;this.visibleNodes=[]}OnlyShowLeafNode.prototype.isNodeVisible=function(b,a){if(a.children.length==0){return true}return false};OnlyShowLeafNode.prototype.getNextVisibleNode=function(c,b){if(this.isNodeVisible(c,b)){return b}else{for(var a=0;a<b.children.length;a++){return null||this.getNextVisibleNode(c,b.children[a])}return null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/visibility/OnlyShowLeafNode.js")}function CorrectnessBranchingVisibility(){this.rootNode=arguments[0];this.visibleNodes=[];this.branchingNodeId=arguments[1];this.correctBranch=arguments[2];this.incorrectBranch=arguments[3]}CorrectnessBranchingVisibility.prototype.isNodeVisible=function(h,f,e){var g=h.getNodeVisitsByNodeId(this.branchingNodeId);if(e=="nodeSessionEndedEvent"&&g.length>0){var a=false;for(var d=0;d<g.length;d++){if(g[d].nodeStates.length>0){var c=g[d].nodeStates[g[d].nodeStates.length-1].isCorrect;a=c}}if(a){for(var b=0;b<this.correctBranch.length;b++){this.visibleNodes.push(this.rootNode.getNodeById(this.correctBranch[b]))}}else{for(var b=0;b<this.incorrectBranch.length;b++){this.visibleNodes.push(this.rootNode.getNodeById(this.incorrectBranch[b]))}}}if(this.visibleNodes.indexOf(f)>-1){return true}return false};CorrectnessBranchingVisibility.prototype.getNextVisibleNode=function(c,b){if(this.isNodeVisible(c,b)){return b}else{for(var a=0;a<b.children.length;a++){return null||this.getNextVisibleNode(c,b.children[a])}return null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/visibility/CorrectnessBranchingVisibility.js")}function BranchingVisibility(){this.rootNode=arguments[0];this.visibleNodes=[];this.branches=[];for(var a=1;a<arguments.length;a++){this.branches.push(arguments[a])}}BranchingVisibility.prototype.isNodeVisible=function(e,d){for(var c=0;c<this.branches.length;c++){for(var a=0;a<e.visitedNodes.length;a++){if(e.visitedNodes[a].node.id==this.branches[c][0]){if(e.visitedNodes[a].nodeStates.length>0){if(e.visitedNodes[a].nodeStates[e.visitedNodes[a].nodeStates.length-1].isCorrect){for(var b=0;b<this.branches[c][1].length;b++){this.visibleNodes.push(this.rootNode.getNodeById(this.branches[c][1][b]))}}}}}}if(this.visibleNodes.indexOf(d)>-1){return true}return false};BranchingVisibility.prototype.getNextVisibleNode=function(c,b){if(this.isNodeVisible(c,b)){return b}else{for(var a=0;a<b.children.length;a++){return null||this.getNextVisibleNode(c,b.children[a])}return null}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/ui/control/visibility/BranchingVisibility.js")}View.prototype.uicontrolDispatcher=function(b,a,c){if(b=="runManagerPoll"){c.runManagerPoll()}else{if(b=="lockScreenEvent"){if(a){c.lockscreen(a[0])}else{c.lockscreen()}}else{if(b=="unlockScreenEvent"){if(a){c.unlockscreen(a[0])}else{c.unlockscreen()}}else{if(b=="startVLEBegin"){c.startRunManagerOnVLEStart()}else{if(b=="logout"){c.logout()}}}}}};View.prototype.runManagerPoll=function(){if(this.runManager){this.runManager.poll()}};View.prototype.startRunManagerOnVLEStart=function(){if(this.config.getConfigParam("getRunInfoUrl")!=null&&this.config.getConfigParam("runInfoRequestInterval")!=null){this.runManager=new RunManager(this.config.getConfigParam("getRunInfoUrl"),parseInt(this.config.getConfigParam("runInfoRequestInterval")),this.config.getConfigParam("runId"),this)}};View.prototype.lockscreen=function(a){YAHOO.namespace("example.container");if(!YAHOO.example.container.wait){YAHOO.example.container.wait=new YAHOO.widget.Panel("wait",{width:"240px",fixedcenter:true,close:false,draggable:false,zindex:4,modal:true,visible:false})}else{}if(a==null){a="<table><tr align='center'>Your teacher has paused your screen.</tr><tr align='center'></tr><table>"}YAHOO.example.container.wait.setHeader("Message");YAHOO.example.container.wait.setBody(a);YAHOO.example.container.wait.render(document.body);YAHOO.example.container.wait.show();YAHOO.example.container.wait.cfg.setProperty("visible",true)};View.prototype.unlockscreen=function(a){YAHOO.namespace("example.container");if(!YAHOO.example.container.wait){YAHOO.example.container.wait=new YAHOO.widget.Panel("wait",{width:"240px",fixedcenter:true,close:false,draggable:false,zindex:4,modal:true,visible:false});if(a==null){a="<table><tr align='center'>Your teacher has paused your screen.</tr><tr align='center'></tr><table>"}YAHOO.example.container.wait.setHeader("Message");YAHOO.example.container.wait.setBody(a);YAHOO.example.container.wait.render(document.body)}YAHOO.example.container.wait.hide()};View.prototype.doLogin=function(a){YAHOO.namespace("example.container");if(!YAHOO.example.container.login){YAHOO.example.container.login=new YAHOO.widget.Panel("loginPanel",{width:"700px",height:"600px",fixedcenter:true,close:true,draggable:false,zindex:4,modal:true,visible:false})}else{}if(a==null){a='<iframe id="loginFrame" src="/webapp/login.html" width="100%" height="100%" FRAMEBORDER="0" allowTransparency="false" scrolling="no"> </iframe>'}YAHOO.example.container.login.setHeader("Please Log In");YAHOO.example.container.login.setBody(a);YAHOO.example.container.login.render(document.body);YAHOO.example.container.login.show();YAHOO.example.container.login.cfg.setProperty("visible",true)};View.prototype.logout=function(){var a=this.displaySignOutMessage();if(a){window.signOut=true;window.parent.location="/webapp/j_spring_security_logout"}};View.prototype.displaySignOutMessage=function(){this.cleanupVLE();var a=confirm("Are you sure you want to sign out?\n\n(Your data has been saved and it is safe to exit)\n\nPress OK to sign out, or Cancel to stay signed in.");return a};View.prototype.cleanupVLE=function(){if(this.getCurrentNode()){this.getCurrentNode().onExit()}this.state.endCurrentNodeVisit();this.postAllUnsavedNodeVisits();if(this.journal){this.journal.saveToServer()}};if(typeof eventManager!="undefined"){eventManager.fire("scriptLoaded","vle/view/vle/vleview_uicontrol.js")};if(typeof eventManager != "undefined"){eventManager.fire("scriptLoaded", "vle/all/vle_all-min.js");};