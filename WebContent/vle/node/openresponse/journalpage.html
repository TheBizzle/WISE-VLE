<html>
<head>

<link rel="stylesheet" type="text/css" href="../common/css/htmlAssessment.css" />
<link rel="stylesheet" type="text/css" href="openresponse.css" />
<link rel="stylesheet" type="text/css" href="../common/css/niftyCorners.css" />

<script type="text/javascript" src="../common/js/loadxmldoc.js"></script>
<!-- YUI Seed -->
<script src="../../yui/yui_3.0.0pr2/build/yui/yui-min.js" type="text/javascript"></script>

<script type="text/javascript" src="../common/js/helperfunctions.js"></script>
<script type="text/javascript" src="openresponsestate.js" ></script>                
<script type="text/javascript" src="openresponse.js" ></script>                



<script type="text/javascript">
var or;   // global variable so it can be accessed by other functions
//var states = [];  // array of OPENRESPONSESTATE objects
var childIds;
var childTitles;
var activeChild;

function setIds(ids){
	childIds = ids;
};

function setTitles(titles){
	childTitles = titles;
};

function setActiveChild(id){
	activeChild = id;
};

function save() {
  or.save();
}

function edit() {
	  or.edit();
}

/**
 * xmlString contains QTI-coded xml content
 */
function loadContentXMLString(xmlString) {
	  or = new OPENRESPONSE(xmlString);
	  or.render();	
}

function hasChildren(){
	return(childIds.length>0);
};

function createAttribute(doc, node, type, val){
	var attribute = doc.createAttribute(type);
	attribute.nodeValue = val;
	node.setAttributeNode(attribute);
};

function createElement(doc, type, attrArgs){
	var newElement = doc.createElement(type);
	if(attrArgs!=null){
		for(var option in attrArgs){
			createAttribute(doc, newElement, option, attrArgs[option]);
		};
	};
	return newElement;
};

function createMenu(){
	if(hasChildren()){
		var html = '';
		
		if(childIds.length != childTitles.length){
			alert('id and title mismatch, unable to create menu, exiting!');
			return;
		};
		
		document.getElementById('leftColumn').removeChild(document.getElementById('menu'));
		
		var div = createElement(document, 'div', {id: 'menu'});
		var text = '';
		for(var q=0;q<childIds.length;q++){
			text = text + "<a href=\"#\" onclick=\"window.parent.vle.renderNode('" + childIds[q] + "')\">" + childTitles[q] + "</a><br>";
		};
		
		text = text + "<br><input type=\"button\" id=\"createCustom\" value=\"Create Custom Entry\" onclick=\"window.parent.vle.journal.createCustomElement()\"/>";
		
		div.innerHTML = text;
		
		document.getElementById('leftColumn').appendChild(div);
	};
};

function renderActive(){
	if(activeChild){
		window.parent.vle.renderNode(activeChild);
	};
};

/**
 * sets VLE, loads state
 */
function loadFromVLE(node, vle) {
	or.loadFromVLE(node, vle);
}

function checkAnswer() {
	or.checkAnswer();
}
</script>

<!--  Javascript Pop up window -->
<script type="text/javascript">

var newWin = null;
function popUp(strURL, strType, strHeight, strWidth) {
 if (newWin != null && !newWin.closed)
   newWin.close();
 var strOptions="";
 if (strType=="console")
   strOptions="resizable,height="+
     strHeight+",width="+strWidth;
 if (strType=="fixed")
   strOptions="status,height="+
     strHeight+",width="+strWidth;
 if (strType=="elastic")
   strOptions="toolbar,menubar,scrollbars,"+
     "resizable,location,height="+
     strHeight+",width="+strWidth;
 newWin = window.open(strURL, 'newWin', strOptions);
 newWin.focus();
}

</script>

<!--  Nifty Cube for Rounded Corners -->

<script type="text/javascript" src="../common/js/niftycube.js"></script>
<script type="text/javascript">
 window.onload=function(){
Nifty("div#locationBar2","bottom,small");
Nifty("div#questionCountBox","big, top");
Nifty("div#leftColumn,div#rightColumn","same-height none bll tr big");
}
</script>
</head>

<body>
<table>
	<tr>
		<td height="500" width="200">
			<div id="leftColumn">
				<div id="menu"></div>
			</div>
		</td>
		<td height="500" width="800">
			<iframe id="journalentryiframe" name="journalentryiframe" width="75%" height="100%" src="journalentrypage.html"></iframe>
		</td>
	</tr>
</table>
</body>
</html>
