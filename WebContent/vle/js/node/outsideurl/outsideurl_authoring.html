<html>
<head>

<script type="text/javascript" src="../common/js/loadxmldoc.js"></script>
<script type="text/javascript" src="../common/js/helperfunctions.js"></script>

<script type="text/javascript">
var node; //a OutsideUrlNode

function previewFrameOnLoad() {
	//nothing needs to be done here right now
}	

/*
 * This is called by the authoring_tool.html after it has
 * set the node.
 */
function loadAuthoring() {
	//pass the node that we're going to author to the previewFrame
	window.frames["previewFrame"].node = node;

	//load the web page from the node into the frame
	node.load(window.frames["previewFrame"]);

	//retrieve the url from the outsideurl node
	var url = node.element.getElementsByTagName("url")[0].firstChild.nodeValue;

	/*
	 * display the url to the user in the left area so they can
	 * edit and author it. 
	 */
	document.getElementById('sourceTextArea').value = url;
}

/*
 * Not needed for Outside Url
 */
function afterAuthoringLoaded() {

}

/*
 * Called to send the authored text back to the mc object so the
 * mc object can update itself and reflect the changes the author
 * has made.
 */
function sourceUpdated() {
	//retrieve the authored text
	var url = document.getElementById('sourceTextArea').value;

	//update the node element so it contains the updated content
	node.element.getElementsByTagName("url")[0].firstChild.nodeValue = url;

	/*
	 * load the updated node into the previewFrame so the user
	 * sees the updated page for the url they entered
	 */
	node.load(window.frames["previewFrame"]);
}
</script>
</head>
<body>
<table border='1' bgcolor='white' style='width:100%;height:100%'>
	<tr>
   		<td width='50%'><textarea id='sourceTextArea' style='width:100%;height:100%' onkeyup='sourceUpdated();'></textarea></td>
   		<td width='50%'><iframe id='previewFrame' width='100%' height='100%' name='previewFrame' src='outsideurl.html' onload='previewFrameOnLoad();'></iframe></td>
	</tr>
</table>
</body>
</html>