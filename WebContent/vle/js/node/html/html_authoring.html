<html>
<head>

<script type="text/javascript" src="../common/js/loadxmldoc.js"></script>
<script type="text/javascript" src="../common/js/helperfunctions.js"></script>

<script type="text/javascript">
var node; //an HtmlNode

function previewFrameOnLoad() {
	//nothing needs to be done here right now 
}	

/*
 * This is called by the authoring_tool.html after it has
 * set the node.
 */
function loadAuthoring() {
	if(node != null) {
		//tell the node to render itself in the previewFrame right iframe
		node.render(window.frames["previewFrame"]);

		//set the text in the left text area to contain the html from the node
		document.getElementById('sourceTextArea').value = node.content;
	}
}

/*
 * 
 */
function afterAuthoringLoaded() {
	//nothing needs to be done here right now
}

/*
 * Called to send the authored text back to the previewFrame so the
 * previewFrame can update itself and reflect the changes the author
 * has made.
 */
function sourceUpdated() {
	//retrieve the authored text
	var htmlString = document.getElementById('sourceTextArea').value;

	//set the authored html into the HtmlNode
	node.setContent(htmlString);

	//tell the node to render itself in the previewFrame iframe
	node.render(window.frames["previewFrame"]);
}
</script>
</head>
<body>
<table border='1' bgcolor='white' style='width:100%;height:100%'>
	<tr>
   		<td width='50%'><textarea id='sourceTextArea' style='width:100%;height:100%' onkeyup='sourceUpdated();'></textarea></td>
   		<td width='50%'><iframe id='previewFrame' width='100%' height='100%' name='previewFrame' onload='previewFrameOnLoad();'></iframe></td>
	</tr>
</table>
</body>
</html>